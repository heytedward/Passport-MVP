"use strict";(self.webpackChunkmonarch_passport_mvp=self.webpackChunkmonarch_passport_mvp||[]).push([[439],{1949:(e,n,t)=>{t.d(n,{A:()=>s});var r,o,i=t(7528),a=t(5464);const l=(0,a.i7)(r||(r=(0,i.A)(["\n  0%, 100% { \n    box-shadow: \n      0 0 12px 0 rgba(255,215,0,0.15),\n      0 0 24px 0 rgba(255,215,0,0.08),\n      inset 0 1px 0 rgba(255,215,0,0.1);\n  }\n  50% { \n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),s=a.Ay.div(o||(o=(0,i.A)(["\n  position: relative;\n  background: ",";\n  border-radius: 20px;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  overflow: hidden;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    border: 3px solid ",";\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n    animation: "," 2s ease-in-out infinite;\n  }\n  \n  /* Content positioning */\n  > * {\n    position: relative;\n    z-index: 1;\n  }\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.glass)||void 0===t?void 0:t.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||"#FFD700"},e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||"#FFD700"},l)},2765:(e,n,t)=>{t.d(n,{A:()=>k});var r,o,i,a,l,s,c,d,p,u=t(7528),g=(t(5043),t(5475)),m=t(3216),f=t(5464),h=t(579);const y=(0,f.i7)(r||(r=(0,u.A)(["\n  0%, 100% { \n    background-position: 0% 50%; \n  }\n  50% { \n    background-position: 100% 50%; \n  }\n"]))),x=f.Ay.nav(o||(o=(0,u.A)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(18, 18, 18, 0.95);\n  backdrop-filter: blur(20px);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 8px 0 max(8px, env(safe-area-inset-bottom));\n  z-index: 1000;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);\n"]))),v=f.Ay.div(i||(i=(0,u.A)(["\n  max-width: 100%;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  position: relative;\n  padding: 0 20px;\n"]))),b=(0,f.Ay)(g.N_)(a||(a=(0,u.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 12px;\n  border-radius: 12px;\n  text-decoration: none;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  min-width: 60px;\n  min-height: 48px; /* Ensure 44px+ touch target */\n  color: ",";\n  \n  ","\n  \n  &:hover {\n    color: #FFB000;\n    background: rgba(76, 28, 140, 0.1);\n    transform: translateY(-1px);\n  }\n  \n  &:active::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    background: rgba(127, 63, 191, 0.3);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    animation: ripple 0.3s ease-out;\n  }\n"])),e=>{let{$isActive:n}=e;return n?"#FFB000":"rgba(250, 250, 250, 0.7)"},e=>{let{$isActive:n}=e;return n&&"\n    background: rgba(127, 63, 191, 0.15);\n    transform: translateY(-2px);\n  "}),w=f.Ay.div(l||(l=(0,u.A)(["\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 4px;\n  position: relative;\n  \n  svg {\n    width: 22px;\n    height: 22px;\n    stroke-width: 2;\n    transition: all 0.2s ease;\n  }\n  \n  ","\n"])),e=>{let{$isActive:n}=e;return n&&"\n    svg {\n      stroke-width: 2.5;\n      transform: scale(1.1);\n    }\n  "}),A=f.Ay.span(s||(s=(0,u.A)(["\n  font-size: 11px;\n  font-weight: ",";\n  color: ",";\n  transition: all 0.2s ease;\n  text-align: center;\n  line-height: 1.2;\n"])),e=>{let{$isActive:n}=e;return n?"600":"500"},e=>{var n,t;let{$isActive:r,theme:o}=e;return r?(null===(n=o.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.purple)||"#7F3FBF":"rgba(255, 255, 255, 0.7)"}),_=f.Ay.div(c||(c=(0,u.A)(["\n  position: absolute;\n  top: -2px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 4px;\n  height: 4px;\n  background: ",";\n  border-radius: 50%;\n  opacity: ",";\n  transition: opacity 0.2s ease;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.purple)||"#7F3FBF"},e=>{let{$isActive:n}=e;return n?1:0}),S=f.Ay.div(d||(d=(0,u.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),j=(0,f.Ay)(g.N_)(p||(p=(0,u.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%);\n  border-radius: 18px;\n  text-decoration: none;\n  color: white;\n  font-size: 24px;\n  box-shadow: \n    0 8px 25px rgba(76, 28, 140, 0.4),\n    0 0 20px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);\n  transform: translateY(-8px);\n  position: relative;\n  overflow: hidden;\n  \n  /* Brand shimmer */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: linear-gradient(45deg, \n      transparent 30%, \n      rgba(250,250,250,0.4) 50%, \n      transparent 70%\n    );\n    transform: rotate(45deg);\n    animation: "," 3s linear infinite;\n  }\n  \n  &:hover {\n    transform: translateY(-12px) scale(1.1);\n    box-shadow: \n      0 12px 35px rgba(76, 28, 140, 0.6),\n      0 0 30px rgba(255, 176, 0, 0.5);\n  }\n  \n  &:active {\n    transform: translateY(-6px) scale(0.95);\n  }\n  \n  svg {\n    width: 40px;\n    height: 40px;\n    stroke-width: 2.5;\n  }\n"])),y),k=()=>{const e=(0,m.zy)(),n=[{path:"/",icon:"Home",label:"Home"},{path:"/passport",icon:"Book",label:"Passport"},{path:"/closet",icon:"Shirt",label:"Closet"},{path:"/profile",icon:"User",label:"Profile"}],t=(e,n)=>{const t=n?"#7F3FBF":"rgba(255, 255, 250, 0.7)";switch(e){case"Home":return(0,h.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:t,children:[(0,h.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,h.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]});case"Book":return(0,h.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:t,children:[(0,h.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,h.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});case"Shirt":return(0,h.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:t,children:(0,h.jsx)("path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"})});case"User":return(0,h.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:t,children:[(0,h.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,h.jsx)("circle",{cx:"12",cy:"7",r:"4"})]});default:return null}};return(0,h.jsx)(x,{children:(0,h.jsxs)(v,{children:[n.slice(0,2).map(n=>{const r=e.pathname===n.path;return(0,h.jsxs)(b,{to:n.path,$isActive:r,children:[(0,h.jsx)(_,{$isActive:r}),(0,h.jsx)(w,{$isActive:r,children:t(n.icon,r)}),(0,h.jsx)(A,{$isActive:r,children:n.label})]},n.path)}),(0,h.jsx)(S,{children:(0,h.jsx)(j,{to:"/scan","aria-label":"Scan QR Code",children:(0,h.jsx)("svg",{viewBox:"0 0 1929.64 1459.22",fill:"currentColor",children:(0,h.jsxs)("g",{children:[(0,h.jsx)("path",{d:"M965.35,380.63c-53.21,1.58-99.94-37.36-100.16-97.49-.2-54.36,38.41-99.68,100.16-100.14,55.99-.42,98.03,40.8,99.26,97.88,1.22,56.35-42.99,101.52-99.27,99.75Z"}),(0,h.jsx)("path",{d:"M966.46,439.05c47.18-2.32,98.18,37.36,98.17,98.68,0,55.27-41.86,99.73-99.63,98.75-60.67-1.03-99.14-42.83-99.9-97.4-.86-61.26,50.23-102.87,101.37-100.03Z"}),(0,h.jsx)("path",{d:"M236.74,262.16c4.24,.25,7.04-2.85,10.3-4.95,35.77-23.06,78.33-20.59,112.28,4.79,40.25,30.08,54.38,86.37,35.04,136.47-14.39,37.29-41.54,62.37-78.27,77.53-17.69,7.3-36.28,11.97-55.09,11.84-37.53-.26-71.65-11.49-100.36-36.96-28.13-24.95-43.88-56.5-51.22-92.84-11.23-55.55-1.27-108.45,21.14-159.34,23.73-53.88,60.05-98.07,107.56-132.82C284.89,31.68,337.56,12.12,394.65,3.7c29.15-4.3,58.57-4.72,87.59-1.92,48.25,4.66,94.63,17.27,137.57,40.86,66.42,36.48,115.74,89.41,149.97,156.48,21.05,41.23,34.11,85.05,39.19,131.26,3.15,28.68,5.46,57.46,3.87,86.17-2.65,48.19-11.14,95.48-25.31,141.79-27.17,88.79-71.22,168.99-123.39,245.11-37.17,54.23-77.54,106.01-120.45,155.83-30.53,35.45-61.47,70.51-93.43,104.72-23.31,24.95-46.07,50.49-69.42,75.41-70.8,75.55-143.47,149.3-217.8,221.35-30.3,29.37-61.18,58.3-93.28,85.83-13.53,11.6-28.74,14.4-45.38,11.63-16.21-2.71-27.3-20.35-23.7-36.76,1.96-8.91,6.27-16.77,11.15-24.44,17.42-27.41,37.62-52.79,57.51-78.36,57.5-73.89,115.36-147.49,173.21-221.11,48.68-61.95,96.29-124.71,142.59-188.46,55.87-76.92,109.09-155.58,153.83-239.6,32.46-60.96,59.52-124.21,76.27-191.5,8.52-34.21,13.5-68.98,13.22-104.18-.37-48.6-11.37-95.01-37.3-136.42-33.78-53.94-82.9-86.77-145.84-97.34-59.39-9.98-112.46,6.05-159.33,42.87-24.3,19.09-41.59,43.47-49.46,73.87-.44,1.72-1.16,3.41,.21,5.37Z"}),(0,h.jsx)("path",{d:"M1695.11,264.15c-3.87-22.28-12.68-40.21-25.49-56.03-31.54-38.96-73.39-60.6-122.15-68-76.02-11.54-139.34,14.6-190.01,70.76-29.32,32.5-44.49,72.67-51.91,115.55-10.35,59.8-1.62,118.08,14.96,175.64,20.57,71.42,52.55,137.82,89.39,202.03,52.52,91.52,113.86,177.08,177.14,261.33,54.59,72.67,110.97,143.95,167.02,215.48,47.73,60.91,95.63,121.69,141.96,183.68,9.97,13.33,19.6,26.96,27.71,41.55,5.95,10.71,8.2,21.92,3.05,33.67-5.14,11.73-13.86,18.21-26.95,19.23-16.72,1.3-30.31-3.95-43.08-15.07-82.91-72.22-159.38-151.09-236.49-229.24-33.47-33.93-65.79-69.06-98.59-103.68-31.86-33.64-63.52-67.51-94.03-102.36-35.26-40.27-70.04-80.95-103.23-123.02-37.15-47.08-71.74-95.89-102.59-147.23-36.79-61.24-65.49-126.16-84.5-195.23-15.29-55.58-21.92-112.14-19.43-169.67,4.56-105.31,40.12-197.82,115.47-273.1,53.73-53.67,119.21-85.11,194-95.75,92.53-13.17,179.85,2.43,257.42,56.57,75.73,52.85,123.95,124.99,138.04,216.96,7.33,47.83,3.27,95.62-23.74,138.08-25.55,40.17-61.92,64.11-109.97,69.79-41.07,4.85-77.82-6.27-110.35-30.22-45.3-33.36-64.26-94.2-43.97-145.77,16.74-42.55,57.05-69.78,101.87-68.7,16.18,.39,30.85,5.69,44.53,14.04,4.13,2.52,8.2,5.16,13.93,8.77Z"})]})})})}),n.slice(2).map(n=>{const r=e.pathname===n.path;return(0,h.jsxs)(b,{to:n.path,$isActive:r,children:[(0,h.jsx)(_,{$isActive:r}),(0,h.jsx)(w,{$isActive:r,children:t(n.icon,r)}),(0,h.jsx)(A,{$isActive:r,children:n.label})]},n.path)})]})})}},2768:(e,n,t)=>{t.d(n,{A:()=>l});var r,o,i=t(7528),a=(t(5043),t(5464));(0,a.i7)(r||(r=(0,i.A)(["\n  0%, 100% { box-shadow: 0 0 5px #FFB000, 0 0 10px #FFB000, 0 0 15px #FFB000; }\n  50% { box-shadow: 0 0 10px #FFB000, 0 0 20px #FFB000, 0 0 30px #FFB000; }\n"])));const l=a.Ay.button(o||(o=(0,i.A)(["\n  background: ",";\n  color: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ",";\n    box-shadow: ",";\n  }\n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ",";\n    box-shadow: ",";\n  }\n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.background},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.typography.fontSize.body},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.effects.neonGlow},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.effects.neonGlow})},4439:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Rn});var r,o,i,a,l,s,c,d,p,u,g,m,f,h,y,x,v,b,w=t(7528),A=t(5043),_=t(5464),S=t(1949),j=t(2507),k=t(342),C=(t(2768),t(579));const z=(0,j.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),F=_.Ay.div(r||(r=(0,w.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.8);\n  backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n  \n  /* Ensure the overlay is clickable */\n  pointer-events: auto;\n"]))),D=(0,_.Ay)(S.A)(o||(o=(0,w.A)(["\n  max-width: 500px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  pointer-events: auto;\n"]))),R=_.Ay.div(i||(i=(0,w.A)(["\n  padding: 32px 32px 24px 32px;\n  border-bottom: 3px solid ",";\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold}),I=_.Ay.h2(a||(a=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  margin: 0 0 24px 0;\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.typography.fontSize.h2},e=>{let{theme:n}=e;return n.typography.fontWeight.bold}),B=_.Ay.div(l||(l=(0,w.A)(["\n  display: flex;\n  gap: 18px;\n  flex-wrap: wrap;\n"]))),W=_.Ay.button(s||(s=(0,w.A)(["\n  padding: 12px 20px;\n  border: 3px solid ",";\n  background: ",";\n  color: ",";\n  border-radius: 20px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n  cursor: pointer;\n  transition: all "," ",";\n\n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n"])),e=>{let{$active:n,theme:t}=e;return t.colors.accent.gold},e=>{let{$active:n,theme:t}=e;return n?t.colors.accent.gold:"transparent"},e=>{let{$active:n,theme:t}=e;return n?t.colors.background:t.colors.text.primary},e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.typography.fontSize.small},e=>{let{theme:n}=e;return n.typography.fontWeight.medium},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.background},e=>{let{theme:n}=e;return n.effects.neonGlow}),E=_.Ay.div(c||(c=(0,w.A)(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 32px 32px 32px;\n"]))),Y=_.Ay.div(d||(d=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),N=_.Ay.div(p||(p=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.effects.neonGlow}),O=_.Ay.div(u||(u=(0,w.A)(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{$type:n,theme:t}=e;switch(n){case"scan":default:return t.colors.accent.purple;case"quest":return t.colors.accent.gold;case"event":return t.colors.accent.pink;case"daily":return t.colors.accent.green;case"referral":return t.colors.accent.cyan}}),M=_.Ay.div(g||(g=(0,w.A)(["\n  flex: 1;\n"]))),P=_.Ay.div(m||(m=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.body}),G=_.Ay.div(f||(f=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary},e=>{let{theme:n}=e;return n.typography.fontSize.small}),Q=_.Ay.div(h||(h=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),q=_.Ay.div(y||(y=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.small}),U=_.Ay.div(x||(x=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary}),$=_.Ay.div(v||(v=(0,w.A)(["\n  text-align: center;\n  padding: 64px 32px;\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary},e=>{let{theme:n}=e;return n.typography.fontSize.body}),J=_.Ay.button(b||(b=(0,w.A)(["\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: transparent;\n  border: 3px solid ",";\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all "," ",";\n  z-index: 10;\n\n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.background},e=>{let{theme:n}=e;return n.effects.neonGlow},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.background}),L=[{key:"all",label:"All",icon:"\ud83d\udccb"},{key:"scan",label:"Scans",icon:"\ud83d\udcf1"},{key:"quest",label:"Quests",icon:"\ud83d\udde1\ufe0f"},{key:"event",label:"Events",icon:"\ud83c\udf89"},{key:"daily",label:"Dailies",icon:"\ud83d\udcc5"},{key:"referral",label:"Referrals",icon:"\ud83d\udc65"}],H=e=>{let{isOpen:n,onClose:t}=e;const{user:r}=(0,k.A)(),[o,i]=(0,A.useState)([]),[a,l]=(0,A.useState)(!1),[s,c]=(0,A.useState)("all"),[d,p]=(0,A.useState)([]),u=(0,A.useRef)(!1),g=(0,A.useRef)(!1);(0,A.useEffect)(()=>{if(n&&r&&!u.current)m();else if(n&&r&&u.current&&0===d.length)console.log("\ud83d\udd04 Modal opened but no activities, retrying..."),u.current=!1,m();else if(n&&!r){console.log("\ud83d\udc64 No user, showing mock data immediately");const e=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()}];p(e),l(!1)}},[n,r]),(0,A.useEffect)(()=>{d.length>0&&f()},[s,d]),(0,A.useEffect)(()=>{n||(u.current=!1,g.current=!1,p([]),i([]),c("all"))},[n]);const m=(0,A.useCallback)(async()=>{if(g.current)console.log("\ud83d\udd04 Already processing activities, skipping");else{console.log("\ud83d\ude80 Starting fetchAllActivities..."),g.current=!0,l(!0);try{console.log("\ud83d\udd0d Fetching all activities for user:",r.id),console.log("\ud83d\udd0d Supabase configured, attempting database query...");const{data:e,error:n}=await z.from("user_activity").select("*").eq("user_id",r.id).order("activity_date",{ascending:!1}).limit(50);if(n)throw n;if(e&&0!==e.length)console.log("\u2705 Database activities loaded:",e.length),p(e),u.current=!0;else{console.log("\ud83d\udcca No database data, using mock activities");const e=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()},{id:3,activity_type:"daily",activity_title:"Daily Login Bonus",activity_description:"Claimed daily login reward",wings_earned:35,activity_date:new Date(Date.now()-864e5).toISOString()},{id:4,activity_type:"referral",activity_title:"Friend Joined",activity_description:"Your friend Alex joined using your referral code",wings_earned:150,activity_date:new Date(Date.now()-1728e5).toISOString()},{id:5,activity_type:"event",activity_title:"Special Event Participation",activity_description:'Participated in "Weekend Warrior" event',wings_earned:150,activity_date:new Date(Date.now()-2592e5).toISOString()},{id:6,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Retail Store Plaza",wings_earned:35,activity_date:new Date(Date.now()-3456e5).toISOString()},{id:7,activity_type:"quest",activity_title:"Weekly Quest Completed",activity_description:'Completed "Explorer Challenge" - visited 5 locations',wings_earned:150,activity_date:new Date(Date.now()-432e6).toISOString()},{id:8,activity_type:"daily",activity_title:"Streak Bonus",activity_description:"7-day login streak achieved!",wings_earned:75,activity_date:new Date(Date.now()-6048e5).toISOString()}];p(e),u.current=!0}}catch(e){console.error("\u274c Error fetching activities:",e),console.log("\ud83d\udd04 Falling back to mock data due to error");const n=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()},{id:3,activity_type:"daily",activity_title:"Daily Login Bonus",activity_description:"Claimed daily login reward",wings_earned:35,activity_date:new Date(Date.now()-864e5).toISOString()},{id:4,activity_type:"referral",activity_title:"Friend Joined",activity_description:"Your friend Alex joined using your referral code",wings_earned:150,activity_date:new Date(Date.now()-1728e5).toISOString()},{id:5,activity_type:"event",activity_title:"Special Event Participation",activity_description:'Participated in "Weekend Warrior" event',wings_earned:150,activity_date:new Date(Date.now()-2592e5).toISOString()},{id:6,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Retail Store Plaza",wings_earned:35,activity_date:new Date(Date.now()-3456e5).toISOString()}];console.log("\ud83d\udcca Setting mock activities:",n.length),p(n),u.current=!0}finally{console.log("\u2705 fetchAllActivities completed, setting loading to false"),l(!1),g.current=!1}}},[r]),f=(0,A.useCallback)(()=>{if(0===d.length)return;console.log("\ud83d\udd0d Filtering activities for:",s);const e="all"===s?d:d.filter(e=>e.activity_type===s);i(e)},[s,d]),h=e=>{const n=new Date(e),t=(new Date-n)/36e5;return t<1?"Just now":t<24?"".concat(Math.floor(t),"h ago"):t<168?"".concat(Math.floor(t/24),"d ago"):n.toLocaleDateString()},y=e=>{const n=L.find(n=>n.key===e);return(null===n||void 0===n?void 0:n.icon)||"\ud83d\udccb"};return n?(0,C.jsx)(F,{onClick:t,children:(0,C.jsxs)(D,{onClick:e=>e.stopPropagation(),children:[(0,C.jsx)(J,{onClick:e=>{e.stopPropagation(),t()},children:"\xd7"}),(0,C.jsxs)(R,{children:[(0,C.jsx)(I,{children:"Recent Activity"}),(0,C.jsx)(B,{children:L.map(e=>(0,C.jsxs)(W,{$active:s===e.key,onClick:()=>c(e.key),children:[e.icon," ",e.label]},e.key))})]}),(0,C.jsx)(E,{children:a?(0,C.jsx)($,{children:"Loading activities..."}):0===o.length?(0,C.jsx)($,{children:"all"===s?"No activity yet. Start scanning QR codes to earn rewards!":"No ".concat(s," activities yet.")}):(0,C.jsx)(Y,{children:o.map(e=>(0,C.jsxs)(N,{children:[(0,C.jsx)(O,{$type:e.activity_type,children:y(e.activity_type)}),(0,C.jsxs)(M,{children:[(0,C.jsx)(P,{children:e.activity_title}),e.activity_description&&(0,C.jsx)(G,{children:e.activity_description})]}),(0,C.jsxs)(Q,{children:[e.wings_earned>0&&(0,C.jsxs)(q,{children:["+",e.wings_earned," WNGS"]}),(0,C.jsx)(U,{children:h(e.activity_date)})]})]},e.id))})})]})}):null};var T,Z,V,X,K,ee,ne,te,re,oe,ie,ae,le,se,ce,de,pe,ue,ge,me,fe,he,ye,xe,ve,be,we,Ae,_e,Se,je,ke,Ce,ze,Fe,De,Re,Ie,Be,We,Ee,Ye,Ne,Oe,Me,Pe,Ge,Qe,qe=t(3216),Ue=t(6284),$e=t(2765);const Je=_.Ay.div(T||(T=(0,w.A)(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 8px 100px 8px;\n  @media (min-width: 900px) {\n    padding: 48px 0 120px 0;\n  }\n"])),e=>{let{theme:n}=e;return n.colors.background}),Le=_.Ay.div(Z||(Z=(0,w.A)(["\n  display: flex;\n  flex-direction: row;\n  gap: 24px;\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto 32px auto;\n"]))),He="#FFD700",Te=(0,_.Ay)(S.A)(V||(V=(0,w.A)(["\n  flex: 1;\n  width: 50%;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 0 24px 0;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  cursor: pointer;\n  transition: box-shadow 0.2s, transform 0.2s;\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),He),Ze=_.Ay.div(X||(X=(0,w.A)(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.8rem;\n  color: #fff;\n  box-shadow: 0 0 16px 0 #7F3FBF88;\n  margin-bottom: 16px;\n  border: 2.5px solid ",";\n"])),e=>{let{theme:n}=e;return n.gradients.primary},e=>{let{theme:n}=e;return n.colors.accent}),Ve=_.Ay.div(K||(K=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin-bottom: 4px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 8px;\n  border-radius: 8px;\n  border: 2px solid transparent;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    border-color: ",";\n    background: rgba(255, 215, 0, 0.1);\n  }\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.colors.accent.gold}),Xe=(_.Ay.span(ee||(ee=(0,w.A)(["\n  font-size: 0.9rem;\n  color: ",";\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n  \n  ",":hover & {\n    opacity: 1;\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},Ve),(0,_.Ay)(S.A)(ne||(ne=(0,w.A)(["\n  flex: 1;\n  width: 50%;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  padding: 32px 0 24px 0;\n  transition: box-shadow 0.2s, transform 0.2s;\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),He)),Ke=_.Ay.div(te||(te=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.3rem;\n  margin-bottom: 8px;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.accent}),en=(_.Ay.button(re||(re=(0,w.A)(["\n  background: ",";\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent}),_.Ay.div(oe||(oe=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 2.5rem;\n  font-weight: bold;\n  letter-spacing: 2px;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.secondary})),nn=(0,_.Ay)(S.A)(ie||(ie=(0,w.A)(["\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto 32px auto;\n  padding: 32px 32px 24px 32px;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  transition: box-shadow 0.2s, transform 0.2s;\n  @media (max-width: 600px) {\n    padding: 20px 8px 16px 8px;\n  }\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),He),tn=_.Ay.h2(ae||(ae=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  text-align: center;\n  letter-spacing: 1px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary}),rn=(_.Ay.div(le||(le=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.accent.green},e=>{let{theme:n}=e;return n.typography.fontSize.body},e=>{let{theme:n}=e;return n.typography.fontWeight.bold}),_.Ay.div(se||(se=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary},e=>{let{theme:n}=e;return n.typography.fontSize.body}),(0,_.Ay)(nn)(ce||(ce=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 0;\n"]))),_.Ay.div(de||(de=(0,w.A)(["\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  height: 24px;\n  margin-bottom: 24px;\n  overflow: hidden;\n  width: 100%;\n  max-width: 700px;\n"])),e=>{let{theme:n}=e;return n.colors.glass.background},e=>{let{theme:n}=e;return n.colors.accent.gold}),_.Ay.div(pe||(pe=(0,w.A)(["\n  height: 100%;\n  border-radius: 20px;\n  background: ",";\n  width: ","%;\n  transition: width ",";\n"])),e=>{let{color:n,theme:t}=e;return n||t.colors.accent.gold},e=>{let{value:n}=e;return n},e=>{let{theme:n}=e;return n.animation.duration.slow}),_.Ay.div(ue||(ue=(0,w.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 32px;\n  margin-top: 24px;\n"]))),_.Ay.div(ge||(ge=(0,w.A)(["\n  width: 64px;\n  height: 64px;\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  font-size: 2.2rem;\n  box-shadow: ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n  }\n"])),e=>{let{theme:n}=e;return n.gradients.primary},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.effects.neonGlow},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth}),_.Ay.div(me||(me=(0,w.A)(["\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background: rgba(18, 18, 18, 0.75);\n  backdrop-filter: blur(16px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s;\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"])))),on=_.Ay.div(fe||(fe=(0,w.A)(["\n  background: linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(127,63,191,0.13) 100%);\n  border: 2.5px solid ",";\n  border-radius: 22px;\n  box-shadow: 0 8px 40px 0 rgba(255,215,0,0.10), 0 0 32px 0 rgba(127,63,191,0.10);\n  padding: 2.2rem 1.5rem 1.5rem 1.5rem;\n  min-width: 320px;\n  max-width: 95vw;\n  width: 100%;\n  max-width: 400px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  @media (max-width: 500px) {\n    min-width: 0;\n    padding: 1.2rem 0.7rem 1.2rem 0.7rem;\n  }\n"])),He),an=_.Ay.h2(he||(he=(0,w.A)(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 0.7rem;\n  text-align: center;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),ln=_.Ay.button(ye||(ye=(0,w.A)(["\n  width: 100%;\n  max-width: 320px;\n  margin-bottom: 1rem;\n  padding: 0.85rem 0;\n  border-radius: 12px;\n  border: 2px solid ",";\n  background: transparent;\n  color: #fff;\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.08rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.18s, color 0.18s;\n  &:hover, &:focus {\n    background: ",";\n    color: #000000;\n    outline: none;\n  }\n"])),He,He),sn=_.Ay.button(xe||(xe=(0,w.A)(["\n  position: absolute;\n  top: 18px;\n  right: 18px;\n  background: none;\n  border: none;\n  color: #fff;\n  font-size: 1.5rem;\n  cursor: pointer;\n  z-index: 10;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n  &:hover {\n    background: rgba(255,255,255,0.08);\n  }\n"]))),cn=(_.Ay.div(ve||(ve=(0,w.A)(["\n  width: 120px;\n  height: 120px;\n  background: #fff;\n  border-radius: 16px;\n  margin: 0 auto 1rem auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.5rem;\n  color: #000000;\n  box-shadow: 0 2px 12px 0 rgba(255,215,0,0.10);\n"]))),_.Ay.div(be||(be=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"])))),dn=_.Ay.div(we||(we=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n"]))),pn=_.Ay.div(Ae||(Ae=(0,w.A)(["\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  background: ",";\n"])),e=>{let{theme:n}=e;return n.colors.accent.purple}),un=_.Ay.div(_e||(_e=(0,w.A)(["\n  flex: 1;\n"]))),gn=_.Ay.div(Se||(Se=(0,w.A)(["\n  color: ",";\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n"])),e=>{let{theme:n}=e;return n.colors.text.primary}),mn=_.Ay.div(je||(je=(0,w.A)(["\n  color: ",";\n  font-size: 0.875rem;\n"])),e=>{let{theme:n}=e;return n.colors.text.secondary}),fn=_.Ay.div(ke||(ke=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 0.25rem;\n"]))),hn=_.Ay.div(Ce||(Ce=(0,w.A)(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),e=>{let{theme:n}=e;return n.colors.accent.green}),yn=_.Ay.div(ze||(ze=(0,w.A)(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold}),xn=_.Ay.button(Fe||(Fe=(0,w.A)(["\n  background: linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  color: #000;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  font-size: 1rem;\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);\n  margin-top: 24px;\n  width: 100%;\n  max-width: 200px;\n  align-self: center;\n  box-shadow: \n    0 0 20px 0 rgba(255,176,0,0.2),\n    0 0 40px 0 rgba(255,176,0,0.1);\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 30px 0 rgba(255,176,0,0.4),\n      0 0 60px 0 rgba(255,176,0,0.2);\n  }\n  \n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n"]))),vn=_.Ay.div(De||(De=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),bn=_.Ay.div(Re||(Re=(0,w.A)(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.effects.neonGlow}),wn=_.Ay.div(Ie||(Ie=(0,w.A)(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{$type:n,theme:t}=e;switch(n){case"scan":default:return t.colors.accent.purple;case"purchase":return t.colors.accent.pink;case"daily":return t.colors.accent.green}}),An=_.Ay.div(Be||(Be=(0,w.A)(["\n  flex: 1;\n"]))),_n=_.Ay.div(We||(We=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.body}),Sn=_.Ay.div(Ee||(Ee=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary},e=>{let{theme:n}=e;return n.typography.fontSize.small}),jn=_.Ay.div(Ye||(Ye=(0,w.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),kn=_.Ay.div(Ne||(Ne=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.accent.green},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.small}),Cn=_.Ay.div(Oe||(Oe=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{$positive:n,theme:t}=e;return n?t.colors.accent.gold:t.colors.accent.pink},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.small}),zn=_.Ay.div(Me||(Me=(0,w.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary}),Fn=((0,_.Ay)(ln)(Pe||(Pe=(0,w.A)(["\n  margin-top: 0.5rem;\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n"]))),(0,_.Ay)(ln)(Ge||(Ge=(0,w.A)(["\n  background: ",";\n  color: #000;\n  margin-top: 1rem;\n\n  &:hover {\n    background: #FFC72C;\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold}));_.Ay.button(Qe||(Qe=(0,w.A)(["\n  background: ",";\n  color: ",";\n  border: none;\n  border-radius: 8px;\n  padding: 12px 24px;\n  font-family: ",";\n  font-size: 1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 0 15px ",";\n  }\n"])),e=>{let{theme:n}=e;return n.colors.primary},e=>{let{theme:n}=e;return n.colors.background},e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.primary});function Dn(e){let{open:n,onClose:t,user:r}=e;const{referralCode:o,generateReferralLink:i,shareReferral:a}=(0,Ue.K)(),[l,s]=(0,A.useState)(!1);return n?(0,C.jsx)(rn,{onClick:e=>{e.target===e.currentTarget&&t()},children:(0,C.jsxs)(on,{children:[(0,C.jsx)(sn,{"aria-label":"Close",onClick:t,children:"\xd7"}),(0,C.jsx)(an,{children:"Share Your Referral"}),o?(0,C.jsxs)("div",{style:{width:"100%",textAlign:"center",marginTop:"0.5rem"},children:[(0,C.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[(0,C.jsx)("div",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Your Referral Code"}),(0,C.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#FFD700",fontFamily:"monospace",letterSpacing:"3px",marginBottom:"0.5rem"},children:o}),(0,C.jsx)("div",{style:{color:"#aaa",fontSize:"0.8rem"},children:"Each friend earns you 50 WINGS"})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,C.jsx)(ln,{onClick:async()=>{o&&await a(o)},children:"\ud83d\udcf1 Share with Friends"}),(0,C.jsx)(ln,{onClick:async()=>{if(!o)return;(await a(o)).success&&(s(!0),setTimeout(()=>s(!1),2e3))},children:l?"\u2705 Copied!":"\ud83d\udccb Copy Referral Link"}),(0,C.jsx)(ln,{onClick:()=>window.open("https://www.instagram.com/","_blank"),style:{background:"linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D)"},children:"\ud83d\udcf8 Share to Instagram Story"})]}),(0,C.jsx)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",fontSize:"0.85rem",color:"#10B981"},children:"\ud83d\udca1 Friends get 25 WINGS for joining + 25 more for their first scan!"})]}):(0,C.jsx)("div",{style:{textAlign:"center",color:"#aaa"},children:"Loading your referral code..."})]})}):null}const Rn=function(){var e,n,t,r;const[o,i]=(0,A.useState)(!1),[a,l]=(0,A.useState)(!1),[s,c]=(0,A.useState)(null),[d,p]=(0,A.useState)(!0),u=(0,qe.Zp)(),{user:g,isAdmin:m,profile:f}=(0,k.A)(),{referralCode:h,referralStats:y,referralHistory:x,loading:v,shareReferral:b,generateReferralLink:w}=(0,Ue.K)();(0,A.useEffect)(()=>{console.log("\ud83c\udfaf ProfileScreen: referralCode updated:",h),console.log("\ud83c\udfaf ProfileScreen: referralLoading:",v),console.log("\ud83c\udfaf ProfileScreen: user:",null===g||void 0===g?void 0:g.id)},[h,v,g]);const S=(0,_.DP)();return(0,A.useEffect)(()=>{var e,n;if(g&&f)c({name:f.username||(null===(e=g.user_metadata)||void 0===e?void 0:e.username)||(null===(n=g.email)||void 0===n?void 0:n.split("@")[0]),email:g.email,avatar:f.avatar_url||null,joinDate:new Date(g.created_at).toLocaleDateString(),totalWings:f.wings_balance||0,level:Math.floor((f.wings_balance||0)/100)+1,achievements:0,items:0}),p(!1);else if(g){var t,r;c({name:(null===(t=g.user_metadata)||void 0===t?void 0:t.username)||(null===(r=g.email)||void 0===r?void 0:r.split("@")[0])||"User",email:g.email,avatar:null,joinDate:new Date(g.created_at).toLocaleDateString(),totalWings:0,level:1,achievements:0,items:0}),p(!1)}},[g,f]),S.colors.secondary,S.colors.accent,Math.min(60,100),(0,C.jsxs)(Je,{children:[(0,C.jsxs)(Le,{children:[(0,C.jsxs)(Te,{onClick:()=>u("/settings"),children:[(0,C.jsx)(Ze,{style:null!==s&&void 0!==s&&s.avatar?{backgroundImage:"url(".concat(s.avatar,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",color:"transparent"}:{},children:!(null!==s&&void 0!==s&&s.avatar)&&(null!==g&&void 0!==g&&null!==(e=g.user_metadata)&&void 0!==e&&e.username?g.user_metadata.username.charAt(0).toUpperCase():null!==g&&void 0!==g&&g.email?g.email.charAt(0).toUpperCase():"U")}),(0,C.jsx)(Ve,{children:(null===g||void 0===g||null===(n=g.user_metadata)||void 0===n?void 0:n.username)||(null===g||void 0===g||null===(t=g.email)||void 0===t?void 0:t.split("@")[0])||"User"})]}),(0,C.jsxs)(Xe,{children:[(0,C.jsx)(Ke,{children:"WNGS Balance"}),(0,C.jsx)(en,{children:(null===s||void 0===s||null===(r=s.totalWings)||void 0===r?void 0:r.toLocaleString())||"0"})]})]}),(0,C.jsxs)(nn,{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)(tn,{children:"Referral Program"}),(0,C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,C.jsxs)("div",{style:{textAlign:"center"},children:[(0,C.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#FFD700"},children:y.totalReferrals}),(0,C.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"Total Referrals"})]}),(0,C.jsxs)("div",{style:{textAlign:"center"},children:[(0,C.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10B981"},children:y.completedReferrals}),(0,C.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"Completed"})]}),(0,C.jsxs)("div",{style:{textAlign:"center"},children:[(0,C.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#FFB000"},children:y.totalWingsEarned}),(0,C.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"WINGS Earned"})]})]}),(0,C.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[(0,C.jsx)("div",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"0.5rem"},children:"Your Referral Code"}),v?(0,C.jsxs)("div",{style:{fontSize:"1.2rem",color:"#aaa",padding:"1rem"},children:["Generating your code...",(0,C.jsx)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:"This may take a few seconds..."})]}):h?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#FFD700",fontFamily:"monospace",letterSpacing:"2px"},children:h}),(0,C.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa",marginTop:"0.5rem"},children:"Share this code to earn 50 WINGS per completed referral"})]}):(0,C.jsx)("div",{style:{fontSize:"1rem",color:"#e74c3c",padding:"1rem"},children:"Failed to generate referral code. Please refresh the page."})]}),x.length>0?(0,C.jsxs)(cn,{children:[(0,C.jsx)("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"1rem",color:"#fff"},children:"Recent Referrals"}),x.slice(0,3).map(e=>(0,C.jsxs)(dn,{children:[(0,C.jsx)(pn,{children:"\ud83d\udc65"}),(0,C.jsxs)(un,{children:[(0,C.jsx)(gn,{children:e.refereeName}),(0,C.jsxs)(mn,{children:["Joined ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,C.jsxs)(fn,{children:[(0,C.jsx)(hn,{style:{color:"completed"===e.status?"#10B981":"#FFB000"},children:"completed"===e.status?"Completed":"Pending"}),e.rewardGiven&&e.wingsEarned>0&&(0,C.jsxs)(yn,{children:["+",e.wingsEarned," WINGS"]})]})]},e.id)),x.length>3&&(0,C.jsxs)("div",{style:{textAlign:"center",marginTop:"1rem",color:"#aaa",fontSize:"0.9rem"},children:["+",x.length-3," more referrals"]})]}):(0,C.jsx)("div",{style:{textAlign:"center",color:"#aaa",marginBottom:"1rem"},children:"No referrals yet. Share your code to start earning!"}),(0,C.jsx)(xn,{onClick:()=>{h?b(h):(console.log("\u274c No referral code available to share"),alert("Referral code not ready yet. Please wait a moment and try again."))},disabled:!h,style:{opacity:h?1:.6,cursor:h?"pointer":"not-allowed"},children:v?"Loading...":"Share Referral Code"})]}),(0,C.jsxs)(nn,{as:"button",onClick:()=>l(!0),style:{cursor:"pointer"},children:[(0,C.jsx)(tn,{children:"Recent Activity"}),(0,C.jsx)(vn,{children:[{type:"Scan Quest Earn",amount:"+75 WNGS",positive:!0,status:"Completed",date:"Mar 18, 2025"},{type:"Shop Purchase",amount:"-50 WNGS",positive:!1,status:"Completed",date:"Mar 15, 2025"},{type:"Daily Reward",amount:"+35 WNGS",positive:!0,status:"Completed",date:"Mar 14, 2025"}].map((e,n)=>{return(0,C.jsxs)(bn,{children:[(0,C.jsx)(wn,{$type:(t=e.type,t.includes("Scan")?"scan":t.includes("Purchase")?"purchase":t.includes("Daily")?"daily":"scan"),children:(e=>e.includes("Scan")?"\ud83d\udcf1":e.includes("Purchase")?"\ud83d\uded2":e.includes("Daily")?"\ud83c\udf81":"\ud83d\udcf1")(e.type)}),(0,C.jsxs)(An,{children:[(0,C.jsx)(_n,{children:e.type}),(0,C.jsx)(Sn,{children:"Transaction completed successfully"})]}),(0,C.jsxs)(jn,{children:[(0,C.jsx)(kn,{children:e.status}),(0,C.jsx)(Cn,{$positive:e.positive,children:e.amount}),(0,C.jsx)(zn,{children:e.date})]})]},n);var t})}),(0,C.jsx)("div",{style:{textAlign:"center",marginTop:"24px",color:"#FFD700",fontSize:"0.9rem",fontWeight:"500"},children:"Click to view all activity \u2192"})]}),(0,C.jsx)(Dn,{open:o,onClose:()=>i(!1),user:g}),(0,C.jsx)(H,{isOpen:a,onClose:()=>l(!1)}),m&&(0,C.jsx)(Fn,{onClick:()=>u("/admin"),children:"Admin Dashboard"}),(0,C.jsx)($e.A,{})]})}},6284:(e,n,t)=>{t.d(n,{K:()=>l});var r=t(5043),o=t(2507),i=t(342);const a=(0,o.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),l=()=>{const{user:e}=(0,i.A)(),[n,t]=(0,r.useState)(null),[o,l]=(0,r.useState)({totalReferrals:0,pendingReferrals:0,completedReferrals:0,totalWingsEarned:0}),[s,c]=(0,r.useState)([]),[d,p]=(0,r.useState)(!0),[u,g]=(0,r.useState)(!0),[m,f]=(0,r.useState)(null),h=(0,r.useRef)(!1),y=(0,r.useRef)(!1),x=(0,r.useRef)(null),v=(0,r.useRef)(null),b=((0,r.useCallback)(e=>{var n,t;if(!e)return null;const r=((null===(n=e.user_metadata)||void 0===n?void 0:n.username)||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"user").toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,6),o=Math.random().toString(36).substring(2,5);return"".concat(r).concat(o).toUpperCase()},[]),(0,r.useCallback)(async()=>{if(e){g(!0);try{console.log("\ud83d\udd17 Ensuring referral code for user:",e.id);const o=localStorage.getItem("referral_".concat(e.id));if(o)try{const e=JSON.parse(o);if(Date.now()-e.timestamp<18e5)return console.log("\ud83d\udd17 Using cached referral code:",e.code),t(e.code),void g(!1)}catch(n){console.log("\ud83d\udd17 Cache parse error, proceeding with fresh generation")}let i,l=null,s=null;try{const n=new Promise((e,n)=>setTimeout(()=>n(new Error("Referral code generation timeout")),3e3)),t=a.from("user_profiles").select("referral_code").eq("id",e.id).single(),{data:r,error:o}=await Promise.race([t,n]);!o&&null!==r&&void 0!==r&&r.referral_code?(l=r.referral_code,console.log("\ud83d\udd17 Database query successful, found code:",l)):(s=o,console.log("\ud83d\udd17 Database query failed or no code found:",o))}catch(r){console.log("\ud83d\udd17 Database query timed out, using fallback"),s=r}l?(i=l,console.log("\ud83d\udd17 Using database code:",i)):(console.log("\ud83d\udd17 Generating fallback referral code"),i=w(),console.log("\ud83d\udd17 Generated fallback code:",i)),localStorage.setItem("referral_".concat(e.id),JSON.stringify({code:i,timestamp:Date.now()})),t(i),g(!1)}catch(m){console.error("\ud83d\udd17 Critical error ensuring referral code:",m);const r=w();console.log("\ud83d\udd17 Using last resort fallback code:",r),localStorage.setItem("referral_".concat(e.id),JSON.stringify({code:r,timestamp:Date.now()})),t(r),g(!1)}}},[e])),w=()=>{const e=Date.now().toString(36),n=Math.random().toString(36).substring(2,8);return"MONARCH".concat(e).concat(n).toUpperCase()},A=(0,r.useCallback)(async()=>{if(e)try{p(!0);const{data:n,error:t}=await a.from("referrals").select("status, created_at, referrer_reward_given, referrer_wings_earned").eq("referrer_id",e.id);if(t)throw t;const{data:r,error:o}=await a.from("user_profiles").select("total_referrals, referral_wings_earned").eq("id",e.id).single();if(o&&"PGRST116"!==o.code)throw o;const i={totalReferrals:(null===n||void 0===n?void 0:n.length)||0,pendingReferrals:(null===n||void 0===n?void 0:n.filter(e=>"pending"===e.status).length)||0,completedReferrals:(null===n||void 0===n?void 0:n.filter(e=>"completed"===e.status).length)||0,totalWingsEarned:(null===r||void 0===r?void 0:r.referral_wings_earned)||0};l(i)}catch(m){console.error("Error loading referral stats:",m),f(m.message)}finally{p(!1)}},[e]),_=(0,r.useCallback)(async()=>{if(e)try{const{data:n,error:t}=await a.from("referrals").select("\n          *,\n          referee:referee_id (\n            email,\n            user_metadata\n          )\n        ").eq("referrer_id",e.id).order("created_at",{ascending:!1});if(t)throw t;const r=(null===n||void 0===n?void 0:n.map(e=>{var n,t,r,o,i;return{id:e.id,refereeName:(null===(n=e.referee)||void 0===n||null===(t=n.user_metadata)||void 0===t?void 0:t.username)||(null===(r=e.referee)||void 0===r||null===(o=r.email)||void 0===o?void 0:o.split("@")[0])||"User",refereeEmail:null===(i=e.referee)||void 0===i?void 0:i.email,status:e.status,createdAt:e.created_at,completedAt:e.completed_at,rewardGiven:e.referrer_reward_given,wingsEarned:e.referrer_wings_earned||0}}))||[];c(r)}catch(m){console.error("Error loading referral history:",m),f(m.message)}},[e]),S=(0,r.useCallback)(async(e,n)=>{if(e&&n)try{console.log("\ud83d\udd04 Processing referral signup:",{referralCode:e,newUserId:n});const{data:t,error:r}=await a.from("referral_codes").select("user_id").eq("referral_code",e.toUpperCase()).eq("is_active",!0).single();if(r||!t)return console.warn("Invalid referral code:",e),{success:!1,error:"Invalid referral code"};if(t.user_id===n)return console.warn("Self-referral attempt blocked"),{success:!1,error:"Cannot refer yourself"};let o=25;const{data:i,error:l}=await a.from("referrals").insert([{referrer_id:t.user_id,referee_id:n,referral_code:e.toUpperCase(),status:"pending",referee_wings_earned:o}]).select().single();if(l)throw l;const{error:s}=await a.rpc("add_wings_to_user",{user_id_param:n,wings_amount:o,activity_type_param:"referral_bonus",description_param:"Welcome bonus for joining via referral code: ".concat(e)});return s&&console.warn("Failed to award welcome bonus:",s),console.log("\u2705 Referral signup processed successfully"),{success:!0,data:i,bonusAmount:o}}catch(m){return console.error("Error processing referral signup:",m),{success:!1,error:m.message}}},[]),j=(0,r.useCallback)(async e=>{try{console.log("\ud83d\udd04 Attempting to complete referral for referee:",e);const{data:n,error:t}=await a.from("referrals").select("*").eq("referee_id",e).eq("status","pending").single();if(t||!n)return console.log("No pending referral found for referee:",e),{success:!1,message:"No pending referral found"};let r=50,o=25;const{error:i}=await a.from("referrals").update({status:"completed",completed_at:(new Date).toISOString(),referrer_reward_given:!0,referee_reward_given:!0,referrer_wings_earned:r,referee_wings_earned:(n.referee_wings_earned||0)+o}).eq("id",n.id);if(i)throw i;return await Promise.all([a.rpc("add_wings_to_user",{user_id_param:n.referrer_id,wings_amount:r,activity_type_param:"referral",description_param:"Referral completed - friend completed first scan"}),a.rpc("add_wings_to_user",{user_id_param:e,wings_amount:o,activity_type_param:"referral_bonus",description_param:"First scan bonus - referred user reward"})]),await a.from("user_profiles").update({total_referrals:a.raw("COALESCE(total_referrals, 0) + 1")}).eq("id",n.referrer_id),console.log("\u2705 Referral completed successfully"),{success:!0,referrerReward:r,refereeReward:o}}catch(m){return console.error("Error completing referral:",m),{success:!1,error:m.message}}},[]),k=(0,r.useCallback)(e=>{if(!e)return"";const n=window.location.origin;return"".concat(n,"/join/").concat(e)},[]),C=(0,r.useCallback)(async e=>{const n=k(e);let t="Join me on Monarch Passport! \ud83e\udd8b\n\nEarn exclusive fashion rewards by scanning QR codes. Use my code: ".concat(e);if(navigator.share)try{return await navigator.share({title:"Join Monarch Passport",text:t,url:n}),{success:!0}}catch(m){"AbortError"!==m.name&&console.log("Share failed:",m)}try{return await navigator.clipboard.writeText("".concat(t,"\n\n").concat(n)),{success:!0,copied:!0}}catch(m){return console.error("Failed to copy to clipboard:",m),{success:!1,link:n}}},[k]);return(0,r.useEffect)(()=>{console.log("\ud83d\udd27 useReferrals useEffect triggered, user:",null===e||void 0===e?void 0:e.id),(null===e||void 0===e?void 0:e.id)!==x.current?(x.current=null===e||void 0===e?void 0:e.id,e?(console.log("\u2705 User found, calling ensureReferralCode..."),b(),A(),_()):(console.log("\u274c No user found, resetting referral state"),t(null),l({totalReferrals:0,pendingReferrals:0,completedReferrals:0,totalWingsEarned:0}),c([]),p(!1),g(!1),h.current=!1,y.current=!1)):console.log("\ud83d\udd04 Same user, skipping initialization")},[e,b]),(0,r.useEffect)(()=>()=>{v.current&&clearTimeout(v.current)},[]),{referralCode:n,referralStats:o,referralHistory:s,loading:d,referralLoading:u,setReferralLoading:g,error:m,processReferralSignup:S,completeReferral:j,generateReferralLink:k,shareReferral:C,refreshData:()=>{A(),_()}}}}}]);
//# sourceMappingURL=439.59512517.chunk.js.map