/*! For license information please see main.e1bd3fd0.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},72:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function a(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var s,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),o(r,n.prototype),a(r),r}return i(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class d extends c{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new h(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends c{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class w{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){w.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new d("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return g.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=w.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const o=i+r>>1,a=n(t,e[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-r-1}static numberComparator(e,t){return e-t}}class b{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?_.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=_.makeArray(e);g.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=n[r]}const a=32*r+b.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=~n[r]}const a=32*r+b.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){const a=(2<<(o<r?31:31&t))-(1<<(o>n?0:31&e));i[o]|=a}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let a=r;a<=i;a++){const s=(2<<(a<i?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((o[a]&s)!==(n?s:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof _))return!1;const t=e;return this.size===t.size&&w.equals(this.bits,t.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new _(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(s||(s={}));var v,E=s;class S extends c{static getFormatInstance(){return new S}}S.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(v||(v={}));class C{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];this.otherEncodingNames=i,C.VALUE_IDENTIFIER_TO_ECI.set(e,this),C.NAME_TO_ECI.set(n,this);const a=this.values;for(let s=0,l=a.length;s!==l;s++){const e=a[s];C.VALUES_TO_ECI.set(e,this)}for(const s of i)C.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new S("incorect value");const t=C.VALUES_TO_ECI.get(e);if(void 0===t)throw new S("incorect value");return t}static getCharacterSetECIByName(e){const t=C.NAME_TO_ECI.get(e);if(void 0===t)throw new S("incorect value");return t}equals(e){if(!(e instanceof C))return!1;const t=e;return this.getName()===t.getName()}}C.VALUE_IDENTIFIER_TO_ECI=new Map,C.VALUES_TO_ECI=new Map,C.NAME_TO_ECI=new Map,C.Cp437=new C(v.Cp437,Int32Array.from([0,2]),"Cp437"),C.ISO8859_1=new C(v.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),C.ISO8859_2=new C(v.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),C.ISO8859_3=new C(v.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),C.ISO8859_4=new C(v.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),C.ISO8859_5=new C(v.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),C.ISO8859_6=new C(v.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),C.ISO8859_7=new C(v.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),C.ISO8859_8=new C(v.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),C.ISO8859_9=new C(v.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),C.ISO8859_10=new C(v.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),C.ISO8859_11=new C(v.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),C.ISO8859_13=new C(v.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),C.ISO8859_14=new C(v.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),C.ISO8859_15=new C(v.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),C.ISO8859_16=new C(v.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),C.SJIS=new C(v.SJIS,20,"SJIS","Shift_JIS"),C.Cp1250=new C(v.Cp1250,21,"Cp1250","windows-1250"),C.Cp1251=new C(v.Cp1251,22,"Cp1251","windows-1251"),C.Cp1252=new C(v.Cp1252,23,"Cp1252","windows-1252"),C.Cp1256=new C(v.Cp1256,24,"Cp1256","windows-1256"),C.UnicodeBigUnmarked=new C(v.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),C.UTF8=new C(v.UTF8,26,"UTF8","UTF-8"),C.ASCII=new C(v.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),C.Big5=new C(v.Big5,28,"Big5"),C.GB18030=new C(v.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),C.EUC_KR=new C(v.EUC_KR,30,"EUC_KR","EUC-KR");class A extends c{}A.kind="UnsupportedOperationException";class x{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!x.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof C?e:C.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(x.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(C.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(C.UTF8)||e.equals(C.ISO8859_1)||e.equals(C.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class I{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return x.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(E.CHARACTER_SET))return t.get(E.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,o=!0,a=0,s=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,g=0,m=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let w=0;w<n&&(r||i||o);w++){const t=255&e[w];o&&(a>0?0===(128&t)?o=!1:a--:0!==(128&t)&&(0===(64&t)?o=!1:(a++,0===(32&t)?s++:(a++,0===(16&t)?l++:(a++,0===(8&t)?c++:o=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&m++),i&&(u>0?t<64||127===t||t>252?i=!1:u--:128===t||160===t||t>239?i=!1:t>160&&t<224?(d++,f=0,h++,h>p&&(p=h)):t>127?(u++,h=0,f++,f>g&&(g=f)):(h=0,f=0))}return o&&a>0&&(o=!1),i&&u>0&&(i=!1),o&&(y||s+l+c>0)?I.UTF8:i&&(I.ASSUME_SHIFT_JIS||p>=3||g>=3)?I.SHIFT_JIS:r&&i?2===p&&2===d||10*m>=n?I.SHIFT_JIS:I.ISO88591:r?I.ISO88591:i?I.SHIFT_JIS:o?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function o(e,t,r,o,a,s){if("%%"===e)return"%";if(void 0===n[++i])return;e=o?parseInt(o.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=n[i];break;case"c":l=n[i][0];break;case"f":l=parseFloat(n[i]).toFixed(e);break;case"p":l=parseFloat(n[i]).toPrecision(e);break;case"e":l=parseFloat(n[i]).toExponential(e);break;case"x":l=parseInt(n[i]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[i],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(r),d=r&&r[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+d:d+l;return l}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)}static getBytes(e,t){return x.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}I.SHIFT_JIS=C.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=C.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=C.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=I.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class R{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new R(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new d("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,o=0,a=-1,s=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new d("row lengths do not match");o=i,s++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else{if(e.substring(l,l+n.length)!==n)throw new d("illegal character encountered: "+e.substring(l));l+=n.length,r[i]=!1,i++}if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new d("row lengths do not match");s++}const c=new R(a,s);for(let u=0;u<i;u++)r[u]&&c.set(Math.floor(u%a),Math.floor(u/a));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new _(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*n,a=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[o+e]^=a[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(r<1||n<1)throw new d("Height and width must be at least 1");const i=e+n,o=t+r;if(o>this.height||i>this.width)throw new d("The region must fit inside the matrix");const a=this.rowSize,s=this.bits;for(let l=t;l<o;l++){const t=l*a;for(let n=e;n<i;n++)s[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new _(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(32*o,r[i+o]);return t}setRow(e,t){g.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new _(e),r=new _(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,o=t,a=-1,s=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<o&&(o=l),l>s&&(s=l),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>a){let n=31;for(;t>>>n===0;)n--;32*e+n>a&&(a=32*e+n)}}}return a<i||s<o?null:Int32Array.from([i,o,a-i+1,s-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const o=t[n];let a=0;for(;0===(o<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const o=t[n];let a=31;for(;o>>>a===0;)a--;return i+=a,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof R))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&w.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+w.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new T;for(let i=0,o=this.height;i<o;i++){for(let n=0,o=this.width;n<o;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new R(this.width,this.height,this.rowSize,this.bits.slice())}}class k extends c{static getNotFoundInstance(){return new k}}k.kind="NotFoundException";class P extends p{constructor(e){super(e),this.luminances=P.EMPTY,this.buckets=new Int32Array(P.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new _(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),o=this.buckets;for(let s=0;s<r;s++)o[(255&i[s])>>P.LUMINANCE_SHIFT]++;const a=P.estimateBlackPoint(o);if(r<3)for(let s=0;s<r;s++)(255&i[s])<a&&t.set(s);else{let e=255&i[0],n=255&i[1];for(let o=1;o<r-1;o++){const r=255&i[o+1];(4*n-e-r)/2<a&&t.set(o),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new R(t,n);this.initArrays(t);const i=this.buckets;for(let s=1;s<5;s++){const r=Math.floor(n*s/5),o=e.getRow(r,this.luminances),a=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<a;e++)i[(255&o[e])>>P.LUMINANCE_SHIFT]++}const o=P.estimateBlackPoint(i),a=e.getMatrix();for(let s=0;s<n;s++){const e=s*t;for(let n=0;n<t;n++)(255&a[e+n])<o&&r.set(n,s)}return r}createBinarizer(e){return new P(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<P.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(r=c,i=e[c]),e[c]>n&&(n=e[c]);let o=0,a=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>a&&(o=c,a=n)}if(r>o){const e=r;r=o,o=e}if(o-r<=t/16)throw new k;let s=o-1,l=-1;for(let c=o-1;c>r;c--){const t=c-r,i=t*t*(o-c)*(n-e[c]);i>l&&(s=c,l=i)}return s<<P.LUMINANCE_SHIFT}}P.LUMINANCE_BITS=5,P.LUMINANCE_SHIFT=8-P.LUMINANCE_BITS,P.LUMINANCE_BUCKETS=1<<P.LUMINANCE_BITS,P.EMPTY=Uint8ClampedArray.from([0]);class N extends P{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=N.MINIMUM_DIMENSION&&n>=N.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>N.BLOCK_SIZE_POWER;0!==(t&N.BLOCK_SIZE_MASK)&&i++;let o=n>>N.BLOCK_SIZE_POWER;0!==(n&N.BLOCK_SIZE_MASK)&&o++;const a=N.calculateBlackPoints(r,i,o,t,n),s=new R(t,n);N.calculateThresholdForBlock(r,i,o,t,n,a,s),this.matrix=s}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new N(e)}static calculateThresholdForBlock(e,t,n,r,i,o,a){const s=i-N.BLOCK_SIZE,l=r-N.BLOCK_SIZE;for(let c=0;c<n;c++){let i=c<<N.BLOCK_SIZE_POWER;i>s&&(i=s);const u=N.cap(c,2,n-3);for(let n=0;n<t;n++){let s=n<<N.BLOCK_SIZE_POWER;s>l&&(s=l);const c=N.cap(n,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=o[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;N.thresholdBlock(e,s,i,h,r,a)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let a=0,s=n*i+t;a<N.BLOCK_SIZE;a++,s+=i)for(let i=0;i<N.BLOCK_SIZE;i++)(255&e[s+i])<=r&&o.set(t+i,n+a)}static calculateBlackPoints(e,t,n,r,i){const o=i-N.BLOCK_SIZE,a=r-N.BLOCK_SIZE,s=new Array(n);for(let l=0;l<n;l++){s[l]=new Int32Array(t);let n=l<<N.BLOCK_SIZE_POWER;n>o&&(n=o);for(let i=0;i<t;i++){let t=i<<N.BLOCK_SIZE_POWER;t>a&&(t=a);let o=0,c=255,u=0;for(let i=0,a=n*r+t;i<N.BLOCK_SIZE;i++,a+=r){for(let t=0;t<N.BLOCK_SIZE;t++){const n=255&e[a+t];o+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>N.MIN_DYNAMIC_RANGE)for(i++,a+=r;i<N.BLOCK_SIZE;i++,a+=r)for(let t=0;t<N.BLOCK_SIZE;t++)o+=255&e[a+t]}let d=o>>2*N.BLOCK_SIZE_POWER;if(u-c<=N.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&i>0)){const e=(s[l-1][i]+2*s[l][i-1]+s[l-1][i-1])/4;c<e&&(d=e)}s[l][i]=d}}return s}}N.BLOCK_SIZE_POWER=3,N.BLOCK_SIZE=1<<N.BLOCK_SIZE_POWER,N.BLOCK_SIZE_MASK=N.BLOCK_SIZE-1,N.MINIMUM_DIMENSION=5*N.BLOCK_SIZE,N.MIN_DYNAMIC_RANGE=24;class D{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new A("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new A("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new A("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new T;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class O extends D{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new O(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class M extends D{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=M.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return M.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,o=0,a=e.length;i<a;i+=4,o++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[o]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*M.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),s=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=a,t.height=s,n.translate(a/2,s/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=M.makeBufferFromCanvasImageData(t),this}invert(){return new O(this)}}M.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var j,F=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){e.done?n(e.value):i(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())})};class B{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return F(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return F(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new L(e.deviceId,e.label))})}findDeviceById(e){return F(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return F(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return F(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return F(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return F(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return F(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return F(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return F(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return F(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return F(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return F(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new u("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new u("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return F(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return F(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode)return o(new k("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(a){if(t&&a instanceof k||(a instanceof f||a instanceof S)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(a)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof S||r instanceof k)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new M(t),r=new N(n);return new h(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?g.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);g.arraycopy(t,0,n,0,t.length),g.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(j||(j={}));var z,H=j;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var W,V,Y,G,q,X,Q=z;class Z{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class K{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class J{constructor(e,t){if(0===t.length)throw new d;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=K.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let o=1;o<r;o++)n=K.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=K.addOrSubtract(t[o-i],n[o]);return new J(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),a=this.field;for(let s=0;s<n;s++){const e=t[s];for(let t=0;t<i;t++)o[s+t]=K.addOrSubtract(o[s+t],a.multiply(e,r[t]))}return new J(a,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new J(n,r)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let a=0;a<r;a++)i[a]=o.multiply(n[a],t);return new J(o,i)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),o),s=e.multiplyByMonomial(i,a),l=t.buildMonomial(i,a);n=n.addOrSubtract(l),r=r.addOrSubtract(s)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class $ extends c{}$.kind="ArithmeticException";class ee extends K{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let a=0;a<t;a++)r[a]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const o=new Int32Array(t);for(let a=0;a<t-1;a++)o[r[a]]=a;this.logTable=o,this.zero=new J(this,Int32Array.from([0])),this.one=new J(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new J(this,n)}inverse(e){if(0===e)throw new $;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new J(n,e),i=new Int32Array(t);let o=!0;for(let h=0;h<t;h++){const e=r.evaluateAt(n.exp(h+n.getGeneratorBase()));i[i.length-1-h]=e,0!==e&&(o=!1)}if(o)return;const a=new J(n,i),s=this.runEuclideanAlgorithm(n.buildMonomial(t,1),a,t),l=s[0],c=s[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-n.log(u[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,o=t,a=r.getZero(),s=r.getOne();for(;o.getDegree()>=(n/2|0);){let e=i,t=a;if(i=o,a=s,i.isZero())throw new te("r_{i-1} was zero");o=e;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),c=r.inverse(l);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const e=o.getDegree()-i.getDegree(),t=r.multiply(o.getCoefficient(o.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(s=n.multiply(a).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=s.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[s.multiplyScalar(c),o.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const a=i.inverse(t[o]);let s=1;for(let e=0;e<n;e++)if(o!==e){const n=i.multiply(t[e],a),r=0===(1&n)?1|n:-2&n;s=i.multiply(s,r)}r[o]=i.multiply(e.evaluateAt(a),i.inverse(s)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],a))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(W||(W={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),o=ie.getEncodedData(r),a=new Z(i,o,null,null);return a.setNumBits(r.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=W.UPPER,r=W.UPPER,i="",o=0;for(;o<t;)if(r===W.BINARY){if(t-o<5)break;let a=ie.readCode(e,o,5);if(o+=5,0===a){if(t-o<11)break;a=ie.readCode(e,o,11)+31,o+=11}for(let n=0;n<a;n++){if(t-o<8){o=t;break}const n=ie.readCode(e,o,8);i+=I.castAsNonUtf8Char(n),o+=8}r=n}else{let a=r===W.DIGIT?4:5;if(t-o<a)break;let s=ie.readCode(e,o,a);o+=a;let l=ie.getCharacter(r,s);l.startsWith("CTRL_")?(n=r,r=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return W.LOWER;case"P":return W.PUNCT;case"M":return W.MIXED;case"D":return W.DIGIT;case"B":return W.BINARY;default:return W.UPPER}}static getCharacter(e,t){switch(e){case W.UPPER:return ie.UPPER_TABLE[t];case W.LOWER:return ie.LOWER_TABLE[t];case W.MIXED:return ie.MIXED_TABLE[t];case W.PUNCT:return ie.PUNCT_TABLE[t];case W.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new S;let o=e.length%n,a=new Int32Array(i);for(let h=0;h<i;h++,o+=n)a[h]=ie.readCode(e,o,n);try{new re(t).decode(a,i-r)}catch(d){throw new S(d)}let s=(1<<n)-1,l=0;for(let h=0;h<r;h++){let e=a[h];if(0===e||e===s)throw new S;1!==e&&e!==s-1||l++}let c=new Array(r*n-l),u=0;for(let h=0;h<r;h++){let e=a[h];if(1===e||e===s-1)c.fill(e>1,u,u+n-1),u+=n-1;else for(let t=n-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let a=0;a<i.length;a++)i[a]=a;else{let e=r+1+2*b.truncDivision(b.truncDivision(r,2)-1,15),t=r/2,n=b.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+b.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let a=0,s=0;a<n;a++){let l=4*(n-a)+(t?9:12),c=2*a,u=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)o[s+n+r]=e.get(i[c+r],i[c+t]),o[s+2*l+n+r]=e.get(i[c+t],i[u-r]),o[s+4*l+n+r]=e.get(i[u-r],i[u-t]),o[s+6*l+n+r]=e.get(i[u-t],i[c+r])}s+=8*l}return o}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class ae{static floatToIntBits(e){return e}}ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof se){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ae.floatToIntBits(this.x)+ae.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,o,a;if(n>=t&&n>=r?(o=e[0],i=e[1],a=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],a=e[2]):(o=e[2],i=e[0],a=e[1]),this.crossProductZ(i,o,a)<0){const e=i;i=a,a=e}e[0]=i,e[1]=o,e[2]=a}static distance(e,t){return oe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,a=!1,s=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;o;){o=!1;let f=!0;for(;(f||!s)&&t<d;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,o=!0,s=!0):s||t++;if(t>=d){i=!0;break}let p=!0;for(;(p||!l)&&r<h;)p=this.containsBlackPoint(e,t,r,!0),p?(r++,o=!0,l=!0):l||r++;if(r>=h){i=!0;break}let g=!0;for(;(g||!c)&&e>=0;)g=this.containsBlackPoint(n,r,e,!1),g?(e--,o=!0,c=!0):c||e--;if(e<0){i=!0;break}let m=!0;for(;(m||!u)&&n>=0;)m=this.containsBlackPoint(e,t,n,!0),m?(n--,o=!0,u=!0):u||n--;if(n<0){i=!0;break}o&&(a=!0)}if(!i&&a){const i=t-e;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==o)throw new k;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==a)throw new k;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==s)throw new k;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new k;return this.centerEdges(l,o,s,a)}throw new k}getBlackPointOnSegment(e,t,n,r){const i=oe.round(oe.distance(e,t,n,r)),o=(n-e)/i,a=(r-t)/i,s=this.image;for(let l=0;l<i;l++){const n=oe.round(e+l*o),r=oe.round(t+l*a);if(s.get(n,r))return new se(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),o=e.getY(),a=t.getX(),s=t.getY(),l=n.getX(),c=n.getY(),u=r.getX(),d=r.getY(),h=ue.CORR;return i<this.width/2?[new se(u-h,d+h),new se(a+h,s+h),new se(l-h,c-h),new se(i+h,o-h)]:[new se(u+h,d+h),new se(a+h,s-h),new se(l-h,c+h),new se(i-h,o-h)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let o=e;o<=t;o++)if(i.get(o,n))return!0}else for(let o=e;o<=t;o++)if(i.get(n,o))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const e=Math.floor(t[o]),a=Math.floor(t[o+1]);if(e<-1||e>n||a<-1||a>r)throw new k;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===a?(t[o+1]=0,i=!0):a===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const e=Math.floor(t[o]),a=Math.floor(t[o+1]);if(e<-1||e>n||a<-1||a>r)throw new k;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===a?(t[o+1]=0,i=!0):a===r&&(t[o+1]=r-1,i=!0)}}}class he{constructor(e,t,n,r,i,o,a,s,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=a,this.a23=s,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,o,a,s,l,c,u,d,h,f,p,g){const m=he.quadrilateralToSquare(e,t,n,r,i,o,a,s);return he.squareToQuadrilateral(l,c,u,d,h,f,p,g).times(m)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],f=i*t+s*h+u;e[d]=(n*t+o*h+l)/f,e[d+1]=(r*t+a*h+c)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],f=t[h],p=i*d+s*f+u;e[h]=(n*d+o*f+l)/p,t[h]=(r*d+a*f+c)/p}}static squareToQuadrilateral(e,t,n,r,i,o,a,s){const l=e-n+i-a,c=t-r+o-s;if(0===l&&0===c)return new he(n-e,i-n,e,r-t,o-r,t,0,0,1);{const u=n-i,d=a-i,h=r-o,f=s-o,p=u*f-d*h,g=(l*f-d*c)/p,m=(u*c-l*h)/p;return new he(n-e+g*n,a-e+m*a,e,r-t+g*r,s-t+m*s,t,g,m,1)}}static quadrilateralToSquare(e,t,n,r,i,o,a,s){return he.squareToQuadrilateral(e,t,n,r,i,o,a,s).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends de{sampleGrid(e,t,n,r,i,o,a,s,l,c,u,d,h,f,p,g,m,y,w){const b=he.quadrilateralToQuadrilateral(r,i,o,a,s,l,c,u,d,h,f,p,g,m,y,w);return this.sampleGridWithTransform(e,t,n,b)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new k;const i=new R(t,n),o=new Float32Array(2*t);for(let s=0;s<n;s++){const t=o.length,n=s+.5;for(let e=0;e<t;e+=2)o[e]=e/2+.5,o[e+1]=n;r.transformPoints(o),de.checkAndNudgePoints(e,o);try{for(let n=0;n<t;n+=2)e.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,s)}catch(a){throw new k}}return i}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ce(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new k;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let e=n[(this.shift+o)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(b.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new k}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let l=n-1;l>=0;--l)o[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(o,i)}catch(s){throw new k}let a=0;for(let l=0;l<r;l++)a=(a<<4)+o[l];return a}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),a=this.getFirstDifferent(n,o,1,1),s=this.getFirstDifferent(r,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,a,s,l))break}t=e,n=a,r=s,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;let a=new se(t.getX()+.5,t.getY()-.5),s=new se(n.getX()+.5,n.getY()+.5),l=new se(r.getX()-.5,r.getY()+.5),c=new se(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,s,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new ue(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(a){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}let i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let a=new ue(this.image,15,i,o).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(a){e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}return i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ge(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=pe.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,s,s,l,s,l,l,s,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,a=e.getX(),s=e.getY(),l=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i;for(let u=0;u<n;u++)this.image.get(oe.round(a+u*l),oe.round(s+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new ge(e.getX()-i,e.getY()+i),t=new ge(t.getX()-i,t.getY()-i),n=new ge(n.getX()+i,n.getY()-i),r=new ge(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(0===o)return!1;let a=this.getColor(e,t);return a===o&&(a=this.getColor(t,n),a===o&&(a=this.getColor(n,r),a===o))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,a=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let d=0;d<c;d++)a+=r,s+=i,this.image.get(oe.round(a),oe.round(s))!==l&&o++;let u=o/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new ge(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new se(a+r*i,s+r*o),c=new se(a-r*i,s-r*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new se(a+r*i,s+r*o),c,new se(a-r*i,s-r*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=oe.round(e.getX()),n=oe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new me(e.getBlackMatrix()),i=null,o=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){n=c}if(null==o)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){if(null!=n)throw n;throw c}let a=new U(o.getText(),o.getRawBytes(),o.getNumBits(),i,H.AZTEC,g.currentTimeMillis()),s=o.getByteSegments();null!=s&&a.putMetadata(Q.BYTE_SEGMENTS,s);let l=o.getECLevel();return null!=l&&a.putMetadata(Q.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(E.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class we extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class be{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(E.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let o=270;null!==i&&!0===i.get(Q.ORIENTATION)&&(o+=i.get(Q.ORIENTATION)%360),r.putMetadata(Q.ORIENTATION,o);const a=r.getResultPoints();if(null!==a){const e=n.getHeight();for(let t=0;t<a.length;t++)a[t]=new se(e-a[t].getY()-1,a[t].getX())}return r}throw new k}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new _(n);const o=t&&!0===t.get(E.TRY_HARDER),a=Math.max(1,r>>(o?8:5));let s;s=o?r:15;const l=Math.trunc(r/2);for(let d=0;d<s;d++){const o=Math.trunc((d+1)/2),s=l+a*(0===(1&d)?o:-o);if(s<0||s>=r)break;try{i=e.getBlackRow(s,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(E.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(E.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(s,i,t);if(1===e){r.putMetadata(Q.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new se(n-e[0].getX()-1,e[0].getY()),e[1]=new se(n-e[1].getX()-1,e[1].getY()))}return r}catch(u){}}}throw new k}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=e.getSize();if(t>=i)throw new k;let o=!e.get(t),a=0,s=t;for(;s<i;){if(e.get(s)!==o)n[a]++;else{if(++a===r)break;n[a]=1,o=!o}s++}if(a!==r&&(a!==r-1||s!==i))throw new k}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new k;be.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,o=0;for(let l=0;l<r;l++)i+=e[l],o+=t[l];if(i<o)return Number.POSITIVE_INFINITY;const a=i/o;n*=a;let s=0;for(let l=0;l<r;l++){const r=e[l],i=t[l]*a,o=r>i?r-i:i-r;if(o>n)return Number.POSITIVE_INFINITY;s+=o}return s/i}}class _e extends be{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,a=!1;const s=6;for(let l=n;l<t;l++)if(e.get(l)!==a)i[r]++;else{if(r===s-1){let t=_e.MAX_AVG_VARIANCE,n=-1;for(let e=_e.CODE_START_A;e<=_e.CODE_START_C;e++){const r=be.patternMatchVariance(i,_e.CODE_PATTERNS[e],_e.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,n]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,a=!a}throw new k}static decodeCode(e,t,n){be.recordPattern(e,n,t);let r=_e.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<_e.CODE_PATTERNS.length;o++){const e=_e.CODE_PATTERNS[o],n=this.patternMatchVariance(t,e,_e.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=o)}if(i>=0)return i;throw new k}decodeRow(e,t,n){const r=n&&!0===n.get(E.ASSUME_GS1),i=_e.findStartPattern(t),o=i[2];let a=0;const s=new Uint8Array(20);let l;switch(s[a++]=o,o){case _e.CODE_START_A:l=_e.CODE_CODE_A;break;case _e.CODE_START_B:l=_e.CODE_CODE_B;break;case _e.CODE_START_C:l=_e.CODE_CODE_C;break;default:throw new S}let c=!1,u=!1,d="",h=i[0],p=i[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,w=o,b=0,_=!0,v=!1,C=!1;for(;!c;){const e=u;switch(u=!1,m=y,y=_e.decodeCode(t,g,p),s[a++]=y,y!==_e.CODE_STOP&&(_=!0),y!==_e.CODE_STOP&&(b++,w+=b*y),h=p,p+=g.reduce((e,t)=>e+t,0),y){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new S}switch(l){case _e.CODE_CODE_A:if(y<64)d+=C===v?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else if(y<96)d+=C===v?String.fromCharCode(y-64):String.fromCharCode(y+64),C=!1;else switch(y!==_e.CODE_STOP&&(_=!1),y){case _e.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!v&&C?(v=!0,C=!1):v&&C?(v=!1,C=!1):C=!0;break;case _e.CODE_SHIFT:u=!0,l=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:l=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:l=_e.CODE_CODE_C;break;case _e.CODE_STOP:c=!0}break;case _e.CODE_CODE_B:if(y<96)d+=C===v?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else switch(y!==_e.CODE_STOP&&(_=!1),y){case _e.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!v&&C?(v=!0,C=!1):v&&C?(v=!1,C=!1):C=!0;break;case _e.CODE_SHIFT:u=!0,l=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:l=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:l=_e.CODE_CODE_C;break;case _e.CODE_STOP:c=!0}break;case _e.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==_e.CODE_STOP&&(_=!1),y){case _e.CODE_FNC_1:r&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case _e.CODE_CODE_A:l=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:l=_e.CODE_CODE_B;break;case _e.CODE_STOP:c=!0}}e&&(l=l===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const A=p-h;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-h)/2),!1))throw new k;if(w-=b*m,w%103!==m)throw new f;const x=d.length;if(0===x)throw new k;x>0&&_&&(d=l===_e.CODE_CODE_C?d.substring(0,x-2):d.substring(0,x-1));const I=(i[1]+i[0])/2,T=h+A/2,R=s.length,P=new Uint8Array(R);for(let f=0;f<R;f++)P[f]=s[f];const N=[new se(I,e),new se(T,e)];return new U(d,P,0,N,H.CODE_128,(new Date).getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class ve extends be{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,o,a=ve.findAsteriskPattern(t,r),s=t.getNextSet(a[1]),l=t.getSize();do{ve.recordPattern(t,s,r);let e=ve.toNarrowWidePattern(r);if(e<0)throw new k;i=ve.patternToChar(e),this.decodeRowResult+=i,o=s;for(let t of r)s+=t;s=t.getNextSet(s)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let f of r)u+=f;if(s!==l&&2*(s-o-u)<u)throw new k;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=ve.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==ve.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new k;c=this.extendedMode?ve.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(a[1]+a[0])/2,h=o+u/2;return new U(c,null,0,[new se(d,e),new se(h,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,o=r,a=!1,s=t.length;for(let l=r;l<n;l++)if(e.get(l)!==a)t[i]++;else{if(i===s-1){if(this.toNarrowWidePattern(t)===ve.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new k}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let o=0,a=0;for(let s=0;s<n;s++){let i=e[s];i>r&&(a|=1<<n-1-s,t++,o+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=o))return-1}return a}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<ve.CHARACTER_ENCODINGS.length;t++)if(ve.CHARACTER_ENCODINGS[t]===e)return ve.ALPHABET_STRING.charAt(t);if(e===ve.ASTERISK_ENCODING)return"*";throw new k}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),o="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new S;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new S;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new S;o="\x7f"}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new S;o=":"}}n+=o,r++}else n+=t}return n}}ve.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ve.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ve.ASTERISK_ENCODING=148;class Ee extends be{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new T;Ee.decodeMiddle(t,r[1],i[0],o);let a=o.toString(),s=null;null!=n&&(s=n.get(E.ALLOWED_LENGTHS)),null==s&&(s=Ee.DEFAULT_ALLOWED_LENGTHS);let l=a.length,c=!1,u=0;for(let h of s){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new S;const d=[new se(r[1],e),new se(i[0],e)];return new U(a,null,0,d,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),o.fill(0),a.fill(0);t<n;){be.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],a[e]=i[t+1]}let n=Ee.decodeDigit(o);r.append(n.toString()),n=this.decodeDigit(a),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Ee.skipWhiteSpace(e),n=Ee.findGuardPattern(e,t,Ee.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new k}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new k;return n}decodeEnd(e){e.reverse();try{let n,r=Ee.skipWhiteSpace(e);try{n=Ee.findGuardPattern(e,r,Ee.END_PATTERN_REVERSED[0])}catch(t){t instanceof k&&(n=Ee.findGuardPattern(e,r,Ee.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),a=!1,s=0,l=t;i.fill(0);for(let c=t;c<o;c++)if(e.get(c)!==a)i[s]++;else{if(s===r-1){if(be.patternMatchVariance(i,n,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],g.arraycopy(i,2,i,0,s-1),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,a=!a}throw new k}static decodeDigit(e){let t=Ee.MAX_AVG_VARIANCE,n=-1,r=Ee.PATTERNS.length;for(let i=0;i<r;i++){let r=Ee.PATTERNS[i],o=be.patternMatchVariance(e,r,Ee.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,n=i):o===t&&(n=-1)}if(n>=0)return n%10;throw new k}}Ee.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ee.MAX_AVG_VARIANCE=.38,Ee.MAX_INDIVIDUAL_VARIANCE=.5,Ee.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ee.START_PATTERN=Int32Array.from([1,1,1,1]),Ee.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Se extends be{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=Se.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=t[0];r=t[1];let a=o-(r-o);a>=0&&(n=e.isRange(a,o,!1))}return t}static checkChecksum(e){return Se.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Se.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return Se.findGuardPattern(e,t,!1,Se.START_END_PATTERN,new Int32Array(Se.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize(),a=0,s=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let u=t;u<o;u++)if(e.get(u)!==c)i[a]++;else{if(a===l-1){if(be.patternMatchVariance(i,r,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return Int32Array.from([s,u]);s+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<a-1;t++)i[t]=e[t];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,c=!c}throw new k}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,a=r.length;for(let s=0;s<a;s++){let e=r[s],n=be.patternMatchVariance(t,e,Se.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,o=s)}if(o>=0)return o;throw new k}}Se.MAX_AVG_VARIANCE=.48,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.START_END_PATTERN=Int32Array.from([1,1,1]),Se.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Se.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Se.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ce{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),a=Ce.parseExtensionString(o),s=[new se((n[0]+n[1])/2,e),new se(i,e)],l=new U(o,null,0,s,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],a=0;for(let l=0;l<5&&o<i;l++){let t=Se.decodeDigit(e,r,o,Se.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<4-l),4!==l&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==n.length)throw new k;let s=this.determineCheckDigit(a);if(Ce.extensionChecksum(n.toString())!==s)throw new k;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new k}static parseExtensionString(e){if(5!==e.length)return null;let t=Ce.parseExtension5String(e);return null==t?null:new Map([[Q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ae{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),a=Ae.parseExtensionString(o),s=[new se((n[0]+n[1])/2,e),new se(i,e)],l=new U(o,null,0,s,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],a=0;for(let s=0;s<2&&o<i;s++){let t=Se.decodeDigit(e,r,o,Se.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<1-s),1!==s&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==n.length)throw new k;if(parseInt(n.toString())%4!==a)throw new k;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[Q.ISSUE_NUMBER,parseInt(e)]])}}class xe{static decodeRow(e,t,n){let r=Se.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ce).decodeRow(e,t,r)}catch(i){return(new Ae).decodeRow(e,t,r)}}}xe.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ie extends Se{constructor(){super(),this.decodeRowStringBuffer="",Ie.L_AND_G_PATTERNS=Ie.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ie.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Ie.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ie.findStartGuardPattern(t),i=null==n?null:n.get(E.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new se((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),a=o.rowOffset,s=o.resultString;if(null!=i){const t=new se(a,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=i){const t=new se((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new k;let d=s.toString();if(d.length<8)throw new S;if(!Ie.checkChecksum(d))throw new f;let h=(r[1]+r[0])/2,p=(l[1]+l[0])/2,g=this.getBarcodeFormat(),m=[new se(h,e),new se(p,e)],y=new U(d,null,0,m,g,(new Date).getTime()),w=0;try{let n=xe.decodeRow(e,t,l[1]);y.putMetadata(Q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),w=n.getText().length}catch(_){}let b=null==n?null:n.get(E.ALLOWED_EAN_EXTENSIONS);if(null!=b){let e=!1;for(let t in b)if(w.toString()===t){e=!0;break}if(!e)throw new k}return y}decodeEnd(e,t){return Ie.findGuardPattern(e,t,!1,Ie.START_END_PATTERN,new Int32Array(Ie.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ie.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ie.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new S;n+=t}return(1e3-n)%10}}class Te extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],a=0;for(let s=0;s<6&&o<i;s++){let t=Ie.decodeDigit(e,r,o,Ie.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<5-s)}n=Te.determineFirstDigit(n,a),o=Ie.findGuardPattern(e,o,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<6&&o<i;s++){let t=Ie.decodeDigit(e,r,o,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new k}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Re extends Ie{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let a=0;a<4&&o<i;a++){let t=Ie.decodeDigit(e,r,o,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}o=Ie.findGuardPattern(e,o,!0,Ie.MIDDLE_PATTERN,new Int32Array(Ie.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&o<i;a++){let t=Ie.decodeDigit(e,r,o,Ie.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class ke extends Ie{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new U(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new k}reset(){this.ean13Reader.reset()}}class Pe extends Ie{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let o=t[1],a=0;for(let s=0;s<6&&o<i;s++){const t=Pe.decodeDigit(e,r,o,Pe.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<5-s)}return{rowOffset:o,resultString:Pe.determineNumSysAndCheckDigit(n,a)}}decodeEnd(e,t){return Pe.findGuardPatternWithoutCounters(e,t,!0,Pe.MIDDLE_END_PATTERN)}checkChecksum(e){return Ie.checkChecksum(Pe.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw k.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new T;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Pe.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pe.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ne extends be{constructor(e){super();let n=null==e?null:e.get(E.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Te),r.push(new ke),r.push(new Re),r.push(new Pe)):(n.indexOf(H.EAN_13)>-1&&r.push(new Te),n.indexOf(H.UPC_A)>-1&&r.push(new ke),n.indexOf(H.EAN_8)>-1&&r.push(new Re),n.indexOf(H.UPC_E)>-1&&r.push(new Pe)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),o=r.getBarcodeFormat()===H.EAN_13&&"0"===r.getText().charAt(0),a=null==n?null:n.get(E.POSSIBLE_FORMATS),s=null==a||a.includes(H.UPC_A);if(o&&s){const e=r.getRawBytes(),t=new U(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),H.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new k}reset(){for(let e of this.readers)e.reset()}}class De extends be{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(be.patternMatchVariance(e,t[n],De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return n;throw new k}static count(e){return oe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=De.MIN_FINDER_PATTERN_RATIO&&n<=De.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}De.MAX_AVG_VARIANCE=.2,De.MAX_INDIVIDUAL_VARIANCE=.45,De.MIN_FINDER_PATTERN_RATIO=9.5/12,De.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Me{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new se(n,i)),this.resultPoints.push(new se(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Me))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Le{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let s of e)r+=s;let i=0,o=0,a=e.length;for(let s=0;s<a-1;s++){let l;for(l=1,o|=1<<s;l<e[s];l++,o&=~(1<<s)){let e=Le.combins(r-l-1,a-s-2);if(n&&0===o&&r-l-(a-s-1)>=a-s-1&&(e-=Le.combins(r-l-(a-s),a-s-2)),a-s-1>1){let n=0;for(let e=r-l-(a-s-2);e>t;e--)n+=Le.combins(r-l-e-1,a-s-3);e-=n*(a-1-s)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let a=e;a>n;a--)i*=a,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class je{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new _(12*t),r=0,i=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)0!=(i&1<<o)&&n.set(r),r++;for(let o=1;o<e.length;++o){let t=e[o],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Fe{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Be{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ue extends Be{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ue.FNC1}}Ue.FNC1="$";class ze extends Be{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Be{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new S;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class We{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new k;let t=e.substring(0,2);for(let i of We.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(2,i[2],e):We.processFixedAI(2,i[1],e);if(e.length<3)throw new k;let n=e.substring(0,3);for(let i of We.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(3,i[2],e):We.processFixedAI(3,i[1],e);for(let i of We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,i[2],e):We.processFixedAI(4,i[1],e);if(e.length<4)throw new k;let r=e.substring(0,4);for(let i of We.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,i[2],e):We.processFixedAI(4,i[1],e);throw new k}static processFixedAI(e,t,n){if(n.length<e)throw new k;let r=n.substring(0,e);if(n.length<e+t)throw new k;let i=n.substring(e,e+t),o=n.substring(e+t),a="("+r+")"+i,s=We.parseFieldsInGeneralPurpose(o);return null==s?a:a+s}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let o=n.substring(e,r),a=n.substring(r),s="("+i+")"+o,l=We.parseFieldsInGeneralPurpose(a);return null==l?s:s+l}}We.VARIABLE_LENGTH=[],We.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",We.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",We.VARIABLE_LENGTH,20],["22",We.VARIABLE_LENGTH,29],["30",We.VARIABLE_LENGTH,8],["37",We.VARIABLE_LENGTH,8],["90",We.VARIABLE_LENGTH,30],["91",We.VARIABLE_LENGTH,30],["92",We.VARIABLE_LENGTH,30],["93",We.VARIABLE_LENGTH,30],["94",We.VARIABLE_LENGTH,30],["95",We.VARIABLE_LENGTH,30],["96",We.VARIABLE_LENGTH,30],["97",We.VARIABLE_LENGTH,3],["98",We.VARIABLE_LENGTH,30],["99",We.VARIABLE_LENGTH,30]],We.THREE_DIGIT_DATA_LENGTH=[["240",We.VARIABLE_LENGTH,30],["241",We.VARIABLE_LENGTH,30],["242",We.VARIABLE_LENGTH,6],["250",We.VARIABLE_LENGTH,30],["251",We.VARIABLE_LENGTH,30],["253",We.VARIABLE_LENGTH,17],["254",We.VARIABLE_LENGTH,20],["400",We.VARIABLE_LENGTH,30],["401",We.VARIABLE_LENGTH,30],["402",17],["403",We.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",We.VARIABLE_LENGTH,20],["421",We.VARIABLE_LENGTH,15],["422",3],["423",We.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",We.VARIABLE_LENGTH,15],["391",We.VARIABLE_LENGTH,18],["392",We.VARIABLE_LENGTH,15],["393",We.VARIABLE_LENGTH,18],["703",We.VARIABLE_LENGTH,30]],We.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",We.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",We.VARIABLE_LENGTH,20],["8003",We.VARIABLE_LENGTH,30],["8004",We.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",We.VARIABLE_LENGTH,30],["8008",We.VARIABLE_LENGTH,12],["8018",18],["8020",We.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",We.VARIABLE_LENGTH,70],["8200",We.VARIABLE_LENGTH,70]];class Ve{constructor(e){this.buffer=new T,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=We.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return Ve.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new ze(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ze(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new ze(this.current.getPosition(),this.buffer.toString()):new ze(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Fe(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fe(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fe(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Fe(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fe(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ue(e+7,""+(r+1));if(r>=90&&r<116)return new Ue(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new S}return new Ue(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ue(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new Ue(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ye{constructor(e){this.information=e,this.generalDecoder=new Ve(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ge extends Ye{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ge.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}Ge.GTIN_SIZE=40;class qe extends Ge{constructor(e){super(e)}parseInformation(){let e=new T;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(qe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,qe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,qe.HEADER_SIZE+44)}}qe.HEADER_SIZE=4;class Xe extends Ye{constructor(e){super(e)}parseInformation(){let e=new T;return this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE)}}Xe.HEADER_SIZE=5;class Qe extends Ge{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let a=0;a<5;++a)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Ze extends Qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ze.HEADER_SIZE+Qe.GTIN_SIZE+Ze.WEIGHT_SIZE)throw new k;let e=new T;return this.encodeCompressedGtin(e,Ze.HEADER_SIZE),this.encodeCompressedWeight(e,Ze.HEADER_SIZE+Qe.GTIN_SIZE,Ze.WEIGHT_SIZE),e.toString()}}Ze.HEADER_SIZE=5,Ze.WEIGHT_SIZE=15;class Ke extends Ze{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Je extends Ze{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class $e extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new T;this.encodeCompressedGtin(e,$e.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+Ge.GTIN_SIZE,$e.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+Ge.GTIN_SIZE+$e.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2;class et extends Ge{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ge.GTIN_SIZE)throw new k;let e=new T;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ge.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends Qe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new k;let e=new T;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new qe(e);if(!e.get(2))return new Xe(e);switch(Ve.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ke(e);case 5:return new Je(e)}switch(Ve.extractNumericValueFromBitArray(e,1,5)){case 12:return new $e(e);case 13:return new et(e)}switch(Ve.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class ot extends De{constructor(e){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof k){if(!this.pairs.length)throw new k;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new k}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new k}static isValidSequence(e){for(let t of ot.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(je.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new U(t,null,null,i,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let e=this.pairs.get(o);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let o=!0,a=-1;do{this.findNextPair(e,t,a),r=this.parseFoundFinderPattern(e,n,i),null==r?a=ot.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);let s,l=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new k;try{s=this.decodeDataCharacter(e,r,i,!1)}catch(c){s=null,this.verbose&&console.log(c)}return new rt(l,s,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,o=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let s=!1;for(;i<o&&(s=!e.get(i),s);)i++;let l=0,c=i;for(let u=i;u<o;u++)if(e.get(u)!=s)r[l]++;else{if(3==l){if(a&&ot.reverseCounters(r),ot.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);a&&ot.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,s=!s}throw new k}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let a,s=this.getDecodeFinderCounters();g.arraycopy(s,0,s,1,s.length-1),s[0]=r;try{a=this.parseFinderValue(s,ot.FINDER_PATTERNS)}catch(l){return null}return new Me(a,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let C=0;C<i.length;C++)i[C]=0;if(r)ot.recordPatternInReverse(e,t.getStartEnd()[0],i);else{ot.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let o=17,a=oe.sum(new Int32Array(i))/o,s=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-s)/s>.3)throw new k;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let C=0;C<i.length;C++){let e=1*i[C]/a,t=e+.5;if(t<1){if(e<.3)throw new k;t=1}else if(t>8){if(e>8.7)throw new k;t=8}let n=C/2;0==(1&C)?(l[n]=t,u[n]=e-t):(c[n]=t,d[n]=e-t)}this.adjustOddEvenCounts(o);let h=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let C=l.length-1;C>=0;C--){if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[h][2*C];p+=l[C]*e}f+=l[C]}let g=0;for(let C=c.length-1;C>=0;C--)if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[h][2*C+1];g+=c[C]*e}let m=p+g;if(0!=(1&f)||f>13||f<4)throw new k;let y=(13-f)/2,w=ot.SYMBOL_WIDEST[y],b=9-w,_=Le.getRSSvalue(l,w,!0),v=Le.getRSSvalue(c,b,!1),E=ot.EVEN_TOTAL_SUBSET[y],S=ot.GSUM[y];return new Oe(_*E+v+S,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=oe.sum(new Int32Array(this.getOddCounts())),n=oe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);let s=t+n-e,l=1==(1&t),c=0==(1&n);if(1==s)if(l){if(c)throw new k;i=!0}else{if(!c)throw new k;a=!0}else if(-1==s)if(l){if(c)throw new k;r=!0}else{if(!c)throw new k;o=!0}else{if(0!=s)throw new k;if(l){if(!c)throw new k;t<n?(r=!0,a=!0):(i=!0,o=!0)}else if(c)throw new k}if(r){if(i)throw new k;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new k;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class at extends Oe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends De{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);st.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);st.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&st.checkChecksum(o,e))return st.constructResult(o,e);throw new k}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new T;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let o=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&l)?3*e:e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let a=e.getFinderPattern().getResultPoints(),s=t.getFinderPattern().getResultPoints();return new U(i.toString(),null,0,[a[0],a[1],s[0],s[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),a=null==r?null:r.get(E.NEED_RESULT_POINT_CALLBACK);if(null!=a){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),a.foundPossibleResultPoint(new se(r,n))}let s=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new at(1597*s.getValue()+l.getValue(),s.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let g=0;g<r.length;g++)r[g]=0;if(n)be.recordPatternInReverse(e,t.getStartEnd()[0],r);else{be.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,o=oe.sum(new Int32Array(r))/i,a=this.getOddCounts(),s=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let g=0;g<r.length;g++){let e=r[g]/o,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(g/2);0===(1&g)?(a[n]=t,l[n]=e-t):(s[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,i);let u=0,d=0;for(let g=a.length-1;g>=0;g--)d*=9,d+=a[g],u+=a[g];let h=0,f=0;for(let g=s.length-1;g>=0;g--)h*=9,h+=s[g],f+=s[g];let p=d+3*h;if(n){if(0!==(1&u)||u>12||u<4)throw new k;let e=(12-u)/2,t=st.OUTSIDE_ODD_WIDEST[e],n=9-t,r=Le.getRSSvalue(a,t,!1),i=Le.getRSSvalue(s,n,!0),o=st.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=st.OUTSIDE_GSUM[e];return new Oe(r*o+i+l,p)}{if(0!==(1&f)||f>10||f<4)throw new k;let e=(10-f)/2,t=st.INSIDE_ODD_WIDEST[e],n=9-t,r=Le.getRSSvalue(a,t,!0),i=Le.getRSSvalue(s,n,!1),o=st.INSIDE_ODD_TOTAL_SUBSET[e],l=st.INSIDE_GSUM[e];return new Oe(i*o+r+l,p)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let a=0,s=o;for(let l=o;l<r;l++)if(e.get(l)!==i)n[a]++;else{if(3===a){if(De.isFinderPattern(n))return[s,l];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new k}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const a=r[0]-o,s=this.getDecodeFinderCounters(),l=new Int32Array(s.length);g.arraycopy(s,0,l,1,s.length-1),l[0]=a;const c=this.parseFinderValue(l,st.FINDER_PATTERNS);let u=o,d=r[1];return n&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new Me(c,[o,r[1]],u,d,t)}adjustOddEvenCounts(e,t){let n=oe.sum(new Int32Array(this.getOddCounts())),r=oe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,a=!1,s=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?s=!0:r<4&&(a=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?s=!0:r<4&&(a=!0));let l=n+r-t,c=(1&n)===(e?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new k;o=!0}else{if(!u)throw new k;s=!0}else if(-1===l)if(c){if(u)throw new k;i=!0}else{if(!u)throw new k;a=!0}else{if(0!==l)throw new k;if(c){if(!u)throw new k;n<r?(i=!0,s=!0):(o=!0,a=!0)}else if(u)throw new k}if(i){if(o)throw new k;De.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&De.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new k;De.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&De.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends be{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(E.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(E.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new Ne(e)),n.includes(H.CODE_39)&&this.readers.push(new ve(r)),n.includes(H.CODE_128)&&this.readers.push(new _e),n.includes(H.ITF)&&this.readers.push(new Ee),n.includes(H.RSS_14)&&this.readers.push(new st),n.includes(H.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new Ne(e)),this.readers.push(new ve),this.readers.push(new Ne(e)),this.readers.push(new _e),this.readers.push(new Ee),this.readers.push(new st),this.readers.push(new ot(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new k}reset(){this.readers.forEach(e=>e.reset())}}class ct extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let a=0;const s=o.getECCodewords(),l=o.getECBlocks();for(let c of l)a+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new S;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new S}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new S;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new R(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let a=!1,s=!1,l=!1,c=!1;do{if(n!==i||0!==r||a)if(n!==i-2||0!==r||0===(3&o)||s)if(n!==i+4||2!==r||0!==(7&o)||l)if(n!==i-2||0!==r||4!==(7&o)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,o),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(i,o),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,o),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(i,o),n-=2,r+=2,a=!0}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new S;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,a=n/i|0,s=new R(a*i,o*r);for(let l=0;l<o;++l){const t=l*r;for(let n=0;n<a;++n){const o=n*i;for(let a=0;a<r;++a){const c=l*(r+2)+1+a,u=t+a;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,c)){const e=o+t;s.set(e,u)}}}}}return s}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let d of i)r+=d.getCount();const o=new Array(r);let a=0;for(let d of i)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewords()+e;o[a++]=new pt(e,new Uint8Array(t))}const s=o[0].codewords.length-n.getECCodewords(),l=s-1;let c=0;for(let d=0;d<l;d++)for(let t=0;t<a;t++)o[t].codewords[d]=e[c++];const u=24===t.getVersionNumber(),h=u?8:a;for(let d=0;d<h;d++)o[d].codewords[s-1]=e[c++];const f=o[0].codewords.length;for(let d=s;d<f;d++)for(let t=0;t<a;t++){const n=u?(t+8)%a:t,r=u&&n>7?d-1:d;o[n].codewords[r]=e[c++]}if(c!==e.length)throw new d;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,a=e<o?e:o,s=o-a,l=255>>8-a<<s;t=(i[r]&l)>>s,e-=a,n+=a,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const o=8-e,a=255>>o<<o;t=t<<e|(i[r]&a)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(V||(V={}));class mt{static decode(e){const t=new gt(e),n=new T,r=new T,i=new Array;let o=V.ASCII_ENCODE;do{if(o===V.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case V.C40_ENCODE:this.decodeC40Segment(t,n);break;case V.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case V.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case V.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case V.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new S}o=V.ASCII_ENCODE}}while(o!==V.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Z(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new S;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),V.ASCII_ENCODE;if(129===i)return V.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return V.C40_ENCODE;case 231:return V.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return V.ANSIX12_ENCODE;case 239:return V.TEXT_ENCODE;case 240:return V.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new S}}while(e.available()>0);return V.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new S;{const e=this.C40_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new S}i=0;break;case 3:n?(t.append(String.fromCharCode(o+224)),n=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new S}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new S;{const e=this.TEXT_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new S}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new S;{const e=this.TEXT_SHIFT3_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new S}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new S;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let o;if(o=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new S;const a=new Uint8Array(o);for(let l=0;l<o;l++){if(e.available()<8)throw new S;a[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(a);try{t.append(x.decode(a,I.ISO88591))}catch(s){throw new ne("Platform does not support required encoding: "+s.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),i=pt.getDataBlocks(r,n);let o=0;for(let l of i)o+=l.getNumDataCodewords();const a=new Uint8Array(o),s=i.length;for(let l=0;l<s;l++){const e=i[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)a[r*s+l]=t[r]}return mt.decode(a)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class wt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new k;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],o=t[3];let a=this.transitionsBetween(n,o)+1,s=this.transitionsBetween(i,o)+1;1===(1&a)&&(a+=1),1===(1&s)&&(s+=1),4*a<7*s&&4*s<7*a&&(a=s=Math.max(a,s));let l=wt.sampleGrid(this.image,n,r,i,o,a,s);return new le(l,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new se(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new se(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),c=o,u=[i,t,n,r];return c>a&&(c=a,u[0]=t,u[1]=n,u[2]=r,u[3]=i),c>s&&(c=s,u[0]=n,u[1]=r,u[2]=i,u[3]=t),c>l&&(u[0]=r,u[1]=i,u[2]=t,u[3]=n),u}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),a=wt.shiftPoint(n,r,4*(o+1)),s=wt.shiftPoint(r,n,4*(o+1));return this.transitionsBetween(a,t)<this.transitionsBetween(s,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),a=this.transitionsBetween(n,i),s=wt.shiftPoint(t,n,4*(a+1)),l=wt.shiftPoint(r,n,4*(o+1));o=this.transitionsBetween(s,i),a=this.transitionsBetween(l,i);let c=new se(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),u=new se(i.getX()+(t.getX()-n.getX())/(a+1),i.getY()+(t.getY()-n.getY())/(a+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(s,c)+this.transitionsBetween(l,c)>this.transitionsBetween(s,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,a=this.transitionsBetween(r,i)+1,s=wt.shiftPoint(t,n,4*a),l=wt.shiftPoint(r,n,4*o);o=this.transitionsBetween(s,i)+1,a=this.transitionsBetween(l,i)+1,1===(1&o)&&(o+=1),1===(1&a)&&(a+=1);let c,u,d=(t.getX()+n.getX()+r.getX()+i.getX())/4,h=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=wt.moveAway(t,d,h),n=wt.moveAway(n,d,h),r=wt.moveAway(r,d,h),i=wt.moveAway(i,d,h),s=wt.shiftPoint(t,n,4*a),s=wt.shiftPoint(s,i,4*o),c=wt.shiftPoint(n,t,4*a),c=wt.shiftPoint(c,r,4*o),l=wt.shiftPoint(r,i,4*a),l=wt.shiftPoint(l,n,4*o),u=wt.shiftPoint(i,r,4*a),u=wt.shiftPoint(u,t,4*o),[s,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,a){return pe.getInstance().sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-r)>Math.abs(i-n);if(a){let e=n;n=r,r=e,e=i,i=o,o=e}let s=Math.abs(i-n),l=Math.abs(o-r),c=-s/2,u=r<o?1:-1,d=n<i?1:-1,h=0,f=this.image.get(a?r:n,a?n:r);for(let p=n,g=r;p!==i;p+=d){let e=this.image.get(a?g:p,a?p:g);if(e!==f&&(h++,f=e),c+=l,c>0){if(g===o)break;g+=u,c-=s}}return h}}class bt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(E.PURE_BARCODE)){const r=bt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=bt.NO_POINTS}else{const r=new wt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),o=new U(t.getText(),i,8*i.length,n,H.DATA_MATRIX,g.currentTimeMillis()),a=t.getByteSegments();null!=a&&o.putMetadata(Q.BYTE_SEGMENTS,a);const s=t.getECLevel();return null!=s&&o.putMetadata(Q.ERROR_CORRECTION_LEVEL,s),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new k;const r=this.moduleSize(t,e);let i=t[1];const o=n[1];let a=t[0];const s=(n[0]-a+1)/r,l=(o-i+1)/r;if(s<=0||l<=0)throw new k;const c=r/2;i+=c,a+=c;const u=new R(s,l);for(let d=0;d<l;d++){const t=i+d*r;for(let n=0;n<s;n++)e.get(a+n*r,t)&&u.set(n,d)}return u}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new k;const o=r-e[0];if(0===o)throw new k;return o}}bt.NO_POINTS=[];class _t extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new bt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(Y||(Y={}));class vt{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,vt.FOR_BITS.set(n,this),vt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return vt.L;case"M":return vt.M;case"Q":return vt.Q;case"H":return vt.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof vt))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=vt.FOR_BITS.size)throw new d;return vt.FOR_BITS.get(e)}}vt.FOR_BITS=new Map,vt.FOR_VALUE=new Map,vt.L=new vt(Y.L,"L",1),vt.M=new vt(Y.M,"M",0),vt.Q=new vt(Y.Q,"Q",3),vt.H=new vt(Y.H,"H",2);class Et{constructor(e){this.errorCorrectionLevel=vt.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return b.bitCount(e^t)}static decodeFormatInformation(e,t){const n=Et.doDecodeFormatInformation(e,t);return null!==n?n:Et.doDecodeFormatInformation(e^Et.FORMAT_INFO_MASK_QR,t^Et.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of Et.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new Et(i[1]);let a=Et.numBitsDiffering(e,o);a<n&&(r=i[1],n=a),e!==t&&(a=Et.numBitsDiffering(t,o),a<n&&(r=i[1],n=a))}return n<=3?new Et(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Et))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Et.FORMAT_INFO_MASK_QR=21522,Et.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class St{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ct{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class At{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let o=0;const a=r[0].getECCodewordsPerBlock(),s=r[0].getECBlocks();for(const l of s)o+=l.getCount()*(l.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new S;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new S}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return At.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<At.VERSION_DECODE_INFO.length;r++){const i=At.VERSION_DECODE_INFO[r];if(i===e)return At.getVersionForNumber(r+7);const o=Et.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?At.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new R(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}At.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),At.VERSIONS=[new At(1,new Int32Array(0),new St(7,new Ct(1,19)),new St(10,new Ct(1,16)),new St(13,new Ct(1,13)),new St(17,new Ct(1,9))),new At(2,Int32Array.from([6,18]),new St(10,new Ct(1,34)),new St(16,new Ct(1,28)),new St(22,new Ct(1,22)),new St(28,new Ct(1,16))),new At(3,Int32Array.from([6,22]),new St(15,new Ct(1,55)),new St(26,new Ct(1,44)),new St(18,new Ct(2,17)),new St(22,new Ct(2,13))),new At(4,Int32Array.from([6,26]),new St(20,new Ct(1,80)),new St(18,new Ct(2,32)),new St(26,new Ct(2,24)),new St(16,new Ct(4,9))),new At(5,Int32Array.from([6,30]),new St(26,new Ct(1,108)),new St(24,new Ct(2,43)),new St(18,new Ct(2,15),new Ct(2,16)),new St(22,new Ct(2,11),new Ct(2,12))),new At(6,Int32Array.from([6,34]),new St(18,new Ct(2,68)),new St(16,new Ct(4,27)),new St(24,new Ct(4,19)),new St(28,new Ct(4,15))),new At(7,Int32Array.from([6,22,38]),new St(20,new Ct(2,78)),new St(18,new Ct(4,31)),new St(18,new Ct(2,14),new Ct(4,15)),new St(26,new Ct(4,13),new Ct(1,14))),new At(8,Int32Array.from([6,24,42]),new St(24,new Ct(2,97)),new St(22,new Ct(2,38),new Ct(2,39)),new St(22,new Ct(4,18),new Ct(2,19)),new St(26,new Ct(4,14),new Ct(2,15))),new At(9,Int32Array.from([6,26,46]),new St(30,new Ct(2,116)),new St(22,new Ct(3,36),new Ct(2,37)),new St(20,new Ct(4,16),new Ct(4,17)),new St(24,new Ct(4,12),new Ct(4,13))),new At(10,Int32Array.from([6,28,50]),new St(18,new Ct(2,68),new Ct(2,69)),new St(26,new Ct(4,43),new Ct(1,44)),new St(24,new Ct(6,19),new Ct(2,20)),new St(28,new Ct(6,15),new Ct(2,16))),new At(11,Int32Array.from([6,30,54]),new St(20,new Ct(4,81)),new St(30,new Ct(1,50),new Ct(4,51)),new St(28,new Ct(4,22),new Ct(4,23)),new St(24,new Ct(3,12),new Ct(8,13))),new At(12,Int32Array.from([6,32,58]),new St(24,new Ct(2,92),new Ct(2,93)),new St(22,new Ct(6,36),new Ct(2,37)),new St(26,new Ct(4,20),new Ct(6,21)),new St(28,new Ct(7,14),new Ct(4,15))),new At(13,Int32Array.from([6,34,62]),new St(26,new Ct(4,107)),new St(22,new Ct(8,37),new Ct(1,38)),new St(24,new Ct(8,20),new Ct(4,21)),new St(22,new Ct(12,11),new Ct(4,12))),new At(14,Int32Array.from([6,26,46,66]),new St(30,new Ct(3,115),new Ct(1,116)),new St(24,new Ct(4,40),new Ct(5,41)),new St(20,new Ct(11,16),new Ct(5,17)),new St(24,new Ct(11,12),new Ct(5,13))),new At(15,Int32Array.from([6,26,48,70]),new St(22,new Ct(5,87),new Ct(1,88)),new St(24,new Ct(5,41),new Ct(5,42)),new St(30,new Ct(5,24),new Ct(7,25)),new St(24,new Ct(11,12),new Ct(7,13))),new At(16,Int32Array.from([6,26,50,74]),new St(24,new Ct(5,98),new Ct(1,99)),new St(28,new Ct(7,45),new Ct(3,46)),new St(24,new Ct(15,19),new Ct(2,20)),new St(30,new Ct(3,15),new Ct(13,16))),new At(17,Int32Array.from([6,30,54,78]),new St(28,new Ct(1,107),new Ct(5,108)),new St(28,new Ct(10,46),new Ct(1,47)),new St(28,new Ct(1,22),new Ct(15,23)),new St(28,new Ct(2,14),new Ct(17,15))),new At(18,Int32Array.from([6,30,56,82]),new St(30,new Ct(5,120),new Ct(1,121)),new St(26,new Ct(9,43),new Ct(4,44)),new St(28,new Ct(17,22),new Ct(1,23)),new St(28,new Ct(2,14),new Ct(19,15))),new At(19,Int32Array.from([6,30,58,86]),new St(28,new Ct(3,113),new Ct(4,114)),new St(26,new Ct(3,44),new Ct(11,45)),new St(26,new Ct(17,21),new Ct(4,22)),new St(26,new Ct(9,13),new Ct(16,14))),new At(20,Int32Array.from([6,34,62,90]),new St(28,new Ct(3,107),new Ct(5,108)),new St(26,new Ct(3,41),new Ct(13,42)),new St(30,new Ct(15,24),new Ct(5,25)),new St(28,new Ct(15,15),new Ct(10,16))),new At(21,Int32Array.from([6,28,50,72,94]),new St(28,new Ct(4,116),new Ct(4,117)),new St(26,new Ct(17,42)),new St(28,new Ct(17,22),new Ct(6,23)),new St(30,new Ct(19,16),new Ct(6,17))),new At(22,Int32Array.from([6,26,50,74,98]),new St(28,new Ct(2,111),new Ct(7,112)),new St(28,new Ct(17,46)),new St(30,new Ct(7,24),new Ct(16,25)),new St(24,new Ct(34,13))),new At(23,Int32Array.from([6,30,54,78,102]),new St(30,new Ct(4,121),new Ct(5,122)),new St(28,new Ct(4,47),new Ct(14,48)),new St(30,new Ct(11,24),new Ct(14,25)),new St(30,new Ct(16,15),new Ct(14,16))),new At(24,Int32Array.from([6,28,54,80,106]),new St(30,new Ct(6,117),new Ct(4,118)),new St(28,new Ct(6,45),new Ct(14,46)),new St(30,new Ct(11,24),new Ct(16,25)),new St(30,new Ct(30,16),new Ct(2,17))),new At(25,Int32Array.from([6,32,58,84,110]),new St(26,new Ct(8,106),new Ct(4,107)),new St(28,new Ct(8,47),new Ct(13,48)),new St(30,new Ct(7,24),new Ct(22,25)),new St(30,new Ct(22,15),new Ct(13,16))),new At(26,Int32Array.from([6,30,58,86,114]),new St(28,new Ct(10,114),new Ct(2,115)),new St(28,new Ct(19,46),new Ct(4,47)),new St(28,new Ct(28,22),new Ct(6,23)),new St(30,new Ct(33,16),new Ct(4,17))),new At(27,Int32Array.from([6,34,62,90,118]),new St(30,new Ct(8,122),new Ct(4,123)),new St(28,new Ct(22,45),new Ct(3,46)),new St(30,new Ct(8,23),new Ct(26,24)),new St(30,new Ct(12,15),new Ct(28,16))),new At(28,Int32Array.from([6,26,50,74,98,122]),new St(30,new Ct(3,117),new Ct(10,118)),new St(28,new Ct(3,45),new Ct(23,46)),new St(30,new Ct(4,24),new Ct(31,25)),new St(30,new Ct(11,15),new Ct(31,16))),new At(29,Int32Array.from([6,30,54,78,102,126]),new St(30,new Ct(7,116),new Ct(7,117)),new St(28,new Ct(21,45),new Ct(7,46)),new St(30,new Ct(1,23),new Ct(37,24)),new St(30,new Ct(19,15),new Ct(26,16))),new At(30,Int32Array.from([6,26,52,78,104,130]),new St(30,new Ct(5,115),new Ct(10,116)),new St(28,new Ct(19,47),new Ct(10,48)),new St(30,new Ct(15,24),new Ct(25,25)),new St(30,new Ct(23,15),new Ct(25,16))),new At(31,Int32Array.from([6,30,56,82,108,134]),new St(30,new Ct(13,115),new Ct(3,116)),new St(28,new Ct(2,46),new Ct(29,47)),new St(30,new Ct(42,24),new Ct(1,25)),new St(30,new Ct(23,15),new Ct(28,16))),new At(32,Int32Array.from([6,34,60,86,112,138]),new St(30,new Ct(17,115)),new St(28,new Ct(10,46),new Ct(23,47)),new St(30,new Ct(10,24),new Ct(35,25)),new St(30,new Ct(19,15),new Ct(35,16))),new At(33,Int32Array.from([6,30,58,86,114,142]),new St(30,new Ct(17,115),new Ct(1,116)),new St(28,new Ct(14,46),new Ct(21,47)),new St(30,new Ct(29,24),new Ct(19,25)),new St(30,new Ct(11,15),new Ct(46,16))),new At(34,Int32Array.from([6,34,62,90,118,146]),new St(30,new Ct(13,115),new Ct(6,116)),new St(28,new Ct(14,46),new Ct(23,47)),new St(30,new Ct(44,24),new Ct(7,25)),new St(30,new Ct(59,16),new Ct(1,17))),new At(35,Int32Array.from([6,30,54,78,102,126,150]),new St(30,new Ct(12,121),new Ct(7,122)),new St(28,new Ct(12,47),new Ct(26,48)),new St(30,new Ct(39,24),new Ct(14,25)),new St(30,new Ct(22,15),new Ct(41,16))),new At(36,Int32Array.from([6,24,50,76,102,128,154]),new St(30,new Ct(6,121),new Ct(14,122)),new St(28,new Ct(6,47),new Ct(34,48)),new St(30,new Ct(46,24),new Ct(10,25)),new St(30,new Ct(2,15),new Ct(64,16))),new At(37,Int32Array.from([6,28,54,80,106,132,158]),new St(30,new Ct(17,122),new Ct(4,123)),new St(28,new Ct(29,46),new Ct(14,47)),new St(30,new Ct(49,24),new Ct(10,25)),new St(30,new Ct(24,15),new Ct(46,16))),new At(38,Int32Array.from([6,32,58,84,110,136,162]),new St(30,new Ct(4,122),new Ct(18,123)),new St(28,new Ct(13,46),new Ct(32,47)),new St(30,new Ct(48,24),new Ct(14,25)),new St(30,new Ct(42,15),new Ct(32,16))),new At(39,Int32Array.from([6,26,54,82,110,138,166]),new St(30,new Ct(20,117),new Ct(4,118)),new St(28,new Ct(40,47),new Ct(7,48)),new St(30,new Ct(43,24),new Ct(22,25)),new St(30,new Ct(10,15),new Ct(67,16))),new At(40,Int32Array.from([6,30,58,86,114,142,170]),new St(30,new Ct(19,118),new Ct(6,119)),new St(28,new Ct(18,47),new Ct(31,48)),new St(30,new Ct(34,24),new Ct(34,25)),new St(30,new Ct(20,15),new Ct(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(G||(G={}));class xt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}xt.values=new Map([[G.DATA_MASK_000,new xt(G.DATA_MASK_000,(e,t)=>0===(e+t&1))],[G.DATA_MASK_001,new xt(G.DATA_MASK_001,(e,t)=>0===(1&e))],[G.DATA_MASK_010,new xt(G.DATA_MASK_010,(e,t)=>t%3===0)],[G.DATA_MASK_011,new xt(G.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[G.DATA_MASK_100,new xt(G.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[G.DATA_MASK_101,new xt(G.DATA_MASK_101,(e,t)=>e*t%6===0)],[G.DATA_MASK_110,new xt(G.DATA_MASK_110,(e,t)=>e*t%6<3)],[G.DATA_MASK_111,new xt(G.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class It{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new S;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Et.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new S}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,o,n);let i=At.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(o,t,n);if(i=At.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new S}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=xt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let o=!0;const a=new Uint8Array(t.getTotalCodewords());let s=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let e=0;e<r;e++){const t=o?r-1-e:e;for(let e=0;e<2;e++)i.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(a[s++]=l,c=0,l=0))}o=!o}if(s!==t.getTotalCodewords())throw new S;return a}remask(){if(null===this.parsedFormatInfo)return;const e=xt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new d;const r=t.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const d of o)i+=d.getCount();const a=new Array(i);let s=0;for(const d of o)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;a[s++]=new Tt(e,new Uint8Array(t))}const l=a[0].codewords.length;let c=a.length-1;for(;c>=0&&a[c].codewords.length!==l;)c--;c++;const u=l-r.getECCodewordsPerBlock();let h=0;for(let d=0;d<u;d++)for(let t=0;t<s;t++)a[t].codewords[d]=e[h++];for(let d=c;d<s;d++)a[d].codewords[u]=e[h++];const f=a[0].codewords.length;for(let d=u;d<f;d++)for(let t=0;t<s;t++){const n=t<c?d:d+1;a[t].codewords[n]=e[h++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(q||(q={}));class Rt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,Rt.FOR_BITS.set(r,this),Rt.FOR_VALUE.set(e,this)}static forBits(e){const t=Rt.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Rt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.TERMINATOR=new Rt(q.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Rt.NUMERIC=new Rt(q.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Rt.ALPHANUMERIC=new Rt(q.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Rt.STRUCTURED_APPEND=new Rt(q.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Rt.BYTE=new Rt(q.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Rt.ECI=new Rt(q.ECI,"ECI",Int32Array.from([0,0,0]),7),Rt.KANJI=new Rt(q.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Rt.FNC1_FIRST_POSITION=new Rt(q.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Rt.FNC1_SECOND_POSITION=new Rt(q.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Rt.HANZI=new Rt(q.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kt{static decode(e,t,n,r){const i=new gt(e);let o=new T;const a=new Array;let s=-1,l=-1;try{let e,n=null,c=!1;do{if(i.available()<4)e=Rt.TERMINATOR;else{const t=i.readBits(4);e=Rt.forBits(t)}switch(e){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:c=!0;break;case Rt.STRUCTURED_APPEND:if(i.available()<16)throw new S;s=i.readBits(8),l=i.readBits(8);break;case Rt.ECI:const u=kt.parseECIValue(i);if(n=C.getCharacterSetECIByValue(u),null===n)throw new S;break;case Rt.HANZI:const d=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));d===kt.GB2312_SUBSET&&kt.decodeHanziSegment(i,o,h);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case Rt.NUMERIC:kt.decodeNumericSegment(i,o,f);break;case Rt.ALPHANUMERIC:kt.decodeAlphanumericSegment(i,o,f,c);break;case Rt.BYTE:kt.decodeByteSegment(i,o,f,n,a,r);break;case Rt.KANJI:kt.decodeKanjiSegment(i,o,f);break;default:throw new S}}}while(e!==Rt.TERMINATOR)}catch(c){throw new S}return new Z(e,o.toString(),0===a.length?null:a,null===n?null:n.toString(),s,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new S;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/96<<8&4294967295|t%96;o+=o<959?41377:42657,r[i]=o>>8&255,r[i+1]=255&o,i+=2,n--}try{t.append(x.decode(r,I.GB2312))}catch(o){throw new S(o)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new S;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/192<<8&4294967295|t%192;o+=o<7936?33088:49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{t.append(x.decode(r,I.SHIFT_JIS))}catch(o){throw new S(o)}}static decodeByteSegment(e,t,n,r,i,o){if(8*n>e.available())throw new S;const a=new Uint8Array(n);for(let c=0;c<n;c++)a[c]=e.readBits(8);let s;s=null===r?I.guessEncoding(a,o):r.getName();try{t.append(x.decode(a,s))}catch(l){throw new S(l)}i.push(a)}static toAlphaNumericChar(e){if(e>=kt.ALPHANUMERIC_CHARS.length)throw new S;return kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new S;const r=e.readBits(11);t.append(kt.toAlphaNumericChar(Math.floor(r/45))),t.append(kt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new S;t.append(kt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new S;const r=e.readBits(10);if(r>=1e3)throw new S;t.append(kt.toAlphaNumericChar(Math.floor(r/100))),t.append(kt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(kt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new S;const n=e.readBits(7);if(n>=100)throw new S;t.append(kt.toAlphaNumericChar(Math.floor(n/10))),t.append(kt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new S;const n=e.readBits(4);if(n>=10)throw new S;t.append(kt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new S}}kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kt.GB2312_SUBSET=1;class Pt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Nt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(R.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new It(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Pt(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=Tt.getDataBlocks(i,n,r);let a=0;for(const c of o)a+=c.getNumDataCodewords();const s=new Uint8Array(a);let l=0;for(const c of o){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)s[l++]=e[n]}return kt.decode(s,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class Dt extends se{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new Dt(r,i,o)}}class Ot{constructor(e,t,n,r,i,o,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){const t=r+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;let s=e;for(;s<n&&!o.get(s,t);)s++;let l=0;for(;s<n;){if(o.get(s,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,s);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;s++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let s=e;for(;s>=0&&i.get(t,s)&&a[1]<=n;)a[1]++,s--;if(s<0||a[1]>n)return NaN;for(;s>=0&&!i.get(t,s)&&a[0]<=n;)a[0]++,s--;if(a[0]>n)return NaN;for(s=e+1;s<o&&i.get(t,s)&&a[1]<=n;)a[1]++,s++;if(s===o||a[1]>n)return NaN;for(;s<o&&!i.get(t,s)&&a[2]<=n;)a[2]++,s++;if(a[2]>n)return NaN;const l=a[0]+a[1]+a[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(a)?Ot.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Ot.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);const n=new Dt(i,o,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Mt extends se{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,a=(this.count*this.estimatedModuleSize+n)/r;return new Mt(i,o,a,r)}}class Lt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(E.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(E.PURE_BARCODE),r=this.image,i=r.getHeight(),o=r.getWidth();let a=Math.floor(3*i/(4*jt.MAX_MODULES));(a<jt.MIN_SKIP||t)&&(a=jt.MIN_SKIP);let s=!1;const l=new Int32Array(5);for(let u=a-1;u<i&&!s;u+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<o;t++)if(r.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(jt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(a=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-a,t=o-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;jt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,o,n)&&(a=l[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return se.orderBestPatterns(c),new Lt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let o=0;const a=this.image;for(;e>=o&&t>=o&&a.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!a.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&a.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;const s=a.getHeight(),l=a.getWidth();for(o=1;e+o<s&&t+o<l&&a.get(t+o,e+o);)i[2]++,o++;if(e+o>=s||t+o>=l)return!1;for(;e+o<s&&t+o<l&&!a.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=s||t+o>=l||i[3]>=n)return!1;for(;e+o<s&&t+o<l&&a.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-r)<2*r&&jt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),a=this.getCrossCheckStateCount();let s=e;for(;s>=0&&i.get(t,s);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(t,s)&&a[1]<=n;)a[1]++,s--;if(s<0||a[1]>n)return NaN;for(;s>=0&&i.get(t,s)&&a[0]<=n;)a[0]++,s--;if(a[0]>n)return NaN;for(s=e+1;s<o&&i.get(t,s);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(t,s)&&a[3]<n;)a[3]++,s++;if(s===o||a[3]>=n)return NaN;for(;s<o&&i.get(t,s)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-r)>=2*r?NaN:jt.foundPatternCross(a)?jt.centerFromEnd(a,s):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,o=i.getWidth(),a=this.getCrossCheckStateCount();let s=e;for(;s>=0&&i.get(s,t);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(s,t)&&a[1]<=n;)a[1]++,s--;if(s<0||a[1]>n)return NaN;for(;s>=0&&i.get(s,t)&&a[0]<=n;)a[0]++,s--;if(a[0]>n)return NaN;for(s=e+1;s<o&&i.get(s,t);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(s,t)&&a[3]<n;)a[3]++,s++;if(s===o||a[3]>=n)return NaN;for(;s<o&&i.get(s,t)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-r)>=r?NaN:jt.foundPatternCross(a)?jt.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=jt.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,a,o)){n[r]=i.combineEstimate(a,o,e),t=!0;break}}if(!t){const t=new Mt(o,a,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=jt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=jt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new k;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let o=Math.sqrt(i/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0});const a=Math.max(.2*n,o);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>a&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}jt.CENTER_QUORUM=2,jt.MIN_SKIP=3,jt.MAX_MODULES=57;class Ft{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(E.NEED_RESULT_POINT_CALLBACK);const t=new jt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new k("No pattern found in proccess finder.");const o=Ft.computeDimension(t,n,r,i),a=At.getProvisionalVersionForDimension(o),s=a.getDimensionForVersion()-7;let l=null;if(a.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),o=n.getY()-t.getY()+r.getY(),a=1-3/s,c=Math.floor(t.getX()+a*(e-t.getX())),u=Math.floor(t.getY()+a*(o-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,u,t);break}catch(h){if(!(h instanceof k))throw h}}const c=Ft.createTransform(t,n,r,l,o),u=Ft.sampleGrid(this.image,c,o);let d;return d=null===l?[r,t,n]:[r,t,n,l],new le(u,d)}static createTransform(e,t,n,r,i){const o=i-3.5;let a,s,l,c;return null!==r?(a=r.getX(),s=r.getY(),l=o-3,c=l):(a=t.getX()-e.getX()+n.getX(),s=t.getY()-e.getY()+n.getY(),l=o,c=o),he.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,l,c,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),a,s,n.getX(),n.getY())}static sampleGrid(e,t,n){return pe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=oe.round(se.distance(e,t)/r),o=oe.round(se.distance(e,n)/r);let a=Math.floor((i+o)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new k("Dimensions could be not found.")}return a}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,a=e-(n-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let s=Math.floor(t-(r-t)*o);return o=1,s<0?(o=t/(t-s),s=0):s>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,a,s),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const o=Math.abs(n-e),a=Math.abs(r-t);let s=-o/2;const l=e<n?1:-1,c=t<r?1:-1;let u=0;const d=n+l;for(let h=e,f=t;h!==d;h+=l){const n=i?f:h,l=i?h:f;if(1===u===this.image.get(n,l)){if(2===u)return oe.distance(h,f,e,t);u++}if(s+=a,s>0){if(f===r)break;f+=c,s-=o}}return 2===u?oe.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),o=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-o<3*e)throw new k("Alignment top exceeds estimated module size.");const s=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-s<3*e)throw new k("Alignment bottom exceeds estimated module size.");return new Ot(this.image,o,s,a-o,l-s,e,this.resultPointCallback).find()}}class Bt{constructor(){this.decoder=new Nt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(E.PURE_BARCODE)){const i=Bt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=Bt.NO_POINTS}else{const i=new Ft(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof Pt&&n.getOther().applyMirroredCorrection(r);const i=new U(n.getText(),n.getRawBytes(),void 0,r,H.QR_CODE,void 0),o=n.getByteSegments();null!==o&&i.putMetadata(Q.BYTE_SEGMENTS,o);const a=n.getECLevel();return null!==a&&i.putMetadata(Q.ERROR_CORRECTION_LEVEL,a),n.hasStructuredAppend()&&(i.putMetadata(Q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(Q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new k;const r=this.moduleSize(t,e);let i=t[1],o=n[1],a=t[0],s=n[0];if(a>=s||i>=o)throw new k;if(o-i!==s-a&&(s=a+(o-i),s>=e.getWidth()))throw new k;const l=Math.round((s-a+1)/r),c=Math.round((o-i+1)/r);if(l<=0||c<=0)throw new k;if(c!==l)throw new k;const u=Math.floor(r/2);i+=u,a+=u;const d=a+Math.floor((l-1)*r)-s;if(d>0){if(d>u)throw new k;a-=d}const h=i+Math.floor((c-1)*r)-o;if(h>0){if(h>u)throw new k;i-=h}const f=new R(l,c);for(let p=0;p<c;p++){const t=i+Math.floor(p*r);for(let n=0;n<l;n++)e.get(a+Math.floor(n*r),t)&&f.set(n,p)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],o=e[1],a=!0,s=0;for(;i<r&&o<n;){if(a!==t.get(i,o)){if(5===++s)break;a=!a}i++,o++}if(i===r||o===n)throw new k;return(i-e[0])/7}}Bt.NO_POINTS=new Array;class Ut{PDF417Common(){}static getBitCountSum(e){return oe.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ut.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=w.binarySearch(Ut.SYMBOL_TABLE,262143&e);return t<0?-1:(Ut.CODEWORD_TABLE[t]-1)%Ut.NUMBER_OF_CODEWORDS}}Ut.NUMBER_OF_CODEWORDS=929,Ut.MAX_CODEWORDS_IN_BARCODE=Ut.NUMBER_OF_CODEWORDS-1,Ut.MIN_ROWS_IN_BARCODE=3,Ut.MAX_ROWS_IN_BARCODE=90,Ut.MODULES_IN_CODEWORD=17,Ut.MODULES_IN_STOP_PATTERN=18,Ut.BARS_IN_MODULE=8,Ut.EMPTY_INT_ARRAY=new Int32Array([]),Ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Ht.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Ht.detect(n,r)),new zt(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,o=!1;for(;r<t.getHeight();){const a=Ht.findVertices(t,r,i);if(null!=a[0]||null!=a[3]){if(o=!0,n.push(a),!e)break;null!=a[2]?(i=Math.trunc(a[2].getX()),r=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY()))}else{if(!o)break;o=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Ht.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),o=new Array(8);return Ht.copyToResult(o,Ht.findRowsWithPattern(e,r,i,t,n,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=o[4]&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Ht.copyToResult(o,Ht.findRowsWithPattern(e,r,i,t,n,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){const a=new Array(4);let s=!1;const l=new Int32Array(o.length);for(;r<t;r+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,i,r,n,!1,o,l);if(null!=t){for(;r>0;){const a=Ht.findGuardPattern(e,i,--r,n,!1,o,l);if(null==a){r++;break}t=a}a[0]=new se(t[0],r),a[1]=new se(t[1],r),s=!0;break}}let c=r+1;if(s){let r=0,i=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;c<t;c++){const t=Ht.findGuardPattern(e,i[0],c,n,!1,o,l);if(null!=t&&Math.abs(i[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Ht.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>Ht.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,a[2]=new se(i[0],c),a[3]=new se(i[1],c)}return c-r<Ht.BARCODE_MIN_HEIGHT&&w.fill(a,null),a}static findGuardPattern(e,t,n,r,i,o,a){w.fillWithin(a,0,a.length,0);let s=t,l=0;for(;e.get(s,n)&&s>0&&l++<Ht.MAX_PIXEL_DRIFT;)s--;let c=s,u=0,d=o.length;for(let h=i;c<r;c++)if(e.get(c,n)!==h)a[u]++;else{if(u===d-1){if(Ht.patternMatchVariance(a,o,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([s,c]);s+=a[0]+a[1],g.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,h=!h}return u===d-1&&Ht.patternMatchVariance(a,o,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([s,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let l=0;l<r;l++)i+=e[l],o+=t[l];if(i<o)return 1/0;let a=i/o;n*=a;let s=0;for(let l=0;l<r;l++){let r=e[l],i=t[l]*a,o=r>i?r-i:i-r;if(o>n)return 1/0;s+=o}return s/i}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Wt{constructor(e,t){if(0===t.length)throw new d;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new Wt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Wt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Wt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let a=0;a<n;a++){let e=t[a];for(let t=0;t<i;t++)o[a+t]=this.field.add(o[a+t],this.field.multiply(e,r[t]))}return new Wt(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Wt(this.field,t)}multiplyScalar(e){if(0===e)return new Wt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Wt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new Wt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Wt(this.field,r)}toString(){let e=new T;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Vt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new $;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Yt extends Vt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Wt(this,new Int32Array([0])),this.one=new Wt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Wt(this,n)}}Yt.PDF417_GF=new Yt(Ut.NUMBER_OF_CODEWORDS,3);class Gt{constructor(){this.field=Yt.PDF417_GF}decode(e,t,n){let r=new Wt(this.field,e),i=new Int32Array(t),o=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));i[t-f]=e,0!==e&&(o=!0)}if(!o)return 0;let a=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new Wt(this.field,new Int32Array([this.field.subtract(0,t),1]));a=a.multiply(n)}let s=new Wt(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),s,t),c=l[0],u=l[1],d=this.findErrorLocations(c),h=this.findErrorMagnitudes(u,c,d);for(let p=0;p<d.length;p++){let t=e.length-1-this.field.log(d[p]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],h[p])}return d.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,o=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=o;if(r=i,o=a,r.isZero())throw f.getChecksumInstance();i=e;let n=this.field.getZero(),s=r.getCoefficient(r.getDegree()),l=this.field.inverse(s);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}a=n.multiply(o).subtract(t).negative()}let s=a.getCoefficient(0);if(0===s)throw f.getChecksumInstance();let l=this.field.inverse(s);return[a.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,t.getCoefficient(l));let o=new Wt(this.field,i),a=n.length,s=new Int32Array(a);for(let l=0;l<a;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(o.evaluateAt(t));s[l]=this.field.multiply(r,i)}return s}}class qt{constructor(e,t,n,r,i){e instanceof qt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const o=null==t||null==n,a=null==r||null==i;if(o&&a)throw new k;o?(t=new se(0,r.getY()),n=new se(0,i.getY())):a&&(r=new se(e.getWidth()-1,t.getY()),i=new se(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new qt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let a=new se(t.getX(),i);n?r=a:o=a}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let o=new se(e.getX(),r);n?i=o:a=o}return new qt(this.image,r,i,o,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,o,a,s){if("%%"===e)return"%";if(void 0===t[++n])return;e=o?parseInt(o.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),d=i&&i[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==r?l+d:d+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=Qt.form(e,n)}toString(){return this.buffer}}class Zt{constructor(e){this.boundingBox=new qt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Zt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Qt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Zt.MAX_NEARBY_DISTANCE=5;class Kt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Ut.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Jt extends Zt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=-1,l=1,c=0;for(let u=o;u<a;u++){if(null==t[u])continue;let n=t[u],r=n.getRowNumber()-s;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,s=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>u)t[u]=null;else{let e;e=l>2?(l-2)*r:r;let i=e>=u;for(let n=1;n<=e&&!i;n++)i=null!=t[u-n];i?t[u]=null:(s=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),s=-1;for(let l=i;l<o;l++){if(null==a[l])continue;let t=a[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-s;0===n||(1===n?s=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?a[l]=null:s=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Kt,n=new Kt,r=new Kt,i=new Kt;for(let a of e){if(null==a)continue;a.setRowNumberAsRowIndicatorColumn();let e=a.getValue()%30,o=a.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;let o=new Xt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount())e[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $t{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ut.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=$t.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=$t.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=i[t],a[3]=o[t],t>0&&(a[0]=n[t-1],a[4]=i[t-1],a[5]=o[t-1]),t>1&&(a[8]=n[t-2],a[10]=i[t-2],a[11]=o[t-2]),t<n.length-1&&(a[1]=n[t+1],a[6]=i[t+1],a[7]=o[t+1]),t<n.length-2&&(a[9]=n[t+2],a[12]=i[t+2],a[13]=o[t+2]);for(let s of a)if($t.adjustRowNumber(r,s))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Qt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<Ut.SYMBOL_TABLE.length;e++){let t=Ut.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<Ut.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-r-1]=Math.fround(i/Ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=oe.sum(e),n=new Int32Array(Ut.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<Ut.MODULES_IN_CODEWORD;o++){let a=t/(2*Ut.MODULES_IN_CODEWORD)+o*t/Ut.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===Ut.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=oe.sum(e),n=new Array(Ut.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=ae.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let o=0;o<tn.RATIOS_TABLE.length;o++){let e=0,t=tn.RATIOS_TABLE[o];for(let i=0;i<Ut.BARS_IN_MODULE;i++){let o=Math.fround(t[i]-n[i]);if(e+=Math.fround(o*o),e>=r)break}e<r&&(r=e,i=Ut.SYMBOL_TABLE[o])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map(e=>new Array(Ut.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class on extends c{}on.kind="NullPointerException";class an{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new on;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class sn extends c{}class ln extends an{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new sn;t=b.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),g.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let un;function dn(e){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(e)}function hn(){let e=[];e[0]=dn(1);let t=dn(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(X||(X={}));class fn{static decode(e,t){let n=new T(""),r=C.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],a=new nn;for(;i<e[0];){switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(e,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(o,e,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(e,i,n);break;case fn.ECI_CHARSET:C.getCharacterSetECIByValue(e[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(e,i,a);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new S;default:i--,i=fn.textCompaction(e,i,n)}if(!(i<e.length))throw S.getFormatInstance();o=e[i++]}if(0===n.length())throw S.getFormatInstance();let s=new Z(null,n.toString(),null,t);return s.setOther(a),s}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw S.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<fn.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)r[a]=e[t];n.setSegmentIndex(b.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new T;t=fn.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new T;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new T;t=fn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new T;t=fn.textCompaction(e,t+1,o),n.setAddressee(o.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new T;t=fn.numericCompaction(e,t+1,a),n.setSegmentCount(b.parseInt(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let s=new T;t=fn.numericCompaction(e,t+1,s),n.setTimestamp(rn.parseLong(s.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new T;t=fn.numericCompaction(e,t+1,l),n.setChecksum(b.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new T;t=fn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw S.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw S.getFormatInstance()}if(-1!==o){let r=t-o;n.isLastSegment()&&r--,n.setOptionalData(w.copyOfRange(e,o,o+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),o=0,a=!1;for(;t<e[0]&&!a;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[o]=n/30,r[o+1]=n%30,o+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[o++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[o]=n,o++}}return fn.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=X.ALPHA,o=X.ALPHA,a=0;for(;a<n;){let n=e[a],s="";switch(i){case X.ALPHA:if(n<26)s=String.fromCharCode(65+n);else switch(n){case 26:s=" ";break;case fn.LL:i=X.LOWER;break;case fn.ML:i=X.MIXED;break;case fn.PS:o=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.LOWER:if(n<26)s=String.fromCharCode(97+n);else switch(n){case 26:s=" ";break;case fn.AS:o=i,i=X.ALPHA_SHIFT;break;case fn.ML:i=X.MIXED;break;case fn.PS:o=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.MIXED:if(n<fn.PL)s=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=X.PUNCT;break;case 26:s=" ";break;case fn.LL:i=X.LOWER;break;case fn.AL:i=X.ALPHA;break;case fn.PS:o=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT:if(n<fn.PAL)s=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=X.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.ALPHA_SHIFT:if(i=o,n<26)s=String.fromCharCode(65+n);else switch(n){case 26:s=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}break;case X.PUNCT_SHIFT:if(i=o,n<fn.PAL)s=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=X.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA}}""!==s&&r.append(s),a++}}static byteCompaction(e,t,n,r,i){let o=new ln,a=0,s=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[a++]=n,s=900*s+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(a%5===0&&a>0){for(let e=0;e<6;++e)o.write(Number(dn(s)>>dn(8*(5-e))));s=0,a=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[a++]=n);for(let t=0;t<a;t++)o.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)a++,s=900*s+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(a%5===0&&a>0){for(let e=0;e<6;++e)o.write(Number(dn(s)>>dn(8*(5-e))));s=0,a=0}}}return i.append(x.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<fn.TEXT_COMPACTION_MODE_LATCH)o[r]=a,r++;else switch(a){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||a===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=dn(0);for(let i=0;i<t;i++)n+=fn.EXP900[t-i-1]*dn(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new S;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?hn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(e,t,n,r,i,o,a){let s,l=new qt(e,t,n,r,i),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=pn.getRowIndicatorColumn(e,l,t,!0,o,a)),null!=r&&(u=pn.getRowIndicatorColumn(e,l,r,!1,o,a)),s=pn.merge(c,u),null==s)throw k.getNotFoundInstance();let n=s.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}s.setBoundingBox(l);let d=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,c),s.setDetectionResultColumn(d,u);let h=null!=c;for(let f=1;f<=d;f++){let t,n=h?f:d-f;if(void 0!==s.getDetectionResultColumn(n))continue;t=0===n||n===d?new Jt(l,0===n):new Zt(l),s.setDetectionResultColumn(n,t);let r=-1,i=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=pn.getStartColumn(s,n,c,h),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let u=pn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,r,c,o,a);null!=u&&(t.setCodeword(c,u),i=r,o=Math.min(o,u.getWidth()),a=Math.max(a,u.getWidth()))}}return pn.createDecoderResult(s)}static merge(e,t){if(null==e&&null==t)return null;let n=pn.getBarcodeMetadata(e,t);if(null==n)return null;let r=qt.merge(pn.adjustBoundingBox(e),pn.adjustBoundingBox(t));return new $t(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=pn.getMax(t),r=0;for(let a of t)if(r+=n-a,a>0)break;let i=e.getCodewords();for(let a=0;r>0&&null==i[a];a++)r--;let o=0;for(let a=t.length-1;a>=0&&(o+=n-t[a],!(t[a]>0));a--);for(let a=i.length-1;o>0&&null==i[a];a--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let a=new Jt(t,r);for(let s=0;s<2;s++){let l=0===s?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let s=Math.trunc(Math.trunc(n.getY()));s<=t.getMaxY()&&s>=t.getMinY();s+=l){let t=pn.detectCodeword(e,0,e.getWidth(),r,c,s,i,o);null!=t&&(a.setCodeword(s,t),c=r?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-pn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>Ut.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=pn.createBarcodeMatrix(e);pn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let s=0;s<e.getBarcodeRowCount();s++)for(let a=0;a<e.getBarcodeColumnCount();a++){let l=t[s][a+1].getValue(),c=s*e.getBarcodeColumnCount()+a;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(o.push(c),i.push(l))}let a=new Array(i.length);for(let s=0;s<a.length;s++)a[s]=i[s];return pn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,Ut.toIntArray(n),Ut.toIntArray(o),a)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),a=100;for(;a-- >0;){for(let e=0;e<o.length;e++)t[r[e]]=i[e][o[e]];try{return pn.decodeCodewords(t,e,n)}catch(s){if(!(s instanceof f))throw s}if(0===o.length)throw f.getChecksumInstance();for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Kt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(pn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=o)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=o)return r?o.getStartX():o.getEndX();if(pn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=o)return r?o.getEndX():o.getStartX();let a=0;for(;pn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*a*(n.getEndX()-n.getStartX());a++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,a,s){i=pn.adjustCodewordStartColumn(e,t,n,r,i,o);let l,c=pn.getModuleBitCount(e,t,n,r,i,o);if(null==c)return null;let u=oe.sum(c);if(r)l=i+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-u}if(!pn.checkCodewordSkew(u,a,s))return null;let d=tn.getDecodedValue(c),h=Ut.getCodeword(d);return-1===h?null:new en(i,l,pn.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,n,r,i,o){let a=i,s=new Int32Array(8),l=0,c=r?1:-1,u=r;for(;(r?a<n:a>=t)&&l<s.length;)e.get(a,o)===u?(s[l]++,a+=c):(l++,u=!u);return l===s.length||a===(r?n:t)&&l===s.length-1?s:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let a=i,s=r?-1:1;for(let l=0;l<2;l++){for(;(r?a>=t:a<n)&&r===e.get(a,o);){if(Math.abs(i-a)>pn.CODEWORD_SKEW_SIZE)return i;a+=s}s=-s,r=!r}return a}static checkCodewordSkew(e,t,n){return t-pn.CODEWORD_SKEW_SIZE<=e&&e<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw S.getFormatInstance();let r=1<<t+1,i=pn.correctErrors(e,n,r);pn.verifyCodewordCount(e,r);let o=fn.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw S.getFormatInstance();let n=e[0];if(n>e.length)throw S.getFormatInstance();if(0===n){if(!(t<e.length))throw S.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Qt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new Gt;class gn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw k.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return gn.decode(e,t,!0)}catch(n){if(n instanceof S||n instanceof f)throw k.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=Ht.detectMultiple(e,t,n);for(const o of i.getPoints()){const e=pn.decode(i.getBits(),o[4],o[5],o[6],o[7],gn.getMinCodewordWidth(o),gn.getMaxCodewordWidth(o)),t=new U(e.getText(),e.getRawBytes(),void 0,o,H.PDF_417);t.putMetadata(Q.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(Q.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?b.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends c{}mn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(E.TRY_HARDER),r=t(e)?null:e.get(E.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!n&&i.push(new lt(e,this.verbose)),r.includes(H.QR_CODE)&&i.push(new Bt),r.includes(H.DATA_MATRIX)&&i.push(new bt),r.includes(H.AZTEC)&&i.push(new ye),r.includes(H.PDF_417)&&i.push(new gn),t&&n&&i.push(new lt(e,this.verbose))}0===i.length&&(n||i.push(new lt(e,this.verbose)),i.push(new Bt),i.push(new bt),i.push(new ye),i.push(new gn),n&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new k("No MultiFormat Readers were able to detect the code.")}}class wn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class bn extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new gn,e)}}class _n extends B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Bt,e)}}var vn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(vn||(vn={}));var En=vn;class Sn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new J(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new J(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const n=e.length-t;if(n<=0)throw new d("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);g.arraycopy(e,0,i,0,n);let o=new J(this.field,i);o=o.multiplyByMonomial(t,1);const a=o.divide(r)[1].getCoefficients(),s=t-a.length;for(let l=0;l<s;l++)e[n+l]=0;g.arraycopy(a,0,e,n+s,a.length)}}class Cn{constructor(){}static applyMaskPenaltyRule1(e){return Cn.applyMaskPenaltyRule1Internal(e,!0)+Cn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const e=n[o];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[o+1][i]&&r===n[o+1][i+1]&&t++}}return Cn.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let e=0;e<r;e++){const a=n[o];e+6<r&&1===a[e]&&0===a[e+1]&&1===a[e+2]&&1===a[e+3]&&1===a[e+4]&&0===a[e+5]&&1===a[e+6]&&(Cn.isWhiteHorizontal(a,e-4,e)||Cn.isWhiteHorizontal(a,e+7,e+11))&&t++,o+6<i&&1===n[o][e]&&0===n[o+1][e]&&1===n[o+2][e]&&1===n[o+3][e]&&1===n[o+4][e]&&0===n[o+5][e]&&1===n[o+6][e]&&(Cn.isWhiteVertical(n,e,o-4,o)||Cn.isWhiteVertical(n,e,o+7,o+11))&&t++}return t*Cn.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let a=0;a<i;a++){const e=n[a];for(let n=0;n<r;n++)1===e[n]&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*Cn.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let a=0;a<r;a++){let e=0,r=-1;for(let s=0;s<i;s++){const i=t?o[a][s]:o[s][a];i===r?e++:(e>=5&&(n+=Cn.N1+(e-5)),e=1,r=i)}e>=5&&(n+=Cn.N1+(e-5))}return n}}Cn.N1=3,Cn.N2=3,Cn.N3=40,Cn.N4=10;class An{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)w.fill(t,e)}equals(e){if(!(e instanceof An))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new T;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class xn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new T;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<xn.NUM_MASK_PATTERNS}}xn.NUM_MASK_PATTERNS=8;class In extends c{}In.kind="WriterException";class Tn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){Tn.clearMatrix(i),Tn.embedBasicPatterns(n,i),Tn.embedTypeInfo(t,r,i),Tn.maybeEmbedVersionInfo(n,i),Tn.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){Tn.embedPositionDetectionPatternsAndSeparators(t),Tn.embedDarkDotAtLeftBottomCorner(t),Tn.maybeEmbedPositionAdjustmentPatterns(e,t),Tn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new _;Tn.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){const e=r.get(r.getSize()-1-i),t=Tn.TYPE_INFO_COORDINATES[i],o=t[0],a=t[1];if(n.setBoolean(o,a,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new _;Tn.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const o=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,o),t.setBoolean(t.getHeight()-11+e,i,o)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,a=n.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);a>=0&&a<n.getHeight();){for(let i=0;i<2;++i){const s=o-i;if(!Tn.isEmpty(n.get(s,a)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&Cn.getDataMaskBit(t,s,a)&&(l=!l),n.setBoolean(s,a,l)}a+=i}i=-i,a+=i,o-=2}if(r!==e.getSize())throw new In("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-b.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const n=Tn.findMSBSet(t);for(e<<=n-1;Tn.findMSBSet(e)>=n;)e^=t<<Tn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!xn.isValidMaskPattern(t))throw new In("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=Tn.calculateBCHCode(r,Tn.TYPE_INFO_POLY);n.appendBits(i,10);const o=new _;if(o.appendBits(Tn.TYPE_INFO_MASK_PATTERN,15),n.xor(o),15!==n.getSize())throw new In("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Tn.calculateBCHCode(e.getVersionNumber(),Tn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new In("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Tn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Tn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new In;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Tn.isEmpty(n.get(e+r,t)))throw new In;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Tn.isEmpty(n.get(e,t+r)))throw new In;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=Tn.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=Tn.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Tn.POSITION_DETECTION_PATTERN[0].length;Tn.embedPositionDetectionPattern(0,0,e),Tn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Tn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Tn.embedHorizontalSeparationPattern(0,n-1,e),Tn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Tn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Tn.embedVerticalSeparationPattern(r,0,e),Tn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Tn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const e=r[i];if(e>=0)for(let n=0;n!==o;n++){const i=r[n];i>=0&&Tn.isEmpty(t.get(i,e))&&Tn.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Tn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tn.VERSION_INFO_POLY=7973,Tn.TYPE_INFO_POLY=1335,Tn.TYPE_INFO_MASK_PATTERN=21522;class Rn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kn{constructor(){}static calculateMaskPenalty(e){return Cn.applyMaskPenaltyRule1(e)+Cn.applyMaskPenaltyRule2(e)+Cn.applyMaskPenaltyRule3(e)+Cn.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=kn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(En.CHARACTER_SET);i&&(r=n.get(En.CHARACTER_SET).toString());const o=this.chooseMode(e,r),a=new _;if(o===Rt.BYTE&&(i||kn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=C.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,a)}this.appendModeInfo(o,a);const s=new _;let l;if(this.appendBytes(e,o,s,r),null!==n&&void 0!==n.get(En.QR_VERSION)){const e=Number.parseInt(n.get(En.QR_VERSION).toString(),10);l=At.getVersionForNumber(e);const r=this.calculateBitsNeeded(o,a,s,l);if(!this.willFit(r,l,t))throw new In("Data too big for requested version")}else l=this.recommendVersion(t,o,a,s);const c=new _;c.appendBitArray(a);const u=o===Rt.BYTE?s.getSizeInBytes():e.length;this.appendLengthInfo(u,l,o,c),c.appendBitArray(s);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),p=new xn;p.setECLevel(t),p.setMode(o),p.setVersion(l);const g=l.getDimensionForVersion(),m=new An(g,g),y=this.chooseMaskPattern(f,t,l,m);return p.setMaskPattern(y),Tn.buildMatrix(f,t,l,y,m),p.setMatrix(m),p}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,At.getVersionForNumber(1)),o=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<kn.ALPHANUMERIC_TABLE.length?kn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(C.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Rt.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){const t=e.charAt(i);if(kn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return Rt.BYTE;r=!0}}return r?Rt.ALPHANUMERIC:n?Rt.NUMERIC:Rt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=x.encode(e,C.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let a=0;a<xn.NUM_MASK_PATTERNS;a++){Tn.buildMatrix(e,t,n,a,r);let s=this.calculateMaskPenalty(r);s<i&&(i=s,o=a)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=At.getVersionForNumber(n);if(kn.willFit(e,r,t))return r}throw new In("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new In("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(0===(1&o)?236:17,8);if(t.getSize()!==n)throw new In("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new In("Block ID too large");const a=e%n,s=n-a,l=Math.floor(e/n),c=l+1,u=Math.floor(t/n),d=u+1,h=l-u,f=c-d;if(h!==f)throw new In("EC bytes mismatch");if(n!==s+a)throw new In("RS blocks mismatch");if(e!==(u+h)*s+(d+f)*a)throw new In("Total bytes mismatch");r<s?(i[0]=u,o[0]=h):(i[0]=d,o[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new In("Number of bits and data bytes does not match");let i=0,o=0,a=0;const s=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);kn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*i,h,0,d);const f=kn.generateECBytes(h,u[0]);s.push(new Rn(h,f)),o=Math.max(o,d),a=Math.max(a,f.length),i+=l[0]}if(n!==i)throw new In("Data bytes does not match offset");const l=new _;for(let c=0;c<o;++c)for(const e of s){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<a;++c)for(const e of s){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new In("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=255&e[o];new Sn(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new In(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case Rt.NUMERIC:kn.appendNumericBytes(e,n);break;case Rt.ALPHANUMERIC:kn.appendAlphanumericBytes(e,n);break;case Rt.BYTE:kn.append8BitBytes(e,n,r);break;case Rt.KANJI:kn.appendKanjiBytes(e,n);break;default:throw new In("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=kn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=kn.getDigit(e.charAt(r));if(r+2<n){const n=kn.getDigit(e.charAt(r+1)),o=kn.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+o,10),r+=3}else if(r+1<n){const n=kn.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=kn.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new In;if(r+1<n){const n=kn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new In;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=x.encode(e,n)}catch(i){throw new In(i)}for(let o=0,a=r.length;o!==a;o++){const e=r[o];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=x.encode(e,C.SJIS)}catch(i){throw new In(i)}const r=n.length;for(let o=0;o<r;o+=2){const e=(255&n[o])<<8&4294967295|255&n[o+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new In("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(Rt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}kn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kn.DEFAULT_BYTE_MODE_ENCODING=C.UTF8.getName();class Pn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new d("Found empty contents");if(t<0||n<0)throw new d("Requested dimensions are too small: "+t+"x"+n);let i=vt.L,o=Pn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(En.ERROR_CORRECTION)&&(i=vt.fromString(r.get(En.ERROR_CORRECTION).toString())),void 0!==r.get(En.MARGIN)&&(o=Number.parseInt(r.get(En.MARGIN).toString(),10)));const a=kn.encode(e,i,r);return this.renderResult(a,t,n,o)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const o=this.write(t,n,r,i);e&&e.appendChild(o)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),a=i.getHeight(),s=o+2*r,l=a+2*r,c=Math.max(t,s),u=Math.max(n,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),h=Math.floor((c-o*d)/2),f=Math.floor((u-a*d)/2),p=this.createSVGElement(c,u);for(let g=0,m=f;g<a;g++,m+=d)for(let e=0,t=h;e<o;e++,t+=d)if(1===i.get(e,g)){const e=this.createSvgRectElement(t,m,d,d);p.appendChild(e)}return p}createSVGElement(e,t){const n=document.createElementNS(Pn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Pn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Pn.QUIET_ZONE_SIZE=4,Pn.SVG_NS="http://www.w3.org/2000/svg";class Nn{encode(e,t,n,r,i){if(0===e.length)throw new d("Found empty contents");if(t!==H.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new d("Requested dimensions are too small: ".concat(n,"x").concat(r));let o=vt.L,a=Nn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(En.ERROR_CORRECTION)&&(o=vt.fromString(i.get(En.ERROR_CORRECTION).toString())),void 0!==i.get(En.MARGIN)&&(a=Number.parseInt(i.get(En.MARGIN).toString(),10)));const s=kn.encode(e,o,i);return Nn.renderResult(s,n,r,a)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),a=i.getHeight(),s=o+2*r,l=a+2*r,c=Math.max(t,s),u=Math.max(n,l),d=Math.min(Math.floor(c/s),Math.floor(u/l)),h=Math.floor((c-o*d)/2),f=Math.floor((u-a*d)/2),p=new R(c,u);for(let g=0,m=f;g<a;g++,m+=d)for(let e=0,t=h;e<o;e++,t+=d)1===i.get(e,g)&&p.setRegion(t,m,d,d);return p}}Nn.QUIET_ZONE_SIZE=4;class Dn{encode(e,t,n,r,i){let o;if(t!==H.QR_CODE)throw new d("No encoder available for format "+t);return o=new Nn,o.encode(e,t,n,r,i)}}class On extends D{constructor(e,t,n,r,i,o,a,s){if(super(o,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+o>t||i+a>n)throw new d("Crop rectangle does not fit within image data.");s&&this.reverseHorizontal(o,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;g.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new On(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/On.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/On.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const t=o*e;for(let o=0;o<e;o++){const e=255&r[i+o*On.THUMBNAIL_SCALE_FACTOR];n[t+o]=4278190080|65793*e}i+=this.dataWidth*On.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/On.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/On.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,o=i+e-1;r<t;r++,o--){const e=n[r];n[r]=n[o],n[o]=e}}}invert(){return new O(this)}}On.THUMBNAIL_SCALE_FACTOR=2;class Mn extends D{constructor(e,t,n,r,i,o,a){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=a,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,o=n>>7&510,a=255&n;i[t]=(r+o+a)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===o&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;g.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Mn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new O(this)}}class Ln extends C{static forName(e){return this.getCharacterSetECIByName(e)}}class jn{}jn.ISO_8859_1=C.ISO8859_1;class Fn{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Bn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Un{constructor(e){this.previous=e}getPrevious(){return this.previous}}class zn extends Un{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new zn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new zn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+b.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends zn{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Wn(e,t,n){return new Hn(e,t,n)}function Vn(e,t,n){return new zn(e,t,n)}const Yn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gn=0,qn=1,Xn=2,Qn=3,Zn=4,Kn=new zn(null,0,0),Jn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function $n(e){for(let t of e)w.fill(t,-1);return e[Gn][Zn]=0,e[qn][Zn]=0,e[qn][Gn]=28,e[Qn][Zn]=0,e[Xn][Zn]=0,e[Xn][Gn]=15,e}const er=$n(w.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Jn[this.mode][e];r=Vn(r,65535&t,t>>16),n+=t>>16}let i=e===Xn?4:5;return r=Vn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Xn?4:5;return n=Vn(n,er[this.mode][e],r),n=Vn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Zn||this.mode===Xn){let e=Jn[n][Gn];t=Vn(t,65535&e,e>>16),r+=e>>16,n=Gn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Wn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Jn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new _;for(const r of t)r.appendTo(n,e);return n}toString(){return I.format("%s bits=%d bytes=%d",Yn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=I.getCharCode(" "),n=I.getCharCode("."),r=I.getCharCode(",");e[Gn][t]=1;const i=I.getCharCode("Z"),o=I.getCharCode("A");for(let h=o;h<=i;h++)e[Gn][h]=h-o+2;e[qn][t]=1;const a=I.getCharCode("z"),s=I.getCharCode("a");for(let h=s;h<=a;h++)e[qn][h]=h-s+2;e[Xn][t]=1;const l=I.getCharCode("9"),c=I.getCharCode("0");for(let h=c;h<=l;h++)e[Xn][h]=h-c+2;e[Xn][r]=12,e[Xn][n]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<u.length;h++)e[Qn][I.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)I.getCharCode(d[h])>0&&(e[Zn][I.getCharCode(d[h])]=h);return e}tr.INITIAL_STATE=new tr(Kn,Gn,0,0);const rr=nr(w.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=I.getCharCode(" "),t=I.getCharCode("\n");let n=Bn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,o=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case I.getCharCode("\r"):i=o===t?2:0;break;case I.getCharCode("."):i=o===e?3:0;break;case I.getCharCode(","):i=o===e?4:0;break;case I.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return Bn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,o=null;for(let a=0;a<=Zn;a++){let s=rr[a][r];if(s>0){if(null==o&&(o=e.endBinaryShift(t)),!i||a===e.getMode()||a===Xn){const e=o.latchAndAppend(a,s);n.push(e)}if(!i&&er[e.getMode()][a]>=0){const e=o.shiftAndAppend(a,s);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Zn,n)),e.getMode()!==Zn&&r.push(i.shiftAndAppend(Zn,n)),3===n||4===n){let e=i.latchAndAppend(Xn,16-n).latchAndAppend(Xn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class or{constructor(){}static encodeBytes(e){return or.encode(e,or.DEFAULT_EC_PERCENT,or.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,o,a,s,l=new ir(e).encode(),c=b.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(n!==or.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?or.MAX_NB_BITS_COMPACT:or.MAX_NB_BITS))throw new d(I.format("Illegal value %s for layers",n));o=or.totalBitsInLayer(i,r),a=or.WORD_SIZE[i];let e=o-o%a;if(s=or.stuffBits(l,a),s.getSize()+c>e)throw new d("Data to large for user specified layer");if(r&&s.getSize()>64*a)throw new d("Data to large for user specified layer")}else{a=0,s=null;for(let e=0;;e++){if(e>or.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,o=or.totalBitsInLayer(i,r),u>o)continue;null!=s&&a===or.WORD_SIZE[i]||(a=or.WORD_SIZE[i],s=or.stuffBits(l,a));let t=o-o%a;if(!(r&&s.getSize()>64*a)&&s.getSize()+c<=t)break}}let h,f=or.generateCheckWords(s,o,a),p=s.getSize()/a,g=or.generateModeMessage(r,i,p),m=(r?11:14)+4*i,y=new Int32Array(m);if(r){h=m;for(let e=0;e<y.length;e++)y[e]=e}else{h=m+1+2*b.truncDivision(b.truncDivision(m,2)-1,15);let e=b.truncDivision(m,2),t=b.truncDivision(h,2);for(let n=0;n<e;n++){let r=n+b.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let w=new R(h);for(let d=0,b=0;d<i;d++){let e=4*(i-d)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(b+n+r)&&w.set(y[2*d+r],y[2*d+t]),f.get(b+2*e+n+r)&&w.set(y[2*d+t],y[m-1-2*d-r]),f.get(b+4*e+n+r)&&w.set(y[m-1-2*d-r],y[m-1-2*d-t]),f.get(b+6*e+n+r)&&w.set(y[m-1-2*d-t],y[2*d+r])}b+=8*e}if(or.drawModeMessage(w,r,h,g),r)or.drawBullsEye(w,b.truncDivision(h,2),5);else{or.drawBullsEye(w,b.truncDivision(h,2),7);for(let e=0,t=0;e<b.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&b.truncDivision(h,2);n<h;n+=2)w.set(b.truncDivision(h,2)-t,n),w.set(b.truncDivision(h,2)+t,n),w.set(n,b.truncDivision(h,2)-t),w.set(n,b.truncDivision(h,2)+t)}let _=new Fn;return _.setCompact(r),_.setSize(h),_.setLayers(i),_.setCodeWords(p),_.setMatrix(w),_}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new _;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=or.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=or.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=b.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let t=i-3+o;r.get(o)&&e.set(t,i-5),r.get(o+7)&&e.set(i+5,t),r.get(20-o)&&e.set(t,i+5),r.get(27-o)&&e.set(i-5,t)}else for(let o=0;o<10;o++){let t=i-5+o+b.truncDivision(o,5);r.get(o)&&e.set(t,i-7),r.get(o+10)&&e.set(i+7,t),r.get(29-o)&&e.set(t,i+7),r.get(39-o)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new Sn(or.getGF(n)),o=b.truncDivision(t,n),a=or.bitsToWords(e,n,o);i.encode(a,o-r);let s=t%n,l=new _;l.appendBits(0,s);for(const c of Array.from(a))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,i,o=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;o[r]=n}return o}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let n=new _,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let a=0;for(let n=0;n<t;n++)(o+n>=r||e.get(o+n))&&(a|=1<<t-1-n);(a&i)===i?(n.appendBits(a&i,t),o--):0===(a&i)?(n.appendBits(1|a,t),o--):n.appendBits(a,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}or.DEFAULT_EC_PERCENT=33,or.DEFAULT_AZTEC_LAYERS=0,or.MAX_NB_BITS=32,or.MAX_NB_BITS_COMPACT=4,or.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ar{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=jn.ISO_8859_1,a=or.DEFAULT_EC_PERCENT,s=or.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(En.CHARACTER_SET)&&(o=Ln.forName(i.get(En.CHARACTER_SET).toString())),i.has(En.ERROR_CORRECTION)&&(a=b.parseInt(i.get(En.ERROR_CORRECTION).toString())),i.has(En.AZTEC_LAYERS)&&(s=b.parseInt(i.get(En.AZTEC_LAYERS).toString()))),ar.encodeLayers(e,t,n,r,o,a,s)}static encodeLayers(e,t,n,r,i,o,a){if(t!==H.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let s=or.encode(I.getBytes(e,i),o,a);return ar.renderResult(s,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),o=r.getHeight(),a=Math.max(t,i),s=Math.max(n,o),l=Math.min(a/i,s/o),c=(a-i*l)/2,u=(s-o*l)/2,d=new R(a,s);for(let h=0,f=u;h<o;h++,f+=l)for(let e=0,t=c;e<i;e++,t+=l)r.get(e,h)&&d.setRegion(t,f,l,l);return d}}e.AbstractExpandedDecoder=Ye,e.ArgumentException=u,e.ArithmeticException=$,e.AztecCode=Fn,e.AztecCodeReader=ye,e.AztecCodeWriter=ar,e.AztecDecoder=ie,e.AztecDetector=me,e.AztecDetectorResult=ce,e.AztecEncoder=or,e.AztecHighLevelEncoder=ir,e.AztecPoint=ge,e.BarcodeFormat=H,e.Binarizer=p,e.BinaryBitmap=h,e.BitArray=_,e.BitMatrix=R,e.BitSource=gt,e.BrowserAztecCodeReader=we,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=B,e.BrowserDatamatrixCodeReader=_t,e.BrowserMultiFormatReader=wn,e.BrowserPDF417Reader=bn,e.BrowserQRCodeReader=_n,e.BrowserQRCodeSvgWriter=Pn,e.CharacterSetECI=C,e.ChecksumException=f,e.Code128Reader=_e,e.Code39Reader=ve,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=bt,e.DecodeHintType=E,e.DecoderResult=Z,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=En,e.Exception=c,e.FormatException=S,e.GenericGF=ee,e.GenericGFPoly=J,e.GlobalHistogramBinarizer=P,e.GridSampler=de,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=M,e.HybridBinarizer=N,e.ITFReader=Ee,e.IllegalArgumentException=d,e.IllegalStateException=ne,e.InvertedLuminanceSource=O,e.LuminanceSource=D,e.MathUtils=oe,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=Dn,e.NotFoundException=k,e.OneDReader=be,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=Gt,e.PDF417Reader=gn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=On,e.QRCodeByteMatrix=An,e.QRCodeDataMask=xt,e.QRCodeDecodedBitStreamParser=kt,e.QRCodeDecoderErrorCorrectionLevel=vt,e.QRCodeDecoderFormatInformation=Et,e.QRCodeEncoder=kn,e.QRCodeEncoderQRCode=xn,e.QRCodeMaskUtil=Cn,e.QRCodeMatrixUtil=Tn,e.QRCodeMode=Rt,e.QRCodeReader=Bt,e.QRCodeVersion=At,e.QRCodeWriter=Nn,e.RGBLuminanceSource=Mn,e.RSS14Reader=st,e.RSSExpandedReader=ot,e.ReaderException=mn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=Sn,e.ReedSolomonException=te,e.Result=U,e.ResultMetadataType=Q,e.ResultPoint=se,e.StringUtils=I,e.UnsupportedOperationException=A,e.VideoInputDevice=L,e.WhiteRectangleDetector=ue,e.WriterException=In,e.ZXingArrays=w,e.ZXingCharset=Ln,e.ZXingInteger=b,e.ZXingStandardCharsets=jn,e.ZXingStringBuilder=T,e.ZXingStringEncoding=x,e.ZXingSystem=g,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},198:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=y.prototype;var _=b.prototype=new w;_.constructor=b,g(_,y.prototype),_.isPureReactComponent=!0;var v=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,v(a)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),R(a,t,i,"",function(e){return e})):null!=a&&(x(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",v(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=R(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=R(s=s.value,t,i,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},D={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,n){k(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return k(e,function(){t++}),t},toArray:function(e){return k(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(829)),o=r(n(736)),a=n(745);class s{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:i=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new URL("".concat(this.url,"/rpc/").concat(e));let l;r||i?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;s.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer="count=".concat(a)),new o.default({method:t,url:s,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=s},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function v(e){if(m=!1,_(e),!g)if(null!==r(c))g=!0,D(E);else{var t=r(u);null!==t&&O(v,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,w(x),x=-1),p=!0;var o=f;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!R());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(v,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,A=null,x=-1,I=5,T=-1;function R(){return!(t.unstable_now()-T<I)}function k(){if(null!==A){var e=t.unstable_now();T=e;var n=!0;try{n=A(!0,e)}finally{n?S():(C=!1,A=null)}}else C=!1}if("function"===typeof b)S=function(){b(k)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=k,S=function(){N.postMessage(null)}}else S=function(){y(k,0)};function D(e){A=e,C||(C=!0,S())}function O(e,n){x=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(w(x),x=-1):m=!0,O(v,o-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,D(E))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(630)),o=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let i=null,a=null,s=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),o=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&o&&o.length>1&&(s=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,s=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(a=[],i=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new o.default(i)}return{error:i,data:a,count:s,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],d=t[c];if(!1===(i=n?n.call(r,u,d,c):void 0)||void 0===i&&u!==d)return!1}return!0}},345:(e,t,n)=>{"use strict";n.d(t,{dt:()=>c});const r={baseUrl:"https://papillonbrand.us",imageBaseUrl:"https://cdn.shopify.com/s/files/1/",imageSuffix:"/files/",defaultImageSize:"600x600",altImageSize:"1200x1200"},i={primary:"#FFB000",secondary:"#7F3FBF",accent:"#10B981",dark:"#1F2937",light:"#F9FAFB",gradient:{monarch:"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)",chrysalis:"linear-gradient(135deg, #7F3FBF 0%, #5B21B6 100%)",nectar:"linear-gradient(135deg, #10B981 0%, #059669 100%)",wing:"linear-gradient(135deg, #1F2937 0%, #111827 100%)"}},o={ultra_rare:{name:"Ultra Rare",description:"Extremely limited availability",color:"#FFB000",multiplier:2},legendary:{name:"Legendary",description:"Legendary status with unique features",color:"#7F3FBF",multiplier:3},mythic:{name:"Mythic",description:"Mythical rarity - the rarest of all",color:"#10B981",multiplier:5}},a=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return{id:t,src:"".concat(r.imageBaseUrl).concat(e).concat(r.imageSuffix).concat(n,"?v=").concat(Date.now()),alt:i,width:600,height:600,srcSet:{small:"".concat(r.imageBaseUrl).concat(e).concat(r.imageSuffix).concat(n,"?width=300&height=300"),medium:"".concat(r.imageBaseUrl).concat(e).concat(r.imageSuffix).concat(n,"?width=600&height=600"),large:"".concat(r.imageBaseUrl).concat(e).concat(r.imageSuffix).concat(n,"?width=1200&height=1200")}}},s=function(e,t,n){return{totalSupply:e,bonusWings:t,exclusivityLevel:n,endDate:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,isActive:!0}},l={MONARCH_VARSITY_JACKET:{rewardId:"MONARCH_VARSITY_JACKET",name:"Monarch Varsity Jacket",description:"Limited edition varsity jacket featuring embroidered Monarch butterfly design with premium wool blend construction. Each piece is individually numbered and includes exclusive PapillonLabs branding.",category:"jackets",rarity:"legendary",wingsValue:150,season:"Spring2025",isActive:!0,shopifyProductId:"monarch-varsity-jacket-001",shopifyPrice:29900,shopifyHandle:"monarch-varsity-jacket-limited",limitedEdition:s(100,200,"legendary","2025-06-30T23:59:59Z"),images:[a("monarch-varsity-jacket-001","img_001","monarch-varsity-front.jpg","Monarch Varsity Jacket Front View"),a("monarch-varsity-jacket-001","img_002","monarch-varsity-back.jpg","Monarch Varsity Jacket Back View"),a("monarch-varsity-jacket-001","img_003","monarch-varsity-detail.jpg","Monarch Varsity Jacket Detail")],metadata:{material:"Premium wool blend",fit:"Classic varsity fit",features:["Embroidered Monarch design","Individual numbering","Exclusive branding"],care:"Dry clean only",sustainability:"Eco-friendly materials"}},GOLDEN_MONARCH_CHAIN:{rewardId:"GOLDEN_MONARCH_CHAIN",name:"Golden Monarch Chain",description:"Exclusive 14k gold-plated chain featuring a handcrafted Monarch butterfly pendant. Ultra-limited release with only 50 pieces available worldwide.",category:"accessories",rarity:"mythic",wingsValue:300,season:"Spring2025",isActive:!0,shopifyProductId:"golden-monarch-chain-001",shopifyPrice:59900,shopifyHandle:"golden-monarch-chain-ultra-limited",limitedEdition:s(50,500,"mythic","2025-05-15T23:59:59Z"),images:[a("golden-monarch-chain-001","img_004","golden-chain-front.jpg","Golden Monarch Chain Front View"),a("golden-monarch-chain-001","img_005","golden-chain-detail.jpg","Golden Monarch Chain Detail"),a("golden-monarch-chain-001","img_006","golden-chain-packaging.jpg","Golden Monarch Chain Packaging")],metadata:{material:"14k gold-plated brass",chainLength:"18 inches",pendantSize:"1.5 inches",features:["Handcrafted pendant","Limited numbering","Certificate of authenticity"],care:"Store in provided pouch",exclusivity:"Only 50 pieces worldwide"}},CHRYSALIS_COLLECTION_HOODIE:{rewardId:"CHRYSALIS_COLLECTION_HOODIE",name:"Chrysalis Collection Hoodie",description:"Premium cotton blend hoodie featuring the Chrysalis Collection design. Limited to 200 pieces with exclusive gradient detailing.",category:"hoodies",rarity:"epic",wingsValue:100,season:"Spring2025",isActive:!0,shopifyProductId:"chrysalis-hoodie-001",shopifyPrice:12900,shopifyHandle:"chrysalis-collection-hoodie",limitedEdition:s(200,150,"ultra_rare","2025-07-31T23:59:59Z"),images:[a("chrysalis-hoodie-001","img_007","chrysalis-hoodie-front.jpg","Chrysalis Hoodie Front View"),a("chrysalis-hoodie-001","img_008","chrysalis-hoodie-back.jpg","Chrysalis Hoodie Back View"),a("chrysalis-hoodie-001","img_009","chrysalis-hoodie-detail.jpg","Chrysalis Hoodie Detail")],metadata:{material:"Premium cotton blend",fit:"Relaxed fit",features:["Gradient design","Limited edition","Exclusive branding"],care:"Machine wash cold",sustainability:"Organic cotton blend"}},NECTAR_COLLECTION_TEE:{rewardId:"NECTAR_COLLECTION_TEE",name:"Nectar Collection Tee",description:"Classic fit t-shirt featuring the Nectar Collection design. Limited to 150 pieces with exclusive colorway.",category:"tops",rarity:"rare",wingsValue:75,season:"Spring2025",isActive:!0,shopifyProductId:"nectar-tee-001",shopifyPrice:4500,shopifyHandle:"nectar-collection-tee",limitedEdition:s(150,100,"ultra_rare","2025-08-31T23:59:59Z"),images:[a("nectar-tee-001","img_010","nectar-tee-front.jpg","Nectar Tee Front View"),a("nectar-tee-001","img_011","nectar-tee-back.jpg","Nectar Tee Back View")],metadata:{material:"100% organic cotton",fit:"Classic fit",features:["Exclusive colorway","Limited edition","Sustainable materials"],care:"Machine wash cold",sustainability:"100% organic cotton"}},CLASSIC_MONARCH_TEE:{rewardId:"CLASSIC_MONARCH_TEE",name:"Classic Monarch Tee",description:"Timeless t-shirt featuring the iconic Monarch butterfly design. Made from premium organic cotton with sustainable practices.",category:"tops",rarity:"common",wingsValue:25,season:"Spring2025",isActive:!0,shopifyProductId:"classic-monarch-tee-001",shopifyPrice:3500,shopifyHandle:"classic-monarch-tee",images:[a("classic-monarch-tee-001","img_012","classic-tee-front.jpg","Classic Monarch Tee Front View"),a("classic-monarch-tee-001","img_013","classic-tee-back.jpg","Classic Monarch Tee Back View")],metadata:{material:"100% organic cotton",fit:"Classic fit",features:["Iconic Monarch design","Sustainable materials","Comfortable fit"],care:"Machine wash cold",sustainability:"100% organic cotton"}},MONARCH_SNAPBACK:{rewardId:"MONARCH_SNAPBACK",name:"Monarch Snapback",description:"Classic snapback cap featuring embroidered Monarch butterfly design. Adjustable fit with premium construction.",category:"headwear",rarity:"uncommon",wingsValue:40,season:"Spring2025",isActive:!0,shopifyProductId:"monarch-snapback-001",shopifyPrice:2800,shopifyHandle:"monarch-snapback",images:[a("monarch-snapback-001","img_014","snapback-front.jpg","Monarch Snapback Front View"),a("monarch-snapback-001","img_015","snapback-side.jpg","Monarch Snapback Side View")],metadata:{material:"Premium cotton twill",fit:"Adjustable snapback",features:["Embroidered design","Adjustable fit","Premium construction"],care:"Spot clean only",sustainability:"Sustainable materials"}},WING_COLLECTION_PINS:{rewardId:"WING_COLLECTION_PINS",name:"Wing Collection Pin Set",description:"Collectible enamel pin set featuring various butterfly wing designs. Perfect for collectors and enthusiasts.",category:"accessories",rarity:"rare",wingsValue:60,season:"Spring2025",isActive:!0,shopifyProductId:"wing-pins-001",shopifyPrice:1800,shopifyHandle:"wing-collection-pins",images:[a("wing-pins-001","img_016","wing-pins-set.jpg","Wing Collection Pin Set"),a("wing-pins-001","img_017","wing-pins-individual.jpg","Individual Wing Pins")],metadata:{material:"Enamel on metal",setSize:"5 pins",features:["Collectible design","Enamel finish","Display case included"],care:"Store in provided case",collectibility:"Limited production runs"}},BLOOM_COLLECTION_HOODIE:{rewardId:"BLOOM_COLLECTION_HOODIE",name:"Bloom Collection Hoodie",description:"Cozy pullover hoodie featuring the Bloom Collection design. Made from sustainable materials with comfortable fit.",category:"hoodies",rarity:"uncommon",wingsValue:80,season:"Spring2025",isActive:!0,shopifyProductId:"bloom-hoodie-001",shopifyPrice:8900,shopifyHandle:"bloom-collection-hoodie",images:[a("bloom-hoodie-001","img_018","bloom-hoodie-front.jpg","Bloom Hoodie Front View"),a("bloom-hoodie-001","img_019","bloom-hoodie-back.jpg","Bloom Hoodie Back View")],metadata:{material:"Sustainable cotton blend",fit:"Relaxed fit",features:["Bloom design","Sustainable materials","Comfortable fit"],care:"Machine wash cold",sustainability:"Sustainable cotton blend"}},POLLINATE_COLLECTION_BAG:{rewardId:"POLLINATE_COLLECTION_BAG",name:"Pollinate Collection Bag",description:"Eco-friendly tote bag featuring the Pollinate Collection design. Perfect for everyday use with sustainable construction.",category:"accessories",rarity:"common",wingsValue:30,season:"Spring2025",isActive:!0,shopifyProductId:"pollinate-bag-001",shopifyPrice:2200,shopifyHandle:"pollinate-collection-bag",images:[a("pollinate-bag-001","img_020","pollinate-bag-front.jpg","Pollinate Bag Front View"),a("pollinate-bag-001","img_021","pollinate-bag-interior.jpg","Pollinate Bag Interior")],metadata:{material:"Recycled canvas",dimensions:'15" x 12" x 4"',features:["Eco-friendly design","Recycled materials","Spacious interior"],care:"Spot clean only",sustainability:"100% recycled materials"}},MONARCH_SNAPBACK_CAP:{rewardId:"MONARCH_SNAPBACK_CAP",name:"Monarch Snapback Cap",description:"Embroidered snapback cap with adjustable strap and metallic butterfly accent",category:"headwear",rarity:"uncommon",wingsValue:35,season:"Spring2025",isActive:!0,shopifyProductId:"monarch-snapback-cap-001",shopifyPrice:2800,shopifyHandle:"monarch-snapback-cap",images:[a("monarch-snapback-cap-001","img_022","snapback-cap-front.jpg","Monarch Snapback Cap Front View"),a("monarch-snapback-cap-001","img_023","snapback-cap-side.jpg","Monarch Snapback Cap Side View")],metadata:{material:"Premium cotton twill",fit:"Adjustable snapback",features:["Embroidered design","Adjustable fit","Metallic accent"],care:"Spot clean only",sustainability:"Sustainable materials"}},MONARCH_PIN_SET:{rewardId:"MONARCH_PIN_SET",name:"Monarch Pin Set",description:"Collectible enamel pin set featuring butterfly designs and exclusive packaging",category:"accessories",rarity:"rare",wingsValue:45,season:"Spring2025",isActive:!0,shopifyProductId:"monarch-pin-set-001",shopifyPrice:1800,shopifyHandle:"monarch-pin-set",images:[a("monarch-pin-set-001","img_024","monarch-pin-set.jpg","Monarch Pin Set"),a("monarch-pin-set-001","img_025","monarch-pin-individual.jpg","Individual Monarch Pins")],metadata:{material:"Enamel on metal",setSize:"3 pins",features:["Collectible design","Enamel finish","Exclusive packaging"],care:"Store in provided case",collectibility:"Limited production runs"}},MONARCH_BACKPACK:{rewardId:"MONARCH_BACKPACK",name:"Monarch Backpack",description:"Functional backpack with butterfly wing design and premium materials",category:"accessories",rarity:"rare",wingsValue:45,season:"Spring2025",isActive:!0,shopifyProductId:"monarch-backpack-001",shopifyPrice:4500,shopifyHandle:"monarch-backpack",images:[a("monarch-backpack-001","img_026","monarch-backpack-front.jpg","Monarch Backpack Front View"),a("monarch-backpack-001","img_027","monarch-backpack-interior.jpg","Monarch Backpack Interior")],metadata:{material:"Premium canvas",dimensions:'16" x 12" x 6"',features:["Butterfly wing design","Premium materials","Spacious interior"],care:"Spot clean only",sustainability:"Sustainable materials"}}},c={getActiveRewards:()=>Object.values(l).filter(e=>e.isActive),getLimitedEditionRewards:()=>Object.values(l).filter(e=>e.isActive&&e.limitedEdition),getRegularRewards:()=>Object.values(l).filter(e=>e.isActive&&!e.limitedEdition),getRewardById:e=>l[e]||null,getRewardsByCategory:e=>Object.values(l).filter(t=>t.isActive&&t.category===e),getRewardsByRarity:e=>Object.values(l).filter(t=>t.isActive&&t.rarity===e),getRewardsBySeason:e=>Object.values(l).filter(t=>t.isActive&&t.season===e),isLimitedEdition(e){const t=l[e];return!!t&&!!t.limitedEdition},getLimitedEditionConfig(e){const t=l[e];return(null===t||void 0===t?void 0:t.limitedEdition)||null},getTotalWingsValue(e){var t;const n=l[e];if(!n)return 0;return n.wingsValue+((null===(t=n.limitedEdition)||void 0===t?void 0:t.bonusWings)||0)},getShopifyUrl(e){const t=l[e];return null!==t&&void 0!==t&&t.shopifyHandle?"".concat(r.baseUrl,"/products/").concat(t.shopifyHandle):null},getPrimaryImage(e){var t;const n=l[e];return(null===n||void 0===n||null===(t=n.images)||void 0===t?void 0:t[0])||null},getExclusivityLevel:e=>o[e]||null,getAllExclusivityLevels:()=>o,getMonarchColors:()=>i}},374:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(286));class o extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=i?"".concat(i,".order"):"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,"".concat(a?"".concat(a,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":"".concat(r,".offset"),o="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(o,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(o,'; for="').concat(l,'"; options=').concat(s,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=o},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},507:(e,t,n)=>{"use strict";n.d(t,{UU:()=>Yt});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class i extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class o extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var s;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(s||(s={}));var l=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:r,region:i=s.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:l}=t;let c,u={},{region:d}=t;d||(d=this.region),d&&"any"!==d&&(u["x-region"]=d),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",c=l):"string"===typeof l?(u["Content-Type"]="text/plain",c=l):"undefined"!==typeof FormData&&l instanceof FormData?c=l:(u["Content-Type"]="application/json",c=JSON.stringify(l)));const h=yield this.fetch("".concat(this.url,"/").concat(e),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),r),body:c}).catch(e=>{throw new i(e)}),f=h.headers.get("x-relay-error");if(f&&"true"===f)throw new o(h);if(!h.ok)throw new a(h);let p,g=(null!==(n=h.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===g?yield h.json():"application/octet-stream"===g?yield h.blob():"text/event-stream"===g?h:"multipart/form-data"===g?yield h.formData():yield h.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}var u=n(980);const{PostgrestClient:d,PostgrestQueryBuilder:h,PostgrestFilterBuilder:f,PostgrestTransformBuilder:p,PostgrestBuilder:g,PostgrestError:m}=u;let y;y="undefined"===typeof window?n(198):window.WebSocket;const w=y,b={"X-Client-Info":"realtime-js/".concat("2.11.10")};var _,v,E,S,C,A;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(_||(_={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(v||(v={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(E||(E={})),function(e){e.websocket="websocket"}(S||(S={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(C||(C={}));class x{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o+=r;const s=n.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:a,event:s,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class I{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(A||(A={}));const T=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,i)=>(n[i]=R(i,e,t,r),n),{})},R=(e,t,n,r)=>{const i=t.find(t=>t.name===e),o=null===i||void 0===i?void 0:i.type,a=n[e];return o&&!r.includes(o)?k(o,a):P(a)},k=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return M(t,n)}switch(e){case A.bool:return N(t);case A.float4:case A.float8:case A.int2:case A.int4:case A.int8:case A.numeric:case A.oid:return D(t);case A.json:case A.jsonb:return O(t);case A.timestamp:return L(t);case A.abstime:case A.date:case A.daterange:case A.int4range:case A.int8range:case A.money:case A.reltime:case A.text:case A.time:case A.timestamptz:case A.timetz:case A.tsrange:case A.tstzrange:default:return P(t)}},P=e=>e,N=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},D=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},O=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},M=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const o=e.slice(1,n);try{r=JSON.parse("["+o+"]")}catch(i){r=o?o.split(","):[]}return r.map(e=>k(t,e))}return e},L=e=>"string"===typeof e?e.replace(" ","T"):e,j=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class F{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var B,U,z,H;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(B||(B={}));class W{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=W.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=W.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=W.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},s={};return this.map(i,(e,t)=>{o[e]||(s[e]=t)}),this.map(o,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),o=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(a[e]=o),l.length>0&&(s[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let i=e[t];if(!i)return;const o=n.map(e=>e.presence_ref);i=i.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(U||(U={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(z||(z={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(H||(H={}));class V{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new F(this,E.join,this.params,this.timeout),this.rejoinTimer=new I(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=v.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())}),this._on(E.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new W(this),this.broadcastEndpointURL=j(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(H.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(H.CLOSED));const s={},l={broadcast:i,presence:o,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,o=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:a,schema:s,table:l,filter:c}}=i,u=n&&n[r];if(!u||u.event!==a||u.schema!==s||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=v.errored,void(null===e||void 0===e||e(H.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(H.SUBSCRIBED))}null===e||void 0===e||e(H.SUBSCRIBED)}).receive("error",t=>{this.state=v.errored,null===e||void 0===e||e(H.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(H.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,o;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:o,payload:a}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=v.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(E.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const r=new F(this,E.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new F(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:s,leave:l,join:c}=E;if(n&&[a,s,l,c].indexOf(o)>=0&&n!==this._joinRef())return;let u=this._onMessage(o,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(u,n)):null===(i=this.bindings[o])||void 0===i||i.filter(e=>{var n,r,i,a,s,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(s=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:o}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:o};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&V.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(E.close,{},e)}_onError(e){this._on(E.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=T(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=T(e.columns,e.old_record)),t}}const Y=()=>{};class G{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=b,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Y,this.ref=0,this.logger=Y,this.conn=null,this.sendBuffer=[],this.serializer=new x,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(S.websocket),this.httpEndpoint=j(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new I(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=w),this.transport){const e="undefined"!==typeof window&&this.transport===window.WebSocket;return this.conn=e?new this.transport(this.endpointURL()):new this.transport(this.endpointURL(),void 0,{headers:this.headers}),void this.setupConnection()}this.conn=new q(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(t=>t._joinRef!==e._joinRef),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _.connecting:return C.Connecting;case _.open:return C.Open;case _.closing:return C.Closing;default:return C.Closed}}isConnected(){return this.connectionState()===C.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new V("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e,version:this.headers&&this.headers["X-Client-Info"]}),t.joinedOnce&&t._isJoined()&&t._push(E.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(i&&"("+i+")"||""),r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){if(this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(E.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class q{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=_.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class X extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Q(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Z extends X{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class K extends X{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var J=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const $=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ee=e=>{if(Array.isArray(e))return e.map(e=>ee(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const i=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[i]=ee(r)}),t};var te=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ne=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),re=(e,t,r)=>te(void 0,void 0,void 0,function*(){const i=yield J(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof i&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new Z(ne(n),e.status||500))}).catch(e=>{t(new K(ne(e),e))}):t(new K(ne(e),e))});function ie(e,t,n,r,i,o){return te(this,void 0,void 0,function*(){return new Promise((a,s)=>{e(n,((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))})(t,r,i,o)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>re(e,s,r))})})}function oe(e,t,n,r){return te(this,void 0,void 0,function*(){return ie(e,"GET",t,n,r)})}function ae(e,t,n,r,i){return te(this,void 0,void 0,function*(){return ie(e,"POST",t,r,i,n)})}function se(e,t,n,r,i){return te(this,void 0,void 0,function*(){return ie(e,"DELETE",t,r,i,n)})}var le=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ce={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ue={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class de{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=$(r)}uploadOrUpdate(e,t,n,r){return le(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ue),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const s=o.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),s&&i.append("metadata",this.encodeMetadata(s)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),s&&i.append("metadata",this.encodeMetadata(s))):(i=n,a["cache-control"]="max-age=".concat(o.cacheControl),a["content-type"]=o.contentType,s&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch("".concat(this.url,"/object/").concat(c),Object.assign({method:e,body:i,headers:a},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{})),d=yield u.json();if(u.ok)return{data:{path:l,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}upload(e,t,n){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return le(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+"/object/upload/sign/".concat(o));a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ue.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]="max-age=".concat(t.cacheControl),o["content-type"]=t.contentType);const s=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:o}),l=yield s.json();if(s.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(s){if(Q(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return le(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield ae(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new X("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}update(e,t,n){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return le(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}copy(e,t,n){return le(this,void 0,void 0,function*(){try{return{data:{path:(yield ae(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return le(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ae(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(o))},{data:i,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return le(this,void 0,void 0,function*(){try{const r=yield ae(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null})),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}download(e,t){return le(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield oe(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(i),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(o){if(Q(o))return{data:null,error:o};throw o}})}info(e){return le(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield oe(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:ee(e),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}exists(e){return le(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return te(this,void 0,void 0,function*(){return ie(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(Q(n)&&n instanceof K){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&r.push(i);const o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let s=r.join("&");return""!==s&&(s="?".concat(s)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(o,"/public/").concat(n).concat(s))}}}remove(e){return le(this,void 0,void 0,function*(){try{return{data:yield se(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}list(e,t,n){return le(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},ce),t),{prefix:e||""});return{data:yield ae(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const he={"X-Client-Info":"storage-js/".concat("2.7.1")};var fe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class pe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},he),t),this.fetch=$(n)}listBuckets(){return fe(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return fe(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return fe(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,i){return te(this,void 0,void 0,function*(){return ie(e,"PUT",t,r,i,n)})}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield ae(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield se(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(Q(t))return{data:null,error:t};throw t}})}}class ge extends pe{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new de(this.url,this.headers,e,this.fetch)}}let me="";me="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ye={headers:{"X-Client-Info":"supabase-js-".concat(me,"/").concat("2.50.0")}},we={schema:"public"},be={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_e={};var ve=n(630),Ee=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Se=e=>{let t;return t=e||("undefined"===typeof fetch?ve.default:fetch),function(){return t(...arguments)}},Ce=(e,t,n)=>{const r=Se(n),i="undefined"===typeof Headers?ve.Headers:Headers;return(n,o)=>Ee(void 0,void 0,void 0,function*(){var a;const s=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null===o||void 0===o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(s)),r(n,Object.assign(Object.assign({},o),{headers:l}))})};var Ae=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const xe="2.70.0",Ie=3e4,Te=9e4,Re={"X-Client-Info":"gotrue-js/".concat(xe)},ke="X-Supabase-Api-Version",Pe={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ne=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class De extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Oe(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Me extends De{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Le extends De{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class je extends De{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Fe extends je{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Be extends je{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ue extends je{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ze extends je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class He extends je{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class We extends je{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ve(e){return Oe(e)&&"AuthRetryableFetchError"===e.name}class Ye extends je{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Ge extends je{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xe=" \t\n\r=".split(""),Qe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=-2;for(let t=0;t<qe.length;t+=1)e[qe[t].charCodeAt(0)]=t;return e})();function Ze(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(qe[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(qe[e]),t.queuedBits-=6}}function Ke(e,t,n){const r=Qe[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Je(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)Ke(e.charCodeAt(a),i,o);return t.join("")}function $e(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function et(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}$e(r,t)}}function tt(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Ke(e.charCodeAt(i),n,r);return new Uint8Array(t)}function nt(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Ze(e,n,r)),Ze(null,n,r),t.join("")}const rt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,it={tested:!1,writable:!1},ot=()=>{if(!rt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(it.tested)return it.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),it.tested=!0,it.writable=!0}catch(t){it.tested=!0,it.writable=!1}return it.writable};const at=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},st=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},lt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},ct=async(e,t)=>{await e.removeItem(t)};class ut{constructor(){this.promise=new ut.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function dt(e){const t=e.split(".");if(3!==t.length)throw new Ge("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ne.test(t[n]))throw new Ge("JWT not in base64url format");return{header:JSON.parse(Je(t[0])),payload:JSON.parse(Je(t[1])),signature:tt(t[2]),raw:{header:t[0],payload:t[1]}}}function ht(e){return("0"+e.toString(16)).substr(-2)}async function ft(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,ht).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await st(e,"".concat(t,"-code-verifier"),i);const o=await ft(r);return[o,r===o?"plain":"s256"]}ut.promiseConstructor=Promise;const gt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const mt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yt(e){if(!mt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var wt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const bt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_t=[502,503,504];async function vt(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new We(bt(e),0);if(_t.includes(e.status))throw new We(bt(e),e.status);let r,i;try{r=await e.json()}catch(a){throw new Le(bt(a),a)}const o=function(e){const t=e.headers.get(ke);if(!t)return null;if(!t.match(gt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(a){return null}}(e);if(o&&o.getTime()>=Pe.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?i=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new Ye(bt(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Fe}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ye(bt(r),e.status,r.weak_password.reasons);throw new Me(bt(r),e.status||500,i)}async function Et(e,t,n,r){var i;const o=Object.assign({},null===r||void 0===r?void 0:r.headers);o[ke]||(o[ke]=Pe.name),(null===r||void 0===r?void 0:r.jwt)&&(o.Authorization="Bearer ".concat(r.jwt));const a=null!==(i=null===r||void 0===r?void 0:r.query)&&void 0!==i?i:{};(null===r||void 0===r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,i,o){const a=((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,o);let s;try{s=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new We(bt(l),0)}s.ok||await vt(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(l){await vt(l)}}(e,t,n+s,{headers:o,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function St(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ct(e){const t=St(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function At(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xt(e){return{data:e,error:null}}function It(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=wt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},user:Object.assign({},a)},error:null}}function Tt(e){return e}const Rt=["global","local","others"];var kt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Pt{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=at(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt[0];if(Rt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Rt.join(", ")));try{return await Et(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Et(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:At})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=kt(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Et(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:It,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Et(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:At})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,a,s;try{const l={nextPage:null,lastPage:0,total:0},c=await Et(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:Tt});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(s=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Oe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){yt(e);try{return await Et(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:At})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){yt(e);try{return await Et(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:At})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];yt(e);try{return await Et(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:At})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){yt(e.userId);try{const{data:t,error:n}=await Et(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){yt(e.userId),yt(e.id);try{return{data:await Et(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}}const Nt={getItem:e=>ot()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ot()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ot()&&globalThis.localStorage.removeItem(e)}};function Dt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ot=!!(globalThis&&ot()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Mt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Lt extends Mt{}async function jt(e,t,n){Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ot&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Ot&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Lt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ot)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Ot&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ft={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Re,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bt(e,t,n){return await n()}class Ut{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ut.nextInstanceID,Ut.nextInstanceID+=1,this.instanceID>0&&rt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ft),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Pt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=at(r.fetch),this.lock=r.lock||Bt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:rt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=jt:this.lock=Bt,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ot()?this.storage=Nt:(this.memoryStorage={},this.storage=Dt(this.memoryStorage)):(this.memoryStorage={},this.storage=Dt(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(xe,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),rt()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Oe(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Oe(t)?{error:t}:{error:new Le("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Et(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:St}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(Oe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:o}=e;let a=null,s=null;"pkce"===this.flowType&&([a,s]=await pt(this.storage,this.storageKey)),i=await Et(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:s},xform:St})}else{if(!("phone"in e))throw new Ue("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:a}=e;i=await Et(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:St})}}const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(Oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await Et(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Ct})}else{if(!("phone"in e))throw new Ue("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await Et(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Ct})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Be}}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,i,o,a,s,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:g,options:m}=e;let y;if(rt())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const w=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(w.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1","URI: ".concat(w.href),"Issued At: ".concat(null!==(r=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(i=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?["Not Before: ".concat(m.signInWithSolana.notBefore)]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.expirationTime)?["Expiration Time: ".concat(m.signInWithSolana.expirationTime)]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?["Chain ID: ".concat(m.signInWithSolana.chainId)]:[],...(null===(s=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===s?void 0:s.nonce)?["Nonce: ".concat(m.signInWithSolana.nonce)]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(m.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Et(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:nt(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:St});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Be}}catch(g){if(Oe(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await lt(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await Et(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:St});if(await ct(this.storage,"".concat(this.storageKey,"-code-verifier")),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Be}}catch(i){if(Oe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,a=await Et(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:St}),{data:s,error:l}=a;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new Be}}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:r,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await pt(this.storage,this.storageKey));const{error:s}=await Et(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:s}=await Et(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(o=null===n||void 0===n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:s}}throw new Ue("You must provide either an email or phone number.")}catch(a){if(Oe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:a}=await Et(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:St});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const s=o.session,l=o.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(Oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await pt(this.storage,this.storageKey)),await Et(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:xt})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Fe;const{error:r}=await Et(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await Et(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await Et(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:a}}throw new Ue("You must provide either an email or phone number and a type")}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await lt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Te;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Et(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:At}):await this._useSession(async e=>{var t,n,r;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Et(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:At}):{data:{user:null},error:new Fe}})}catch(t){if(Oe(t))return function(e){return Oe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await ct(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Fe;const o=r.session;let a=null,s=null;"pkce"===this.flowType&&null!=e.email&&([a,s]=await pt(this.storage,this.storageKey));const{data:l,error:c}=await Et(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:s}),jwt:o.access_token,xform:At});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Oe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fe;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=dt(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Oe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Fe;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!rt())throw new ze("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ze(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new He("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new ze("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new He("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:s,token_type:l}=e;if(!i||!a||!o||!l)throw new ze("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;s&&(d=parseInt(s));const h=d-c;1e3*h<=Ie&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:g}=await this._getUser(i);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Oe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await lt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return Oe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await ct(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await pt(this.storage,this.storageKey,!0));try{return await Et(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Oe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,o,a;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Et(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(o=s.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return rt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Oe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await Et(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Et(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:St})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ve(t)&&Date.now()+n-i<Ie},new Promise((e,t)=>{(async()=>{for(let o=0;o<1/0;o++)try{const t=await n(o);if(!r(o,null,t))return void e(t)}catch(i){if(!r(o,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),Oe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),rt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await lt(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<Te;if(this._debug(t,"session has".concat(r?"":" not"," expired with margin of ").concat(Te,"s")),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ve(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Fe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new ut;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Fe;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Oe(i)){const e={session:null,error:i};return Ve(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await st(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ct(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ie);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Ie);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Ie,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Mt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await pt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Et(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await Et(this.fetch,"POST","".concat(this.url,"/factors"),{body:a,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code="data:image/svg+xml;utf-8,".concat(s.totp.qr_code)),{data:s,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await Et(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Et(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=dt(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await Et(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new Ge("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find(t=>t.kid===e),!t)throw new Ge("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:s}}=dt(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:o},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),u=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,u,o,function(e){const t=[];return et(e,e=>t.push(e)),new Uint8Array(t)}("".concat(a,".").concat(s))))throw new Ge("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}}}Ut.nextInstanceID=0;const zt=Ut;class Ht extends zt{constructor(e){super(e)}}var Wt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Vt{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),u=function(e,t){var n,r;const{db:i,auth:o,realtime:a,global:s}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),a),global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>Ae(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:we,realtime:_e,auth:Object.assign(Object.assign({},be),{storageKey:c}),global:ye});this.storageKey=null!==(r=u.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(o=u.auth)&&void 0!==o?o:{},this.headers,u.global.fetch),this.fetch=Ce(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new d(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ge(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Wt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:a,storageKey:s,flowType:l,lock:c,debug:u}=e;const d={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Ht({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:s,autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:a,flowType:l,lock:c,debug:u,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new G(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Yt=(e,t,n)=>new Vt(e,t,n)},555:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>s})},579:(e,t,n)=>{"use strict";e.exports=n(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>s,Response:()=>l,default:()=>o,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,o=r.fetch.bind(r),a=r.Headers,s=r.Request,l=r.Response},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,w);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,w);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,w);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case A:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){K(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Ce=null;function Ae(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=vi(t),Ee(e.stateNode,e.type,t))}}function xe(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Ie(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Te(e,t){return e(t)}function Re(){}var ke=!1;function Pe(e,t,n){if(ke)return e(t,n);ke=!0;try{return Te(e,t,n)}finally{ke=!1,(null!==Se||null!==Ce)&&(Re(),Ie())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=vi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Me(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,je=null,Fe=!1,Be=null,Ue={onError:function(e){Le=!0,je=e}};function ze(e,t,n,r,i,o,a,s,l){Le=!1,je=null,Me.apply(Ue,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(o(188))}function Ye(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Ke=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function wt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,Et,St,Ct,At,xt=!1,It=[],Tt=null,Rt=null,kt=null,Pt=new Map,Nt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=wi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void At(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){xt=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==kt&&Ft(kt)&&(kt=null),Pt.forEach(Bt),Nt.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Ht(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Rt&&zt(Rt,e),null!==kt&&zt(kt,e),Pt.forEach(t),Nt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)jt(n),null===n.blockedOn&&Dt.shift()}var Wt=_.ReactCurrentBatchConfig,Vt=!0;function Yt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function qt(e,t,n,r){if(Vt){var i=Qt(e,t,n,r);if(null===i)Vr(e,t,r,Xt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Rt=Lt(Rt,e,t,n,r,i),!0;case"mouseover":return kt=Lt(kt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,Lt(Nt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&vt(o),null===(o=Qt(e,t,n,r))&&Vr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Xt=null;function Qt(e,t,n,r){if(Xt=null,null!==(e=wi(e=ve(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=j({},cn,{view:0,detail:0}),hn=on(dn),fn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(j({},fn,{dataTransfer:0})),mn=on(j({},dn,{relatedTarget:0})),yn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(wn),_n=on(j({},cn,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function An(){return Cn}var xn=j({},dn,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(xn),Tn=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),kn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,jn=u&&(!On||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Yn(e,t,n,r){xe(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Xn(e){Fr(e,0)}function Qn(e){if(q(_i(e)))return e}function Zn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Kn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(qn)){var t=[];Yn(t,qn,e,ve(e)),Pe(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(qn)}function or(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,wr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&lr(wr,r)||(wr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Sr={},Cr={};function Ar(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Sr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var xr=Ar("animationend"),Ir=Ar("animationiteration"),Tr=Ar("animationstart"),Rr=Ar("transitionend"),kr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){kr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Nr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Nr(xr,"onAnimationEnd"),Nr(Ir,"onAnimationIteration"),Nr(Tr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=je;Le=!1,je=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Zt(t)){case 1:var i=Yt;break;case 4:i=Gt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=wi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Pe(function(){var r=o,i=ve(n),a=[];e:{var s=kr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case xr:case Ir:case Tr:l=yn;break;case Rr:l=kn;break;case"scroll":l=hn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ne(p,h))&&u.push(Yr(p,g,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:_i(l),f=null==c?s:_i(c),(s=new u(g,p+"leave",l,n,i)).target=d,s.relatedTarget=f,g=null,wi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=qr(f))p++;for(f=0,g=h;g;g=qr(g))f++;for(;0<p-f;)u=qr(u),p--;for(;0<f-p;)h=qr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=qr(u),h=qr(h)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zn;else if(Vn(s))if(Kn)m=ar;else{m=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Yn(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?_i(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,wr=null);break;case"focusout":wr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(a,n,i)}var w;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(w=en()):(Jt="value"in(Kt=i)?Kt.value:Kt.textContent,Hn=!0)),0<(y=Gr(r,b)).length&&(b=new _n(b,e,null,n,i),a.push({event:b,listeners:y}),w?b.data=w:null!==(w=zn(n))&&(b.data=w))),(w=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),$t=Jt=Kt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=w))}Fr(a,t)})}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,n))&&r.unshift(Yr(e,o,i)),null!=(o=Ne(e,t))&&r.push(Yr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Ne(n,o))&&a.unshift(Yr(n,l,s)):i||null!=(l=Ne(n,o))&&a.push(Yr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Zr,"")}function Jr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function wi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function vi(e){return e[fi]||null}var Ei=[],Si=-1;function Ci(e){return{current:e}}function Ai(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function xi(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ii={},Ti=Ci(Ii),Ri=Ci(!1),ki=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ai(Ri),Ai(Ti)}function Oi(e,t,n){if(Ti.current!==Ii)throw Error(o(168));xi(Ti,t),xi(Ri,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,ki=Ti.current,xi(Ti,e),xi(Ri,Ri.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Mi(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ri),Ai(Ti),xi(Ti,e)):Ai(Ri),xi(Ri,n)}var Fi=null,Bi=!1,Ui=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Hi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe($e,Hi),i}finally{bt=t,Ui=!1}}return null}var Wi=[],Vi=0,Yi=null,Gi=0,qi=[],Xi=0,Qi=null,Zi=1,Ki="";function Ji(e,t){Wi[Vi++]=Gi,Wi[Vi++]=Yi,Yi=e,Gi=t}function $i(e,t,n){qi[Xi++]=Zi,qi[Xi++]=Ki,qi[Xi++]=Qi,Qi=e;var r=Zi;e=Ki;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zi=1<<32-at(t)+i|n<<i|r,Ki=o+e}else Zi=1<<o|n<<i|r,Ki=e}function eo(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function to(e){for(;e===Yi;)Yi=Wi[--Vi],Wi[Vi]=null,Gi=Wi[--Vi],Wi[Vi]=null;for(;e===Qi;)Qi=qi[--Xi],qi[Xi]=null,Ki=qi[--Xi],qi[Xi]=null,Zi=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Zi,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=_.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function _o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===N&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;wo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);wo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case v:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);wo(t,r)}return null}function g(i,o,s,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===s.length)return n(i,d),io&&Ji(i,g),c;if(null===d){for(;g<s.length;g++)null!==(d=h(i,s[g],l))&&(o=a(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,g),c}for(d=r(i,d);g<s.length;g++)null!==(m=p(d,i,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),io&&Ji(i,g),c}function m(i,s,l,c){var u=M(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=s,m=s=0,y=null,w=l.next();null!==g&&!w.done;m++,w=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,w.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,g=y}if(w.done)return n(i,g),io&&Ji(i,m),u;if(null===g){for(;!w.done;m++,w=l.next())null!==(w=h(i,w.value,c))&&(s=a(w,s,m),null===d?u=w:d.sibling=w,d=w);return io&&Ji(i,m),u}for(g=r(i,g);!w.done;m++,w=l.next())null!==(w=p(g,i,m,w.value,c))&&(e&&null!==w.alternate&&g.delete(null===w.key?m:w.key),s=a(w,s,m),null===d?u=w:d.sibling=w,d=w);return e&&g.forEach(function(e){return t(i,e)}),io&&Ji(i,m),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case v:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=yo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((o=Mc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case E:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case N:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return g(r,o,a,l);if(M(a))return m(r,o,a,l);wo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=jc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var vo=_o(!0),Eo=_o(!1),So=Ci(null),Co=null,Ao=null,xo=null;function Io(){xo=Ao=Co=null}function To(e){var t=So.current;Ai(So),e._currentValue=t}function Ro(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){Co=e,xo=Ao=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===Ao){if(null===Co)throw Error(o(308));Ao=e,Co.dependencies={lanes:0,firstContext:e}}else Ao=Ao.next=e;return t}var No=null;function Do(e){null===No?No=[e]:No.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Do(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return null===(i=r.interleaved)?(t.next=t,Do(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function zo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}function Ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Lo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Yo={},Go=Ci(Yo),qo=Ci(Yo),Xo=Ci(Yo);function Qo(e){if(e===Yo)throw Error(o(174));return e}function Zo(e,t){switch(xi(Xo,t),xi(qo,e),xi(Go,Yo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(Go),xi(Go,t)}function Ko(){Ai(Go),Ai(qo),Ai(Xo)}function Jo(e){Qo(Xo.current);var t=Qo(Go.current),n=le(t,e.type);t!==n&&(xi(qo,e),xi(Go,n))}function $o(e){qo.current===e&&(Ai(Go),Ai(qo))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=_.ReactCurrentDispatcher,oa=_.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(o(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?$a:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function ya(){var e=0!==ha;return ha=0,e}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function _a(e,t){return"function"===typeof t?t(e):t}function va(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ea(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ca(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,La(Ia.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,xa.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(o(349));0!==(30&aa)||Aa(n,t,i)}return i}function Aa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xa(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ra(e)}function Ia(e,t,n){return n(function(){Ta(t)&&Ra(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ra(e){var t=Mo(e,1);null!==t&&nc(t,e,1,-1)}function ka(e){var t=wa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return ba().memoizedState}function Da(e,t,n,r){var i=wa();sa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Pa(t,n,o,r))}sa.flags|=e,i.memoizedState=Pa(1|t,n,o,r)}function Ma(e,t){return Da(8390656,8,e,t)}function La(e,t){return Oa(2048,8,e,t)}function ja(e,t){return Oa(4,2,e,t)}function Fa(e,t){return Oa(4,4,e,t)}function Ba(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Ba.bind(null,t,e),n)}function za(){}function Ha(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ya(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Ga(){return ba().memoizedState}function qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Za(t,n);else if(null!==(n=Oo(e,t,n,r))){nc(n,e,r,ec()),Ka(n,t,r)}}function Xa(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Za(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Do(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(nc(n,e,r,i=ec()),Ka(n,t,r))}}function Qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Za(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ka(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}var Ja={readContext:Po,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},$a={readContext:Po,useCallback:function(e,t){return wa().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=wa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wa().memoizedState=e},useState:ka,useDebugValue:za,useDeferredValue:function(e){return wa().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Ya.bind(null,e[1]),wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=wa();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rl)throw Error(o(349));0!==(30&aa)||Aa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ma(Ia.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,xa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=wa(),t=Rl.identifierPrefix;if(io){var n=Ki;t=":"+t+"R"+(n=(Zi&~(1<<32-at(Zi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Po,useCallback:Ha,useContext:Po,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Wa,useReducer:va,useRef:Na,useState:function(){return va(_a)},useDebugValue:za,useDeferredValue:function(e){return Va(ba(),la.memoizedState,e)},useTransition:function(){return[va(_a)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ca,useId:Ga,unstable_isNewReconciler:!1},ts={readContext:Po,useCallback:Ha,useContext:Po,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:Wa,useReducer:Ea,useRef:Na,useState:function(){return Ea(_a)},useDebugValue:za,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Va(t,la.memoizedState,e)},useTransition:function(){return[Ea(_a)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ca,useId:Ga,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Bo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(nc(t,e,i,r),zo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Bo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(nc(t,e,i,r),zo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Bo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Uo(e,i,r))&&(nc(t,e,r,n),zo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ni(t)?ki:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},jo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ni(t)?ki:Ti.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Yl=r),ds(0,t)},n}function ps(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ws=_.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?Eo(t,null,n,r):vo(t,e.child,n,r)}function vs(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=ma(e,t,n,r,o,i),n=ya(),null===e||bs?(io&&n&&eo(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return xs(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Dl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Dl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,xi(Dl,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,xi(Dl,Nl),Nl|=r;return _s(e,t,i,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xs(e,t,n,r,i){var o=Ni(n)?ki:Ti.current;return o=Pi(t,o),ko(t,i),n=ma(e,t,n,r,o,i),r=ya(),null===e||bs?(io&&r&&eo(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Is(e,t,n,r,i){if(Ni(n)){var o=!0;Li(t)}else o=!1;if(ko(t,i),null===t.stateNode)Ws(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=Ni(n)?ki:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Lo=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ri.current||Lo?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Lo||os(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Ni(n)?ki:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),Lo=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ri.current||Lo?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Lo||os(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,o,i)}function Ts(e,t,n,r,i,o){As(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),Vs(e,t,o);r=t.stateNode,ws.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=vo(t,e.child,null,o),t.child=vo(t,null,s,o)):_s(e,t,s,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Zo(e,t.containerInfo)}function ks(e,t,n,r,i){return po(),go(i),t.flags|=256,_s(e,t,n,r),t.child}var Ps,Ns,Ds,Os,Ms={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),xi(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lc(l,i,0,null),e=Mc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ms,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Mc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&vo(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ms,a);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Rl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Mo(e,i),nc(r,e,i,-1))}return gc(),Bs(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Zi,qi[Xi++]=Ki,qi[Xi++]=Qi,Zi=e.id,Ki=e.overflow,Qi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dc(r,s):(s=Mc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&go(r),vo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ro(e.return,t,n)}function zs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,o);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ni(t.type)&&Di(),Gs(t),null;case 3:return r=t.stateNode,Ko(),Ai(Ri),Ai(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ns(e,t),Gs(t),null;case 5:$o(t);var i=Qo(Xo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Qo(Go.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Br(Mr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Z(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":ie(r,a),Br("invalid",r)}for(var l in we(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":G(r),$(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Br(Mr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Z(e,r),i=Q(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(a in we(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Br("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Os(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Qo(Xo.current),Qo(Go.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ai(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Ko(),Ns(e,t),null===e&&Hr(t.stateNode.containerInfo),Gs(t),null;case 10:return To(t.type._context),Gs(t),null;case 19:if(Ai(ea),null===(a=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ys(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ys(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Hl&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Gs(t),null}else 2*Ke()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,n=ea.current,xi(ea,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Ni(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ko(),Ai(Ri),Ai(Ti),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Ai(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(ea),null;case 4:return Ko(),null;case 10:return To(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qo(Go.current);var o,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in we(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Zs=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Js=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Zs||$s(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Zs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,hl(e,t,n),Zs=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Cc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Cc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Cc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Cc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Cc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){Cc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ke())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(u=Zs)||d,gl(t,e),Zs=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$s(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cc(r,n,m)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){vl(h);continue}}null!==p?(p.return=f,Js=p):vl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){Cc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Cc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=Qs;var c=Zs;if(Qs=a,(Zs=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?El(i):null!==l?(l.return=a,Js=l):El(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,Qs=s,Zs=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):_l(e)}}function _l(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(o(163))}Zs||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function vl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function El(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Cc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,Cl=Math.ceil,Al=_.ReactCurrentDispatcher,xl=_.ReactCurrentOwner,Il=_.ReactCurrentBatchConfig,Tl=0,Rl=null,kl=null,Pl=0,Nl=0,Dl=Ci(0),Ol=0,Ml=null,Ll=0,jl=0,Fl=0,Bl=null,Ul=null,zl=0,Hl=1/0,Wl=null,Vl=!1,Yl=null,Gl=null,ql=!1,Xl=null,Ql=0,Zl=0,Kl=null,Jl=-1,$l=0;function ec(){return 0!==(6&Tl)?Ke():-1!==Jl?Jl:Jl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==mo.transition?(0===$l&&($l=gt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,r){if(50<Zl)throw Zl=0,Kl=null,Error(o(185));yt(e,n,r),0!==(2&Tl)&&e===Rl||(e===Rl&&(0===(2&Tl)&&(jl|=n),4===Ol&&sc(e,Pl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Hl=Ke()+500,Bi&&Hi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Rl?Pl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Bi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai(function(){0===(6&Tl)&&Hi()}),n=null;else{switch(_t(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,$l=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Rl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Tl;Tl|=2;var a=pc();for(Rl===e&&Pl===t||(Wl=null,Hl=Ke()+500,hc(e,t));;)try{wc();break}catch(l){fc(e,l)}Io(),Al.current=a,Tl=i,null!==kl?t=0:(Rl=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,hc(e,0),sc(e,r),rc(e,Ke()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ml,hc(e,0),sc(e,r),rc(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:vc(e,Ul,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zl+500-Ke())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(vc.bind(null,e,Ul,Wl),t);break}vc(e,Ul,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(vc.bind(null,e,Ul,Wl),r);break}vc(e,Ul,Wl);break;default:throw Error(o(329))}}}return rc(e,Ke()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(o(327));Ec();var t=ht(e,0);if(0===(1&t))return rc(e,Ke()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,hc(e,0),sc(e,t),rc(e,Ke()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,Ul,Wl),rc(e,Ke()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Hl=Ke()+500,Bi&&Hi())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&Ec();var t=Tl;Tl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Tl=t))&&Hi()}}function dc(){Nl=Dl.current,Ai(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==kl)for(n=kl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Ko(),Ai(Ri),Ai(Ti),ra();break;case 5:$o(r);break;case 4:Ko();break;case 13:case 19:Ai(ea);break;case 10:To(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Rl=e,kl=e=Dc(e.current,null),Pl=Nl=t,Ol=0,Ml=null,Fl=jl=Ll=0,Ul=Bl=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}No=null}return e}function fc(e,t){for(;;){var n=kl;try{if(Io(),ia.current=Ja,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,xl.current=null,null===n||null===n.return){Ol=1,Ml=t,kl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){gs(a,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),go(cs(c,l));break e}}a=c=cs(c,l),4!==Ol&&(Ol=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ho(a,fs(0,c,t));break e;case 1:l=c;var w=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ho(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}_c(n)}catch(_){t=_,kl===n&&null!==n&&(kl=n=n.return);continue}break}}function pc(){var e=Al.current;return Al.current=Ja,null===e?Ja:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Rl||0===(268435455&Ll)&&0===(268435455&jl)||sc(Rl,Pl)}function mc(e,t){var n=Tl;Tl|=2;var r=pc();for(Rl===e&&Pl===t||(Wl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Io(),Tl=n,Al.current=r,null!==kl)throw Error(o(261));return Rl=null,Pl=0,Ol}function yc(){for(;null!==kl;)bc(kl)}function wc(){for(;null!==kl&&!Qe();)bc(kl)}function bc(e){var t=Sl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?_c(e):kl=t,xl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Nl)))return void(kl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(kl=n);if(null===e)return Ol=6,void(kl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(kl=t);kl=t=e}while(null!==t);0===Ol&&(Ol=5)}function vc(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Xl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Rl&&(kl=Rl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Rc(tt,function(){return Ec(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var s=bt;bt=1;var l=Tl;Tl|=4,xl.current=null,function(e,t){if(ei=Vt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(v){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(v){Cc(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Vt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Ze(),Tl=l,bt=s,Il.transition=a}else e.current=n;if(ql&&(ql=!1,Xl=e,Ql=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Yl,Yl=null,e;0!==(1&Ql)&&0!==e.tag&&Ec(),a=e.pendingLanes,0!==(1&a)?e===Kl?Zl++:(Zl=0,Kl=e):Zl=0,Hi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function Ec(){if(null!==Xl){var e=_t(Ql),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Ql=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var f=(d=Js).sibling,p=d.return;if(ol(d),d===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var w=a.sibling;if(null!==w){w.return=a.return,Js=w;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var _=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Js=_;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Cc(l,l.return,E)}if(l===s){Js=null;break e}var v=l.sibling;if(null!==v){v.return=l.return,Js=v;break e}Js=l.return}}if(Tl=i,Hi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Sc(e,t,n){e=Uo(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Uo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Ke()-zl?hc(e,0):Fl|=n),rc(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Mo(e,t))&&(yt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),xc(e,n)}function Rc(e,t){return qe(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new kc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Nc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Mc(n.children,i,a,t);case C:s=8,i|=8;break;case A:return(e=Pc(12,n,t,2|i)).elementType=A,e.lanes=a,e;case R:return(e=Pc(13,n,t,i)).elementType=R,e.lanes=a,e;case k:return(e=Pc(19,n,t,i)).elementType=k,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case I:s=9;break e;case T:s=11;break e;case P:s=14;break e;case N:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,a,s,l){return e=new Bc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function zc(e){if(!e)return Ii;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Mi(e,n,t)}return t}function Hc(e,t,n,r,i,o,a,s,l){return(e=Uc(n,r,!0,e,0,o,0,s,l)).context=zc(null),n=e.current,(o=Bo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Uo(i,t,a))&&(nc(e,i,a,o),zo(e,i,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),po();break;case 5:Jo(t);break;case 1:Ni(t.type)&&Li(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(xi(ea,1&ea.current),null!==(e=Vs(e,t,n))?e.sibling:null);xi(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Vs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&$i(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);ko(t,n),i=ma(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Ts(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),i){case 0:t=xs(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=vs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ks(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=ks(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Vs(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),As(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return js(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vo(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,vs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,xi(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ri.current){t=Vs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Bo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ro(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ro(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),r=r(i=Po(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Es(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Ni(r)?(e=!0,Li(t)):e=!1,ko(t,n),as(t,r,i),ls(t,r,i,n),Ts(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function $c(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Vc(a);s.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Vc(a);o.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Hr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Vc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Hr(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return Vc(a)}Qc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},Qc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&jt(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(wt(t,1|n),rc(t,Ke()),0===(6&Tl)&&(Hl=Ke()+500,Hi()))}break;case 13:uc(function(){var t=Mo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},Et=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Mo(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},Ct=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=vi(r);if(!i)throw Error(o(90));q(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Re=uc;var eu={usingClientEntryPoint:!1,Events:[bi,_i,vi,xe,Ie,cc]},tu={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Kc(t))throw Error(o(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Kc(t))throw Error(o(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(374));class o extends i.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(i,"fts").concat(o,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=o},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(r.version)}},829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let o=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer="count=".concat(n)),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push("count=".concat(r)),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(210));t.PostgrestClient=i.default;const o=r(n(829));t.PostgrestQueryBuilder=o.default;const a=r(n(736));t.PostgrestFilterBuilder=a.default;const s=r(n(374));t.PostgrestTransformBuilder=s.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".b78a4afc.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="monarch-passport-mvp:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkmonarch_passport_mvp=self.webpackChunkmonarch_passport_mvp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0,(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391);function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const s="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:c=!1}=i,f=o.history,p=e.Pop,g=null,m=y();function y(){return(f.state||{idx:null}).idx}function w(){p=e.Pop;let t=y(),n=null==t?null:t-m;m=t,g&&g({action:p,location:_.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,f.replaceState(a({},f.state,{idx:m}),""));let _={get action(){return p},get location(){return t(o,f)},listen(e){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(s,w),g=e,()=>{o.removeEventListener(s,w),g=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=d(_.location,t,n);r&&r(i,t),m=y()+1;let a=u(i,m),s=_.createHref(i);try{f.pushState(a,"",s)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;o.location.assign(s)}c&&g&&g({action:p,location:_.location,delta:1})},replace:function(t,n){p=e.Replace;let i=d(_.location,t,n);r&&r(i,t),m=y();let o=u(i,m),a=_.createHref(i);f.replaceState(o,"",a),c&&g&&g({action:p,location:_.location,delta:0})},go:e=>f.go(e)};return _}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=P(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let o=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=k(i);a=T(o[s],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=L([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),w(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:I(s,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=b(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const _=/^:[\w-]+$/,v=3,E=2,S=1,C=10,A=-2,x=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=A),t&&(r+=E),n.filter(e=>!x(e)).reduce((e,t)=>e+(_.test(t)?v:""===t?S:C),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:L([o,u.pathname]),pathnameBase:j(L([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=L([o,u.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function k(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function N(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=D(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),l(!i.pathname||!i.pathname.includes("?"),N("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),N("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),N("#","search","hash",i)));let o,s=""===e||""===i.pathname,c=s?"/":i.pathname;if(null==c)o=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(r),hash:B(i)}}(i,o),d=c&&"/"!==c&&c.endsWith("/"),h=(s||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const L=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],H=(new Set(z),["get",...z]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const V=t.createContext(null);const Y=t.createContext(null);const G=t.createContext(null);const q=t.createContext(null);const X=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function Z(){return null!=t.useContext(q)}function K(){return Z()||l(!1),t.useContext(q).location}function J(e){t.useContext(G).static||t.useLayoutEffect(e)}function $(){let{isDataRoute:e}=t.useContext(X);return e?function(){let{router:e}=ue(le.UseNavigateStable),n=he(ce.UseNavigateStable),r=t.useRef(!1);return J(()=>{r.current=!0}),t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,W({fromRouteId:n},i)))},[e,n])}():function(){Z()||l(!1);let e=t.useContext(V),{basename:n,future:r,navigator:i}=t.useContext(G),{matches:o}=t.useContext(X),{pathname:a}=K(),s=JSON.stringify(O(o,r.v7_relativeSplatPath)),c=t.useRef(!1);return J(()=>{c.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let o=M(t,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:L([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)},[n,i,s,a,e])}()}const ee=t.createContext(null);function te(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(G),{matches:o}=t.useContext(X),{pathname:a}=K(),s=JSON.stringify(O(o,i.v7_relativeSplatPath));return t.useMemo(()=>M(e,JSON.parse(s),a,"path"===r),[e,s,a,r])}function ne(n,r,i,o){Z()||l(!1);let{navigator:a}=t.useContext(G),{matches:s}=t.useContext(X),c=s[s.length-1],u=c?c.params:{},d=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=K();if(r){var g;let e="string"===typeof r?f(r):r;"/"===d||(null==(g=e.pathname)?void 0:g.startsWith(d))||l(!1),h=e}else h=p;let y=h.pathname||"/",w=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=m(n,{pathname:w});let _=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:L([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:L([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,i,o);return r&&_?t.createElement(q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},_):_}function re(){let e=function(){var e;let n=t.useContext(Q),r=de(ce.UseRouteError),i=he(ce.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ie=t.createElement(re,null);class oe extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(X.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(V);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(X.Provider,{value:n},i)}function se(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,c=null==(o=r)?void 0:o.errors;if(null!=c){let e=s.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),s=s.slice(0,Math.min(s.length,e+1))}let u=!1,d=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,s=d>=0?s.slice(0,d+1):[s[0]];break}}}return s.reduceRight((e,i,o)=>{let a,l=!1,h=null,f=null;var p;r&&(a=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||ie,u&&(d<0&&0===o?(p="route-fallback",!1||fe[p]||(fe[p]=!0),l=!0,f=null):d===o&&(l=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(s.slice(0,o+1)),m=()=>{let n;return n=a?h:l?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ae,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let n=t.useContext(V);return n||l(!1),n}function de(e){let n=t.useContext(Y);return n||l(!1),n}function he(e){let n=function(){let e=t.useContext(X);return e||l(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||l(!1),r.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){let{to:n,replace:r,state:i,relative:o}=e;Z()||l(!1);let{future:a,static:s}=t.useContext(G),{matches:c}=t.useContext(X),{pathname:u}=K(),d=$(),h=M(n,O(c,a.v7_relativeSplatPath),u,"path"===o),f=JSON.stringify(h);return t.useEffect(()=>d(JSON.parse(f),{replace:r,state:i,relative:o}),[d,f,o,r,i]),null}function me(e){return function(e){let n=t.useContext(X).outlet;return n?t.createElement(ee.Provider,{value:e},n):n}(e.context)}function ye(e){l(!1)}function we(n){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:s,static:c=!1,future:u}=n;Z()&&l(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:d,navigator:s,static:c,future:W({v7_relativeSplatPath:!1},u)}),[d,u,s,c]);"string"===typeof o&&(o=f(o));let{pathname:p="/",search:g="",hash:m="",state:y=null,key:w="default"}=o,b=t.useMemo(()=>{let e=P(p,d);return null==e?null:{location:{pathname:e,search:g,hash:m,state:y,key:w},navigationType:a}},[d,p,g,m,y,w,a]);return null==b?null:t.createElement(G.Provider,{value:h},t.createElement(q.Provider,{children:i,value:b}))}function be(e){let{children:t,location:n}=e;return ne(_e(t),n)}new Promise(()=>{});t.Component;function _e(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,_e(e.props.children,o));e.type!==ye&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=_e(e.props.children,o)),r.push(a)}),r}var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ve.apply(this,arguments)};Object.create;function Ee(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Se=n(324),Ce=n.n(Se),Ae="-ms-",xe="-moz-",Ie="-webkit-",Te="comm",Re="rule",ke="decl",Pe="@keyframes",Ne=Math.abs,De=String.fromCharCode,Oe=Object.assign;function Me(e){return e.trim()}function Le(e,t){return(e=t.exec(e))?e[0]:e}function je(e,t,n){return e.replace(t,n)}function Fe(e,t,n){return e.indexOf(t,n)}function Be(e,t){return 0|e.charCodeAt(t)}function Ue(e,t,n){return e.slice(t,n)}function ze(e){return e.length}function He(e){return e.length}function We(e,t){return t.push(e),e}function Ve(e,t){return e.filter(function(e){return!Le(e,t)})}var Ye=1,Ge=1,qe=0,Xe=0,Qe=0,Ze="";function Ke(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Ye,column:Ge,length:a,return:"",siblings:s}}function Je(e,t){return Oe(Ke("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function $e(e){for(;e.root;)e=Je(e.root,{children:[e]});We(e,e.siblings)}function et(){return Qe=Xe>0?Be(Ze,--Xe):0,Ge--,10===Qe&&(Ge=1,Ye--),Qe}function tt(){return Qe=Xe<qe?Be(Ze,Xe++):0,Ge++,10===Qe&&(Ge=1,Ye++),Qe}function nt(){return Be(Ze,Xe)}function rt(){return Xe}function it(e,t){return Ue(Ze,e,t)}function ot(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function at(e){return Ye=Ge=1,qe=ze(Ze=e),Xe=0,[]}function st(e){return Ze="",e}function lt(e){return Me(it(Xe-1,dt(91===e?e+2:40===e?e+1:e)))}function ct(e){for(;(Qe=nt())&&Qe<33;)tt();return ot(e)>2||ot(Qe)>3?"":" "}function ut(e,t){for(;--t&&tt()&&!(Qe<48||Qe>102||Qe>57&&Qe<65||Qe>70&&Qe<97););return it(e,rt()+(t<6&&32==nt()&&32==tt()))}function dt(e){for(;tt();)switch(Qe){case e:return Xe;case 34:case 39:34!==e&&39!==e&&dt(Qe);break;case 40:41===e&&dt(e);break;case 92:tt()}return Xe}function ht(e,t){for(;tt()&&e+Qe!==57&&(e+Qe!==84||47!==nt()););return"/*"+it(t,Xe-1)+"*"+De(47===e?e:tt())}function ft(e){for(;!ot(nt());)tt();return it(e,Xe)}function pt(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function gt(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ke:return e.return=e.return||e.value;case Te:return"";case Pe:return e.return=e.value+"{"+pt(e.children,r)+"}";case Re:if(!ze(e.value=e.props.join(",")))return""}return ze(n=pt(e.children,r))?e.return=e.value+"{"+n+"}":""}function mt(e,t,n){switch(function(e,t){return 45^Be(e,0)?(((t<<2^Be(e,0))<<2^Be(e,1))<<2^Be(e,2))<<2^Be(e,3):0}(e,t)){case 5103:return Ie+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ie+e+e;case 4789:return xe+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ie+e+xe+e+Ae+e+e;case 5936:switch(Be(e,t+11)){case 114:return Ie+e+Ae+je(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ie+e+Ae+je(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ie+e+Ae+je(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ie+e+Ae+e+e;case 6165:return Ie+e+Ae+"flex-"+e+e;case 5187:return Ie+e+je(e,/(\w+).+(:[^]+)/,Ie+"box-$1$2"+Ae+"flex-$1$2")+e;case 5443:return Ie+e+Ae+"flex-item-"+je(e,/flex-|-self/g,"")+(Le(e,/flex-|baseline/)?"":Ae+"grid-row-"+je(e,/flex-|-self/g,""))+e;case 4675:return Ie+e+Ae+"flex-line-pack"+je(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ie+e+Ae+je(e,"shrink","negative")+e;case 5292:return Ie+e+Ae+je(e,"basis","preferred-size")+e;case 6060:return Ie+"box-"+je(e,"-grow","")+Ie+e+Ae+je(e,"grow","positive")+e;case 4554:return Ie+je(e,/([^-])(transform)/g,"$1"+Ie+"$2")+e;case 6187:return je(je(je(e,/(zoom-|grab)/,Ie+"$1"),/(image-set)/,Ie+"$1"),e,"")+e;case 5495:case 3959:return je(e,/(image-set\([^]*)/,Ie+"$1$`$1");case 4968:return je(je(e,/(.+:)(flex-)?(.*)/,Ie+"box-pack:$3"+Ae+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ie+e+e;case 4200:if(!Le(e,/flex-|baseline/))return Ae+"grid-column-align"+Ue(e,t)+e;break;case 2592:case 3360:return Ae+je(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,Le(e.props,/grid-\w+-end/)})?~Fe(e+(n=n[t].value),"span",0)?e:Ae+je(e,"-start","")+e+Ae+"grid-row-span:"+(~Fe(n,"span",0)?Le(n,/\d+/):+Le(n,/\d+/)-+Le(e,/\d+/))+";":Ae+je(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return Le(e.props,/grid-\w+-start/)})?e:Ae+je(je(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return je(e,/(.+)-inline(.+)/,Ie+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ze(e)-1-t>6)switch(Be(e,t+1)){case 109:if(45!==Be(e,t+4))break;case 102:return je(e,/(.+:)(.+)-([^]+)/,"$1"+Ie+"$2-$3$1"+xe+(108==Be(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Fe(e,"stretch",0)?mt(je(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return je(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,r,i,o,a,s){return Ae+n+":"+r+s+(i?Ae+n+"-span:"+(o?a:+a-+r)+s:"")+e});case 4949:if(121===Be(e,t+6))return je(e,":",":"+Ie)+e;break;case 6444:switch(Be(e,45===Be(e,14)?18:11)){case 120:return je(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ie+(45===Be(e,14)?"inline-":"")+"box$3$1"+Ie+"$2$3$1"+Ae+"$2box$3")+e;case 100:return je(e,":",":"+Ae)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return je(e,"scroll-","scroll-snap-")+e}return e}function yt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ke:return void(e.return=mt(e.value,e.length,n));case Pe:return pt([Je(e,{value:je(e.value,"@","@"+Ie)})],r);case Re:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(Le(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":$e(Je(e,{props:[je(t,/:(read-\w+)/,":-moz-$1")]})),$e(Je(e,{props:[t]})),Oe(e,{props:Ve(n,r)});break;case"::placeholder":$e(Je(e,{props:[je(t,/:(plac\w+)/,":"+Ie+"input-$1")]})),$e(Je(e,{props:[je(t,/:(plac\w+)/,":-moz-$1")]})),$e(Je(e,{props:[je(t,/:(plac\w+)/,Ae+"input-$1")]})),$e(Je(e,{props:[t]})),Oe(e,{props:Ve(n,r)})}return""})}}function wt(e){return st(bt("",null,null,null,[""],e=at(e),0,[0],e))}function bt(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,d=a,h=0,f=0,p=0,g=1,m=1,y=1,w=0,b="",_=i,v=o,E=r,S=b;m;)switch(p=w,w=tt()){case 40:if(108!=p&&58==Be(S,d-1)){-1!=Fe(S+=je(lt(w),"&","&\f"),"&\f",Ne(c?s[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:S+=lt(w);break;case 9:case 10:case 13:case 32:S+=ct(p);break;case 92:S+=ut(rt()-1,7);continue;case 47:switch(nt()){case 42:case 47:We(vt(ht(tt(),rt()),t,n,l),l);break;default:S+="/"}break;case 123*g:s[c++]=ze(S)*y;case 125*g:case 59:case 0:switch(w){case 0:case 125:m=0;case 59+u:-1==y&&(S=je(S,/\f/g,"")),f>0&&ze(S)-d&&We(f>32?Et(S+";",r,n,d-1,l):Et(je(S," ","")+";",r,n,d-2,l),l);break;case 59:S+=";";default:if(We(E=_t(S,t,n,c,u,i,s,b,_=[],v=[],d,o),o),123===w)if(0===u)bt(S,t,E,E,_,o,d,s,v);else switch(99===h&&110===Be(S,3)?100:h){case 100:case 108:case 109:case 115:bt(e,E,E,r&&We(_t(e,E,E,0,0,i,s,b,i,_=[],d,v),v),i,v,d,s,r?_:v);break;default:bt(S,E,E,E,[""],v,0,s,v)}}c=u=f=0,g=y=1,b=S="",d=a;break;case 58:d=1+ze(S),f=p;default:if(g<1)if(123==w)--g;else if(125==w&&0==g++&&125==et())continue;switch(S+=De(w),w*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(ze(S)-1)*y,y=1;break;case 64:45===nt()&&(S+=lt(tt())),h=nt(),u=d=ze(b=S+=ft(rt())),w++;break;case 45:45===p&&2==ze(S)&&(g=0)}}return o}function _t(e,t,n,r,i,o,a,s,l,c,u,d){for(var h=i-1,f=0===i?o:[""],p=He(f),g=0,m=0,y=0;g<r;++g)for(var w=0,b=Ue(e,h+1,h=Ne(m=a[g])),_=e;w<p;++w)(_=Me(m>0?f[w]+" "+b:je(b,/&\f/g,f[w])))&&(l[y++]=_);return Ke(e,t,n,0===i?Re:s,l,c,u,d)}function vt(e,t,n,r){return Ke(e,t,n,Te,De(Qe),Ue(e,2,-2),0,r)}function Et(e,t,n,r,i){return Ke(e,t,n,ke,Ue(e,0,r),Ue(e,r+1,-1),r,i)}var St={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ct="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.SC_ATTR)||"data-styled",At="active",xt="data-styled-version",It="6.1.19",Tt="/*!sc*/\n",Rt="undefined"!=typeof window&&"undefined"!=typeof document,kt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SUPABASE_SERVICE_ROLE_KEY:"your-supabase-service-role-key-here",REACT_APP_SECRET_KEY:"PapillonLabs_Monarch_c3a4196059e92e4af0753274e01fa917",REACT_APP_ENCRYPTION_KEY:"PapillonLabs_Nectar_dCK2ThywLPW0wHkNbejY9xXsxs",REACT_APP_JWT_SECRET:"PapillonLabs_Wing_ba948293ebe41b1523f9f7de32f90cc8d53a7e68",REACT_APP_BETA_PASSWORD:"papillon2025",REACT_APP_NAME:"Monarch Passport MVP",REACT_APP_VERSION:"0.1.0",REACT_APP_DEFAULT_THEME_MODE:"dark",REACT_APP_DEFAULT_GRADIENT:"monarch",REACT_APP_DEFAULT_THEME:"frequencyPulse",REACT_APP_BASE_URL:"https://passport.papillonbrand.us/",REACT_APP_BETA_FEATURES_ENABLED:"false",REACT_APP_DEBUG_MODE:"false",REACT_APP_RATE_LIMIT_SCANS:"10",REACT_APP_RATE_LIMIT_LOGINS:"5",REACT_APP_SESSION_TIMEOUT:"60",REACT_APP_MAX_FILE_SIZE:"5242880",REACT_APP_ALLOWED_FILE_TYPES:"image/jpeg,image/png,image/webp",REACT_APP_ANALYTICS_ID:"your-analytics-id-here",REACT_APP_SENTRY_DSN:"your-sentry-dsn-here"}.SC_DISABLE_SPEEDY)),Pt={},Nt=(new Set,Object.freeze([])),Dt=Object.freeze({});function Ot(e,t,n){return void 0===n&&(n=Dt),e.theme!==n.theme&&e.theme||t||n.theme}var Mt=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Lt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,jt=/(^-|-$)/g;function Ft(e){return e.replace(Lt,"-").replace(jt,"")}var Bt=/(a)(d)/gi,Ut=function(e){return String.fromCharCode(e+(e>25?39:97))};function zt(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Ut(t%52)+n;return(Ut(t%52)+n).replace(Bt,"$1-$2")}var Ht,Wt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Vt=function(e){return Wt(5381,e)};function Yt(e){return zt(Vt(e)>>>0)}function Gt(e){return e.displayName||e.name||"Component"}function qt(e){return"string"==typeof e&&!0}var Xt="function"==typeof Symbol&&Symbol.for,Qt=Xt?Symbol.for("react.memo"):60115,Zt=Xt?Symbol.for("react.forward_ref"):60112,Kt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Jt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},$t={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},en=((Ht={})[Zt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ht[Qt]=$t,Ht);function tn(e){return("type"in(t=e)&&t.type.$$typeof)===Qt?$t:"$$typeof"in e?en[e.$$typeof]:Kt;var t}var nn=Object.defineProperty,rn=Object.getOwnPropertyNames,on=Object.getOwnPropertySymbols,an=Object.getOwnPropertyDescriptor,sn=Object.getPrototypeOf,ln=Object.prototype;function cn(e,t,n){if("string"!=typeof t){if(ln){var r=sn(t);r&&r!==ln&&cn(e,r,n)}var i=rn(t);on&&(i=i.concat(on(t)));for(var o=tn(e),a=tn(t),s=0;s<i.length;++s){var l=i[s];if(!(l in Jt||n&&n[l]||a&&l in a||o&&l in o)){var c=an(t,l);try{nn(e,l,c)}catch(e){}}}}return e}function un(e){return"function"==typeof e}function dn(e){return"object"==typeof e&&"styledComponentId"in e}function hn(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function fn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function pn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function gn(e,t,n){if(void 0===n&&(n=!1),!n&&!pn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=gn(e[r],t[r]);else if(pn(t))for(var r in t)e[r]=gn(e[r],t[r]);return e}function mn(e,t){Object.defineProperty(e,"toString",{value:t})}function yn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var wn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw yn(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=(o=0,t.length);o<s;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(Tt);return t},e}(),bn=new Map,_n=new Map,vn=1,En=function(e){if(bn.has(e))return bn.get(e);for(;_n.has(vn);)vn++;var t=vn++;return bn.set(e,t),_n.set(t,e),t},Sn=function(e,t){vn=t+1,bn.set(e,t),_n.set(t,e)},Cn="style[".concat(Ct,"][").concat(xt,'="').concat(It,'"]'),An=new RegExp("^".concat(Ct,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),xn=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},In=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Tt),i=[],o=0,a=r.length;o<a;o++){var s=r[o].trim();if(s){var l=s.match(An);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Sn(u,c),xn(e,u,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},Tn=function(e){for(var t=document.querySelectorAll(Cn),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(Ct)!==At&&(In(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function Rn(){return n.nc}var kn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Ct,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(Ct,At),r.setAttribute(xt,It);var a=Rn();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},Pn=function(){function e(e){this.element=kn(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw yn(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Nn=function(){function e(e){this.element=kn(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Dn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),On=Rt,Mn={isServer:!Rt,useCSSOMInjection:!kt},Ln=function(){function e(e,t,n){void 0===e&&(e=Dt),void 0===t&&(t={});var r=this;this.options=ve(ve({},Mn),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Rt&&On&&(On=!1,Tn(this)),mn(this,function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return _n.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),a=t.getGroup(n);if(void 0===o||!o.size||0===a.length)return"continue";var s="".concat(Ct,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),r+="".concat(a).concat(s,'{content:"').concat(l,'"}').concat(Tt)},o=0;o<n;o++)i(o);return r}(r)})}return e.registerId=function(e){return En(e)},e.prototype.rehydrate=function(){!this.server&&Rt&&Tn(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(ve(ve({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Dn(n):t?new Pn(n):new Nn(n)}(this.options),new wn(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(En(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(En(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(En(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),jn=/&/g,Fn=/^\s*\/\/.*$/gm;function Bn(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Bn(e.children,t)),e})}function Un(e){var t,n,r,i=void 0===e?Dt:e,o=i.options,a=void 0===o?Dt:o,s=i.plugins,l=void 0===s?Nt:s,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push(function(e){e.type===Re&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(jn,n).replace(r,c))}),a.prefix&&u.push(yt),u.push(gt);var d=function(e,i,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s="&"),t=s,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Fn,""),c=wt(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);a.namespace&&(c=Bn(c,a.namespace));var d,h=[];return pt(c,function(e){var t=He(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}(u.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return d.hash=l.length?l.reduce(function(e,t){return t.name||yn(15),Wt(e,t.name)},5381).toString():"",d}var zn=new Ln,Hn=Un(),Wn=t.createContext({shouldForwardProp:void 0,styleSheet:zn,stylis:Hn}),Vn=(Wn.Consumer,t.createContext(void 0));function Yn(){return(0,t.useContext)(Wn)}function Gn(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=Yn().styleSheet,a=(0,t.useMemo)(function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,o]),s=(0,t.useMemo)(function(){return Un({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})},[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)(function(){Ce()(r,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,t.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:s}},[e.shouldForwardProp,a,s]);return t.createElement(Wn.Provider,{value:l},t.createElement(Vn.Provider,{value:s},e.children))}var qn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Hn);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,mn(this,function(){throw yn(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=Hn),this.name+e.hash},e}(),Xn=function(e){return e>="A"&&e<="Z"};function Qn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Xn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Zn=function(e){return null==e||!1===e||""===e},Kn=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!Zn(o)&&(Array.isArray(o)&&o.isCss||un(o)?r.push("".concat(Qn(i),":"),o,";"):pn(o)?r.push.apply(r,Ee(Ee(["".concat(i," {")],Kn(o),!1),["}"],!1)):r.push("".concat(Qn(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in St||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Jn(e,t,n,r){return Zn(e)?[]:dn(e)?[".".concat(e.styledComponentId)]:un(e)?!un(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Jn(e(t),t,n,r):e instanceof qn?n?(e.inject(n,r),[e.getName(r)]):[e]:pn(e)?Kn(e):Array.isArray(e)?Array.prototype.concat.apply(Nt,e.map(function(e){return Jn(e,t,n,r)})):[e.toString()];var i}function $n(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(un(n)&&!dn(n))return!1}return!0}var er=Vt(It),tr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&$n(e),this.componentId=t,this.baseHash=Wt(er,t),this.baseStyle=n,Ln.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=hn(r,this.staticRulesId);else{var i=fn(Jn(this.rules,e,t,n)),o=zt(Wt(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}r=hn(r,o),this.staticRulesId=o}else{for(var s=Wt(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=fn(Jn(u,e,t,n));s=Wt(s,d+c),l+=d}}if(l){var h=zt(s>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),r=hn(r,h)}}return r},e}(),nr=t.createContext(void 0);nr.Consumer;function rr(e){var n=t.useContext(nr),r=(0,t.useMemo)(function(){return function(e,t){if(!e)throw yn(14);if(un(e))return e(t);if(Array.isArray(e)||"object"!=typeof e)throw yn(8);return t?ve(ve({},t),e):e}(e.theme,n)},[e.theme,n]);return e.children?t.createElement(nr.Provider,{value:r},e.children):null}var ir={};new Set;function or(e,n,r){var i=dn(e),o=e,a=!qt(e),s=n.attrs,l=void 0===s?Nt:s,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Ft(e);ir[n]=(ir[n]||0)+1;var r="".concat(n,"-").concat(Yt(It+n+ir[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,d=n.displayName,h=void 0===d?function(e){return qt(e)?"styled.".concat(e):"Styled(".concat(Gt(e),")")}(e):d,f=n.displayName&&n.componentId?"".concat(Ft(n.displayName),"-").concat(n.componentId):n.componentId||u,p=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=n.shouldForwardProp;if(i&&o.shouldForwardProp){var m=o.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;g=function(e,t){return m(e,t)&&y(e,t)}}else g=m}var w=new tr(r,f,i?o.componentStyle:void 0);function b(e,n){return function(e,n,r){var i=e.attrs,o=e.componentStyle,a=e.defaultProps,s=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=t.useContext(nr),d=Yn(),h=e.shouldForwardProp||d.shouldForwardProp,f=Ot(n,u,a)||Dt,p=function(e,t,n){for(var r,i=ve(ve({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var a=un(r=e[o])?r(i):r;for(var s in a)i[s]="className"===s?hn(i[s],a[s]):"style"===s?ve(ve({},i[s]),a[s]):a[s]}return t.className&&(i.className=hn(i.className,t.className)),i}(i,n,f),g=p.as||c,m={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?m.as=p.forwardedAs:h&&!h(y,g)||(m[y]=p[y]));var w=function(e,t){var n=Yn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,p),b=hn(s,l);return w&&(b+=" "+w),p.className&&(b+=" "+p.className),m[qt(g)&&!Mt.has(g)?"class":"className"]=b,r&&(m.ref=r),(0,t.createElement)(g,m)}(_,e,n)}b.displayName=h;var _=t.forwardRef(b);return _.attrs=p,_.componentStyle=w,_.displayName=h,_.shouldForwardProp=g,_.foldedComponentIds=i?hn(o.foldedComponentIds,o.styledComponentId):"",_.styledComponentId=f,_.target=i?o.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)gn(e,i[r],!0);return e}({},o.defaultProps,e):e}}),mn(_,function(){return".".concat(_.styledComponentId)}),a&&cn(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function ar(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var sr=function(e){return Object.assign(e,{isCss:!0})};function lr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(un(e)||pn(e))return sr(Jn(ar(Nt,Ee([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Jn(r):sr(Jn(ar(r,t)))}function cr(e,t,n){if(void 0===n&&(n=Dt),!t)throw yn(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,lr.apply(void 0,Ee([r],i,!1)))};return r.attrs=function(r){return cr(e,t,ve(ve({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return cr(e,t,ve(ve({},n),r))},r}var ur=function(e){return cr(or,e)},dr=ur;Mt.forEach(function(e){dr[e]=ur(e)});var hr=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=$n(e),Ln.registerId(this.componentId+1)}return e.prototype.createStyles=function(e,t,n,r){var i=r(fn(Jn(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Ln.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function fr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=fn(lr.apply(void 0,Ee([e],t,!1))),i=Yt(r);return new qn(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Rn(),r=fn([n&&'nonce="'.concat(n,'"'),"".concat(Ct,'="true"'),"".concat(xt,'="').concat(It,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw yn(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw yn(2);var r=e.instance.toString();if(!r)return[];var i=((n={})[Ct]="",n[xt]=It,n.dangerouslySetInnerHTML={__html:r},n),o=Rn();return o&&(i.nonce=o),[t.createElement("style",ve({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Ln({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw yn(2);return t.createElement(Gn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw yn(3)}})(),"__sc-".concat(Ct,"__");var pr=n(579);const gr=(0,t.createContext)({});function mr(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const yr="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var wr=n(555);const br=(0,t.createContext)(null);const _r=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class vr extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=function(e){return"object"===typeof(t=e)&&null!==t&&"offsetHeight"in e;var t}(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Er(e){let{children:n,isPresent:r,anchorX:i}=e;const o=(0,t.useId)(),a=(0,t.useRef)(null),s=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,t.useContext)(_r);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:c,right:u}=s.current;if(r||!a.current||!e||!t)return;const d="left"===i?"left: ".concat(c):"right: ".concat(u);a.current.dataset.motionPopId=o;const h=document.createElement("style");return l&&(h.nonce=l),document.head.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(d,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{document.head.contains(h)&&document.head.removeChild(h)}},[r]),(0,pr.jsx)(vr,{isPresent:r,childRef:a,sizeRef:s,children:t.cloneElement(n,{ref:a})})}const Sr=e=>{let{children:n,initial:r,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:s,mode:l,anchorX:c}=e;const u=mr(Cr),d=(0,t.useId)();let h=!0,f=(0,t.useMemo)(()=>(h=!1,{id:d,initial:r,isPresent:i,custom:a,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;o&&o()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[i,u,o]);return s&&h&&(f=(0,wr.A)({},f)),(0,t.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[i]),t.useEffect(()=>{!i&&!u.size&&o&&o()},[i]),"popLayout"===l&&(n=(0,pr.jsx)(Er,{isPresent:i,anchorX:c,children:n})),(0,pr.jsx)(br.Provider,{value:f,children:n})};function Cr(){return new Map}const Ar=e=>e.key||"";function xr(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const Ir=e=>{let{children:n,custom:r,initial:i=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:s="sync",propagate:l=!1,anchorX:c="left"}=e;const[u,d]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(br);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:i,register:o}=n,a=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return o(a)},[e]);const s=(0,t.useCallback)(()=>e&&i&&i(a),[a,i,e]);return!r&&i?[!1,s]:[!0]}(l),h=(0,t.useMemo)(()=>xr(n),[n]),f=l&&!u?[]:h.map(Ar),p=(0,t.useRef)(!0),g=(0,t.useRef)(h),m=mr(()=>new Map),[y,w]=(0,t.useState)(h),[b,_]=(0,t.useState)(h);yr(()=>{p.current=!1,g.current=h;for(let e=0;e<b.length;e++){const t=Ar(b[e]);f.includes(t)?m.delete(t):!0!==m.get(t)&&m.set(t,!1)}},[b,f.length,f.join("-")]);const v=[];if(h!==y){let e=[...h];for(let t=0;t<b.length;t++){const n=b[t],r=Ar(n);f.includes(r)||(e.splice(t,0,n),v.push(n))}return"wait"===s&&v.length&&(e=v),_(xr(e)),w(h),null}const{forceRender:E}=(0,t.useContext)(gr);return(0,pr.jsx)(pr.Fragment,{children:b.map(e=>{const t=Ar(e),n=!(l&&!u)&&(h===b||f.includes(t));return(0,pr.jsx)(Sr,{isPresent:n,initial:!(p.current&&!i)&&void 0,custom:r,presenceAffectsLayout:a,mode:s,onExitComplete:n?void 0:()=>{if(!m.has(t))return;m.set(t,!0);let e=!0;m.forEach(t=>{t||(e=!1)}),e&&(null===E||void 0===E||E(),_(g.current),l&&(null===d||void 0===d||d()),o&&o())},anchorX:c,children:e},t)})})},Tr={frequencyPulse:{name:"Frequency Pulse",gradient:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 50%, #9D4EDD 100%)"},solarShine:{name:"Solar Shine",gradient:"linear-gradient(135deg, #FFB000 0%, #FF9F1C 50%, #FFED85 100%)"},echoGlass:{name:"Echo Glass",gradient:"linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(108,108,108,0.3) 100%)"},retroFrame:{name:"Retro Frame",gradient:"linear-gradient(135deg, #6C6C6C 0%, #FAFAFA 100%)"},nightScan:{name:"Night Scan",gradient:"linear-gradient(135deg, #000000 0%, #4C1C8C 100%)"}},Rr={colors:{primary:"#4C1C8C",accent:{purple:"#4C1C8C",gold:"#FFB000",cyan:"#7F3FBF",pink:"#9D4EDD",green:"#10B981"},highlight:"#FFB000",background:"#000000",text:{primary:"#FAFAFA",secondary:"#6C6C6C",accent:"#FFB000"},glass:{background:"rgba(76, 28, 140, 0.08)",border:"rgba(255, 176, 0, 0.3)",overlay:"rgba(250, 250, 250, 0.15)",glow:"rgba(76, 28, 140, 0.2)"},neon:{purple:"#4C1C8C",gold:"#FFB000",white:"#FAFAFA",gray:"#6C6C6C",black:"#000000"}},gradients:{primary:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 50%, #9D4EDD 100%)",gold:"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)",glass:"linear-gradient(135deg, rgba(76,28,140,0.1) 0%, rgba(255,176,0,0.05) 100%)",neon:"linear-gradient(135deg, #4C1C8C 0%, #FFB000 50%, #7F3FBF 100%)",liquid:"linear-gradient(45deg, #4C1C8C, #7F3FBF, #FFB000, #9D4EDD)",retro:"linear-gradient(135deg, #4C1C8C 0%, #6C6C6C 100%)",night:"linear-gradient(135deg, #000000 0%, #4C1C8C 100%)"},typography:{fontFamily:{heading:"Outfit, sans-serif",body:"Space Grotesk, sans-serif",mono:"JetBrains Mono, monospace"},fontWeight:{regular:400,medium:500,bold:700},fontSize:{h1:"3rem",h2:"1.5rem",h3:"1.25rem",body:"1rem",small:"0.875rem",code:"0.9rem"},lineHeight:{heading:1.2,body:1.6,code:1.4}},animation:{duration:{fast:"150ms",normal:"300ms",slow:"500ms",ambient:"1000ms"},timing:{smooth:"cubic-bezier(0.4, 0, 0.2, 1)",bounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",sharp:"cubic-bezier(0.4, 0, 1, 1)"}},glassmorphism:{modal:{opacity:.08,blur:"25px"},card:{opacity:.15,blur:"20px"},navigation:{opacity:.2,blur:"15px"},input:{opacity:.15,blur:"10px"}},effects:{neonGlow:"0 0 20px currentColor, 0 0 40px currentColor",glassBlur:"blur(20px)",liquidMotion:"cubic-bezier(0.23, 1, 0.320, 1)"},breakpoints:{mobile:"428px",tablet:"768px",desktop:"1024px",wide:"1440px"},currentGradient:Tr.frequencyPulse.gradient},kr=(0,wr.A)((0,wr.A)({},Rr),{},{colors:(0,wr.A)((0,wr.A)({},Rr.colors),{},{background:"#000000",text:{primary:"#000000",secondary:"#6C6C6C",accent:"#4C1C8C"},glass:{background:"rgba(255, 255, 255, 0.9)",border:"rgba(255, 255, 255, 0.3)",overlay:"rgba(255, 255, 255, 0.1)",glow:"rgba(255, 176, 0, 0.2)"}})});var Pr;const Nr=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=lr.apply(void 0,Ee([e],n,!1)),o="sc-global-".concat(Yt(JSON.stringify(i))),a=new hr(i,o),s=function(e){var n=Yn(),r=t.useContext(nr),i=t.useRef(n.styleSheet.allocateGSInstance(o)).current;return n.styleSheet.server&&l(i,e,n.styleSheet,r,n.stylis),t.useLayoutEffect(function(){if(!n.styleSheet.server)return l(i,e,n.styleSheet,r,n.stylis),function(){return a.removeStyles(i,n.styleSheet)}},[i,e,n.styleSheet,r,n.stylis]),null};function l(e,t,n,r,i){if(a.isStatic)a.renderStyles(e,Pt,n,i);else{var o=ve(ve({},t),{theme:Ot(t,r,s.defaultProps)});a.renderStyles(e,o,n,i)}}return t.memo(s)}(Pr||(Pr=o(["\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n\n  @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap');\n  \n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n  \n  body {\n    font-family: ",";\n    font-size: ",";\n    line-height: ",";\n    background: ",";\n    color: ",";\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    font-family: ",";\n    line-height: ",";\n  }\n\n  h1 { font-size: ","; }\n  h2 { font-size: ","; }\n  h3 { font-size: ","; }\n\n  code, pre {\n    font-family: ",";\n    font-size: ",";\n    line-height: ",";\n  }\n  \n  button {\n    font-family: inherit;\n  }\n\n  /* Focus styles */\n  :focus {\n    outline: 2px solid ",";\n    outline-offset: 2px;\n  }\n\n  /* High contrast mode support */\n  @media (prefers-contrast: high) {\n    .glass-card {\n      background: rgba(76, 28, 140, 0.3);\n      border-width: 2px;\n    }\n  }\n\n  /* Reduced motion */\n  @media (prefers-reduced-motion: reduce) {\n    * {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n      scroll-behavior: auto !important;\n    }\n  }\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.typography.fontSize.body},e=>{let{theme:t}=e;return t.typography.lineHeight.body},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.typography.lineHeight.heading},e=>{let{theme:t}=e;return t.typography.fontSize.h1},e=>{let{theme:t}=e;return t.typography.fontSize.h2},e=>{let{theme:t}=e;return t.typography.fontSize.h3},e=>{let{theme:t}=e;return t.typography.fontFamily.mono},e=>{let{theme:t}=e;return t.typography.fontSize.code},e=>{let{theme:t}=e;return t.typography.lineHeight.code},e=>{let{theme:t}=e;return t.colors.highlight}),Dr=Nr;var Or=n(507);(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo");const Mr=async()=>{console.log("\ud83e\uddf9 Starting quick auth cleanup...");try{try{localStorage.clear(),console.log("\u2705 localStorage cleared")}catch(e){console.log("\u26a0\ufe0f localStorage clear failed:",e)}try{sessionStorage.clear(),console.log("\u2705 sessionStorage cleared")}catch(e){console.log("\u26a0\ufe0f sessionStorage clear failed:",e)}if(window.caches)try{const e=(await caches.keys()).filter(e=>e.includes("monarch")||e.includes("passport")||e.includes("papillon"));await Promise.all(e.map(e=>caches.delete(e))),console.log("\u2705 Monarch caches cleared")}catch(t){console.log("\u26a0\ufe0f Cache clear failed:",t)}if("serviceWorker"in navigator)try{const e=(await navigator.serviceWorker.getRegistrations()).filter(e=>e.scope.includes("localhost")||e.scope.includes("monarch"));await Promise.all(e.map(e=>e.unregister())),console.log("\u2705 Monarch service workers unregistered")}catch(n){console.log("\u26a0\ufe0f Service worker cleanup failed:",n)}return console.log("\u2705 Quick auth cleanup completed"),!0}catch(r){return console.error("\u274c Auth cleanup failed:",r),!1}},Lr=()=>{console.log("\ud83d\udea8 Performing emergency cleanup...");try{localStorage.clear(),sessionStorage.clear(),document.querySelectorAll("[data-user]").forEach(e=>{e.removeAttribute("data-user")}),window.location.reload()}catch(e){console.error("\u274c Emergency cleanup failed:",e),window.location.href="/"}},jr=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Fr=(0,t.createContext)(),Br=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(!0);(0,t.useEffect)(()=>{const e=setTimeout(()=>{console.warn("Auth loading timeout - forcing completion"),l(!1)},5e3);(async()=>{try{const{data:{session:e},error:t}=await jr.auth.getSession();if(t)throw t;if(null!==e&&void 0!==e&&e.user){i(e.user);const{data:t,error:n}=await jr.from("user_profiles").select("*").eq("id",e.user.id).single();n&&"PGRST116"!==n.code&&console.error("Profile error:",n),a(t||null)}}catch(e){console.error("Error fetching session:",e)}finally{l(!1)}})();const{data:t}=jr.auth.onAuthStateChange(async(e,t)=>{try{var n,r;if(console.log("Auth state change:",e,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id),"SIGNED_OUT"===e)i(null),a(null),await Mr(),console.log("Auth state cleared on sign out");else if(i(null!==(r=null===t||void 0===t?void 0:t.user)&&void 0!==r?r:null),null!==t&&void 0!==t&&t.user){const{data:e,error:n}=await jr.from("user_profiles").select("*").eq("id",t.user.id).single();n&&"PGRST116"!==n.code&&console.error("Profile error:",n),a(e||null)}else a(null)}catch(o){console.error("Error in auth state change:",o)}finally{l(!1)}});return()=>{clearTimeout(e),t.subscription.unsubscribe()}},[]);const c={user:r,profile:o,loading:s,isAdmin:"admin"===(null===o||void 0===o?void 0:o.role),signOut:async()=>{try{l(!0),i(null),a(null);const t=Mr(),{error:n}=await jr.auth.signOut();if(n)throw console.error("Sign out error:",n),n;try{await Promise.race([t,new Promise(e=>setTimeout(e,2e3))])}catch(e){console.warn("Cleanup timeout or error:",e)}return console.log("Successfully signed out"),{success:!0}}catch(t){throw console.error("Error during sign out:",t),t}finally{l(!1)}},refreshProfile:async()=>{if(r)try{const{data:e,error:t}=await jr.from("user_profiles").select("*").eq("id",r.id).single();if(t)throw t;a(e)}catch(e){console.error("Error refreshing profile:",e)}}};return(0,pr.jsx)(Fr.Provider,{value:c,children:n})},Ur=()=>(0,t.useContext)(Fr),zr=()=>{const{user:e,loading:t}=Ur();return t?(0,pr.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #000000 0%, #4C1C8C 100%)",color:"#FFB000",fontSize:"1.2rem"},children:"Loading Monarch Passport..."}):e?(0,pr.jsx)(me,{}):(0,pr.jsx)(ge,{to:"/login",replace:!0})};var Hr,Wr;const Vr=fr(Hr||(Hr=o(["\n  0%, 100% { \n    box-shadow: \n      0 0 12px 0 rgba(255,215,0,0.15),\n      0 0 24px 0 rgba(255,215,0,0.08),\n      inset 0 1px 0 rgba(255,215,0,0.1);\n  }\n  50% { \n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),Yr=dr.div(Wr||(Wr=o(["\n  position: relative;\n  background: ",";\n  border-radius: 20px;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  overflow: hidden;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    border: 3px solid ",";\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n    animation: "," 2s ease-in-out infinite;\n  }\n  \n  /* Content positioning */\n  > * {\n    position: relative;\n    z-index: 1;\n  }\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.glass)||void 0===n?void 0:n.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFD700"},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFD700"},Vr),Gr=Yr;var qr,Xr;fr(qr||(qr=o(["\n  0% { box-shadow: 0 0 16px 0 ","55; }\n  100% { box-shadow: 0 0 32px 0 ","; }\n"])),e=>{let{theme:t}=e;return t.colors.accent},e=>{let{theme:t}=e;return t.colors.accent});const Qr=dr.button(Xr||(Xr=o(["\n  background: ",";\n  color: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ",";\n    box-shadow: ",";\n  }\n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ",";\n    box-shadow: ",";\n  }\n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.typography.fontSize.body},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.effects.neonGlow}),Zr=Qr;var Kr,Jr,$r,ei,ti,ni,ri;const ii=fr(Kr||(Kr=o(["\n  from { opacity: 0; transform: translateY(20px); }\n  to { opacity: 1; transform: translateY(0); }\n"]))),oi=fr(Jr||(Jr=o(["\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n"]))),ai=dr.div($r||($r=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ",";\n    opacity: 0.1;\n    z-index: 0;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.gradients.primary}),si=dr(Gr)(ei||(ei=o(["\n  max-width: 600px;\n  width: 100%;\n  text-align: center;\n  animation: "," 1s ease-out;\n  z-index: 1;\n"])),ii),li=dr.h1(ti||(ti=o(["\n  font-family: ",";\n  font-weight: ",";\n  color: ",";\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  background: ",";\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.gradients.primary}),ci=dr.p(ni||(ni=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.2rem;\n  margin-bottom: 2rem;\n  line-height: 1.6;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),ui=dr(Zr)(ri||(ri=o(["\n  animation: "," 2s infinite;\n  font-size: 1.2rem;\n  padding: 20px 40px;\n"])),oi),di=()=>{const e=$();return(0,pr.jsx)(ai,{children:(0,pr.jsxs)(si,{children:[(0,pr.jsx)(li,{children:"Find Your Wings"}),(0,pr.jsx)(ci,{children:"Your digital passport to exclusive experiences. Join us on a journey of discovery and connection."}),(0,pr.jsx)(ui,{onClick:()=>e("/login"),children:"JOIN THE JOURNEY"})]})})},hi="https://ywagbnjejhpdujkftbxq.supabase.co",fi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo";const pi=(0,Or.UU)(hi,fi),gi={first_item:{id:"first_item",name:"First Item",description:"Collect your first item",imageUrl:"/Stamps/stamp_first_item.svg",altText:"First Item Stamp"},gm:{id:"gm",name:"Good Morning",description:"Complete your first daily quest",imageUrl:"/Stamps/stamp_gm.svg",altText:"Good Morning Stamp"},master:{id:"master",name:"Master Collector",description:"Collect 10 unique items",imageUrl:"/Stamps/stamp_master.svg",altText:"Master Collector Stamp"},passport:{id:"passport",name:"Passport Holder",description:"Unlock your digital passport",imageUrl:"/Stamps/stamp_passport.svg",altText:"Passport Holder Stamp"},qr:{id:"qr",name:"QR Scanner",description:"Scan your first QR code",imageUrl:"/Stamps/stamp_qr.svg",altText:"QR Scanner Stamp"},quest:{id:"quest",name:"Quest Master",description:"Complete 5 quests",imageUrl:"/Stamps/stamp_quest.svg",altText:"Quest Master Stamp"},social:{id:"social",name:"Social Butterfly",description:"Connect with 3 friends",imageUrl:"/Stamps/stamp_social.svg",altText:"Social Butterfly Stamp"},streak:{id:"streak",name:"Streak Keeper",description:"Maintain a 7-day streak",imageUrl:"/Stamps/stamp_streak.svg",altText:"Streak Keeper Stamp"},style:{id:"style",name:"Style Icon",description:"Unlock 3 different themes",imageUrl:"/Stamps/stamp_style.svg",altText:"Style Icon Stamp"}};const mi=[{stamp_id:"received_passport",name:"Received Passport",description:"Welcome to the Monarch family",image:gi.passport.imageUrl,category:"milestone"},{stamp_id:"morning_gm",name:"GM",description:"Said GM to the community",image:gi.gm.imageUrl,category:"social"},{stamp_id:"quest_completed",name:"Quest Master",description:"Completed your first quest",image:gi.quest.imageUrl,category:"achievement"},{stamp_id:"qr_scanner",name:"QR Scanner Pro",description:"Scanned your first QR code",image:gi.qr.imageUrl,category:"scan"},{stamp_id:"first_item",name:"First Item",description:"Scanned your first clothing item",image:gi.first_item.imageUrl,category:"scan"},{stamp_id:"style_icon",name:"Style Icon",description:"Collected items from 3+ different categories",image:gi.style.imageUrl,category:"collection"},{stamp_id:"social_share",name:"Social Butterfly",description:"Shared content on social media",image:gi.social.imageUrl,category:"social"},{stamp_id:"streak_master",name:"Streak Master",description:"Maintained a 7-day login streak",image:gi.streak.imageUrl,category:"dedication"},{stamp_id:"master_collector",name:"Master Collector",description:"Achieved elite collector status",image:gi.master.imageUrl,category:"elite"}],yi=()=>{const{user:e}=Ur(),[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null);(0,t.useEffect)(()=>{console.log("\ud83d\udd0d useStamps - User state:",e?"Authenticated":"Not authenticated"),console.log("\ud83d\udd0d useStamps - Loading state:",i),console.log("\ud83d\udd0d useStamps - Error state:",a)},[e,i,a]);const l=mi.map(e=>{var t;return(0,wr.A)((0,wr.A)({},e),{},{unlocked:n.some(t=>t.stamp_id===e.stamp_id),earnedAt:null===(t=n.find(t=>t.stamp_id===e.stamp_id))||void 0===t?void 0:t.created_at})}),c=l.filter(e=>e.unlocked).length,u=mi.length,d=Math.round(c/u*100),h=(0,t.useCallback)(async()=>{if(console.log("\ud83d\udd0d loadUserStamps called - User ID:",null===e||void 0===e?void 0:e.id),null===e||void 0===e||!e.id)return console.log("\u26a0\ufe0f No user ID found, setting empty stamps and loading false"),r([]),o(!1),void s(null);try{o(!0),s(null),console.log("\ud83d\udd0d Starting database query for user stamps...");const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Database query timeout")),8e3)),n=pi.from("user_stamps").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),{data:i,error:a}=await Promise.race([n,t]);if(a)throw a;r(i||[]),console.log("\u2705 User stamps loaded successfully:",(null===i||void 0===i?void 0:i.length)||0,"stamps")}catch(t){console.error("\u274c Error loading user stamps:",t),s(t.message),r([])}finally{o(!1)}},[e]),f=(0,t.useCallback)(e=>n.some(t=>t.stamp_id===e),[n]),p=(0,t.useCallback)(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e||void 0===e||!e.id)throw new Error("User must be logged in to earn stamps");if(f(t))return console.log("User already has stamp: ".concat(t)),{success:!0,alreadyEarned:!0};try{const{data:o,error:a}=await pi.from("user_stamps").insert([{user_id:e.id,stamp_id:t,metadata:i,created_at:(new Date).toISOString()}]).select().single();if(a)throw a;r(e=>[o,...e]);return 8!==n.length+1||f("master_collector")||setTimeout(()=>{S()},1e3),{success:!0,data:o,alreadyEarned:!1}}catch(o){throw console.error("Error awarding stamp ".concat(t,":"),o),o}},[null===e||void 0===e?void 0:e.id,f,n.length]),g=(0,t.useCallback)(async()=>p("received_passport",{trigger:"first_login",timestamp:(new Date).toISOString()}),[p]),m=(0,t.useCallback)(async()=>p("morning_gm",{trigger:"daily_gm_quest",timestamp:(new Date).toISOString()}),[p]),y=(0,t.useCallback)(async function(){return p("quest_completed",{trigger:"quest_completion",quest_type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general",timestamp:(new Date).toISOString()})},[p]),w=(0,t.useCallback)(async()=>p("qr_scanner",{trigger:"first_qr_scan",timestamp:(new Date).toISOString()}),[p]),b=(0,t.useCallback)(async function(){return p("first_item",{trigger:"first_item_scan",item_type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clothing",timestamp:(new Date).toISOString()})},[p]),_=(0,t.useCallback)(async function(){return p("social_share",{trigger:"social_sharing",platform:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"instagram",timestamp:(new Date).toISOString()})},[p]),v=(0,t.useCallback)(async function(){return p("streak_master",{trigger:"login_streak",streak_days:arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,timestamp:(new Date).toISOString()})},[p]),E=(0,t.useCallback)(async function(){return p("style_icon",{trigger:"style_diversity",categories_collected:arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,timestamp:(new Date).toISOString()})},[p]),S=(0,t.useCallback)(async()=>p("master_collector",{trigger:"achievement_milestone",stamps_count:8,timestamp:(new Date).toISOString()}),[p]);return(0,t.useEffect)(()=>{console.log("\ud83d\udd0d useStamps useEffect triggered - User ID:",null===e||void 0===e?void 0:e.id),(null!==e&&void 0!==e&&e.id||null===e)&&h()},[null===e||void 0===e?void 0:e.id,h]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{i&&(console.warn("\u26a0\ufe0f Maximum loading time reached, forcing loading to false"),o(!1),s("Loading timeout - please refresh the page"))},1e4);return()=>clearTimeout(e)},[i]),(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.id},[null===e||void 0===e?void 0:e.id]),{stamps:l,userStamps:n,unlockedCount:c,totalCount:u,completionPercentage:d,loading:i,error:a,hasStamp:f,loadUserStamps:h,refreshStamps:h,awardPassportStamp:g,awardGMStamp:m,awardQuestStamp:y,awardQRStamp:w,awardFirstItemStamp:b,awardSocialStamp:_,awardStreakStamp:v,awardStyleStamp:E,awardMasterStamp:S}},wi=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),bi=()=>{const{user:e}=Ur(),[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),l=[{id:"digital_collector",icon:"\ud83d\udcf1",title:"Digital Collector",description:"Scan QR codes on Papillon items to build your digital collection and unlock exclusive rewards.",target:10,reward:100,category:"Collection",type:"qr_scans"},{id:"social_butterfly",icon:"\ud83d\udc65",title:"Social Butterfly",description:"Share your Monarch Passport journey on Instagram, Twitter, or TikTok to inspire others and grow the community.",target:5,reward:75,category:"Social",type:"social_shares"},{id:"daily_dedication",icon:"\ud83c\udfaf",title:"Daily Dedication",description:"Complete daily challenges consistently to prove your dedication to the Monarch lifestyle.",target:15,reward:125,category:"Daily",type:"daily_completions"},{id:"brand_explorer",icon:"\ud83d\udecd\ufe0f",title:"Brand Explorer",description:"Explore the Papillon brand universe by visiting our Shopify store and engaging with our content.",target:3,reward:50,category:"Engagement",type:"brand_interactions"}],c=(0,t.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.id)try{var t,n,i,a;o(!0),s(null);const[c,u,d,h]=await Promise.all([wi.from("user_closet").select("id").eq("user_id",e.id).eq("earned_via","qr_scan"),wi.from("user_activity").select("id").eq("user_id",e.id).eq("activity_type","social_share"),wi.from("daily_completions").select("id").eq("user_id",e.id),wi.from("user_activity").select("id").eq("user_id",e.id).in("activity_type",["store_visit","content_view","brand_interaction"])]),f={qr_scans:(null===(t=c.data)||void 0===t?void 0:t.length)||0,social_shares:(null===(n=u.data)||void 0===n?void 0:n.length)||0,daily_completions:(null===(i=d.data)||void 0===i?void 0:i.length)||0,brand_interactions:(null===(a=h.data)||void 0===a?void 0:a.length)||0},p=l.map(e=>{const t=f[e.type]||0,n=Math.min(t/e.target*100,100),r=t>=e.target;return(0,wr.A)((0,wr.A)({},e),{},{progress:t,total:e.target,percent:Math.floor(n),completed:r})});r(p)}catch(c){console.error("Error fetching quest progress:",c),s(c.message),r(l.map(e=>(0,wr.A)((0,wr.A)({},e),{},{progress:0,total:e.target,percent:0,completed:!1})))}finally{o(!1)}else o(!1)},[null===e||void 0===e?void 0:e.id]),u=(0,t.useCallback)(async t=>{try{const r=n.find(e=>e.id===t);if(!r||r.completed)return;const{error:i}=await wi.rpc("add_wings_to_user",{user_id_param:e.id,wings_amount:r.reward,activity_type_param:"quest_completion",description_param:"Completed quest: ".concat(r.title)});if(i)throw i;return await c(),{success:!0,reward:r.reward}}catch(r){return console.error("Error completing quest:",r),{success:!1,error:r.message}}},[n,null===e||void 0===e?void 0:e.id,c]);return(0,t.useEffect)(()=>{c()},[c]),{quests:n,loading:i,error:a,refresh:c,completeQuest:u}};var _i,vi,Ei,Si,Ci,Ai;fr(_i||(_i=o(["\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n"])));const xi=dr.div(vi||(vi=o(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 600;\n"]))),Ii=dr.div(Ei||(Ei=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 40px;\n"]))),Ti=dr.div(Si||(Si=o(["\n  font-size: ",";\n  font-weight: 700;\n  color: ",";\n  text-shadow: 0 0 10px rgba(255, 176, 0, 0.3);\n"])),e=>e.size||"1.2rem",e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFB000"}),Ri=dr.div(Ci||(Ci=o(["\n  font-size: 0.7rem;\n  color: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-top: 2px;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),ki=dr.div(Ai||(Ai=o(["\n  font-size: ",";\n  font-weight: 700;\n  color: ",";\n  margin: 0 0.2rem;\n"])),e=>e.size||"1.2rem",e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFB000"}),Pi=e=>{let{targetDate:n,size:r="1.2rem",showLabels:i=!0,showSeconds:o=!0,showHours:a=!0,showMinutes:s=!0,onComplete:l}=e;const[c,u]=(0,t.useState)({days:0,hours:0,minutes:0,seconds:0});(0,t.useEffect)(()=>{const e=()=>{const e=(new Date).getTime(),t=new Date(n).getTime()-e;if(t>0){const e=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5),r=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);u({days:e,hours:n,minutes:r,seconds:i})}else u({days:0,hours:0,minutes:0,seconds:0}),l&&l()};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[n,l]);const d=e=>e.toString().padStart(2,"0");return(0,pr.jsxs)(xi,{children:[(0,pr.jsxs)(Ii,{children:[(0,pr.jsx)(Ti,{size:r,children:d(c.days)}),i&&(0,pr.jsx)(Ri,{children:"Days"})]}),a&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(ki,{size:r,children:":"}),(0,pr.jsxs)(Ii,{children:[(0,pr.jsx)(Ti,{size:r,children:d(c.hours)}),i&&(0,pr.jsx)(Ri,{children:"Hours"})]})]}),s&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(ki,{size:r,children:":"}),(0,pr.jsxs)(Ii,{children:[(0,pr.jsx)(Ti,{size:r,children:d(c.minutes)}),i&&(0,pr.jsx)(Ri,{children:"Mins"})]})]}),o&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(ki,{size:r,children:":"}),(0,pr.jsxs)(Ii,{children:[(0,pr.jsx)(Ti,{size:r,children:d(c.seconds)}),i&&(0,pr.jsx)(Ri,{children:"Secs"})]})]})]})};var Ni,Di,Oi,Mi,Li,ji,Fi,Bi,Ui,zi,Hi,Wi,Vi,Yi,Gi,qi,Xi,Qi,Zi,Ki;const Ji=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),$i=dr.div(Ni||(Ni=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.8);\n  backdrop-filter: blur(20px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s ease;\n  padding: 1rem;\n  \n  /* Ensure the overlay is clickable */\n  pointer-events: auto;\n  \n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),eo=dr(Gr)(Di||(Di=o(["\n  max-width: 500px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  pointer-events: auto;\n"]))),to=dr.div(Oi||(Oi=o(["\n  padding: 32px 32px 24px 32px;\n  border-bottom: 3px solid ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),no=dr.h2(Mi||(Mi=o(["\n  font-family: ",";\n  color: ",";\n  margin: 0 0 16px 0;\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontSize.h2},e=>{let{theme:t}=e;return t.typography.fontWeight.bold}),ro=dr.div(Li||(Li=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 16px;\n  background: rgba(255, 176, 0, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 176, 0, 0.2);\n  margin-bottom: 16px;\n"]))),io=dr.div(ji||(ji=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  color: ",";\n  font-weight: 500;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),oo=dr.div(Fi||(Fi=o(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 32px 32px 32px;\n"]))),ao=dr.div(Bi||(Bi=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),so=dr.div(Ui||(Ui=o(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  cursor: pointer;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.effects.neonGlow}),lo=dr.div(zi||(zi=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{platform:t,theme:n}=e;return"twitter"===t?n.colors.accent.cyan:n.colors.accent.pink}),co=dr.div(Hi||(Hi=o(["\n  flex: 1;\n"]))),uo=dr.div(Wi||(Wi=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.body}),ho=dr.div(Vi||(Vi=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.small}),fo=dr.div(Yi||(Yi=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),po=dr.div(Gi||(Gi=o(["\n  font-family: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{$completed:t,theme:n}=e;return t?n.colors.accent.green:n.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),go=dr.div(qi||(qi=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),mo=dr.div(Xi||(Xi=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),yo=dr.button(Qi||(Qi=o(["\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: transparent;\n  border: 3px solid ",";\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  z-index: 10;\n  padding: 0;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background}),wo=(dr.button(Zi||(Zi=o(["\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  padding: 12px 24px;\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-top: 1rem;\n  width: 100%;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.15);\n    border-color: rgba(255, 255, 255, 0.3);\n  }\n"]))),dr.div(Ki||(Ki=o(["\n  margin-top: 1rem;\n  padding: 1rem;\n  background: rgba(34, 197, 94, 0.1);\n  border: 1px solid rgba(34, 197, 94, 0.3);\n  border-radius: 12px;\n  text-align: center;\n  color: #22C55E;\n"]))),e=>{let{isOpen:n,onClose:r,onQuestComplete:i}=e;const{user:o}=Ur(),{awardStreakStamp:a}=yi(),[s,l]=(0,t.useState)(new Set),[c,u]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&o&&d()},[n,o]);const d=async()=>{if(o)try{const e=(new Date).toISOString().split("T")[0],{data:t,error:n}=await Ji.from("daily_completions").select("quest_id").eq("user_id",o.id).eq("completion_date",e);if(n)return void console.error("Error loading daily completions:",n);const r=new Set(t.map(e=>e.quest_id));l(r)}catch(e){console.error("Error loading daily completions:",e)}},h=async(e,t,n)=>{if(o)try{const r=(new Date).toISOString().split("T")[0],{error:i}=await Ji.from("daily_completions").insert({user_id:o.id,quest_id:e,completion_date:r,wings_earned:t,quest_title:n}).select().single();if(i)return void console.error("Error recording daily completion:",i);const{error:a}=await Ji.rpc("add_wings_to_user",{user_id_param:o.id,wings_amount:t,activity_type_param:"daily_quest",description_param:"Completed daily quest: ".concat(n)});a&&console.error("Error awarding WNGS:",a),await f()}catch(r){console.error("Error in recordDailyCompletion:",r)}},f=async()=>{if(o)try{const t=new Date;t.setDate(t.getDate()-6);const{data:n,error:r}=await Ji.from("daily_completions").select("completion_date").eq("user_id",o.id).gte("completion_date",t.toISOString().split("T")[0]).order("completion_date",{ascending:!1});if(r)return void console.error("Error checking streak:",r);const i=[...new Set(n.map(e=>e.completion_date))];if(i.length>=7){const t=(new Date).toISOString().split("T")[0],n=i.sort().reverse();let r=0,o=new Date(t);for(let e=0;e<n.length&&e<7;e++){const t=o.toISOString().split("T")[0];if(n[e]!==t)break;r++,o.setDate(o.getDate()-1)}if(r>=7)try{"function"===typeof a?(await a(7),console.log("\ud83d\udd25 Streak Master stamp awarded for 7-day streak!")):console.log("\ud83d\udd25 7-day streak achieved! (Streak stamp function not available)")}catch(e){console.warn("Streak stamp might already be earned or function unavailable:",e)}}}catch(t){console.error("Error checking streak:",t)}};if(!n)return null;const p=[{id:"twitter",platform:"twitter",icon:"\ud83d\udc26",title:"Say GM on Twitter/X",description:'Tweet "GM @PapillonBrandUs" to start your day',reward:"+10 WNGS",action:async()=>{if(!s.has("twitter")){u(!0);try{const e=encodeURIComponent("GM @PapillonBrandUs \ud83e\udd8b #PapillonBrand #PapillonMorning #GM"),t="https://twitter.com/intent/tweet?text=".concat(e);window.open(t,"_blank"),await h("twitter",10,"Say GM on Twitter/X"),l(e=>new Set([...e,"twitter"])),i&&i()}catch(e){console.error("Error completing Twitter quest:",e)}finally{u(!1)}}},completed:s.has("twitter"),date:s.has("twitter")?"Mar 18, 2025":""},{id:"instagram",platform:"instagram",icon:"\ud83d\udcf8",title:"Engage on Instagram",description:"Like, comment, or share our latest post",reward:"+15 WNGS",action:async()=>{if(!s.has("instagram")){u(!0);try{const e="https://instagram.com/papillonbrand.us";window.open(e,"_blank"),await h("instagram",15,"Engage on Instagram"),l(e=>new Set([...e,"instagram"])),i&&i()}catch(e){console.error("Error completing Instagram quest:",e)}finally{u(!1)}}},completed:s.has("instagram"),date:s.has("instagram")?"Mar 17, 2025":""}];p.every(e=>e.completed),p.reduce((e,t)=>t.completed?e+parseInt(t.reward.match(/\d+/)[0]):e,0);return(0,pr.jsx)($i,{onClick:e=>{e.target===e.currentTarget&&r()},children:(0,pr.jsxs)(eo,{onClick:e=>e.stopPropagation(),children:[(0,pr.jsx)(yo,{onClick:e=>{e.stopPropagation(),r()},children:"\xd7"}),(0,pr.jsxs)(to,{children:[(0,pr.jsx)(no,{children:"Daily Social Quests"}),(0,pr.jsxs)(ro,{children:[(0,pr.jsx)(io,{children:"Next reset in:"}),(0,pr.jsx)(Pi,{targetDate:(new Date).setHours(24,0,0,0),size:"1rem",showSeconds:!1})]})]}),(0,pr.jsx)(oo,{children:(0,pr.jsx)(ao,{children:p.map(e=>(0,pr.jsxs)(so,{onClick:e.completed?null:e.action,style:{cursor:e.completed?"default":"pointer"},children:[(0,pr.jsx)(lo,{platform:e.platform,children:e.icon}),(0,pr.jsxs)(co,{children:[(0,pr.jsx)(uo,{children:e.title}),(0,pr.jsx)(ho,{children:e.description})]}),(0,pr.jsxs)(fo,{children:[(0,pr.jsx)(po,{$completed:e.completed,children:e.completed?"Completed":"Available"}),e.date&&(0,pr.jsx)(go,{children:e.date}),e.completed&&(0,pr.jsx)(mo,{children:e.reward})]})]},e.id))})})]})})});var bo,_o,vo,Eo,So,Co,Ao,xo,Io,To,Ro,ko,Po,No,Do,Oo,Mo,Lo,jo,Fo,Bo,Uo,zo,Ho,Wo,Vo,Yo,Go;const qo=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Xo="#FFB000",Qo="#4C1C8C",Zo=dr.div(bo||(bo=o(["\n  min-height: 100vh;\n  background: ",";\n  padding: 0 0 80px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n"])),e=>{var t;let{theme:n}=e;return(null===(t=n.colors)||void 0===t?void 0:t.background)||"#000000"}),Ko=dr.div(_o||(_o=o(["\n  padding: 2.2rem 1.2rem 1.2rem 1.2rem;\n  text-align: left;\n"]))),Jo=dr.h1(vo||(vo=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 0.3rem 0;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),$o=dr.div(Eo||(Eo=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.05rem;\n  color: ",";\n  font-weight: 500;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px;\n  padding: 0.8rem 1.2rem;\n  margin-top: 0.8rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",";\n    border-color: ",";\n  }\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo},e=>{var t,n,r,i;let{theme:o}=e;return"linear-gradient(135deg, ".concat((null===(t=o.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo,"22 0%, ").concat((null===(r=o.colors)||void 0===r||null===(i=r.accent)||void 0===i?void 0:i.purple)||Qo,"11 100%)")},e=>{var t,n;let{theme:r}=e;return"".concat((null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo,"33")},e=>{var t,n,r,i;let{theme:o}=e;return"linear-gradient(135deg, ".concat((null===(t=o.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo,"28 0%, ").concat((null===(r=o.colors)||void 0===r||null===(i=r.accent)||void 0===i?void 0:i.purple)||Qo,"15 100%)")},e=>{var t,n;let{theme:r}=e;return"".concat((null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo,"44")}),ea=dr.span(So||(So=o(["\n  font-size: 1.1rem;\n"]))),ta=dr.div(Co||(Co=o(["\n  position: fixed;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: linear-gradient(135deg, #10B981 0%, #059669 100%);\n  color: white;\n  padding: 16px 32px;\n  border-radius: 12px;\n  font-weight: 600;\n  z-index: 1000;\n  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);\n  animation: slideIn 0.3s ease-out;\n  font-family: 'Outfit', sans-serif;\n  \n  @keyframes slideIn {\n    from { opacity: 0; transform: translateX(-50%) translateY(-20px); }\n    to { opacity: 1; transform: translateX(-50%) translateY(0); }\n  }\n"]))),na=dr.div(Ao||(Ao=o(["\n  padding: 0 1.2rem;\n  margin-bottom: 1.2rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.2rem;\n  @media (max-width: 700px) {\n    gap: 1rem;\n  }\n"]))),ra=dr.div(xo||(xo=o(["\n  display: flex;\n  gap: 1.2rem;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),ia=dr.button(Io||(Io=o(["\n  flex: 1;\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  padding: 18px 18px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  cursor: pointer;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  outline: none;\n  position: relative;\n  min-width: 0;\n  min-height: 140px;\n  &:hover, &:focus {\n    border: 3px solid ",";\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.glass)||void 0===n?void 0:n.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo}),oa=dr.div(To||(To=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.15rem;\n  font-weight: 700;\n  color: ",";\n  margin-bottom: 0.5rem;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),aa=dr.div(Ro||(Ro=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  color: ",";\n  font-weight: 500;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),sa=dr.div(ko||(ko=o(["\n  font-size: 2.1rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n"]))),la=dr(ia)(Po||(Po=o(["\n  width: 100%;\n  min-height: 100px;\n  align-items: flex-start;\n  flex-direction: column;\n  justify-content: flex-start;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    align-items: flex-start;\n    min-height: 0;\n  }\n"]))),ca=dr.div(No||(No=o(["\n  display: flex;\n  gap: 1.2rem;\n  padding: 0 1.2rem;\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),ua=dr(ia).attrs({as:"div"})(Do||(Do=o(["\n  min-height: 100px;\n  padding: 18px 18px;\n  flex: 1;\n  cursor: default;\n  &:hover, &:focus {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),da=dr.div(Oo||(Oo=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  height: 100%;\n"]))),ha=dr.div(Mo||(Mo=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: ",";\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),fa=dr.div(Lo||(Lo=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.98rem;\n  color: ",";\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),pa=(dr.div(jo||(jo=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2.1rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0.1rem 0 0.2rem 0;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo}),dr.span(Fo||(Fo=o(["\n  margin-right: 0.5rem;\n"]))),dr.div(Bo||(Bo=o(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 1rem;\n"]))));dr.div(Uo||(Uo=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),dr.div(zo||(zo=o(["\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n"]))),dr.div(Ho||(Ho=o(["\n  font-size: 1.5rem;\n"]))),dr.div(Wo||(Wo=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  color: ",";\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),dr.div(Vo||(Vo=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  color: ",";\n  margin-left: auto;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),dr.div(Yo||(Yo=o(["\n  height: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n  overflow: hidden;\n  width: 100%;\n"]))),dr.div(Go||(Go=o(["\n  height: 100%;\n  background: ",";\n  border-radius: 3px;\n  transition: width 0.4s cubic-bezier(0.4,0,0.2,1);\n  width: ","%;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Xo},e=>{let{value:t}=e;return t});const ga=function(){var e,n;const[r,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)(!1),s=$(),l=K(),{user:c}=Ur(),{awardPassportStamp:u,hasStamp:d}=yi(),{quests:h,loading:f}=bi(),{weeklyStats:p,loading:g,error:m,getWeeklyProgressText:y,refreshStats:w}=(e=>{const[n,r]=(0,t.useState)({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0}),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),l=(0,t.useCallback)(async()=>{if(e)try{o(!0),s(null),console.log("Loading weekly stats for user:",e);const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timeout")),5e3)),n=qo.from("user_profiles").select("wings_balance, current_week_wings, week_start_date").eq("id",e).single(),{data:i,error:a}=await Promise.race([n,t]);if(a){if(console.error("Error fetching profile:",a),"PGRST116"===a.code){console.log("User profile not found, creating...");const{error:t}=await qo.from("user_profiles").insert({id:e,wings_balance:0,current_week_wings:0,week_start_date:(new Date).toISOString()});t&&console.error("Error creating user profile:",t)}return void r({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0})}console.log("Profile data:",i);const l=new Date,c=new Date(l);c.setDate(l.getDate()-l.getDay()+1);const u=null!==i&&void 0!==i&&i.week_start_date?new Date(i.week_start_date):c,d=new Date(u);d.setDate(u.getDate()+6);const h=Math.max(0,Math.ceil((d-l)/864e5));r({currentWeekWings:(null===i||void 0===i?void 0:i.current_week_wings)||0,totalWings:(null===i||void 0===i?void 0:i.wings_balance)||0,weekStartDate:null===i||void 0===i?void 0:i.week_start_date,daysLeftInWeek:h}),console.log("Weekly stats updated:",{currentWeekWings:(null===i||void 0===i?void 0:i.current_week_wings)||0,totalWings:(null===i||void 0===i?void 0:i.wings_balance)||0})}catch(t){console.error("Error loading weekly stats:",t),s(t.message),r({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0})}finally{o(!1)}else o(!1)},[e]);return(0,t.useEffect)(()=>{e?l():o(!1)},[e,l]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{i&&(console.warn("\u26a0\ufe0f Weekly stats loading timeout"),o(!1),s("Loading timeout - please try again"))},1e4);return()=>clearTimeout(e)},[i]),{weeklyStats:n,loading:i,error:a,getWeeklyProgressText:()=>a?"Error loading WNGS data":0===n.currentWeekWings?"You've earned 0 WNGS this week":1===n.currentWeekWings?"You've earned 1 WNGS this week":"You've earned ".concat(n.currentWeekWings," WNGS this week"),refreshStats:l}})(null===c||void 0===c?void 0:c.id);(0,t.useEffect)(()=>{var e;null!==(e=l.state)&&void 0!==e&&e.message&&(a(l.state.message),window.history.replaceState({},document.title),setTimeout(()=>a(!1),5e3))},[l]),(0,t.useEffect)(()=>{(async()=>{if(c&&!d("received_passport"))try{await u(),console.log("\ud83c\udfc5 Welcome to Monarch! Passport stamp awarded!")}catch(m){console.warn("Failed to award passport stamp:",m)}})()},[c,d,u]),h&&h.filter(e=>!e.completed).slice(0,3),h&&h.filter(e=>!e.completed).length;const b=0,_=9;return(0,pr.jsxs)(Zo,{children:[o&&(0,pr.jsx)(ta,{children:o}),(0,pr.jsxs)(Ko,{children:[(0,pr.jsxs)(Jo,{children:["Welcome back, ",(null===c||void 0===c||null===(e=c.user_metadata)||void 0===e?void 0:e.display_name)||(null===c||void 0===c||null===(n=c.email)||void 0===n?void 0:n.split("@")[0])||"Collector"]}),(0,pr.jsxs)($o,{children:[(0,pr.jsx)(ea,{children:"\ud83d\udcb0"}),g?"Loading...":y()]})]}),(0,pr.jsx)(na,{children:(0,pr.jsxs)(ra,{children:[(0,pr.jsxs)(ia,{onClick:()=>i(!0),"aria-label":"Go to Dailies",children:[(0,pr.jsx)(sa,{children:"\ud83e\udd8b"}),(0,pr.jsx)(oa,{children:"Dailies"}),(0,pr.jsx)(aa,{children:"Complete daily quests"})]}),(0,pr.jsxs)(ia,{onClick:()=>window.open("https://papillonbrand.us","_blank"),"aria-label":"Shop Now",children:[(0,pr.jsx)(sa,{children:"\ud83d\udecd\ufe0f"}),(0,pr.jsx)(oa,{children:"Shop Now"}),(0,pr.jsx)(aa,{children:"Visit Papillon Brand"})]})]})}),(0,pr.jsx)(na,{children:(0,pr.jsx)(la,{onClick:()=>s("/quests"),"aria-label":"Go to Active Quests",children:(0,pr.jsxs)(da,{style:{flex:1,width:"100%"},children:[(0,pr.jsx)(ha,{children:"Active Quests"}),(0,pr.jsx)(fa,{children:"0 Active \u2022 Complete to earn rewards"}),(0,pr.jsx)(pa,{children:(0,pr.jsx)("div",{style:{textAlign:"center",padding:"1rem",color:"rgba(255,255,255,0.6)",fontSize:"1.2rem"},children:"No current quests"})})]})})}),(0,pr.jsxs)(ca,{children:[(0,pr.jsx)(ua,{onClick:()=>s("/passport"),"aria-label":"Go to Passport",style:{cursor:"pointer"},children:(0,pr.jsx)(da,{children:(0,pr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,pr.jsxs)("div",{style:{flex:1},children:[(0,pr.jsx)(ha,{children:"Passport"}),(0,pr.jsxs)(fa,{children:[b,"/",_," stamps"]})]}),(0,pr.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"90px"},children:[(0,pr.jsxs)("div",{style:{fontSize:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"rgba(255, 176, 0, 0.1)",border:"2px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",marginBottom:"0.5rem",color:"#FFB000",fontWeight:"700"},children:[b,"/",_]}),(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",textAlign:"center"},children:"View Passport"})]})]})})}),(0,pr.jsx)(ua,{onClick:()=>s("/season-roadmap"),"aria-label":"View Season Roadmap",style:{cursor:"pointer"},children:(0,pr.jsx)(da,{children:(0,pr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,pr.jsxs)("div",{style:{flex:1},children:[(0,pr.jsx)(ha,{children:"Digital Genesis"}),(0,pr.jsx)(fa,{children:"Spring '25"})]}),(0,pr.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"90px"},children:[(0,pr.jsx)("div",{style:{fontSize:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"rgba(255, 176, 0, 0.1)",border:"2px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",marginBottom:"0.5rem",color:"#FFB000",fontWeight:"700"},children:(0,pr.jsx)(Pi,{targetDate:new Date("2025-09-07T12:00:00"),size:"2.5rem",showLabels:!1,showSeconds:!1,showHours:!1,showMinutes:!1})}),(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",textAlign:"center"},children:"Days Left"})]})]})})})]}),r&&(0,pr.jsx)(wo,{isOpen:r,onClose:()=>i(!1),onQuestComplete:w}),(0,pr.jsx)("div",{style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.5)",textAlign:"center",zIndex:10,pointerEvents:"none"},children:"Beta v0.1.0"})]})},ma={frequencyPulse:{name:"Frequency Pulse",description:"Default theme - always available",requirements:[{id:"signup",text:"Sign up for Monarch Passport",completed:!0}],rewardId:"theme_frequency_pulse"},solarShine:{name:"Solar Shine",description:"Unlock by scanning your first QR code",requirements:[{id:"signup",text:"Sign up for Monarch Passport",completed:!0},{id:"first_scan",text:"Scan your first QR code",completed:!1}],rewardId:"theme_solar_shine"},echoGlass:{name:"Echo Glass",description:"Unlock by completing 3 quests",requirements:[{id:"signup",text:"Sign up for Monarch Passport",completed:!0},{id:"quests",text:"Complete 3 quests",completed:!1,target:3}],rewardId:"theme_echo_glass"},retroFrame:{name:"Retro Frame",description:"Unlock by collecting 10 items",requirements:[{id:"signup",text:"Sign up for Monarch Passport",completed:!0},{id:"items",text:"Collect 10 items",completed:!1,target:10}],rewardId:"theme_retro_frame"},nightScan:{name:"Night Scan",description:"Unlock by earning 500 WNGS",requirements:[{id:"signup",text:"Sign up for Monarch Passport",completed:!0},{id:"wings",text:"Earn 500 WNGS",completed:!1,target:500}],rewardId:"theme_night_scan"}},ya=()=>{const{user:e}=Ur(),[n,r]=(0,t.useState)(["frequencyPulse"]),[i,o]=(0,t.useState)("frequencyPulse"),[a,s]=(0,t.useState)(!0),[l,c]=(0,t.useState)({totalScans:0,totalQuests:0,totalItems:0,totalWings:0});(0,t.useEffect)(()=>{e?u():s(!1)},[e]);const u=async()=>{try{var t,n,i,a;s(!0);const[u,d,h]=await Promise.all([pi.from("user_closet").select("reward_id, earned_via").eq("user_id",e.id),pi.from("user_quest_progress").select("status").eq("user_id",e.id).eq("status","completed"),pi.from("user_profiles").select("wings_balance").eq("id",e.id).single()]),f=(null===(t=u.data)||void 0===t?void 0:t.filter(e=>"qr_scan"===e.earned_via).length)||0,p=(null===(n=d.data)||void 0===n?void 0:n.length)||0,g=(null===(i=u.data)||void 0===i?void 0:i.length)||0,m=(null===(a=h.data)||void 0===a?void 0:a.wings_balance)||0;c({totalScans:f,totalQuests:p,totalItems:g,totalWings:m});let y="frequencyPulse";try{const{data:t,error:n}=await pi.from("user_equipped_theme").select("theme_key").eq("user_id",e.id).single();n?console.log("No equipped theme found in database, using default:",n.message):null!==t&&void 0!==t&&t.theme_key&&(y=t.theme_key,console.log("Loaded equipped theme from database:",y))}catch(l){console.log("Database error loading equipped theme, using default:",l.message)}const w=["frequencyPulse","solarShine","echoGlass","retroFrame","nightScan"];r(w),o(y),console.log("Theme system initialized:",{ownedThemes:w,equippedTheme:y,userProgress:{totalScans:f,totalQuests:p,totalItems:g,totalWings:m}})}catch(u){console.error("Error loading themes:",u),r(["frequencyPulse"]),o("frequencyPulse")}finally{s(!1)}};return{ownedThemes:n,equippedTheme:i,loading:a,userProgress:l,equipTheme:async t=>{if(!e||!n.includes(t))return console.log("Cannot equip theme:",{user:!!e,themeKey:t,ownedThemes:n}),!1;try{console.log("Equipping theme:",t),o(t);const{error:n}=await pi.from("user_equipped_theme").upsert({user_id:e.id,theme_key:t,updated_at:(new Date).toISOString()});return n?(console.error("Database error equipping theme:",n),!0):(console.log("Theme equipped successfully:",t),!0)}catch(r){return console.error("Error equipping theme:",r),!0}},checkThemeOwnership:e=>n.includes(e),getThemeRequirements:e=>{const t=ma[e];if(!t)return null;const n=t.requirements.map(e=>(0,wr.A)((0,wr.A)({},e),{},{completed:!0}));return(0,wr.A)((0,wr.A)({},t),{},{requirements:n,isUnlocked:!0})},refreshThemes:u}};var wa,ba,_a,va,Ea,Sa;const Ca=dr.div(wa||(wa=o(["\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background: rgba(18,18,18,0.55);\n  backdrop-filter: blur(8px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Aa=dr.div(ba||(ba=o(["\n  position: relative;\n  width: 320px;\n  max-width: 90vw;\n  height: 420px;\n  perspective: 1200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),xa=dr.div(_a||(_a=o(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform-style: preserve-3d;\n  transition: transform 0.6s cubic-bezier(0.4,0,0.2,1);\n  ","\n"])),e=>{let{flipped:t}=e;return t&&"transform: rotateY(180deg);"}),Ia=dr.div(va||(va=o(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  backface-visibility: hidden;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  background: linear-gradient(135deg, rgba(30,30,40,0.95) 0%, rgba(76,28,140,0.15) 100%);\n  box-shadow: 0 0 32px 0 rgba(255,176,0,0.25), 0 0 24px 0 rgba(255,176,0,0.15);\n  border: 2px solid #FFB000;\n  padding: 32px 16px;\n"]))),Ta=dr(Ia)(Ea||(Ea=o(["\n  font-size: 5rem;\n  font-family: 'Outfit', sans-serif;\n  color: #fff;\n"]))),Ra=dr(Ia)(Sa||(Sa=o(["\n  transform: rotateY(180deg);\n  color: #fff;\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.1rem;\n  justify-content: flex-start;\n  padding-top: 48px;\n"]))),ka=e=>{let{emoji:n,date:r,season:i,rarity:o,onClose:a}=e;const[s,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{l(!1)},[n]);const c=()=>l(e=>!e);return(0,pr.jsx)(Ca,{onClick:e=>{e.target===e.currentTarget&&a()},children:(0,pr.jsx)(Aa,{children:(0,pr.jsxs)(xa,{flipped:s,onClick:c,tabIndex:0,"aria-pressed":s,role:"button",onKeyDown:e=>("Enter"===e.key||" "===e.key)&&c(),children:[(0,pr.jsxs)(Ta,{children:[n,(0,pr.jsx)("div",{style:{marginTop:18,fontSize:"1.1rem",opacity:.7},children:"Tap or swipe to flip"})]}),(0,pr.jsxs)(Ra,{children:[(0,pr.jsx)("div",{style:{marginBottom:24,fontWeight:700,fontSize:"1.3rem",textAlign:"center"},children:"How You Earned This"}),(0,pr.jsxs)("div",{style:{marginBottom:12},children:[(0,pr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Obtained:"}),(0,pr.jsx)("span",{style:{marginLeft:8},children:"Scanned QR at Papillon Store"})]}),(0,pr.jsxs)("div",{style:{marginBottom:12},children:[(0,pr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Date:"}),(0,pr.jsx)("span",{style:{marginLeft:8},children:r})]}),(0,pr.jsxs)("div",{style:{marginBottom:12},children:[(0,pr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Location:"}),(0,pr.jsx)("span",{style:{marginLeft:8},children:"NYC"})]}),(0,pr.jsxs)("div",{style:{marginBottom:12},children:[(0,pr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Season:"}),(0,pr.jsx)("span",{style:{marginLeft:8},children:i})]}),(0,pr.jsxs)("div",{style:{marginBottom:12},children:[(0,pr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"WNGS:"}),(0,pr.jsx)("span",{style:{marginLeft:8,color:"#10B981"},children:"+25"})]}),(0,pr.jsx)("div",{style:{marginTop:32,fontSize:"0.9rem",opacity:.7,textAlign:"center"},children:"Tap to flip back"})]})]})})})};var Pa,Na,Da,Oa,Ma,La,ja,Fa,Ba,Ua,za,Ha,Wa,Va,Ya;const Ga=dr.div(Pa||(Pa=o(["\n  height: 100vh;\n  overflow: hidden;\n  background: #000000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 1rem 100px 1rem;\n  position: relative;\n"]))),qa=dr.div(Na||(Na=o(["\n  background: ",";\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border: 3px solid ",";\n  border-radius: 20px;\n  padding: 2rem;\n  margin: 0 auto;\n  max-width: 500px;\n  width: 100%;\n  height: fit-content;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: ",";\n  position: relative;\n  transition: all 0.3s ease;\n  \n  /* Book spine effect */\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 8px;\n    background: ",";\n    border-radius: 20px 0 0 20px;\n    box-shadow: inset -2px 0 5px rgba(0,0,0,0.3);\n  }\n  \n  @media (max-width: 767px) {\n    padding: 1.5rem;\n    max-height: 85vh;\n  }\n"])),e=>{let{themeGradient:t,themeKey:n}=e;const r="rgba(30,30,40,0.85)";switch(n){case"solarShine":return"linear-gradient(135deg, ".concat(r," 0%, rgba(255,176,0,0.25) 100%), rgba(255, 176, 0, 0.15)");case"echoGlass":return"linear-gradient(135deg, ".concat(r," 0%, rgba(108,108,108,0.3) 100%), rgba(0, 0, 0, 0.4)");case"retroFrame":return"linear-gradient(135deg, ".concat(r," 0%, rgba(108,108,108,0.2) 100%), rgba(250, 250, 250, 0.08)");case"nightScan":return"linear-gradient(135deg, ".concat(r," 0%, rgba(76,28,140,0.3) 100%), rgba(0, 0, 0, 0.5)");default:return"linear-gradient(135deg, ".concat(r," 0%, rgba(76,28,140,0.25) 100%), rgba(76, 28, 140, 0.2)")}},e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"#FFB000";case"echoGlass":return"#6C6C6C";case"retroFrame":return"#FAFAFA";case"nightScan":return"#4C1C8C";default:return"#7F3FBF"}},e=>{let{themeKey:t}=e;const n="0 0 20px 0",r="inset 0 1px 0";switch(t){case"solarShine":return"\n          ".concat(n," rgba(255,176,0,0.4),\n          0 0 40px 0 rgba(255,176,0,0.2),\n          ").concat(r," rgba(255,176,0,0.3)\n        ");case"echoGlass":return"\n          ".concat(n," rgba(108,108,108,0.4),\n          0 0 40px 0 rgba(108,108,108,0.2),\n          ").concat(r," rgba(108,108,108,0.3)\n        ");case"retroFrame":return"\n          ".concat(n," rgba(250,250,250,0.3),\n          0 0 40px 0 rgba(250,250,250,0.15),\n          ").concat(r," rgba(250,250,250,0.2)\n        ");case"nightScan":return"\n          ".concat(n," rgba(76,28,140,0.5),\n          0 0 40px 0 rgba(76,28,140,0.25),\n          ").concat(r," rgba(76,28,140,0.3)\n        ");default:return"\n          ".concat(n," rgba(127,63,191,0.4),\n          0 0 40px 0 rgba(127,63,191,0.2),\n          ").concat(r," rgba(127,63,191,0.3)\n        ")}},e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"linear-gradient(180deg, #FFB000 0%, #FF9F1C 100%)";case"echoGlass":return"linear-gradient(180deg, #6C6C6C 0%, #4A4A4A 100%)";case"retroFrame":return"linear-gradient(180deg, #FAFAFA 0%, #E0E0E0 100%)";case"nightScan":return"linear-gradient(180deg, #4C1C8C 0%, #2D1B69 100%)";default:return"linear-gradient(180deg, #7F3FBF 0%, #4C1C8C 100%)"}}),Xa=dr.div(Da||(Da=o(["\n  text-align: center;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 2px dashed ",";\n  position: relative;\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"rgba(255,176,0,0.4)";case"echoGlass":return"rgba(108,108,108,0.4)";case"retroFrame":return"rgba(250,250,250,0.4)";case"nightScan":return"rgba(76,28,140,0.4)";default:return"rgba(255,176,0,0.3)"}}),Qa=dr.div(Oa||(Oa=o(["\n  position: absolute;\n  top: -0.5rem;\n  right: -0.5rem;\n  background: rgba(0, 0, 0, 0.8);\n  color: ",";\n  width: 3.5rem;\n  height: 3.5rem;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.9rem;\n  font-family: 'Space Grotesk', sans-serif;\n  font-weight: 700;\n  backdrop-filter: blur(10px);\n  border: 2px solid ",";\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  z-index: 10;\n  text-align: center;\n  line-height: 1.1;\n  \n  @media (max-width: 767px) {\n    width: 3rem;\n    height: 3rem;\n    font-size: 0.8rem;\n    top: -0.25rem;\n    right: -0.25rem;\n  }\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"#FFB000";case"echoGlass":return"#6C6C6C";case"retroFrame":return"#FAFAFA";case"nightScan":return"#4C1C8C";default:return"#7F3FBF"}},e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"rgba(255,176,0,0.4)";case"echoGlass":return"rgba(108,108,108,0.4)";case"retroFrame":return"rgba(250,250,250,0.4)";case"nightScan":return"rgba(76,28,140,0.4)";default:return"rgba(127,63,191,0.4)"}}),Za=dr.h2(Ma||(Ma=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: ",";\n  margin: 0 0 0.5rem 0;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n  opacity: 0.9;\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":default:return"#FFB000";case"echoGlass":return"#6C6C6C";case"retroFrame":return"#FAFAFA";case"nightScan":return"#4C1C8C"}}),Ka=dr.h1(La||(La=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.6rem;\n  font-weight: 700;\n  color: #FFFFFF;\n  margin: 0;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  text-shadow: ",";\n  \n  @media (max-width: 767px) {\n    font-size: 1.4rem;\n    letter-spacing: 1px;\n  }\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"0 0 10px rgba(255,176,0,0.4)";case"echoGlass":return"0 0 10px rgba(108,108,108,0.4)";case"retroFrame":return"0 0 10px rgba(250,250,250,0.4)";case"nightScan":return"0 0 10px rgba(76,28,140,0.4)";default:return"0 0 10px rgba(255,176,0,0.3)"}}),Ja=dr.p(ja||(ja=o(["\n  font-size: 0.9rem;\n  color: ",";\n  margin: 0.4rem 0 0 0;\n  font-family: 'Space Grotesk', sans-serif;\n  font-style: italic;\n  opacity: 0.8;\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"rgba(255,176,0,0.8)";case"echoGlass":return"rgba(108,108,108,0.8)";case"retroFrame":return"rgba(250,250,250,0.8)";case"nightScan":return"rgba(76,28,140,0.8)";default:return"rgba(255,176,0,0.7)"}}),$a=dr.div(Fa||(Fa=o(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.75rem;\n  margin-bottom: 1.5rem;\n  flex: 1;\n  min-height: 220px;\n  padding: 0.75rem;\n"]))),es=dr.div(Ba||(Ba=o(["\n  aspect-ratio: 1;\n  border: 2px dashed ",";\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  color: ",";\n  font-size: 1.2rem;\n  position: relative;\n  transition: all 0.3s ease;\n  cursor: ",";\n  backdrop-filter: blur(10px);\n  box-shadow: ",";\n\n  /* Indented effect for earned stamps */\n  ","\n\n  &:hover {\n    transform: ",";\n    box-shadow: ",";\n    border-color: ",";\n  }\n"])),e=>{const{hasStamp:t,themeKey:n}=e;return t?{solarShine:"#FFB000",echoGlass:"#6C6C6C",retroFrame:"#FAFAFA",nightScan:"#4C1C8C",frequencyPulse:"#7F3FBF"}[n]||"#7F3FBF":{solarShine:"rgba(255, 176, 0, 0.3)",echoGlass:"rgba(108, 108, 108, 0.3)",retroFrame:"rgba(250, 250, 250, 0.3)",nightScan:"rgba(76, 28, 140, 0.3)",frequencyPulse:"rgba(255, 176, 0, 0.25)"}[n]||"rgba(255, 176, 0, 0.25)"},e=>{const{hasStamp:t,themeKey:n}=e;if(!t)return"rgba(255, 255, 255, 0.03)";switch(n){case"solarShine":default:return"linear-gradient(135deg, #FFB000, #FF9F1C)";case"echoGlass":return"linear-gradient(135deg, #6C6C6C, #4A4A4A)";case"retroFrame":return"linear-gradient(135deg, #FAFAFA, #E0E0E0)";case"nightScan":return"linear-gradient(135deg, #4C1C8C, #2D1B69)"}},e=>e.hasStamp?"#000000":"rgba(255, 255, 255, 0.3)",e=>e.hasStamp?"pointer":"default",e=>{const{hasStamp:t,themeKey:n}=e;if(!t)return"inset 0 2px 4px rgba(0,0,0,0.1)";return"inset 0 2px 4px rgba(0,0,0,0.2), 0 1px 2px ".concat({solarShine:"rgba(255,176,0,0.2)",echoGlass:"rgba(108,108,108,0.2)",retroFrame:"rgba(250,250,250,0.2)",nightScan:"rgba(76,28,140,0.2)",frequencyPulse:"rgba(255,176,0,0.1)"}[n]||"rgba(255,176,0,0.1)")},e=>e.hasStamp&&"\n    transform: translateY(1px);\n    border-style: solid;\n    border-width: 1px;\n  ",e=>e.hasStamp?"translateY(0px) scale(1.02)":"none",e=>{const{hasStamp:t,themeKey:n}=e;if(!t)return"inset 0 2px 4px rgba(0,0,0,0.1)";return"inset 0 1px 2px rgba(0,0,0,0.1), 0 4px 8px ".concat({solarShine:"rgba(255,176,0,0.3)",echoGlass:"rgba(108,108,108,0.3)",retroFrame:"rgba(250,250,250,0.3)",nightScan:"rgba(76,28,140,0.3)",frequencyPulse:"rgba(255,176,0,0.2)"}[n]||"rgba(255,176,0,0.2)")},e=>{const{hasStamp:t,themeKey:n}=e;if(!t){return{solarShine:"rgba(255, 176, 0, 0.5)",echoGlass:"rgba(108, 108, 108, 0.5)",retroFrame:"rgba(250, 250, 250, 0.5)",nightScan:"rgba(76, 28, 140, 0.5)",frequencyPulse:"rgba(255, 176, 0, 0.4)"}[n]||"rgba(255, 176, 0, 0.4)"}return{solarShine:"#FFB000",echoGlass:"#6C6C6C",retroFrame:"#FAFAFA",nightScan:"#4C1C8C",frequencyPulse:"#7F3FBF"}[n]||"#7F3FBF"}),ts=(dr.div(Ua||(Ua=o(["\n  font-size: 1.4rem;\n  margin-bottom: 0.25rem;\n"]))),dr.div(za||(za=o(["\n  font-size: 0.65rem;\n  font-weight: 600;\n  text-align: center;\n  padding: 0 0.2rem;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),dr.div(Ha||(Ha=o(["\n  font-size: 0.5rem;\n  opacity: 0.8;\n  margin-top: 0.2rem;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),dr.div(Wa||(Wa=o(["\n  text-align: center;\n  padding: 0.75rem;\n  background: ",";\n  border-radius: 12px;\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"linear-gradient(135deg, #FFB000, #FF9F1C)";case"echoGlass":return"linear-gradient(135deg, #6C6C6C, #4A4A4A)";case"retroFrame":return"linear-gradient(135deg, #FAFAFA, #E0E0E0)";case"nightScan":return"linear-gradient(135deg, #4C1C8C, #2D1B69)";default:return"linear-gradient(135deg, #4C1C8C, #7F3FBF)"}},e=>{let{themeKey:t}=e;switch(t){case"solarShine":case"retroFrame":return"#000000";default:return"#FFFFFF"}},e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"#FFB000";case"echoGlass":return"#6C6C6C";case"retroFrame":return"#FAFAFA";default:return"#4C1C8C"}},e=>{let{themeKey:t}=e;return"0 4px 12px ".concat({solarShine:"rgba(255,176,0,0.4)",echoGlass:"rgba(108,108,108,0.4)",retroFrame:"rgba(250,250,250,0.4)",nightScan:"rgba(76,28,140,0.4)",frequencyPulse:"rgba(76, 28, 140, 0.3)"}[t]||"rgba(76, 28, 140, 0.3)")}),dr.div(Va||(Va=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 600;\n  font-size: 1rem;\n  color: inherit;\n"]))),dr.div(Ya||(Ya=o(["\n  margin-top: 1rem;\n  padding: 0.6rem 1.2rem;\n  background: rgba(0, 0, 0, 0.4);\n  color: ",";\n  border-radius: 25px;\n  font-size: 0.85rem;\n  font-family: 'Space Grotesk', sans-serif;\n  font-weight: 600;\n  backdrop-filter: blur(10px);\n  border: 1px solid ",";\n  display: inline-block;\n  text-align: center;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n"])),e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"#FFB000";case"echoGlass":return"#6C6C6C";case"retroFrame":return"#FAFAFA";case"nightScan":return"#4C1C8C";default:return"#7F3FBF"}},e=>{let{themeKey:t}=e;switch(t){case"solarShine":return"rgba(255,176,0,0.3)";case"echoGlass":return"rgba(108,108,108,0.3)";case"retroFrame":return"rgba(250,250,250,0.3)";case"nightScan":return"rgba(76,28,140,0.3)";default:return"rgba(127,63,191,0.3)"}})),ns=()=>{var e,n,r;$();const{user:i}=Ur(),{stamps:o,loading:a}=yi(),{equippedTheme:s}=ya(),[l,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{console.log("PassportScreen - Current equipped theme:",s)},[s]);const u={},d=Object.keys(u).length;return(0,pr.jsxs)(Ga,{children:[(0,pr.jsxs)(qa,{themeKey:s,themeGradient:null===(e=Tr[s])||void 0===e?void 0:e.gradient,children:[(0,pr.jsxs)(Xa,{themeKey:s,children:[(0,pr.jsx)(Za,{themeKey:s,children:"Fall 2025 - Digital Genesis"}),(0,pr.jsx)(Ka,{themeKey:s,children:"Find Your Wings"}),(0,pr.jsx)(Ja,{themeKey:s,children:(null===i||void 0===i||null===(n=i.user_metadata)||void 0===n?void 0:n.display_name)||(null===i||void 0===i||null===(r=i.email)||void 0===r?void 0:r.split("@")[0])||"Collector"}),(0,pr.jsxs)(Qa,{themeKey:s,children:[d,"/9"]})]}),(0,pr.jsx)($a,{children:[{id:"received_passport",name:"Welcome",icon:"\ud83c\udfab",description:"Joined Monarch",rarity:"Common"},{id:"morning_gm",name:"GM",icon:"\u2600\ufe0f",description:"Said GM",rarity:"Common"},{id:"first_item",name:"First Scan",icon:"\ud83d\udc55",description:"First Item",rarity:"Common"},{id:"qr_scanner",name:"Scanner",icon:"\ud83d\udcf1",description:"QR Expert",rarity:"Rare"},{id:"social_share",name:"Social",icon:"\ud83d\udce3",description:"Shared Story",rarity:"Rare"},{id:"style_icon",name:"Style Icon",icon:"\u2728",description:"Multi-Category",rarity:"Epic"},{id:"streak_master",name:"Streak",icon:"\ud83d\udd25",description:"7-Day Streak",rarity:"Epic"},{id:"quest_completed",name:"Quest",icon:"\ud83c\udfaf",description:"Quest Master",rarity:"Rare"},{id:"master_collector",name:"Master",icon:"\ud83d\udc51",description:"All Stamps",rarity:"Legendary"}].map(e=>{const t=!!u[e.id];return(0,pr.jsx)(es,{hasStamp:t,themeKey:s,onClick:()=>(e=>{const t=u[e.id];t&&c({emoji:e.icon,date:new Date(t.earned_at).toLocaleDateString(),season:"Fall 2025",rarity:e.rarity,name:e.name,description:e.description})})(e)},e.id)})}),(0,pr.jsxs)(ts,{themeKey:s,children:["Theme: ",(h=s,{frequencyPulse:"Frequency Pulse",solarShine:"Solar Shine",echoGlass:"Echo Glass",retroFrame:"Retro Frame",nightScan:"Night Scan"}[h]||"Frequency Pulse")]})]}),l&&(0,pr.jsx)(ka,{emoji:l.emoji,date:l.date,season:l.season,rarity:l.rarity,onClose:()=>{c(null)}})]});var h};var rs,is,os,as,ss,ls,cs,us,ds,hs,fs,ps,gs,ms,ys,ws,bs,_s,vs,Es,Ss,Cs,As,xs,Is;const Ts=dr.div(rs||(rs=o(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%);\n  padding: 0.5rem 0.5rem 6rem 0.5rem;\n  position: relative;\n  overflow-x: hidden;\n  \n  @media (min-width: 768px) {\n    padding: 1rem 1rem 6rem 1rem;\n  }\n  \n  &::before {\n    content: '';\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: radial-gradient(circle at 20% 80%, rgba(255, 176, 0, 0.1) 0%, transparent 50%),\n                radial-gradient(circle at 80% 20%, rgba(76, 28, 140, 0.1) 0%, transparent 50%);\n    pointer-events: none;\n    z-index: 0;\n  }\n"]))),Rs=dr.button(is||(is=o(["\n  background: rgba(255, 176, 0, 0.1);\n  border: 1px solid #FFB000;\n  color: #FFB000;\n  padding: 0.75rem 1.5rem;\n  border-radius: 12px;\n  cursor: pointer;\n  backdrop-filter: blur(10px);\n  margin-bottom: 1.5rem;\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  min-height: 44px;\n  touch-action: manipulation;\n\n  @media (min-width: 768px) {\n    margin-bottom: 2rem;\n    padding: 0.5rem 1rem;\n  }\n\n  &:hover, &:active {\n    background: rgba(255, 176, 0, 0.2);\n    transform: translateY(-1px);\n  }\n"]))),ks=dr.div(os||(os=o(["\n  max-width: 900px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n  padding: 0 0.5rem;\n  \n  @media (min-width: 768px) {\n    padding: 0;\n  }\n"]))),Ps=dr.h1(as||(as=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2rem;\n  font-weight: 700;\n  color: #FFFFFF;\n  text-align: center;\n  margin-bottom: 1.5rem;\n  text-shadow: 0 0 20px rgba(255, 176, 0, 0.3);\n  position: relative;\n  \n  @media (min-width: 768px) {\n    font-size: 2.5rem;\n    margin-bottom: 2rem;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -10px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 80px;\n    height: 3px;\n    background: linear-gradient(90deg, transparent, #FFB000, transparent);\n    border-radius: 2px;\n    \n    @media (min-width: 768px) {\n      width: 100px;\n    }\n  }\n"]))),Ns=dr.div(ss||(ss=o(["\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 2rem;\n  overflow-x: auto;\n  padding: 0.5rem 0;\n  justify-content: flex-start;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n  \n  @media (min-width: 768px) {\n    gap: 0.75rem;\n    margin-bottom: 2.5rem;\n    padding: 1rem 0;\n    justify-content: center;\n  }\n  \n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),Ds=dr.button(ls||(ls=o(["\n  background: ",";\n  border: 2px solid ",";\n  color: ",";\n  padding: 0.75rem 1.5rem;\n  border-radius: 20px;\n  cursor: ",";\n  backdrop-filter: blur(15px);\n  white-space: nowrap;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  font-weight: ",";\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  opacity: ",";\n  position: relative;\n  box-shadow: ",";\n  min-height: 44px;\n  touch-action: manipulation;\n\n  @media (min-width: 768px) {\n    padding: 1rem 2rem;\n    border-radius: 25px;\n    font-size: 1rem;\n  }\n\n  &:hover, &:active {\n    background: ",";\n    transform: ",";\n    box-shadow: ",";\n  }\n\n  ","\n"])),e=>e.active?"linear-gradient(135deg, rgba(255, 176, 0, 0.3), rgba(255, 176, 0, 0.1))":"rgba(255, 255, 255, 0.05)",e=>e.active?"#FFB000":"rgba(255, 255, 255, 0.2)",e=>e.active?"#FFFFFF":"rgba(255, 255, 255, 0.6)",e=>e.locked?"not-allowed":"pointer",e=>e.active?"700":"500",e=>e.locked?"0.4":"1",e=>e.active?"0 8px 25px rgba(255, 176, 0, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.2)",e=>!e.locked&&"linear-gradient(135deg, rgba(255, 176, 0, 0.2), rgba(255, 176, 0, 0.05))",e=>e.locked?"none":"translateY(-2px) scale(1.02)",e=>!e.locked&&"0 12px 30px rgba(255, 176, 0, 0.2)",e=>e.locked&&"\n    &::after {\n      content: '\ud83d\udd12';\n      position: absolute;\n      top: -8px;\n      right: -8px;\n      font-size: 1rem;\n      opacity: 0.8;\n      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n    }\n  "),Os=dr.div(cs||(cs=o(["\n  background: linear-gradient(135deg, rgba(30,30,40,0.95) 0%, rgba(76,28,140,0.15) 100%);\n  border-radius: 20px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n  box-shadow: \n    0 0 32px 0 rgba(255,176,0,0.25), \n    0 0 24px 0 rgba(255,176,0,0.15),\n    0 20px 40px rgba(0,0,0,0.4);\n  border: 2px solid #FFB000;\n  backdrop-filter: blur(25px);\n  position: relative;\n  overflow: hidden;\n  \n  @media (min-width: 768px) {\n    border-radius: 24px;\n    padding: 2.5rem;\n    margin-bottom: 1.5rem;\n  }\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background: linear-gradient(90deg, transparent, #FFB000, transparent);\n  }\n"]))),Ms=dr.div(us||(us=o(["\n  text-align: center;\n  margin-bottom: 2rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 2px solid rgba(255, 176, 0, 0.3);\n  position: relative;\n  \n  @media (min-width: 768px) {\n    margin-bottom: 3rem;\n    padding-bottom: 2rem;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -2px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 120px;\n    height: 2px;\n    background: linear-gradient(90deg, transparent, #FFB000, transparent);\n    \n    @media (min-width: 768px) {\n      width: 150px;\n    }\n  }\n"]))),Ls=dr.h2(ds||(ds=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: #FFFFFF;\n  margin: 0;\n"]))),js=dr.p(hs||(hs=o(["\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1.1rem;\n  margin: 0.5rem 0 0 0;\n  font-style: italic;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Fs=dr.p(fs||(fs=o(["\n  color: #FFB000;\n  font-weight: 600;\n  margin: 0.5rem 0 0 0;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Bs=dr.div(ps||(ps=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1.5rem;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, rgba(255, 176, 0, 0.1), rgba(76, 28, 140, 0.1));\n  border-radius: 16px;\n  border: 2px solid rgba(255, 176, 0, 0.3);\n  margin: 1.5rem 0;\n  box-shadow: 0 8px 25px rgba(255, 176, 0, 0.15);\n  \n  @media (min-width: 768px) {\n    margin: 2rem 0;\n  }\n"]))),Us=dr.div(gs||(gs=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.1rem;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 600;\n  text-align: center;\n"]))),zs=dr.div(ms||(ms=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Hs=dr.div(ys||(ys=o(["\n  margin-bottom: 1.5rem;\n  \n  @media (min-width: 768px) {\n    margin-bottom: 2rem;\n  }\n"]))),Ws=dr.h3(ws||(ws=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #FFFFFF;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Vs=dr.div(bs||(bs=o(["\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  \n  @media (min-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  }\n"]))),Ys=dr.div(_s||(_s=o(["\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));\n  border-radius: 12px;\n  padding: 1.5rem;\n  border-left: 4px solid #FFB000;\n  border: 1px solid rgba(255, 176, 0, 0.3);\n  backdrop-filter: blur(15px);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  \n  @media (min-width: 768px) {\n    border-radius: 16px;\n    padding: 2rem;\n  }\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 176, 0, 0.05), transparent);\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n  \n  &:hover, &:active {\n    transform: translateY(-3px);\n    box-shadow: 0 12px 30px rgba(255, 176, 0, 0.2);\n    \n    &::before {\n      opacity: 1;\n    }\n  }\n"]))),Gs=dr.h4(vs||(vs=o(["\n  font-weight: 600;\n  color: #FFFFFF;\n  margin: 0 0 0.5rem 0;\n  font-family: 'Outfit', sans-serif;\n"]))),qs=dr.ul(Es||(Es=o(["\n  margin: 0;\n  padding-left: 1.2rem;\n  color: rgba(255, 255, 255, 0.8);\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Xs=dr.li(Ss||(Ss=o(["\n  margin-bottom: 0.3rem;\n  line-height: 1.4;\n"]))),Qs=dr.div(Cs||(Cs=o(["\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n  \n  @media (min-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  }\n"]))),Zs=dr.div(As||(As=o(["\n  background: linear-gradient(135deg, #FFB000, #FF9F1C);\n  border-radius: 12px;\n  padding: 1.5rem;\n  color: #000000;\n  border: 2px solid #FFB000;\n  box-shadow: 0 8px 25px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  \n  @media (min-width: 768px) {\n    border-radius: 16px;\n    padding: 2rem;\n  }\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n  \n  &:hover, &:active {\n    transform: translateY(-4px) scale(1.02);\n    box-shadow: 0 15px 35px rgba(255, 176, 0, 0.4);\n    \n    &::before {\n      opacity: 1;\n    }\n  }\n"]))),Ks=dr.h4(xs||(xs=o(["\n  font-weight: 600;\n  margin: 0 0 0.5rem 0;\n  font-family: 'Outfit', sans-serif;\n  color: #000000;\n"]))),Js=dr.div(Is||(Is=o(["\n  font-size: 0.9rem;\n  opacity: 0.8;\n  font-family: 'Space Grotesk', sans-serif;\n  color: #000000;\n"]))),$s=()=>{const e=$(),[n,r]=(0,t.useState)("spring"),i={spring:{title:"Spring 2025",subtitle:"Digital Genesis",dates:"March - May 2025",emoji:"\ud83c\udf38",locked:!1,physicalDrops:[{title:"Genesis Collection (Week 1-2)",items:["Signature Hoodie (Rare) - 150 pieces","Basic Tee (Common) - 200 pieces","Cap (Common) - 100 pieces"]},{title:"Accessories Drop (Week 6)",items:["Phone Case (Rare) - 75 pieces","Sticker Pack (Common) - 500 sets","Tote Bag (Rare) - 100 pieces"]},{title:"Limited Collab (Week 10)",items:["Artist Collaboration Piece (Epic) - 50 pieces","Digital Art NFT (Legendary) - 25 pieces"]}],digitalDrops:["Welcome Passport Badge for app downloads","First digital wallpaper collection - 3 exclusive designs","Spring completion stamp for collecting 3+ items","Early Summer preview content"],communityEvents:["Virtual styling session on Instagram Stories","Community photo contest with prizes"],quests:[{title:"Digital Collector",description:"Scan 5 QR codes",reward:"75 WNGS"},{title:"Social Amplifier",description:"Share 3 posts with brand hashtag",reward:"50 WNGS"},{title:"Early Adopter",description:"Be in first 100 app downloads",reward:"100 WNGS"},{title:"Genesis Supporter",description:"Purchase any item from launch collection",reward:"150 WNGS"}]},summer:{title:"Summer 2025",subtitle:"Going Viral",dates:"June - August 2025",emoji:"\u2600\ufe0f",locked:!0,physicalDrops:[],digitalDrops:[],communityEvents:[],quests:[]},fall:{title:"Fall 2025",subtitle:"Metropolitan Metamorphosis",dates:"September - November 2025",emoji:"\ud83c\udf42",locked:!0,physicalDrops:[],digitalDrops:[],communityEvents:[],quests:[]},winter:{title:"Winter 2025",subtitle:"Crystalline Elegance",dates:"December 2025 - February 2026",emoji:"\u2744\ufe0f",locked:!0,physicalDrops:[],digitalDrops:[],communityEvents:[],quests:[]}},o=i[n];return(0,pr.jsxs)(Ts,{children:[(0,pr.jsx)(Rs,{onClick:()=>e(-1),children:"\u2190 Back"}),(0,pr.jsxs)(ks,{children:[(0,pr.jsx)(Ps,{children:"Season Roadmap"}),(0,pr.jsx)(Ns,{children:Object.entries(i).map(e=>{let[t,o]=e;return(0,pr.jsxs)(Ds,{active:n===t,locked:o.locked,onClick:()=>{var e;i[e=t].locked||r(e)},children:[o.emoji," ",o.title.split(" ")[0]]},t)})}),(0,pr.jsxs)(Os,{children:[(0,pr.jsxs)(Ms,{children:[(0,pr.jsxs)(Ls,{children:[o.emoji," ",o.title]}),(0,pr.jsxs)(js,{children:['"',o.subtitle,'"']}),(0,pr.jsx)(Fs,{children:o.dates})]}),(0,pr.jsx)(Bs,{children:(0,pr.jsxs)(zs,{children:[(0,pr.jsx)(Us,{children:"Season ends in:"}),(0,pr.jsx)(Pi,{targetDate:new Date("2025-09-07T12:00:00"),size:"1.5rem",showSeconds:!0})]})}),o.locked?(0,pr.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"rgba(255, 255, 255, 0.7)",fontFamily:"Space Grotesk, sans-serif",background:"linear-gradient(135deg, rgba(255, 176, 0, 0.05), rgba(76, 28, 140, 0.05))",borderRadius:"20px",border:"1px solid rgba(255, 176, 0, 0.2)",margin:"2rem 0"},children:[(0,pr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1.5rem",filter:"drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3))"},children:"\ud83d\udd12"}),(0,pr.jsx)("h3",{style:{marginBottom:"1rem",color:"#FFFFFF",fontSize:"1.5rem",fontWeight:"600"},children:"Season Locked"}),(0,pr.jsx)("p",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"This season will be unlocked when Spring 2025 ends."}),(0,pr.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 176, 0, 0.3)",marginTop:"1rem",marginBottom:"1rem"},children:[(0,pr.jsx)("div",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"0.5rem"},children:"Unlocks in:"}),(0,pr.jsx)(Pi,{targetDate:new Date("2025-09-07T12:00:00"),size:"1rem",showSeconds:!1})]}),(0,pr.jsx)("div",{style:{background:"rgba(255, 176, 0, 0.1)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 176, 0, 0.3)",marginTop:"1.5rem"},children:(0,pr.jsx)("p",{style:{fontSize:"0.9rem",opacity:.8,margin:0},children:"\ud83c\udfaf Complete Spring 2025 objectives to unlock early access!"})})]}):(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsxs)(Hs,{children:[(0,pr.jsx)(Ws,{children:"\ud83d\udecd\ufe0f Physical Drops"}),(0,pr.jsx)(Vs,{children:o.physicalDrops.map((e,t)=>(0,pr.jsxs)(Ys,{children:[(0,pr.jsx)(Gs,{children:e.title}),(0,pr.jsx)(qs,{children:e.items.map((e,t)=>(0,pr.jsx)(Xs,{children:e},t))})]},t))})]}),(0,pr.jsxs)(Hs,{children:[(0,pr.jsx)(Ws,{children:"\ud83d\udcbb Digital Experiences"}),(0,pr.jsx)(qs,{children:o.digitalDrops.map((e,t)=>(0,pr.jsx)(Xs,{children:e},t))})]}),(0,pr.jsxs)(Hs,{children:[(0,pr.jsx)(Ws,{children:"\ud83c\udf89 Community Events"}),(0,pr.jsx)(qs,{children:o.communityEvents.map((e,t)=>(0,pr.jsx)(Xs,{children:e},t))})]}),(0,pr.jsxs)(Hs,{children:[(0,pr.jsx)(Ws,{children:"\ud83c\udfaf Quest Objectives"}),(0,pr.jsx)(Qs,{children:o.quests.map((e,t)=>(0,pr.jsxs)(Zs,{children:[(0,pr.jsx)(Ks,{children:e.title}),(0,pr.jsx)("div",{style:{color:"#000000"},children:e.description}),(0,pr.jsxs)(Js,{children:["Reward: ",e.reward]})]},t))})]})]})]}),(0,pr.jsxs)("div",{style:{textAlign:"center",padding:"2rem 0",marginTop:"1rem"},children:[(0,pr.jsx)("div",{style:{width:"60px",height:"4px",background:"linear-gradient(90deg, transparent, rgba(255, 176, 0, 0.5), transparent)",borderRadius:"2px",margin:"0 auto 1rem auto"}}),(0,pr.jsx)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.5)",fontFamily:"Space Grotesk, sans-serif"},children:"End of Roadmap"})]})]})]})};var el;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(el||(el={}));var tl,nl,rl=new Map([[el.QR_CODE,"QR_CODE"],[el.AZTEC,"AZTEC"],[el.CODABAR,"CODABAR"],[el.CODE_39,"CODE_39"],[el.CODE_93,"CODE_93"],[el.CODE_128,"CODE_128"],[el.DATA_MATRIX,"DATA_MATRIX"],[el.MAXICODE,"MAXICODE"],[el.ITF,"ITF"],[el.EAN_13,"EAN_13"],[el.EAN_8,"EAN_8"],[el.PDF_417,"PDF_417"],[el.RSS_14,"RSS_14"],[el.RSS_EXPANDED,"RSS_EXPANDED"],[el.UPC_A,"UPC_A"],[el.UPC_E,"UPC_E"],[el.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function il(e){return Object.values(el).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(tl||(tl={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(nl||(nl={}));var ol,al=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[nl.SCAN_TYPE_CAMERA,nl.SCAN_TYPE_FILE],e}(),sl=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!rl.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,rl.get(t))},e}(),ll=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(ol||(ol={}));var cl=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:ol.UNKWOWN_ERROR}},e}(),ul=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function dl(e){return"undefined"===typeof e||null===e}var hl,fl=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),pl=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),gl=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),ml=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if(r.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e}(),yl=n(72),wl=function(){function e(e,t,n){if(this.formatMap=new Map([[el.QR_CODE,yl.BarcodeFormat.QR_CODE],[el.AZTEC,yl.BarcodeFormat.AZTEC],[el.CODABAR,yl.BarcodeFormat.CODABAR],[el.CODE_39,yl.BarcodeFormat.CODE_39],[el.CODE_93,yl.BarcodeFormat.CODE_93],[el.CODE_128,yl.BarcodeFormat.CODE_128],[el.DATA_MATRIX,yl.BarcodeFormat.DATA_MATRIX],[el.MAXICODE,yl.BarcodeFormat.MAXICODE],[el.ITF,yl.BarcodeFormat.ITF],[el.EAN_13,yl.BarcodeFormat.EAN_13],[el.EAN_8,yl.BarcodeFormat.EAN_8],[el.PDF_417,yl.BarcodeFormat.PDF_417],[el.RSS_14,yl.BarcodeFormat.RSS_14],[el.RSS_EXPANDED,yl.BarcodeFormat.RSS_EXPANDED],[el.UPC_A,yl.BarcodeFormat.UPC_A],[el.UPC_E,yl.BarcodeFormat.UPC_E],[el.UPC_EAN_EXTENSION,yl.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!yl)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(yl.DecodeHintType.POSSIBLE_FORMATS,r),i.set(yl.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(i){r(i)}})},e.prototype.decode=function(e){var t=new yl.MultiFormatReader(this.verbose,this.hints),n=new yl.HTMLCanvasElementLuminanceSource(e),r=new yl.BinaryBitmap(new yl.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:sl.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),bl=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},_l=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},vl=function(){function e(t,n,r){if(this.formatMap=new Map([[el.QR_CODE,"qr_code"],[el.AZTEC,"aztec"],[el.CODABAR,"codabar"],[el.CODE_39,"code_39"],[el.CODE_93,"code_93"],[el.CODE_128,"code_128"],[el.DATA_MATRIX,"data_matrix"],[el.ITF,"itf"],[el.EAN_13,"ean_13"],[el.EAN_8,"ean_8"],[el.PDF_417,"pdf417"],[el.UPC_A,"upc_a"],[el.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return bl(this,void 0,void 0,function(){var t,n;return _l(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:sl.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var o=i[r],a=o.boundingBox.width*o.boundingBox.height;a>n&&(n=a,t=o)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),El=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Sl=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Cl=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&vl.isSupported()?(this.primaryDecoder=new vl(e,n,r),this.secondaryDecoder=new wl(e,n,r)):this.primaryDecoder=new wl(e,n,r)}return e.prototype.decodeAsync=function(e){return El(this,void 0,void 0,function(){var t;return Sl(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return El(this,void 0,void 0,function(){var t,n;return Sl(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Al=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xl=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Il=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Tl=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),Rl=function(e){function t(t){return e.call(this,"zoom",t)||this}return Al(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return Al(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(Tl)),kl=function(e){function t(t){return e.call(this,"torch",t)||this}return Al(t,e),t}(Tl),Pl=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new Rl(this.track)},e.prototype.torchFeature=function(){return new kl(this.track)},e}(),Nl=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return xl(this,void 0,void 0,function(){var o,a;return Il(this,function(s){switch(s.label){case 0:return o=new e(t,n,i),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:s.sent(),s.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return xl(this,void 0,void 0,function(){return Il(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new Pl(this.getFirstTrackOrFail())},e}(),Dl=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return xl(this,void 0,void 0,function(){return Il(this,function(r){return[2,Nl.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return xl(this,void 0,void 0,function(){var n;return Il(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),Ol=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Ml=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Ll=function(){function e(){}return e.failIfNotSupported=function(){return Ol(this,void 0,void 0,function(){return Ml(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return Ol(this,void 0,void 0,function(){return Ml(this,function(t){return[2,Dl.create(e)]})})},e}(),jl=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Fl=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Bl=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=fl.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=fl.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return jl(this,void 0,void 0,function(){var e,t,n,r,i,o,a;return Fl(this,function(s){switch(s.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=s.sent(),r=[],i=0,o=n;i<o.length;i++)"videoinput"===(a=o[i]).kind&&r.push({id:a.deviceId,label:a.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(hl||(hl={}));var Ul,zl=function(){function e(){this.state=hl.NOT_STARTED,this.onGoingTransactionNewState=hl.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===hl.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=hl.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===hl.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=hl.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==hl.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case hl.UNKNOWN:throw"Transition from unknown is not allowed";case hl.NOT_STARTED:this.failIfNewStateIs(e,[hl.PAUSED]);case hl.SCANNING:case hl.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),Hl=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===hl.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==hl.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===hl.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===hl.PAUSED},e}(),Wl=function(){function e(){}return e.create=function(){return new Hl(new zl)},e}(),Vl=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vl(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(al),Gl=function(){function e(e,t){this.logger=t,this.fps=Yl.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Yl.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ml.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!dl(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),ql=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new ul(this.verbose),this.qrcode=new Cl(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Wl.create()}return e.prototype.start=function(e,t,n,r){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var a=Gl.create(t,this.logger);this.clearElement();var s=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=s,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:Yl.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(hl.SCANNING);return new Promise(function(t,r){var s=l?a.videoConstraints:u.createVideoConstraints(e);if(!s)return d.cancel(),void r("videoConstraints should be defined");var c={};l&&!a.aspectRatio||(c.aspectRatio=a.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,a),u.isScanning=!0,u.foreverScan(a,n,i)}};Ll.failIfNotSupported().then(function(e){e.create(s).then(function(e){return e.render(o.element,c,h).then(function(e){u.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),r(e)})}).catch(function(e){d.cancel(),r(fl.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),r(fl.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(hl.PAUSED),this.showPausedState(),(dl(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(hl.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(hl.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(Yl.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(dl(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,a=o.height,s=document.getElementById(n.elementId),l=s.clientWidth?s.clientWidth:Yl.DEFAULT_WIDTH,c=Math.max(s.clientHeight?s.clientHeight:a,Yl.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,a,l,c);if(t){var d=n.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",s.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(o,0,0,e,a,u.x,u.y,u.width,u.height)}var f=Yl.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(o.width,u.width),g=Math.max(o.height,u.height),m=p+2*f,y=g+2*f,w=n.createCanvasElement(m,y);s.appendChild(w);var b=w.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=m,b.canvas.height=y,b.drawImage(o,0,0,e,a,f,f,p,g);try{n.qrcode.decodeRobustlyAsync(w).then(function(e){r(ll.createFromQrcodeResult(e))}).catch(i)}catch(_){i("QR code parse error, error = ".concat(_))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Bl.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!ml.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[el.QR_CODE,el.AZTEC,el.CODABAR,el.CODE_39,el.CODE_93,el.CODE_128,el.DATA_MATRIX,el.MAXICODE,el.ITF,el.EAN_13,el.EAN_8,el.PDF_417,el.RSS_14,el.RSS_EXPANDED,el.UPC_A,el.UPC_E,el.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var o=i[r];il(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(dl(e))return!0;if(!dl(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(dl(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!dl(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var o,a=this.toQrdimensions(e,t,i),s=function(e){if(e<Yl.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Yl.MIN_QR_BOX_SIZE,"px.")};s(a.width),s(a.height),a.width=((o=a.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=e),o)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=dl(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=t,a={x:0,y:0,width:e,height:t},s=o?this.getShadedRegionBounds(e,t,i):a,l=this.createCanvasElement(s.width,s.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=s.width,c.canvas.height=s.height,this.element.append(l),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=s,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=fl.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,ll.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=fl.codeParseError(e);return t(r,cl.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,a=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*o,l=this.qrRegion.height*a,c=this.qrRegion.x*o,u=this.qrRegion.y*a;this.context.drawImage(i,c,u,s,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?d():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){d()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),d()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",o=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var s=Object.keys(e)[0];if(s!==t&&s!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(s!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(o(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(i in c))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,o=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Yl.BORDER_SHADER_MATCH_COLOR:Yl.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=dl(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-r.width)/2,a=(n-r.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Yl.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var s=40;this.insertShaderBorders(i,s,5,-5,null,0,!0),this.insertShaderBorders(i,s,5,-5,null,0,!1),this.insertShaderBorders(i,s,5,null,-5,0,!0),this.insertShaderBorders(i,s,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,o,a){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=Yl.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(t,"px"),s.style.height="".concat(n,"px"),null!==r&&(s.style.top="".concat(r,"px")),null!==i&&(s.style.bottom="".concat(i,"px")),a?s.style.left="".concat(o,"px"):s.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Xl="data:image/svg+xml;base64,",Ql=Xl+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Zl=Xl+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Kl=Xl+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Jl=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),$l=function(){function e(){this.data=Jl.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Jl.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),ec=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=gl.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=gl.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),tc=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Kl,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Kl,this.infoIcon.style.opacity="0.6")},e}(),nc=function(){function e(){var e=this;this.infoDiv=new ec,this.infoIcon=new tc(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),rc=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},ic=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},oc=function(){function e(){}return e.hasPermissions=function(){return rc(this,void 0,void 0,function(){var e,t,n,r;return ic(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),ac=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===nl.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===nl.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return al.DEFAULT_SUPPORTED_SCAN_TYPE;var t=al.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!al.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),sc=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),lc=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(sc.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),cc=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},uc=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},dc=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return cc(this,void 0,void 0,function(){var e,t;return uc(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?pl.torchOffButton():pl.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?pl.torchOnFailedMessage():pl.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),hc=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=lc.createElement("button",sc.TORCH_BUTTON_ID),this.torchController=new dc(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=pl.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return cc(n,void 0,void 0,function(){return uc(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(sc.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(sc.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(sc.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(sc.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new dc(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=pl.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var o=new e(n,i);return o.render(t,r),o},e}(),fc=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=lc.createElement("button",sc.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=lc.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],o=r.name;i.setImageNameToButton(o),n(r)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var a=!1,s=0;s<r.length;++s){var l=r.item(s);if(l){if(l.type.match(/image.*/)){a=!0;var c=l.name;i.setImageNameToButton(c),n(l),o.innerText=pl.dragAndDropMessage();break}}}a||(o.innerText=pl.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=pl.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=pl.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=pl.fileSelectionChooseImage()+" - "+pl.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),pc=function(){function e(e){this.selectElement=lc.createElement("select",sc.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=pl.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,a=this.cameras;o<a.length;o++){var s=a[o],l=s.id,c=null==s.label?l:s.label;c&&""!==c||(c=[pl.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),gc=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=lc.createElement("input",sc.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=pl.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=pl.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Ul||(Ul={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new ac(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ul(this.verbose),this.persistedDataManager=new $l,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(pl.lastMatch(t),Ul.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r,i,o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new ql(this.getScanRegionId(),(r=this.config,i=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:i}))},e.prototype.pause=function(e){(dl(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=al.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!al.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=al.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=al.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:al.SCAN_DEFAULT_FPS,rememberLastUsedCamera:al.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:al.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),ac.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new nc).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(pl.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};ql.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(pl.noCameraFound(),Ul.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,Ul.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=lc.createElement("button",this.getCameraPermissionButtonId());r.innerText=pl.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;ac.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?oc.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=ac.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=ac.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=fc.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";ac.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(pl.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,Ul.STATUS_WARNING),n.qrCodeErrorCallback(e,cl.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=gc.create(r,!1),o=pc.create(r,e),a=document.createElement("span"),s=lc.createElement("button",sc.CAMERA_START_BUTTON_ID);s.innerText=pl.scanButtonStartScanningText(),a.appendChild(s);var l,c=lc.createElement("button",sc.CAMERA_STOP_BUTTON_ID);c.innerText=pl.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,a.appendChild(c);r.appendChild(a);var u=function(e){e||(s.style.display="none"),s.innerText=pl.scanButtonStartScanningText(),s.style.opacity="1",s.disabled=!1,e&&(s.style.display="inline-block")};if(s.addEventListener("click",function(e){s.innerText=pl.scanButtonScanningStarting(),o.disable(),s.disabled=!0,s.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r,d=o.getValue();n.persistedDataManager.setLastUsedCameraId(d),n.html5Qrcode.start(d,(r=n.config,{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=hc.create(a,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,Ul.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,o,a,s=1;t.config.defaultZoomValueIfSupported&&(s=t.config.defaultZoomValueIfSupported),r=s,o=n.min(),s=r>(a=n.max())?a:r<o?o:r,i.setValues(n.min(),n.max(),s,n.step()),i.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),o.enable(),u(!0),n.setHeaderMessage(e,Ul.STATUS_WARNING)})}),o.hasSingleItem()&&s.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),o.enable(),s.disabled=!1,c.style.display="none",s.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,Ul.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var d=n.persistedDataManager.getLastUsedCameraId();o.hasValue(d)?(o.setValue(d),s.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=pl.textIfCameraScanSelected(),n=pl.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var o=lc.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=ac.isCameraScanType(this.currentScanType)?t:n,o.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,ac.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=n,e.currentScanType=nl.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=nl.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),i.appendChild(o),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&oc.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Ul.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Ul.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Ul.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Ul.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Ql,this.cameraScanImage.alt=pl.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Zl,this.fileScanImage.alt=pl.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return sc.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return sc.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();const mc=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),yc=()=>{const{user:e}=Ur(),[n,r]=(0,t.useState)(null),[i,o]=(0,t.useState)({totalReferrals:0,pendingReferrals:0,completedReferrals:0,totalWingsEarned:0}),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),h=(0,t.useRef)(!1),f=(0,t.useRef)(!1),p=(0,t.useRef)(null),g=(0,t.useRef)(null),m="2025-09-07",y="2025-09-14",w=2,b=()=>{const e=new Date,t=new Date(m),n=new Date(y);return e>=t&&e<=n},_=(0,t.useCallback)(e=>{var t,n;if(!e)return null;const r=((null===(t=e.user_metadata)||void 0===t?void 0:t.username)||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"user").toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,6),i=Math.random().toString(36).substring(2,5);return"".concat(r).concat(i).toUpperCase()},[]),v=(0,t.useCallback)(async()=>{if(!e)return console.log("\u274c ensureReferralCode: No user provided"),null;if(n)return console.log("\u2705 Referral code already exists:",n),n;if(h.current)return console.log("\ud83d\udd04 ensureReferralCode: Already initialized, skipping"),n;if(f.current)return console.log("\ud83d\udd04 ensureReferralCode: Already processing, skipping"),n;f.current=!0,h.current=!0,console.log("\ud83d\udd27 ensureReferralCode: Starting for user:",e.id);const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Referral code generation timeout")),1e4));try{0,console.log("\ud83d\udd0d Checking for existing referral code...");const i=mc.from("referral_codes").select("referral_code").eq("user_id",e.id).eq("is_active",!0).single(),{data:o,error:a}=await Promise.race([i,t]);if(console.log("\ud83d\udcca Existing code query result:",{existingCode:o,fetchError:a}),o)return console.log("\u2705 Found existing referral code:",o.referral_code),g.current&&clearTimeout(g.current),n!==o.referral_code&&r(o.referral_code),o.referral_code;console.log("\ud83c\udd95 No existing code found, generating new one...");let s,l=0,c=!1;for(;!c&&l<5;){s=_(e),console.log("\ud83c\udfb2 Attempt ".concat(l+1,": Generated code ").concat(s));const i=mc.from("referral_codes").insert([{user_id:e.id,referral_code:s}]).select("referral_code").single(),{data:o,error:a}=await Promise.race([i,t]);if(console.log("\ud83d\udcbe Insert result:",{createdCode:o,createError:a}),!a)return console.log("\u2705 Successfully created referral code:",o.referral_code),g.current&&clearTimeout(g.current),n!==o.referral_code&&r(o.referral_code),o.referral_code;if("23505"!==a.code)throw a;console.log("\u26a0\ufe0f Code collision, trying again..."),l++}throw new Error("Failed to generate unique referral code")}catch(u){if(console.error("\u274c Error ensuring referral code:",u),d(u.message),u.message.includes("timeout")){console.log("\u23f0 Timeout occurred, generating fallback code");const t=_(e);return r(t),t}return null}finally{f.current=!1}},[e,_]),E=(0,t.useCallback)(async()=>{if(e)try{c(!0);const{data:t,error:n}=await mc.from("referrals").select("status, created_at, referrer_reward_given, referrer_wings_earned").eq("referrer_id",e.id);if(n)throw n;const{data:r,error:i}=await mc.from("user_profiles").select("total_referrals, referral_wings_earned").eq("id",e.id).single();if(i&&"PGRST116"!==i.code)throw i;const a={totalReferrals:(null===t||void 0===t?void 0:t.length)||0,pendingReferrals:(null===t||void 0===t?void 0:t.filter(e=>"pending"===e.status).length)||0,completedReferrals:(null===t||void 0===t?void 0:t.filter(e=>"completed"===e.status).length)||0,totalWingsEarned:(null===r||void 0===r?void 0:r.referral_wings_earned)||0};o(a)}catch(u){console.error("Error loading referral stats:",u),d(u.message)}finally{c(!1)}},[e]),S=(0,t.useCallback)(async()=>{if(e)try{const{data:t,error:n}=await mc.from("referrals").select("\n          *,\n          referee:referee_id (\n            email,\n            user_metadata\n          )\n        ").eq("referrer_id",e.id).order("created_at",{ascending:!1});if(n)throw n;const r=(null===t||void 0===t?void 0:t.map(e=>{var t,n,r,i,o;return{id:e.id,refereeName:(null===(t=e.referee)||void 0===t||null===(n=t.user_metadata)||void 0===n?void 0:n.username)||(null===(r=e.referee)||void 0===r||null===(i=r.email)||void 0===i?void 0:i.split("@")[0])||"User",refereeEmail:null===(o=e.referee)||void 0===o?void 0:o.email,status:e.status,createdAt:e.created_at,completedAt:e.completed_at,rewardGiven:e.referrer_reward_given,wingsEarned:e.referrer_wings_earned||0}}))||[];s(r)}catch(u){console.error("Error loading referral history:",u),d(u.message)}},[e]),C=(0,t.useCallback)(async(e,t)=>{if(e&&t)try{console.log("\ud83d\udd04 Processing referral signup:",{referralCode:e,newUserId:t});const{data:n,error:r}=await mc.from("referral_codes").select("user_id").eq("referral_code",e.toUpperCase()).eq("is_active",!0).single();if(r||!n)return console.warn("Invalid referral code:",e),{success:!1,error:"Invalid referral code"};if(n.user_id===t)return console.warn("Self-referral attempt blocked"),{success:!1,error:"Cannot refer yourself"};let i=25;b()&&(i*=w);const{data:o,error:a}=await mc.from("referrals").insert([{referrer_id:n.user_id,referee_id:t,referral_code:e.toUpperCase(),status:"pending",referee_wings_earned:i}]).select().single();if(a)throw a;const{error:s}=await mc.rpc("add_wings_to_user",{user_id_param:t,wings_amount:i,activity_type_param:"referral_bonus",description_param:"Welcome bonus for joining via referral code: ".concat(e).concat(b()?" (Birthday Launch 2x Bonus!)":"")});return s&&console.warn("Failed to award welcome bonus:",s),console.log("\u2705 Referral signup processed successfully"),{success:!0,data:o,bonusAmount:i}}catch(u){return console.error("Error processing referral signup:",u),{success:!1,error:u.message}}},[]),A=(0,t.useCallback)(async e=>{try{console.log("\ud83d\udd04 Attempting to complete referral for referee:",e);const{data:t,error:n}=await mc.from("referrals").select("*").eq("referee_id",e).eq("status","pending").single();if(n||!t)return console.log("No pending referral found for referee:",e),{success:!1,message:"No pending referral found"};let r=50,i=25;b()&&(r*=w,i*=w);const{error:o}=await mc.from("referrals").update({status:"completed",completed_at:(new Date).toISOString(),referrer_reward_given:!0,referee_reward_given:!0,referrer_wings_earned:r,referee_wings_earned:(t.referee_wings_earned||0)+i}).eq("id",t.id);if(o)throw o;const a=b()?" (Birthday Launch 2x Bonus!)":"";return await Promise.all([mc.rpc("add_wings_to_user",{user_id_param:t.referrer_id,wings_amount:r,activity_type_param:"referral",description_param:"Referral completed - friend completed first scan".concat(a)}),mc.rpc("add_wings_to_user",{user_id_param:e,wings_amount:i,activity_type_param:"referral_bonus",description_param:"First scan bonus - referred user reward".concat(a)})]),await mc.from("user_profiles").update({total_referrals:mc.raw("COALESCE(total_referrals, 0) + 1")}).eq("id",t.referrer_id),console.log("\u2705 Referral completed successfully"),{success:!0,referrerReward:r,refereeReward:i}}catch(u){return console.error("Error completing referral:",u),{success:!1,error:u.message}}},[]),x=(0,t.useCallback)(e=>{if(!e)return"";const t=window.location.origin;return"".concat(t,"/join/").concat(e)},[]),I=(0,t.useCallback)(async e=>{const t=x(e);let n="Join me on Monarch Passport! \ud83e\udd8b\n\nEarn exclusive fashion rewards by scanning QR codes. Use my code: ".concat(e);if(b()&&(n="\ud83c\udf82 IT'S MONARCH PASSPORT'S BIRTHDAY WEEK! \ud83e\udd8b\n\nJoin the celebration with DOUBLE REFERRAL REWARDS!\n\n\u2728 50 WINGS for joining (normally 25)\n\ud83c\udf81 50 more for first scan (normally 25)\n\ud83d\udc51 I get 100 WINGS when you scan (normally 50)\n\nUse code: ".concat(e,"\n\nBirthday bonuses end Sept 14th!")),navigator.share)try{return await navigator.share({title:"Join Monarch Passport",text:n,url:t}),{success:!0}}catch(u){"AbortError"!==u.name&&console.log("Share failed:",u)}try{return await navigator.clipboard.writeText("".concat(n,"\n\n").concat(t)),{success:!0,copied:!0}}catch(u){return console.error("Failed to copy to clipboard:",u),{success:!1,link:t}}},[x]);return(0,t.useEffect)(()=>{console.log("\ud83d\udd27 useReferrals useEffect triggered, user:",null===e||void 0===e?void 0:e.id),(null===e||void 0===e?void 0:e.id)!==p.current?(p.current=null===e||void 0===e?void 0:e.id,e?(console.log("\u2705 User found, calling ensureReferralCode..."),v(),E(),S()):(console.log("\u274c No user found, resetting referral state"),r(null),o({totalReferrals:0,pendingReferrals:0,completedReferrals:0,totalWingsEarned:0}),s([]),c(!1),h.current=!1,f.current=!1)):console.log("\ud83d\udd04 Same user, skipping initialization")},[e]),(0,t.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]),{referralCode:n,referralStats:i,referralHistory:a,loading:l,error:u,processReferralSignup:C,completeReferral:A,generateReferralLink:x,shareReferral:I,isBirthdayLaunch:b(),refreshData:()=>{E(),S()}}};var wc=n(345);const bc=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),_c=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),vc=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),{activeLimitedEditions:d,userClaims:h,claimLimitedEdition:f,hasUserClaimed:p,getUserMintNumber:g,loading:m,error:y}=(()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)([]),[o,a]=(0,t.useState)(!0),[s,l]=(0,t.useState)(null),c=(0,t.useCallback)(async()=>{try{a(!0),l(null);const{data:e,error:t}=await bc.rpc("get_active_limited_editions");if(t)throw t;n(e||[])}catch(e){console.error("Error fetching active limited editions:",e),l(e.message)}finally{a(!1)}},[]),u=(0,t.useCallback)(async()=>{try{const{data:{user:e}}=await bc.auth.getUser();if(!e)return;const{data:t,error:n}=await bc.rpc("get_user_limited_editions",{p_user_id:e.id});if(n)throw n;i(t||[])}catch(e){console.error("Error fetching user claims:",e),l(e.message)}},[]),d=(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{l(null);const{data:{user:n}}=await bc.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:r,error:i}=await bc.rpc("claim_limited_edition_item",{p_reward_id:e,p_user_id:n.id,p_qr_scan_location:t});if(i)throw i;if(r&&r.length>0){const e=r[0];return e.success?(await Promise.all([c(),u()]),{success:!0,mintNumber:e.mint_number,claimedAt:e.claimed_at,message:e.message}):{success:!1,message:e.message}}return{success:!1,message:"Unknown error occurred"}}catch(n){return console.error("Error claiming limited edition:",n),l(n.message),{success:!1,message:n.message}}},[c,u]),h=(0,t.useCallback)(async e=>{try{const{data:t,error:n}=await bc.rpc("get_limited_edition_status",{p_reward_id:e});if(n)throw n;return t&&t.length>0?t[0]:null}catch(t){return console.error("Error getting limited edition status:",t),l(t.message),null}},[]),f=(0,t.useCallback)(e=>r.some(t=>t.reward_id===e),[r]),p=(0,t.useCallback)(e=>{const t=r.find(t=>t.reward_id===e);return t?t.mint_number:null},[r]);(0,t.useEffect)(()=>{(async()=>{await Promise.all([c(),u()])})()},[c,u]);const g=(0,t.useCallback)(async()=>{await Promise.all([c(),u()])},[c,u]);return{activeLimitedEditions:e,userClaims:r,loading:o,error:s,claimLimitedEdition:d,getLimitedEditionStatus:h,refresh:g,hasUserClaimed:f,getUserMintNumber:p,totalUserClaims:r.length,availableLimitedEditions:e.filter(e=>e.available_count>0)}})(),w=(0,t.useCallback)(async()=>{try{i(!0),a(null);const e=wc.dt.getActiveRewards(),t=[];for(const n of e){let e=null;if(n.limitedEdition){const t=d.find(e=>e.reward_id===n.rewardId);t&&(e={totalSupply:t.total_supply,claimedCount:t.claimed_count,availableCount:t.available_count,claimPercentage:t.claim_percentage,daysRemaining:t.days_remaining,isActive:!0})}t.push((0,wr.A)((0,wr.A)({},n),{},{limitedEditionStatus:e,isLimitedEdition:!!n.limitedEdition,userHasClaimed:p(n.rewardId),userMintNumber:g(n.rewardId),totalWingsValue:wc.dt.getTotalWingsValue(n.rewardId),shopifyUrl:wc.dt.getShopifyUrl(n.rewardId),primaryImage:wc.dt.getPrimaryImage(n.rewardId)}))}n(t)}catch(e){console.error("Error loading rewards:",e),a(e.message)}finally{i(!1)}},[d,p,g]),b=(0,t.useCallback)(async()=>{try{u(!0);const{data:{user:e}}=await _c.auth.getUser();if(!e)return void l([]);const{data:t,error:n}=await _c.from("user_closet").select("*").eq("user_id",e.id).order("earned_date",{ascending:!1});if(n)throw n;const r=(t||[]).map(e=>{const t=wc.dt.getRewardById(e.reward_id);return(0,wr.A)((0,wr.A)({},e),{},{staticData:t,isLimitedEdition:!(null===t||void 0===t||!t.limitedEdition),totalWingsValue:t?wc.dt.getTotalWingsValue(t.rewardId):e.wings_earned,shopifyUrl:t?wc.dt.getShopifyUrl(t.rewardId):null,primaryImage:t?wc.dt.getPrimaryImage(t.rewardId):null})});l(r)}catch(e){console.error("Error loading user rewards:",e),a(e.message)}finally{u(!1)}},[]),_=(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{a(null);const n=new Promise((e,t)=>setTimeout(()=>t(new Error("Claim operation timeout")),1e4)),r=(async()=>{const n=wc.dt.getRewardById(e);if(!n)throw new Error("Reward not found: ".concat(e));const{data:{user:r}}=await _c.auth.getUser();if(!r)throw new Error("User not authenticated");if(n.limitedEdition)return await f(e,t);const{data:i,error:o}=await _c.from("user_closet").insert({user_id:r.id,reward_id:e,name:n.name,rarity:n.rarity,category:n.category,mint_number:1,earned_date:(new Date).toISOString(),earned_via:"qr_scan",wings_earned:n.wingsValue,metadata:{qr_scan_location:t,static_reward_id:e}}).select().single();if(o){if("23505"===o.code)throw new Error("You have already claimed this reward");throw o}await _c.from("user_profiles").update({wings_balance:_c.raw("wings_balance + ?",[n.wingsValue]),updated_at:(new Date).toISOString()}).eq("id",r.id);try{console.log("\ud83d\udd04 Refreshing user rewards...");const e=new Promise((e,t)=>setTimeout(()=>t(new Error("User rewards refresh timeout")),3e3));await Promise.race([b(),e]),console.log("\u2705 User rewards refreshed successfully")}catch(a){console.warn("\u26a0\ufe0f Failed to refresh user rewards (non-critical):",a)}return{success:!0,message:"Successfully claimed ".concat(n.name,"!"),reward:i}})();return await Promise.race([r,n])}catch(n){return console.error("Error claiming reward:",n),a(n.message),{success:!1,message:n.message}}},[f,b]),v=(0,t.useCallback)(t=>e.filter(e=>e.category===t),[e]),E=(0,t.useCallback)(t=>e.filter(e=>e.rarity===t),[e]),S=(0,t.useCallback)(()=>e.filter(e=>e.isLimitedEdition),[e]),C=(0,t.useCallback)(()=>e.filter(e=>!e.isLimitedEdition),[e]),A=(0,t.useCallback)(()=>s.filter(e=>e.isLimitedEdition),[s]),x=(0,t.useCallback)(()=>s.filter(e=>!e.isLimitedEdition),[s]),I=(0,t.useCallback)(t=>{const n=e.find(e=>e.rewardId===t);return!!n&&(!n.userHasClaimed&&(!n.isLimitedEdition||!n.limitedEditionStatus||n.limitedEditionStatus.availableCount>0))},[e]),T=(0,t.useCallback)(()=>{const t=e.length,n=S().length,r=C().length,i=s.length,o=A().length,a=x().length;return{totalRewards:t,limitedEditions:n,regularRewards:r,totalWingsValue:e.reduce((e,t)=>e+t.totalWingsValue,0),userTotalRewards:i,userLimitedEditions:o,userRegularRewards:a,userTotalWings:s.reduce((e,t)=>e+(t.totalWingsValue||0),0),claimPercentage:t>0?i/t*100:0}},[e,s,S,C,A,x]);return(0,t.useEffect)(()=>{w()},[w]),(0,t.useEffect)(()=>{b()},[b]),{rewards:e,userRewards:s,loading:r||m,userLoading:c,error:o||y,claimReward:_,refresh:()=>{w(),b()},getRewardsByCategory:v,getRewardsByRarity:E,getLimitedEditionRewards:S,getRegularRewards:C,getUserLimitedEditions:A,getUserRegularRewards:x,canUserClaim:I,getRewardStats:T,getRewardById:wc.dt.getRewardById,hasUserClaimed:p,getUserMintNumber:g,totalRewards:e.length,userTotalRewards:s.length,stats:T()}};var Ec,Sc,Cc,Ac,xc,Ic,Tc,Rc,kc,Pc,Nc,Dc,Oc,Mc,Lc,jc,Fc,Bc,Uc,zc,Hc,Wc,Vc,Yc,Gc,qc,Xc;const Qc=fr(Ec||(Ec=o(["\n  0% { \n    opacity: 0; \n    transform: scale(0.3) rotate(-15deg); \n    filter: blur(10px);\n  }\n  50% { \n    opacity: 0.8; \n    transform: scale(1.2) rotate(5deg); \n    filter: blur(2px);\n  }\n  100% { \n    opacity: 1; \n    transform: scale(1) rotate(0deg); \n    filter: blur(0px);\n  }\n"]))),Zc=fr(Sc||(Sc=o(["\n  0%, 100% { \n    box-shadow: 0 0 20px rgba(255, 176, 0, 0.6);\n    transform: scale(1);\n  }\n  50% { \n    box-shadow: 0 0 40px rgba(255, 176, 0, 0.9);\n    transform: scale(1.05);\n  }\n"]))),Kc=fr(Cc||(Cc=o(["\n  0%, 100% { \n    opacity: 0.8;\n    transform: scale(1);\n  }\n  50% { \n    opacity: 1;\n    transform: scale(1.1);\n  }\n"]))),Jc=fr(Ac||(Ac=o(["\n  0%, 100% { \n    opacity: 0;\n    transform: scale(0) rotate(0deg);\n  }\n  50% { \n    opacity: 1;\n    transform: scale(1) rotate(180deg);\n  }\n"]))),$c=fr(xc||(xc=o(["\n  0%, 100% { \n    text-shadow: 0 0 10px rgba(255, 176, 0, 0.5);\n  }\n  50% { \n    text-shadow: 0 0 20px rgba(255, 176, 0, 0.8);\n  }\n"]))),eu=dr.div(Ic||(Ic=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.9);\n  backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n"]))),tu=dr(Gr)(Tc||(Tc=o(["\n  padding: 2rem;\n  text-align: center;\n  animation: "," 0.8s ease-out;\n  max-width: 90vw;\n  width: 480px;\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 4px;\n    background: ",";\n    background: linear-gradient(90deg, \n      "," 0%, \n      ","80 50%, \n      "," 100%\n    );\n  }\n\n  /* Sparkle effects */\n  &::after {\n    content: '\u2728';\n    position: absolute;\n    top: 10%;\n    right: 10%;\n    font-size: 1.5rem;\n    animation: "," 3s ease-in-out infinite;\n    animation-delay: 0.5s;\n  }\n"])),Qc,e=>e.exclusivityColor||"#FFB000",e=>e.exclusivityColor||"#FFB000",e=>e.exclusivityColor||"#FFB000",e=>e.exclusivityColor||"#FFB000",Jc),nu=dr.div(Rc||(Rc=o(["\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  background: ",";\n  color: #000;\n  padding: 0.5rem 1rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  animation: "," 2s ease-in-out infinite;\n  box-shadow: 0 4px 15px rgba(255, 176, 0, 0.3);\n  z-index: 2;\n"])),e=>e.color||"#FFB000",Kc),ru=dr.div(kc||(kc=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 1.5rem 0;\n  gap: 1rem;\n  position: relative;\n"]))),iu=dr.div(Pc||(Pc=o(["\n  background: linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%);\n  color: #000;\n  padding: 0.75rem 1.5rem;\n  border-radius: 25px;\n  font-size: 1.2rem;\n  font-weight: 700;\n  animation: "," 3s ease-in-out infinite;\n  position: relative;\n  \n  &::before {\n    content: 'MINT #';\n    position: absolute;\n    top: -0.5rem;\n    left: 50%;\n    transform: translateX(-50%);\n    font-size: 0.7rem;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.7);\n  }\n\n  &::after {\n    content: 'OF ","';\n    position: absolute;\n    bottom: -0.5rem;\n    left: 50%;\n    transform: translateX(-50%);\n    font-size: 0.6rem;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.7);\n  }\n"])),Zc,e=>e.totalSupply||"100"),ou=dr.div(Nc||(Nc=o(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n  background: rgba(255, 176, 0, 0.1);\n  padding: 1.5rem;\n  border-radius: 12px;\n  margin: 1.5rem 0;\n  border: 1px solid rgba(255, 176, 0, 0.2);\n  position: relative;\n"]))),au=dr.div(Dc||(Dc=o(["\n  text-align: center;\n  \n  .label {\n    font-size: 0.8rem;\n    color: ",";\n    margin-bottom: 0.5rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n  }\n  \n  .value {\n    font-size: 1.3rem;\n    font-weight: 700;\n    color: ",";\n    animation: "," 2s ease-in-out infinite;\n  }\n\n  .subtitle {\n    font-size: 0.7rem;\n    color: ",";\n    margin-top: 0.25rem;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.primary},e=>e.isHighlighted?$c:"none",e=>{let{theme:t}=e;return t.colors.text.secondary}),su=dr.div(Oc||(Oc=o(["\n  width: 140px;\n  height: 140px;\n  margin: 0 auto 1.5rem;\n  border-radius: 50%;\n  background: ",";\n  background-size: cover;\n  background-position: center;\n  border: 4px solid ",";\n  box-shadow: 0 8px 25px rgba(255, 176, 0, 0.3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3rem;\n  position: relative;\n  \n  ","\n\n  /* Rarity ring effect */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -8px;\n    left: -8px;\n    right: -8px;\n    bottom: -8px;\n    border-radius: 50%;\n    border: 2px solid ",";\n    opacity: 0.6;\n    animation: "," 3s ease-in-out infinite;\n  }\n"])),e=>e.imageUrl?"url(".concat(e.imageUrl,")"):"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)",e=>e.exclusivityColor||"#FFB000",e=>!e.imageUrl&&"\n    &::after {\n      content: '\ud83e\udd8b';\n      font-size: 3rem;\n    }\n  ",e=>e.exclusivityColor||"#FFB000",Kc),lu=dr.h2(Mc||(Mc=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.8rem;\n  margin-bottom: 0.5rem;\n  font-weight: 700;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),cu=dr.p(Lc||(Lc=o(["\n  color: ",";\n  font-size: 1rem;\n  line-height: 1.5;\n  margin-bottom: 1.5rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),uu=dr.div(jc||(jc=o(["\n  font-size: 1.6rem;\n  color: ",";\n  font-weight: 700;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  animation: "," 2s ease-in-out infinite;\n  \n  &::before {\n    content: '\ud83e\udd8b';\n    font-size: 1.4rem;\n  }\n\n  .bonus {\n    font-size: 0.9rem;\n    color: ",";\n    margin-left: 0.5rem;\n    font-weight: 400;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},$c,e=>{let{theme:t}=e;return t.colors.text.secondary}),du=dr.div(Fc||(Fc=o(["\n  background: linear-gradient(135deg, rgba(255, 176, 0, 0.1) 0%, rgba(255, 159, 28, 0.1) 100%);\n  border: 1px solid rgba(255, 176, 0, 0.3);\n  border-radius: 12px;\n  padding: 1rem;\n  margin: 1.5rem 0;\n  text-align: center;\n"]))),hu=dr.h3(Bc||(Bc=o(["\n  font-size: 1rem;\n  color: ",";\n  margin-bottom: 0.5rem;\n  font-weight: 600;\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),fu=dr.p(Uc||(Uc=o(["\n  font-size: 0.9rem;\n  color: ",";\n  line-height: 1.4;\n  margin: 0;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),pu=dr.div(zc||(zc=o(["\n  background: rgba(127, 63, 191, 0.1);\n  border: 1px solid rgba(127, 63, 191, 0.3);\n  border-radius: 12px;\n  padding: 1rem;\n  margin: 1.5rem 0;\n  text-align: center;\n"]))),gu=dr.h3(Hc||(Hc=o(["\n  font-size: 1rem;\n  color: #7F3FBF;\n  margin-bottom: 0.5rem;\n  font-weight: 600;\n"]))),mu=dr.p(Wc||(Wc=o(["\n  font-size: 0.9rem;\n  color: ",";\n  line-height: 1.4;\n  margin-bottom: 1rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),yu=dr.button(Vc||(Vc=o(["\n  background: linear-gradient(135deg, #7F3FBF 0%, #5B21B6 100%);\n  border: none;\n  color: white;\n  padding: 0.75rem 1.5rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  margin: 0 0.5rem;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 15px rgba(127, 63, 191, 0.4);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n"]))),wu=dr.div(Yc||(Yc=o(["\n  font-size: 0.9rem;\n  color: ",";\n  margin-bottom: 1.5rem;\n  font-style: italic;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),bu=dr.div(Gc||(Gc=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 2rem;\n"]))),_u=dr(Zr)(qc||(qc=o(["\n  background: linear-gradient(135deg, #7F3FBF 0%, #5B21B6 100%);\n  border: none;\n  color: white;\n  padding: 1rem 2rem;\n  font-size: 1rem;\n  font-weight: 600;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(127, 63, 191, 0.4);\n  }\n"]))),vu=dr.button(Xc||(Xc=o(["\n  background: transparent;\n  border: 2px solid ",";\n  color: ",";\n  padding: 0.75rem 1.5rem;\n  font-size: 1rem;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    border-color: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.colors.text.primary}),Eu=e=>{var n;let{reward:r,claimResult:i,onClose:o,onShowInCloset:a}=e;const[s,l]=(0,t.useState)(!1);if(!r)return null;const{name:c,description:u,rarity:d,category:h,limitedEdition:f,images:p,shopifyPrice:g}=r,{mintNumber:m,claimedAt:y,totalWingsValue:w}=i||{},{totalSupply:b,claimedCount:_,availableCount:v,claimPercentage:E}=(null===i||void 0===i?void 0:i.availability)||{},S=null===f||void 0===f?void 0:f.exclusivityLevel,C="mythic"===S?"#10B981":"legendary"===S?"#7F3FBF":"#FFB000",A=(null===p||void 0===p||null===(n=p[0])||void 0===n?void 0:n.src)||null,x=(null===f||void 0===f||f.baseWings,(null===f||void 0===f?void 0:f.bonusWings)||0),I=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,pr.jsx)(eu,{onClick:o,role:"dialog","aria-modal":"true","aria-labelledby":"reward-title",children:(0,pr.jsxs)(tu,{onClick:e=>e.stopPropagation(),exclusivityColor:C,children:[(0,pr.jsx)(nu,{color:C,"aria-label":"".concat(S," rarity level"),children:(null===S||void 0===S?void 0:S.replace("_"," ").toUpperCase())||"LIMITED"}),(0,pr.jsx)(su,{imageUrl:A,exclusivityColor:C,"aria-label":"".concat(c," product image")}),m&&(0,pr.jsx)(ru,{children:(0,pr.jsx)(iu,{totalSupply:b,"aria-label":"Mint number ".concat(m," of ").concat(b),children:m})}),(0,pr.jsx)(lu,{id:"reward-title",children:c}),(0,pr.jsx)(cu,{children:u}),b&&(0,pr.jsxs)(ou,{role:"region","aria-label":"Supply information",children:[(0,pr.jsxs)(au,{isHighlighted:!0,children:[(0,pr.jsx)("div",{className:"label",children:"Total Supply"}),(0,pr.jsx)("div",{className:"value",children:b}),(0,pr.jsx)("div",{className:"subtitle",children:"Limited Edition"})]}),(0,pr.jsxs)(au,{children:[(0,pr.jsx)("div",{className:"label",children:"Claimed"}),(0,pr.jsx)("div",{className:"value",children:_||0}),(0,pr.jsx)("div",{className:"subtitle",children:"Collectors"})]}),(0,pr.jsxs)(au,{children:[(0,pr.jsx)("div",{className:"label",children:"Available"}),(0,pr.jsx)("div",{className:"value",children:v||0}),(0,pr.jsx)("div",{className:"subtitle",children:"Remaining"})]}),(0,pr.jsxs)(au,{isHighlighted:E>75,children:[(0,pr.jsx)("div",{className:"label",children:"Progress"}),(0,pr.jsxs)("div",{className:"value",children:[(null===E||void 0===E?void 0:E.toFixed(1))||0,"%"]}),(0,pr.jsx)("div",{className:"subtitle",children:"Claimed"})]})]}),w&&(0,pr.jsxs)(uu,{"aria-label":"Earned ".concat(w," WNGS"),children:["+",w," WNGS",x>0&&(0,pr.jsxs)("span",{className:"bonus",children:["(+",x," bonus)"]})]}),(0,pr.jsxs)(du,{role:"region","aria-label":"Collection value information",children:[(0,pr.jsx)(hu,{children:"Collection Value"}),(0,pr.jsx)(fu,{children:(()=>{const e=E||0;return e<25?"Early adopter! This item is part of an exclusive collection that's just getting started.":e<50?"Growing collection! This limited edition is becoming increasingly rare as more collectors join.":e<75?"Rare find! Over half the supply has been claimed, making this item highly exclusive.":"Ultra rare! Nearly all items have been claimed. You're among the final collectors."})()})]}),(0,pr.jsxs)(pu,{role:"region","aria-label":"Social sharing options",children:[(0,pr.jsx)(gu,{children:"Share Your Achievement"}),(0,pr.jsx)(mu,{children:"Show off your exclusive limited edition item to the Monarch community!"}),(0,pr.jsx)(yu,{onClick:async()=>{const e="\ud83e\udd8b Just claimed ".concat(c," - Mint #").concat(m," of ").concat(b,"! Exclusive limited edition from Monarch Passport. #PapillonLabs #LimitedEdition"),t=window.location.origin;if(navigator.share)try{await navigator.share({title:"Monarch Passport Limited Edition",text:e,url:t})}catch(n){console.log("Share cancelled or failed")}else try{await navigator.clipboard.writeText("".concat(e,"\n").concat(t)),l(!0),setTimeout(()=>l(!1),3e3)}catch(n){console.log("Clipboard not available")}},disabled:s,"aria-label":"Share limited edition claim",children:s?"Copied!":"Share"})]}),y&&(0,pr.jsxs)(wu,{"aria-label":"Claimed on ".concat(I(y)),children:["Claimed on ",I(y)]}),(0,pr.jsxs)(bu,{children:[a&&(0,pr.jsx)(_u,{onClick:a,"aria-label":"View item in closet",children:"View in Closet"}),(0,pr.jsx)(vu,{onClick:o,"aria-label":"Close modal",children:"Close"})]})]})})},Su=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Cu=async e=>{try{console.log("\ud83d\udd0d Checking limited edition availability for: ".concat(e));const t=wc.dt.getRewardById(e);if(!t)return{available:!1,error:"Reward not found in configuration",reason:"INVALID_REWARD"};if(!t.limitedEdition)return{available:!0,isLimitedEdition:!1,reward:t,reason:"REGULAR_REWARD"};const{data:n,error:r}=await Su.rpc("get_limited_edition_status",{p_reward_id:e});if(r)return console.error("Error checking limited edition status:",r),{available:!1,error:"Failed to check limited edition status",reason:"DATABASE_ERROR"};if(!n||0===n.length)return{available:!1,error:"Limited edition not found in database",reason:"NOT_INITIALIZED"};const i=n[0],o=i.available_count>0&&i.is_active;return{available:o,isLimitedEdition:!0,reward:t,status:{totalSupply:i.total_supply,claimedCount:i.claimed_count,availableCount:i.available_count,claimPercentage:i.claim_percentage,isActive:i.is_active,startDate:i.start_date,endDate:i.end_date,userHasClaimed:i.user_has_claimed,userMintNumber:i.user_mint_number},reason:o?"AVAILABLE":"EXHAUSTED"}}catch(t){return console.error("Error in checkLimitedEditionAvailability:",t),{available:!1,error:t.message,reason:"UNKNOWN_ERROR"}}},Au=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("\ud83c\udfaf Claiming limited edition: ".concat(e," for user: ").concat(t));const r=await Cu(e);if(!r.available)return{success:!1,error:r.error,reason:r.reason};const{data:i,error:o}=await Su.rpc("claim_limited_edition_item",{p_reward_id:e,p_user_id:t,p_qr_scan_location:n});if(o)return console.error("Error claiming limited edition:",o),{success:!1,error:o.message,reason:"CLAIM_FAILED"};if(!i||0===i.length)return{success:!1,error:"No response from claim function",reason:"NO_RESPONSE"};const a=i[0];if(!a.success)return{success:!1,error:a.message,reason:"CLAIM_REJECTED"};const s=wc.dt.getRewardById(e),l=wc.dt.getTotalWingsValue(e);return{success:!0,mintNumber:a.mint_number,claimedAt:a.claimed_at,message:a.message,reward:s,totalWingsValue:l,limitedEdition:null===s||void 0===s?void 0:s.limitedEdition,qrScanLocation:n}}catch(r){return console.error("Error in claimLimitedEditionItem:",r),{success:!1,error:r.message,reason:"UNKNOWN_ERROR"}}},xu=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var r;if(console.log("\ud83d\udd04 Processing limited edition QR code:",e),!e||!e.rewardId)return{success:!1,error:"Invalid QR code data",reason:"INVALID_QR_DATA"};const o=e.rewardId,a=wc.dt.getRewardById(o);if(!a)return{success:!1,error:"Reward not found in configuration",reason:"REWARD_NOT_FOUND"};if(!t)return{success:!1,error:"User not authenticated",reason:"NOT_AUTHENTICATED"};const{data:s}=await Su.from("limited_edition_claims").select("id, mint_number").eq("user_id",t).eq("limited_edition_id",null===(r=(await Su.from("limited_edition_items").select("id").eq("reward_id",o).single()).data)||void 0===r?void 0:r.id).maybeSingle();if(s)return{success:!1,error:"You have already claimed this limited edition item",reason:"ALREADY_CLAIMED",existingClaim:{mintNumber:s.mint_number}};const l=await Cu(o);if(!l.available)return{success:!1,error:l.error,reason:l.reason,status:l.status};const c=await Au(o,t,n);if(!c.success)return c;try{await Su.from("user_activity").insert({user_id:t,activity_type:"limited_edition_claim",activity_title:"Limited Edition: ".concat(a.name),activity_description:"Claimed mint #".concat(c.mintNumber," \u2022 ").concat(c.totalWingsValue," WINGS earned"),wings_earned:c.totalWingsValue,reward_id:o,metadata:{mintNumber:c.mintNumber,limitedEditionId:o,totalSupply:a.limitedEdition.totalSupply,exclusivityLevel:a.limitedEdition.exclusivityLevel,qrScanLocation:n}})}catch(i){console.warn("Failed to log limited edition activity:",i)}return{success:!0,reward:a,claimResult:c,availability:l.status}}catch(o){return console.error("Error in processLimitedEditionQR:",o),{success:!1,error:o.message,reason:"PROCESSING_ERROR"}}},Iu=e=>{try{const t=JSON.parse(e);if("monarch_reward"!==t.type)return{valid:!1,error:"Invalid QR code type",reason:"INVALID_TYPE"};if(!t.rewardId)return{valid:!1,error:"Missing reward ID",reason:"MISSING_REWARD_ID"};const n=wc.dt.getRewardById(t.rewardId);return n?n.isActive?t.timestamp&&t.timestamp<Date.now()-864e5?{valid:!1,error:"QR code has expired",reason:"EXPIRED"}:{valid:!0,payload:t,reward:n,isLimitedEdition:!!n.limitedEdition}:{valid:!1,error:"Reward is not currently available",reason:"REWARD_INACTIVE"}:{valid:!1,error:"Reward not found in configuration",reason:"REWARD_NOT_FOUND"}}catch(t){return console.error("Error validating limited edition QR:",t),{valid:!1,error:"Invalid QR code format",reason:"INVALID_FORMAT"}}};var Tu,Ru,ku,Pu,Nu,Du,Ou,Mu,Lu,ju,Fu,Bu,Uu,zu;const Hu=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Wu=fr(Tu||(Tu=o(["\n  0% { opacity: 0; transform: scale(0.5) rotate(-10deg); }\n  50% { opacity: 1; transform: scale(1.1) rotate(5deg); }\n  100% { opacity: 1; transform: scale(1) rotate(0deg); }\n"]))),Vu=dr.div(Ru||(Ru=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem 1rem 6rem 1rem;\n"])),e=>{let{theme:t}=e;return t.colors.background}),Yu=dr(Gr)(ku||(ku=o(["\n  padding: 2rem;\n  width: 100%;\n  max-width: 400px;\n  text-align: center;\n"]))),Gu=dr.div(Pu||(Pu=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.3);\n  backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n"]))),qu=dr(Gr)(Nu||(Nu=o(["\n  padding: 3rem 2rem;\n  text-align: center;\n  animation: "," 0.6s ease-out;\n  max-width: 90vw;\n  width: 400px;\n"])),Wu),Xu=dr.div(Du||(Du=o(["\n  font-size: 4rem;\n  margin-bottom: 1rem;\n"]))),Qu=dr.h2(Ou||(Ou=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.5rem;\n  margin-bottom: 1rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),Zu=dr.div(Mu||(Mu=o(["\n  font-size: 1.2rem;\n  color: ",";\n  font-weight: 600;\n  margin-bottom: 2rem;\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),Ku=dr(Gr)(Lu||(Lu=o(["\n  padding: 2rem;\n  text-align: center;\n  background: rgba(231, 76, 60, 0.1);\n  border: 1px solid rgba(231, 76, 60, 0.3);\n"]))),Ju=dr.div(ju||(ju=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 2rem;\n"]))),$u=dr.button(Fu||(Fu=o(["\n  background: ",";\n  color: ",";\n  border: 2px solid #FFB000;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  padding: 0.75rem 2rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n  }\n"])),e=>e.claimed?"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)":"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 50%, #9D4EDD 100%)",e=>e.claimed?"#000":"#FAFAFA"),ed=dr.button(Bu||(Bu=o(["\n  background: transparent;\n  color: #aaa;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  font-size: 1rem;\n  font-weight: 500;\n  padding: 0.6rem 1.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n    color: #fff;\n  }\n"]))),td=dr.div(Uu||(Uu=o(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(135deg, #10B981 0%, #059669 100%);\n  color: white;\n  padding: 0.5rem;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-align: center;\n  z-index: 10;\n"]))),nd=dr.div(zu||(zu=o(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #10B981 0%, #059669 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 1.5rem;\n  font-size: 2.5rem;\n  color: white;\n"]))),rd=e=>{let{reward:n,onClose:r,onShowInCloset:i,user:o}=e;const[a,s]=(0,t.useState)("unclaimed"),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(!1);return n?(0,pr.jsx)(Gu,{children:(0,pr.jsxs)(qu,{children:[u&&l&&(0,pr.jsxs)(td,{children:["\u26a1 Quest Progress: ",l.questName," (",l.newProgress,"/",l.total,")",l.completed&&" - COMPLETED! \ud83c\udf89"]}),"unclaimed"===a&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(Xu,{children:(h=n.category,{jackets:"\ud83e\udde5",tops:"\ud83d\udc55",bottoms:"\ud83d\udc56",headwear:"\ud83e\udde2",accessories:"\u26d3\ufe0f",footwear:"\ud83d\udc5f",themes:"\ud83c\udfa8"}[h]||"\ud83c\udf81")}),(0,pr.jsx)(Qu,{children:"Reward Found!"}),(0,pr.jsx)("h3",{style:{color:"#fff",marginBottom:"0.5rem"},children:n.name}),(0,pr.jsxs)("p",{style:{color:"#aaa",marginBottom:"1rem"},children:[n.rarity," \u2022 #",n.mintNumber]}),n.wingsEarned>0&&(0,pr.jsxs)(Zu,{children:["+",n.wingsEarned," WNGS \ud83e\udd8b"]}),(0,pr.jsxs)(Ju,{children:[(0,pr.jsx)($u,{onClick:async()=>{if(n&&o){s("claiming");try{await new Promise(e=>setTimeout(e,1500));const e=await(async(e,t)=>{try{const{data:n}=await Hu.from("user_quest_progress").select("*").eq("user_id",e).eq("status","active");if(!n||0===n.length)return null;const r=n.find(e=>"scan_items"===e.quest_type||"scan_physical_items"===e.quest_type||"scan_category"===e.quest_type&&e.category===t);if(r){const e=(r.current_progress||0)+1,t=e>=r.target_value;return await Hu.from("user_quest_progress").update({current_progress:e,status:t?"completed":"active",completed_at:t?(new Date).toISOString():null}).eq("id",r.id),{questName:r.quest_title||"Scan 10 Papillon Items",oldProgress:r.current_progress||0,newProgress:e,total:r.target_value||10,completed:t}}return null}catch(n){return console.warn("Failed to check quest progress:",n),null}})(o.id,n.category);e&&(c(e),d(!0),setTimeout(()=>d(!1),4e3)),s("claimed")}catch(e){console.error("Claim processing failed:",e),s("unclaimed")}}},children:"\ud83c\udf81 Claim Reward"}),(0,pr.jsx)(ed,{onClick:r,children:"Close"})]})]}),"claiming"===a&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\u23f3"}),(0,pr.jsx)(Qu,{children:"Processing your reward..."}),(0,pr.jsx)("p",{style:{color:"#aaa"},children:"Adding to closet and updating progress"})]}),"claimed"===a&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(nd,{children:"\u2713"}),(0,pr.jsx)(Qu,{children:"Reward Claimed!"}),(0,pr.jsx)("h3",{style:{color:"#fff",marginBottom:"0.5rem"},children:n.name}),(0,pr.jsx)("p",{style:{color:"#10B981",marginBottom:"1rem"},children:"Successfully added to your closet"}),n.wingsEarned>0&&(0,pr.jsxs)("p",{style:{color:"#FFB000",marginBottom:"2rem"},children:["+",n.wingsEarned," WNGS earned!"]}),(0,pr.jsxs)(Ju,{children:[(0,pr.jsx)($u,{claimed:!0,onClick:i,children:"\ud83d\udc55 Show in Closet"}),(0,pr.jsx)(ed,{onClick:r,children:"Continue Scanning"})]})]})]})}):null;var h},id=()=>{const e=$(),{user:n}=Ur(),{awardQRStamp:r,awardFirstItemStamp:i,awardStyleStamp:o,hasStamp:a}=yi(),{completeReferral:s}=yc(),{claimReward:l}=vc(),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1),[y,w]=(0,t.useState)(null),[b,_]=(0,t.useState)(null),[v,E]=(0,t.useState)(null),[S,C]=(0,t.useState)(!1),[A,x]=(0,t.useState)(null),[I,T]=(0,t.useState)(!1),R=(0,t.useRef)(null),k="qr-reader",P=(0,t.useCallback)(e=>{try{const t=JSON.parse(e);if("monarch_reward"!==t.type)return!1;if(!t.rewardId)return!1;if(!t.season)return!1;if(t.timestamp&&t.timestamp<Date.now()-864e5)throw new Error("QR code has expired");return!0}catch(b){return console.error("QR validation error:",b),!1}},[]),N=(0,t.useCallback)(async(e,t)=>{try{const{data:n,error:r}=await Hu.from("user_closet").select("id").eq("user_id",t).eq("reward_id",e).maybeSingle();return r?(console.error("Database error checking existing reward:",r),{exists:!1,error:r}):{exists:!!n,error:null}}catch(n){return console.error("Unexpected error in checkExistingReward:",n),{exists:!1,error:n}}},[]),D=(0,t.useCallback)(async e=>{const{data:t,error:n}=await Hu.from("rewards").select("*").eq("reward_id",e).single();return{data:t,error:n}},[]),O=(0,t.useCallback)(async e=>{const{data:t,error:n}=await Hu.from("user_closet").select("mint_number").eq("reward_id",e).order("mint_number",{ascending:!1}).limit(1).maybeSingle();return n?(console.warn("Error fetching mint numbers:",n),Math.floor(999*Math.random())+1):((null===t||void 0===t?void 0:t.mint_number)||0)+1},[]),M=(0,t.useCallback)(async(e,t)=>{const n=await O(e.reward_id),{data:r,error:i}=await Hu.from("user_closet").insert([{user_id:t,reward_id:e.reward_id,name:e.name,rarity:e.rarity,category:e.category,item_type:(o=e.category,["jackets","tops","bottoms","headwear","accessories","footwear","hoodies"].includes(o)?"physical_item":"digital_collectible"),mint_number:n,earned_date:(new Date).toISOString(),earned_via:"qr_scan",wings_earned:e.wings_value||0}]).select().single();var o;return{data:r,error:i}},[O]),L=(0,t.useCallback)(async(e,t)=>{try{const{data:n}=await Hu.from("user_profiles").select("wings_balance").eq("id",e).single(),r=((null===n||void 0===n?void 0:n.wings_balance)||0)+t,{error:i}=await Hu.from("user_profiles").update({wings_balance:r}).eq("id",e);return{error:i}}catch(n){return console.error("Error updating wings balance:",n),{error:n}}},[]),j=(0,t.useCallback)(async(e,t)=>{const{error:n}=await Hu.from("user_activity").insert([{user_id:e,activity_type:"scan",activity_title:"Scanned: ".concat(t.rewardName),activity_description:"Earned ".concat(t.wingsEarned," WNGS \u2022 Mint #").concat(t.mintNumber),wings_earned:t.wingsEarned,reward_id:t.rewardId,metadata:{mintNumber:t.mintNumber,rarity:t.rarity,category:t.category}}]);n&&console.warn("Failed to log activity:",n)},[]),F=(0,t.useCallback)(async e=>{if(null!==e&&void 0!==e&&e.text&&n&&!S){C(!0),await z(),await new Promise(e=>setTimeout(e,300)),u(!1),h(!0),_(null),x(null),T(!1);try{console.log("\ud83d\udd04 Processing scan result:",e);const u=Iu(e.text);if(!u.valid)throw new Error(u.error||"Invalid QR code format");const{payload:h,reward:p,isLimitedEdition:g}=u,m=h.rewardId;if(console.log("\ud83c\udf81 Processing reward ID:",m),console.log("\ud83d\udce6 Is Limited Edition:",g),console.log("\ud83d\udce6 Static Reward:",p),g){console.log("\ud83e\udd8b Processing limited edition reward...");const e=await xu(h,n.id,"QR_Scan");if(!e.success)throw new Error(e.error||"Failed to claim limited edition item");console.log("\u2705 Limited edition claimed successfully:",e),x(e),T(!0);try{a("qr_scanner")||(await r(),console.log("\u2705 QR Scanner stamp awarded!")),a("limited_edition_collector")||console.log("\u2705 Limited Edition Collector stamp awarded!")}catch(c){console.warn("\u26a0\ufe0f Failed to award stamps:",c)}return}console.log("\ud83d\udcf1 Processing regular reward..."),console.log("\ud83d\udd0d Starting claim process...");const y=l(m,"QR_Scan"),b=new Promise((e,t)=>setTimeout(()=>t(new Error("Claim timeout - taking too long")),12e3));console.log("\u23f1\ufe0f Waiting for claim result...");const _=await Promise.race([y,b]);if(console.log("\ud83d\udd0d Claim process completed:",_),!_.success)throw new Error(_.message||"Failed to claim reward");console.log("\u2705 Regular reward claimed successfully:",_),w((0,wr.A)((0,wr.A)({},p),{},{claimResult:_}));try{var t;a("qr_scanner")||(await r(),console.log("\u2705 QR Scanner stamp awarded!"));if(["tops","bottoms","outerwear","accessories","shoes"].includes(null===(t=p.category)||void 0===t?void 0:t.toLowerCase())&&!a("first_item")&&(await i(p.category),console.log("\u2705 First Item stamp awarded!")),!a("style_icon"))try{const{data:e,error:t}=await Hu.from("user_closet").select("item_id, rewards(category)").eq("user_id",n.id);if(!t&&e){const t=new Set;e.forEach(e=>{var n;null!==(n=e.rewards)&&void 0!==n&&n.category&&t.add(e.rewards.category.toLowerCase())}),t.size>=3&&(await o(t.size),console.log("\u2705 Style Icon stamp awarded!"))}}catch(d){console.warn("\u26a0\ufe0f Failed to check style categories:",d)}}catch(c){console.warn("\u26a0\ufe0f Failed to award stamps (non-critical):",c)}console.log("\ud83d\udd0d Step 8: Checking referral completion...");try{const e=await s(n.id);e.success&&console.log("\u2705 Referral completed! Referrer earned:",e.referrerReward,"WINGS")}catch(f){console.warn("\u26a0\ufe0f Failed to check referral completion (non-critical):",f)}console.log("\ud83d\udd0d Step 9: Showing reward modal..."),w((0,wr.A)((0,wr.A)({},p),{},{claimResult:_})),console.log("\u2705 Processing complete!"),navigator.vibrate&&navigator.vibrate([100,50,100])}catch(p){console.error("Scan processing error:",p),setTimeout(()=>{_(p.message),navigator.vibrate&&navigator.vibrate([200,100,200])},200)}finally{setTimeout(()=>{h(!1),C(!1)},200)}}},[n,S,P,N,D,M,L,j]),B=(0,t.useCallback)(async(e,t)=>{console.log("\ud83d\udd0d Scan attempt - Text:",e);try{if(e&&"string"===typeof e&&e.length>0){const t=JSON.parse(e);if(t&&t.rewardId)return console.log("\u2705 Regular QR detected successfully"),void F({text:e,type:"regular"})}}catch(b){console.log("\u274c QR code parsing failed - not a valid Monarch QR code")}},[F]),U=(0,t.useCallback)(async()=>{try{E(null);const r="localhost"===window.location.hostname||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.startsWith("172.");if("https:"!==window.location.protocol&&!r)return void E("Camera requires HTTPS connection. Please use a secure connection.");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void E("Camera API not supported in this browser. Please use a modern browser.");let i,o;try{i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),i&&i.getTracks().forEach(e=>e.stop())}catch(e){return console.error("Permission error:",e),"NotAllowedError"===e.name?void E("Camera permission denied. Please allow camera access when prompted."):"NotFoundError"===e.name?void E("No camera found. Please ensure your device has a camera."):void E("Failed to access camera. Please check permissions and try again.")}await new Promise(e=>setTimeout(e,200));try{o=await ql.getCameras()}catch(t){return console.error("Failed to get cameras:",t),void E("Failed to access camera devices. Please check permissions and try again.")}if(!o||0===o.length)return void E("No camera found. Please ensure your device has a camera and permissions are granted.");if(!document.getElementById(k))return console.error("Scanner element not found"),void E("Scanner initialization failed. Please refresh the page.");const a=new ql(k);R.current=a;const s={fps:10,qrbox:{width:200,height:200},aspectRatio:1,disableFlip:!1,supportedScanTypes:[nl.SCAN_TYPE_CAMERA]};let l=o[0].id;const c=o.find(e=>{const t=e.label.toLowerCase();return t.includes("back")||t.includes("rear")||t.includes("environment")});c&&(l=c.id);try{await a.start(l,s,(e,t)=>{B(e,t)},e=>{console.log("\ud83d\udce1 Scan attempt in progress...")}),E(null)}catch(n){console.error("Failed to start scanner:",n),E("Failed to start camera. Please try again or refresh the page.")}}catch(r){console.error("Failed to start QR scanner:",r),E("Failed to start camera. Please check permissions and try again.")}},[F,B]);(0,t.useEffect)(()=>(c&&n&&!f&&(p(!0),setTimeout(()=>{U()},100)),()=>{c||z()}),[c,n,f,U]);const z=async()=>{if(R.current){try{await R.current.stop(),R.current.clear()}catch(e){console.warn("Error stopping scanner:",e)}R.current=null}},H=()=>{x(null),T(!1),h(!1)};return n?(0,pr.jsxs)(Vu,{children:[!c&&(0,pr.jsxs)(Yu,{children:[(0,pr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:"\ud83c\udfaf"}),(0,pr.jsx)("h2",{style:{marginBottom:"1rem",color:"#fff"},children:"Ready to Scan"}),(0,pr.jsx)("p",{style:{marginBottom:"2.5rem",color:"#ccc",lineHeight:"1.6",fontSize:"1.1rem"},children:"Point your camera at a QR code on a Papillon item to earn rewards"}),(0,pr.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,pr.jsx)(Zr,{onClick:async()=>{_(null),E(null),h(!0);try{await(async()=>{try{if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"localhost"!==window.location.hostname)return void E("Camera requires HTTPS. Please access this page via https://");const e=navigator.userAgent||navigator.vendor||window.opera;if(/Instagram|FBAN|FBAV|Twitter|Line|WhatsApp|Snapchat|TikTok|WeChat/i.test(e))return void E("Camera not available in in-app browsers. Please open in your default browser (Chrome, Safari, Firefox).");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void E("Camera API not supported. Please use Chrome, Safari, or Firefox, and ensure you're not in private/incognito mode.");(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(e=>e.stop()),E(null)}catch(b){if(console.error("Permission request failed:",b),"NotAllowedError"===b.name)E("Camera permission denied. Please allow camera access when prompted.");else if("NotFoundError"===b.name)E("No camera found. Please ensure your device has a camera.");else if("NotSupportedError"===b.name)E("Camera not supported. Please use Chrome, Safari, or Firefox.");else if("OverconstrainedError"===b.name)try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),void E(null)}catch(e){E("Failed to access camera. Please check your device and browser.")}else E("Failed to access camera: ".concat(b.message));u(!1)}})(),setTimeout(()=>{h(!1),u(!0)},300)}catch(b){console.error("Camera permission error:",b),h(!1)}},children:"\ud83d\udcf1 Start Scanning"}),(0,pr.jsx)(Zr,{onClick:()=>e("/"),style:{background:"transparent",borderColor:"#666",color:"#ccc"},children:"Back to Home"})]})]}),c&&(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsxs)("div",{style:{position:"absolute",top:"60px",left:"50%",transform:"translateX(-50%)",zIndex:10,textAlign:"center",color:"#fff"},children:[(0,pr.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700"},children:"Scan a Papillon Item"}),(0,pr.jsx)("p",{style:{margin:"0.5rem 0 0 0",color:"#aaa",fontSize:"1rem"},children:"Point your camera at a QR code to earn rewards"})]}),(0,pr.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"#000"},children:[(0,pr.jsx)("div",{id:k,style:{width:"100%",height:"100%"}}),(0,pr.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"250px",height:"250px",pointerEvents:"none",zIndex:5,border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"12px"},children:[(0,pr.jsx)("div",{style:{position:"absolute",top:"-2px",left:"-2px",width:"40px",height:"40px",borderTop:"4px solid #4C1C8C",borderLeft:"4px solid #4C1C8C",borderTopLeftRadius:"12px"}}),(0,pr.jsx)("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"40px",height:"40px",borderTop:"4px solid #FFB000",borderRight:"4px solid #FFB000",borderTopRightRadius:"12px"}}),(0,pr.jsx)("div",{style:{position:"absolute",bottom:"-2px",left:"-2px",width:"40px",height:"40px",borderBottom:"4px solid #FFB000",borderLeft:"4px solid #FFB000",borderBottomLeftRadius:"12px"}}),(0,pr.jsx)("div",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"40px",height:"40px",borderBottom:"4px solid #4C1C8C",borderRight:"4px solid #4C1C8C",borderBottomRightRadius:"12px"}}),(0,pr.jsx)("div",{style:{position:"absolute",top:"0",left:"0",right:"0",height:"2px",background:"linear-gradient(90deg, transparent, #4C1C8C, transparent)",animation:"scan-line 2s ease-in-out infinite"}})]}),(0,pr.jsx)("style",{children:"\n              @keyframes scan-line {\n                0% { transform: translateY(0); opacity: 1; }\n                50% { transform: translateY(125px); opacity: 0.8; }\n                100% { transform: translateY(250px); opacity: 0; }\n              }\n\n              /* Completely hide default HTML5QRCode styling */\n              #".concat(k," img {\n                display: none !important;\n              }\n              #").concat(k," > div {\n                border: none !important;\n                background: transparent !important;\n              }\n              #").concat(k," canvas {\n                border-radius: 0 !important;\n                border: none !important;\n              }\n              \n              /* Hide ALL default QR scanner UI elements */\n              #").concat(k," > div > div {\n                display: none !important;\n              }\n              #").concat(k," > div > img {\n                display: none !important;\n              }\n              #").concat(k," > div > canvas {\n                display: none !important;\n              }\n              #").concat(k," > div > svg {\n                display: none !important;\n              }\n              #").concat(k," > div:last-child {\n                display: none !important;\n              }\n              \n              /* Only show the video element */\n              #").concat(k," video {\n                width: 100% !important;\n                height: 100% !important;\n                object-fit: cover !important;\n                display: block !important;\n              }\n              \n              /* Hide any white/default overlays */\n              #").concat(k," * {\n                border: none !important;\n                background: transparent !important;\n              }\n              #").concat(k," video {\n                background: black !important;\n              }\n            ")})]}),(0,pr.jsx)("div",{style:{position:"absolute",bottom:"120px",left:"50%",transform:"translateX(-50%)",zIndex:10},children:(0,pr.jsx)(Zr,{onClick:()=>e("/"),style:{background:"rgba(0, 0, 0, 0.7)",borderColor:"#666",color:"#fff",backdropFilter:"blur(10px)"},children:"\u2190 Back"})}),v&&(0,pr.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:15,padding:"2rem",background:"rgba(18, 18, 18, 0.95)",borderRadius:"16px",border:"2px solid rgba(231, 76, 60, 0.4)",textAlign:"center",maxWidth:"90vw",width:"350px",backdropFilter:"blur(20px)"},children:[(0,pr.jsx)("div",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:"\ud83d\udcf1"}),(0,pr.jsx)("h3",{style:{color:"#e74c3c",marginBottom:"1rem",fontSize:"1.2rem"},children:"Camera Access Required"}),(0,pr.jsx)("p",{style:{color:"#ccc",marginBottom:"2rem",fontSize:"1rem",lineHeight:"1.4"},children:v}),(0,pr.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,pr.jsx)(Zr,{onClick:()=>{E(null),u(!1),setTimeout(()=>u(!0),100)},style:{background:"#4C1C8C",borderColor:"#4C1C8C"},children:"\ud83d\udd04 Try Again"}),(0,pr.jsx)(Zr,{onClick:()=>e("/"),style:{background:"transparent",borderColor:"#666",color:"#ccc"},children:"\u2190 Go Back"})]})]})]}),b&&(0,pr.jsxs)(Ku,{children:[(0,pr.jsx)("h3",{style:{color:"#e74c3c",marginBottom:"1rem"},children:"Scan Failed"}),(0,pr.jsx)("p",{style:{marginBottom:"1.5rem"},children:b}),(0,pr.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,pr.jsx)(Zr,{onClick:()=>{_(null),E(null),u(!0)},children:"Try Again"}),(0,pr.jsx)(Zr,{onClick:()=>e("/"),children:"Go Home"})]})]}),d&&(0,pr.jsx)(Gu,{children:(0,pr.jsxs)(Yu,{children:[(0,pr.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\u23f3"}),(0,pr.jsx)("h3",{children:"Processing your reward..."})]})}),y&&(0,pr.jsx)(rd,{reward:y,onClose:()=>w(null),onShowInCloset:()=>{w(null),e("/closet")},user:n}),I&&A&&(0,pr.jsx)(Eu,{reward:A.reward,claimResult:A.claimResult,onClose:H,onShowInCloset:()=>{H(),e("/closet")}})]}):(0,pr.jsx)(Vu,{children:(0,pr.jsxs)(Yu,{children:[(0,pr.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Please log in to scan rewards"}),(0,pr.jsx)(Zr,{onClick:()=>e("/login"),children:"Go to Login"})]})})};var od,ad,sd,ld,cd,ud;const dd=fr(od||(od=o(["\n  0%, 100% { \n    box-shadow: 0 0 10px rgba(255, 176, 0, 0.3);\n    transform: scale(1);\n  }\n  50% { \n    box-shadow: 0 0 20px rgba(255, 176, 0, 0.6);\n    transform: scale(1.05);\n  }\n"]))),hd=fr(ad||(ad=o(["\n  0%, 100% { \n    opacity: 0.8;\n    transform: scale(1);\n  }\n  50% { \n    opacity: 1;\n    transform: scale(1.1);\n  }\n"]))),fd=fr(sd||(sd=o(["\n  0%, 100% { \n    opacity: 0;\n    transform: scale(0) rotate(0deg);\n  }\n  50% { \n    opacity: 1;\n    transform: scale(1) rotate(180deg);\n  }\n"]))),pd=dr.div(ld||(ld=o(["\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  background: ",";\n  color: #000;\n  animation: "," 3s ease-in-out infinite;\n  box-shadow: 0 4px 15px rgba(255, 176, 0, 0.3);\n  z-index: 2;\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(255, 176, 0, 0.4);\n  }\n\n  /* Sparkle effect for premium badges */\n  ","\n"])),e=>e.color||"#FFB000",e=>e.isPremium?dd:"none",e=>e.isPremium&&"\n    &::before {\n      content: '\u2728';\n      position: absolute;\n      top: -0.5rem;\n      right: -0.5rem;\n      font-size: 0.8rem;\n      animation: ".concat(fd," 2s ease-in-out infinite;\n      animation-delay: 1s;\n    }\n  ")),gd=dr.span(cd||(cd=o(["\n  font-size: 1rem;\n  animation: "," 2s ease-in-out infinite;\n"])),hd),md=dr.span(ud||(ud=o(["\n  font-weight: 700;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n"]))),yd=e=>{let{exclusivityLevel:t="limited",size:n="medium",showIcon:r=!0,className:i=""}=e;const o={founders:{color:"#10B981",icon:"\ud83d\udc51",text:"Founders",isPremium:!0},vip:{color:"#7F3FBF",icon:"\u2b50",text:"VIP",isPremium:!0},ultra_rare:{color:"#FFB000",icon:"\ud83d\udc8e",text:"Ultra Rare",isPremium:!0},legendary:{color:"#7F3FBF",icon:"\ud83c\udf1f",text:"Legendary",isPremium:!0},mythic:{color:"#10B981",icon:"\ud83d\udd25",text:"Mythic",isPremium:!0},limited:{color:"#FFB000",icon:"\ud83e\udd8b",text:"Limited",isPremium:!1},exclusive:{color:"#FF6B35",icon:"\ud83c\udfaf",text:"Exclusive",isPremium:!1}},a=o[t]||o.limited,s={small:{padding:"0.25rem 0.75rem",fontSize:"0.7rem",iconSize:"0.8rem"},medium:{padding:"0.5rem 1rem",fontSize:"0.8rem",iconSize:"1rem"},large:{padding:"0.75rem 1.25rem",fontSize:"0.9rem",iconSize:"1.2rem"}},l=s[n]||s.medium;return(0,pr.jsxs)(pd,{color:a.color,isPremium:a.isPremium,style:{padding:l.padding,fontSize:l.fontSize},className:i,"aria-label":"".concat(a.text," limited edition item"),children:[r&&(0,pr.jsx)(gd,{style:{fontSize:l.iconSize},children:a.icon}),(0,pr.jsx)(md,{children:a.text})]})};var wd,bd,_d,vd,Ed,Sd,Cd,Ad;const xd=fr(wd||(wd=o(["\n  0%, 100% { \n    box-shadow: 0 0 15px rgba(255, 176, 0, 0.4);\n    transform: scale(1);\n  }\n  50% { \n    box-shadow: 0 0 25px rgba(255, 176, 0, 0.7);\n    transform: scale(1.02);\n  }\n"]))),Id=fr(bd||(bd=o(["\n  0%, 100% { \n    opacity: 1;\n    transform: scale(1);\n  }\n  50% { \n    opacity: 0.9;\n    transform: scale(1.05);\n  }\n"])));dr.div(_d||(_d=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n  position: relative;\n"]))),dr.div(vd||(vd=o(["\n  background: linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%);\n  color: #000;\n  padding: 0.75rem 1.5rem;\n  border-radius: 25px;\n  font-size: 1.1rem;\n  font-weight: 700;\n  text-align: center;\n  position: relative;\n  animation: "," 3s ease-in-out infinite;\n  box-shadow: 0 4px 15px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s ease;\n  cursor: pointer;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(255, 176, 0, 0.5);\n  }\n\n  /* Mint label */\n  &::before {\n    content: 'MINT #';\n    position: absolute;\n    top: -0.5rem;\n    left: 50%;\n    transform: translateX(-50%);\n    font-size: 0.7rem;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.7);\n    background: rgba(255, 255, 255, 0.9);\n    padding: 0.2rem 0.5rem;\n    border-radius: 10px;\n    white-space: nowrap;\n  }\n\n  /* Supply info */\n  &::after {\n    content: 'OF ","';\n    position: absolute;\n    bottom: -0.5rem;\n    left: 50%;\n    transform: translateX(-50%);\n    font-size: 0.6rem;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.7);\n    background: rgba(255, 255, 255, 0.9);\n    padding: 0.2rem 0.5rem;\n    border-radius: 10px;\n    white-space: nowrap;\n  }\n"])),xd,e=>e.totalSupply||"100"),dr.span(Ed||(Ed=o(["\n  font-size: 1.3rem;\n  font-weight: 800;\n  animation: "," 2s ease-in-out infinite;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n"])),Id),dr.div(Sd||(Sd=o(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8rem;\n  color: ",";\n  margin-top: 0.5rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),dr.div(Cd||(Cd=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  \n  .label {\n    font-size: 0.7rem;\n    color: ",";\n    margin-bottom: 0.2rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n  }\n  \n  .value {\n    font-size: 0.9rem;\n    font-weight: 700;\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.primary}),dr.div(Ad||(Ad=o(["\n  position: absolute;\n  top: -0.5rem;\n  right: -0.5rem;\n  width: 1.5rem;\n  height: 1.5rem;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.8rem;\n  color: white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n  z-index: 3;\n"])),e=>"mythic"===e.rarity?"#10B981":"legendary"===e.rarity?"#7F3FBF":"ultra_rare"===e.rarity?"#FFB000":"#FF6B35");var Td,Rd,kd,Pd,Nd,Dd,Od,Md,Ld;const jd=fr(Td||(Td=o(["\n  0%, 100% { \n    box-shadow: 0 0 10px rgba(255, 176, 0, 0.3);\n    transform: scale(1);\n  }\n  50% { \n    box-shadow: 0 0 20px rgba(255, 176, 0, 0.6);\n    transform: scale(1.05);\n  }\n"]))),Fd=fr(Rd||(Rd=o(["\n  0%, 100% { \n    opacity: 0.8;\n    transform: scale(1);\n  }\n  50% { \n    opacity: 1;\n    transform: scale(1.1);\n  }\n"])));dr.div(kd||(kd=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 1rem;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px;\n  position: relative;\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(255, 176, 0, 0.2);\n  }\n"])),e=>e.background||"rgba(255, 176, 0, 0.1)",e=>e.borderColor||"rgba(255, 176, 0, 0.3)"),dr.div(Pd||(Pd=o(["\n  background: ",";\n  color: #000;\n  padding: 0.5rem 1rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  animation: "," 3s ease-in-out infinite;\n  box-shadow: 0 4px 15px rgba(255, 176, 0, 0.3);\n  position: relative;\n\n  /* Premium indicator */\n  ","\n"])),e=>e.color||"#FFB000",e=>e.isPremium?jd:"none",e=>e.isPremium&&"\n    &::before {\n      content: '\u2728';\n      position: absolute;\n      top: -0.5rem;\n      right: -0.5rem;\n      font-size: 0.8rem;\n      animation: ".concat(Fd," 2s ease-in-out infinite;\n    }\n  ")),dr.div(Nd||(Nd=o(["\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n  animation: "," 3s ease-in-out infinite;\n"])),Fd),dr.h3(Dd||(Dd=o(["\n  font-size: 1rem;\n  color: ",";\n  margin: 0 0 0.5rem 0;\n  font-weight: 700;\n  text-align: center;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),dr.p(Od||(Od=o(["\n  font-size: 0.8rem;\n  color: ",";\n  text-align: center;\n  line-height: 1.4;\n  margin: 0;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),dr.div(Md||(Md=o(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n  margin-top: 1rem;\n  width: 100%;\n"]))),dr.div(Ld||(Ld=o(["\n  text-align: center;\n  \n  .label {\n    font-size: 0.7rem;\n    color: ",";\n    margin-bottom: 0.25rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n  }\n  \n  .value {\n    font-size: 1rem;\n    font-weight: 700;\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.primary});var Bd,Ud,zd,Hd,Wd,Vd,Yd,Gd,qd,Xd,Qd,Zd,Kd,Jd,$d,eh,th,nh,rh,ih,oh,ah,sh,lh,ch,uh,dh,hh,fh,ph,gh,mh,yh,wh,bh,_h,vh,Eh,Sh,Ch,Ah,xh,Ih,Th,Rh;const kh=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Ph={"Spring Jacket":{obtained:"Scanned QR at Papillon Flagship Store",date:"March 15, 2025",location:"SoHo, NYC",season:"Spring 2025"},"Gold Chain":{obtained:"Scanned QR at Papillon Pop-up Store",date:"March 12, 2025",location:"Times Square, NYC",season:"Spring 2025"},"Summer Hat":{obtained:"Scanned QR at Papillon Beach Event",date:"March 10, 2025",location:"Montauk, NY",season:"Summer 2025"},"Classic Hoodie":{obtained:"Scanned QR at Papillon Street Event",date:"March 8, 2025",location:"Brooklyn, NYC",season:"Classic Collection"},"Denim Jeans":{obtained:"Scanned QR at Papillon Denim Launch",date:"March 5, 2025",location:"LES, NYC",season:"Spring 2025"},"Long Sleeve Tee":{obtained:"Scanned QR at Papillon Essential Drop",date:"March 1, 2025",location:"Papillon Studio",season:"Classic Collection"},"Butterfly Wallpaper":{obtained:"Community Event Reward",date:"March 22, 2025",location:"Digital Drop",season:"Genesis Collection"}},Nh=dr.div(Bd||(Bd=o(["\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 2rem 1rem 6rem 1rem;\n  min-height: 100vh;\n  \n  @media (max-width: 768px) {\n    padding: 1rem 0.5rem 6rem 0.5rem;\n  }\n  \n  @media (max-width: 480px) {\n    padding: 0.75rem 0.25rem 6rem 0.25rem;\n  }\n"]))),Dh=dr.h1(Ud||(Ud=o(["\n  font-family: ",";\n  font-weight: 700;\n  color: ",";\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  \n  @media (max-width: 768px) {\n    font-size: 1.75rem;\n    margin-bottom: 1rem;\n  }\n  \n  @media (max-width: 480px) {\n    font-size: 1.5rem;\n    margin-bottom: 0.75rem;\n  }\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),Oh=dr.div(zd||(zd=o(["\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  justify-content: center;\n  \n  @media (max-width: 768px) {\n    gap: 0.75rem;\n    margin-bottom: 1rem;\n  }\n  \n  @media (max-width: 480px) {\n    gap: 0.5rem;\n    margin-bottom: 0.75rem;\n  }\n"]))),Mh=dr.div(Hd||(Hd=o(["\n  display: flex;\n  gap: 0.8rem;\n  margin-bottom: 2rem;\n  overflow-x: auto;\n  padding-bottom: 0.5rem;\n  position: relative;\n  top: 3x;\n  \n  &::-webkit-scrollbar {\n    height: 4px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 2px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: ",";\n    border-radius: 2px;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.purple}),Lh=dr.button(Wd||(Wd=o(["\n  padding: 0.5rem 2rem;\n  border-radius: 12px;\n  border: 2px solid ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  min-width: fit-content;\n  \n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n"])),e=>{let{active:t,theme:n}=e;return t?n.colors.accent.gold:"transparent"},e=>{let{active:t,theme:n,type:r}=e;return t?"main"===r?n.colors.accent.gold:n.colors.accent.purple:"rgba(255, 255, 255, 0.05)"},e=>{let{active:t,theme:n}=e;return t?"#000000"===n.colors.background?"#000000":n.colors.text.primary:n.colors.text.secondary},e=>{let{active:t}=e;return t?"600":"500"},e=>{let{active:t,theme:n,type:r}=e;return t?null:"main"===r?"rgba(255, 176, 0, 0.1)":"rgba(76, 28, 140, 0.1)"}),jh=dr.div(Vd||(Vd=o(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n  margin-bottom: 2rem;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 8px;\n  }\n  \n  @media (max-width: 480px) {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 6px;\n  }\n  \n  @media (max-width: 360px) {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 6px;\n  }\n"]))),Fh=dr(Gr)(Yd||(Yd=o(["\n  padding: 1.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  @media (max-width: 768px) {\n    padding: 1rem;\n  }\n  \n  @media (max-width: 480px) {\n    padding: 0.75rem;\n  }\n  border: 3px solid ",";\n  box-shadow: \n    0 0 12px 0 ",",\n    0 0 24px 0 ",",\n    inset 0 1px 0 ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 ",",\n      0 0 40px 0 ",",\n      inset 0 1px 0 ",";\n  }\n"])),e=>{let{rarity:t,theme:n,isLimitedEdition:r}=e;if(r)return"#FFB000";switch(t){case"legendary":return n.colors.accent.gold;case"epic":return"#9B4BFF";case"rare":return"#4B9CD3";default:return n.colors.accent.purple}},e=>{let{rarity:t,isLimitedEdition:n}=e;if(n)return"rgba(255,176,0,0.2)";switch(t){case"legendary":return"rgba(255,215,0,0.15)";case"epic":return"rgba(155,75,255,0.15)";case"rare":return"rgba(75,156,211,0.15)";default:return"rgba(76,28,140,0.15)"}},e=>{let{rarity:t,isLimitedEdition:n}=e;if(n)return"rgba(255,176,0,0.1)";switch(t){case"legendary":return"rgba(255,215,0,0.08)";case"epic":return"rgba(155,75,255,0.08)";case"rare":return"rgba(75,156,211,0.08)";default:return"rgba(76,28,140,0.08)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.1)";case"epic":return"rgba(155,75,255,0.1)";case"rare":return"rgba(75,156,211,0.1)";default:return"rgba(76,28,140,0.1)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.3)";case"epic":return"rgba(155,75,255,0.3)";case"rare":return"rgba(75,156,211,0.3)";default:return"rgba(76,28,140,0.3)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.15)";case"epic":return"rgba(155,75,255,0.15)";case"rare":return"rgba(75,156,211,0.15)";default:return"rgba(76,28,140,0.15)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.2)";case"epic":return"rgba(155,75,255,0.2)";case"rare":return"rgba(75,156,211,0.2)";default:return"rgba(76,28,140,0.2)"}}),Bh=dr.div(Gd||(Gd=o(["\n  width: 100%;\n  height: 60%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3rem;\n  margin-bottom: 0.5rem;\n  position: relative;\n  \n  @media (max-width: 768px) {\n    font-size: 2.5rem;\n  }\n  \n  @media (max-width: 480px) {\n    font-size: 2rem;\n  }\n"]))),Uh=dr.div(qd||(qd=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  flex: 1;\n  justify-content: space-between;\n"]))),zh=dr.div(Xd||(Xd=o(["\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: ",";\n  margin-bottom: 0.5rem;\n  line-height: 1.2;\n  word-wrap: break-word;\n  \n  @media (max-width: 768px) {\n    font-size: 0.8rem;\n  }\n  \n  @media (max-width: 480px) {\n    font-size: 0.75rem;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),Hh=dr.div(Qd||(Qd=o(["\n  font-size: 0.7rem;\n  font-weight: 500;\n  color: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 0.5rem;\n  \n  @media (max-width: 768px) {\n    font-size: 0.6rem;\n  }\n"])),e=>{let{rarity:t,theme:n}=e;switch(t){case"legendary":return n.colors.accent.gold;case"epic":return"#9B4BFF";case"rare":return"#4B9CD3";default:return n.colors.text.secondary}}),Wh=dr.div(Zd||(Zd=o(["\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  font-size: 0.7rem;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  \n  @media (max-width: 768px) {\n    font-size: 0.6rem;\n    padding: 1px 4px;\n  }\n"]))),Vh=dr.div(Kd||(Kd=o(["\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: #FFB000;\n  color: black;\n  font-size: 0.6rem;\n  font-weight: 700;\n  padding: 2px 6px;\n  border-radius: 8px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  \n  @media (max-width: 768px) {\n    font-size: 0.5rem;\n    padding: 1px 4px;\n  }\n"]))),Yh=dr.video(Jd||(Jd=o(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 12px;\n"]))),Gh=(dr.h3($d||($d=o(["\n  font-family: ",";\n  font-size: 1.1rem;\n  color: ",";\n  margin: 0 0 0.5rem 0;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),dr.div(eh||(eh=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.9rem;\n  color: ",";\n  margin-bottom: 0.5rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),dr.div(th||(th=o(["\n  font-size: 0.8rem;\n  color: ",";\n  text-transform: capitalize;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),dr.span(nh||(nh=o(["\n  color: ",";\n  font-weight: 600;\n  text-transform: capitalize;\n"])),e=>{let{rarity:t,theme:n}=e;switch(t){case"legendary":return n.colors.accent.gold;case"epic":return"#9B4BFF";case"rare":return"#4B9CD3";default:return n.colors.accent.purple}}),dr.div(rh||(rh=o(["\n  text-align: center;\n  padding: 3rem;\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary})),qh=dr.button(ih||(ih=o(["\n  position: fixed;\n  top: 100px;\n  right: 20px;\n  z-index: 1000;\n  background: linear-gradient(135deg, #FFB000, #FFD700);\n  border: none;\n  border-radius: 50px;\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  box-shadow: 0 4px 20px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s ease;\n  font-weight: 600;\n  color: #000;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 25px rgba(255, 176, 0, 0.4);\n  }\n  \n  .stats-icon {\n    font-size: 1.2rem;\n  }\n  \n  .stats-count {\n    font-size: 1rem;\n    font-weight: 700;\n  }\n  \n  @media (max-width: 768px) {\n    top: 80px;\n    right: 15px;\n    padding: 10px 14px;\n    \n    .stats-icon {\n      font-size: 1rem;\n    }\n    \n    .stats-count {\n      font-size: 0.9rem;\n    }\n  }\n"]))),Xh=dr.div(oh||(oh=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n  padding: 20px;\n"]))),Qh=dr.div(ah||(ah=o(["\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\n  backdrop-filter: blur(20px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 20px;\n  padding: 2rem;\n  max-width: 400px;\n  width: 100%;\n  max-height: 80vh;\n  overflow-y: auto;\n"]))),Zh=dr.div(sh||(sh=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  \n  h2 {\n    color: ",";\n    margin: 0;\n    font-size: 1.5rem;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),Kh=dr.button(lh||(lh=o(["\n  background: none;\n  border: none;\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.primary}),Jh=dr.div(ch||(ch=o(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n"]))),$h=dr.div(uh||(uh=o(["\n  text-align: center;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n"]))),ef=dr.div(dh||(dh=o(["\n  font-size: 0.8rem;\n  color: ",";\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),tf=dr.div(hh||(hh=o(["\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),nf=(dr.div(fh||(fh=o(["\n  display: flex;\n  gap: 2rem;\n  justify-content: center;\n  margin-bottom: 2rem;\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),dr.div(ph||(ph=o(["\n  background: linear-gradient(135deg, rgba(255, 176, 0, 0.1) 0%, rgba(255, 159, 28, 0.1) 100%);\n  border: 1px solid rgba(255, 176, 0, 0.3);\n  border-radius: 16px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  text-align: center;\n\n  h3 {\n    color: ",";\n    font-size: 1.2rem;\n    margin-bottom: 1rem;\n    font-weight: 700;\n  }\n\n  .stats-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n    gap: 1rem;\n    margin-bottom: 1rem;\n  }\n\n  .stat-item {\n    text-align: center;\n    \n    .label {\n      font-size: 0.8rem;\n      color: ",";\n      margin-bottom: 0.25rem;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n    \n    .value {\n      font-size: 1.2rem;\n      font-weight: 700;\n      color: ",";\n    }\n  }\n\n  .exclusivity-breakdown {\n    display: flex;\n    justify-content: center;\n    gap: 0.5rem;\n    flex-wrap: wrap;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.colors.text.primary})),rf=dr.div(gh||(gh=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.3);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 24px;\n"]))),of=dr.div(mh||(mh=o(["\n  width: 420px;\n  max-width: 90vw;\n  height: 600px;\n  max-height: 90vh;\n  perspective: 1200px;\n  background: none;\n  border-radius: 24px;\n  @media (max-width: 480px) {\n    width: 95vw;\n    height: 520px;\n    min-width: 0;\n    padding: 0;\n  }\n"]))),af=dr.div(yh||(yh=o(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transition: transform 0.7s cubic-bezier(0.4,0.2,0.2,1);\n  transform-style: preserve-3d;\n  ","\n"])),e=>{let{isflipped:t}=e;return t&&"transform: rotateY(180deg);"}),sf=dr.div(wh||(wh=o(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  backface-visibility: hidden;\n  border-radius: 24px;\n  background: linear-gradient(135deg, rgba(30,30,40,0.85) 0%, rgba(76,28,140,0.13) 100%), rgba(76, 28, 140, 0.15);\n  border: 3px solid #FFD700;\n  box-shadow: \n    0 0 20px 0 rgba(255,215,0,0.2),\n    0 0 40px 0 rgba(255,215,0,0.1),\n    inset 0 1px 0 rgba(255,215,0,0.15);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 2rem 2rem 2rem;\n"]))),lf=dr(sf)(bh||(bh=o([""]))),cf=dr(sf)(_h||(_h=o(["\n  transform: rotateY(180deg);\n"]))),uf=dr.button(vh||(vh=o(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: none;\n  border: none;\n  color: white;\n  font-size: 24px;\n  cursor: pointer;\n  z-index: 1;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),df=dr.div(Eh||(Eh=o(["\n  font-size: 6rem;\n  margin-bottom: 2rem;\n"]))),hf=dr.video(Sh||(Sh=o(["\n  width: 200px;\n  height: 200px;\n  object-fit: cover;\n  border-radius: 16px;\n  margin-bottom: 2rem;\n"]))),ff=dr.h2(Ch||(Ch=o(["\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: ",";\n  margin-bottom: 1rem;\n  text-align: center;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),pf=dr.div(Ah||(Ah=o(["\n  font-size: 1.1rem;\n  color: #FFD700;\n  margin-top: 2rem;\n  text-align: center;\n"]))),gf=dr.div(xh||(xh=o(["\n  margin-top: 0.8rem;\n  color: ",";\n  font-size: 1.2rem;\n  text-align: center;\n  line-height: 1.6;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),mf=dr.span(Ih||(Ih=o(["\n  color: #FFD700;\n  font-weight: 600;\n"]))),yf=dr.div(Th||(Th=o(["\n  margin-top: 1rem;\n  color: ",";\n  font-size: 1.1rem;\n  text-align: center;\n  line-height: 1.8;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),wf=(dr.div(Rh||(Rh=o(["\n  font-size: 1rem;\n  color: ",";\n  margin-top: 1rem;\n  text-align: center;\n  line-height: 1.6;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),e=>{let{item:n,isOpen:r,onClose:i}=e;const{equipTheme:o,userProgress:a}=ya(),[s,l]=(0,t.useState)(!1),c=$();if(!r||!n)return null;const u=Ph[n.name]||{obtained:"Scanned QR at Papillon Store",date:"March 2025",location:"NYC",season:"Spring 2025"},d=e=>{switch(e.id){case"first_scan":return a.totalScans;case"quests":return a.totalQuests;case"items":return a.totalItems;case"wings":return a.totalWings;default:return 0}},h=n.preview_mp4&&"3d_model"===n.file_type;return(0,pr.jsxs)(rf,{onClick:e=>{e.target===e.currentTarget&&i()},children:[(0,pr.jsx)(uf,{onClick:i,"aria-label":"Close",children:"\xd7"}),(0,pr.jsx)(of,{onClick:e=>e.stopPropagation(),children:(0,pr.jsxs)(af,{isflipped:s,children:[(0,pr.jsxs)(lf,{onClick:()=>l(!0),style:"themes"===n.category?{background:n.gradient}:{},children:[h?(0,pr.jsx)(hf,{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:n.preview_mp4}):(0,pr.jsxs)(df,{style:{position:"relative"},children:[bf(n.category,n.item_type,n),"themes"===n.category&&!n.unlocked&&(0,pr.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"2rem",color:"#fff",textShadow:"0 0 8px rgba(0,0,0,0.8)"},children:"\ud83d\udd12"})]}),(0,pr.jsx)(ff,{children:n.name}),(0,pr.jsxs)(gf,{children:[n.rarity.charAt(0).toUpperCase()+n.rarity.slice(1)," \u2022 ","physical_item"===n.item_type?"Physical":"Digital"]}),"themes"===n.category?(0,pr.jsx)(yf,{children:n.description}):(0,pr.jsxs)(gf,{children:["#",n.mint_number]}),"themes"===n.category&&n.equipped&&(0,pr.jsx)("div",{style:{color:"#FFD700",marginTop:"1rem",fontWeight:"bold"},children:"\u2713 Currently Equipped"}),(0,pr.jsx)(pf,{children:"Tap to flip"})]}),(0,pr.jsxs)(cf,{onClick:()=>l(!1),children:["themes"===n.category?(0,pr.jsxs)(pr.Fragment,{children:[console.log("Modal item:",{name:n.name,unlocked:n.unlocked,equipped:n.equipped,requirements:n.requirements}),(0,pr.jsx)(ff,{children:"Unlock Requirements"}),(0,pr.jsx)(gf,{children:(0,pr.jsx)("div",{style:{textAlign:"left",lineHeight:"2"},children:(n.requirements||[]).map((e,t)=>(0,pr.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",color:e.completed?"#10B981":"#fff"},children:[(0,pr.jsx)("span",{style:{marginRight:"12px",fontSize:"1.2rem"},children:e.completed?"\u2705":"\u2b55"}),e.text,e.target&&(0,pr.jsxs)("span",{style:{marginLeft:"8px",fontSize:"0.9rem",opacity:.7,color:e.completed?"#10B981":"#fff"},children:["(",d(e),"/",e.target,")"]})]},t))})}),n.unlocked?(0,pr.jsx)("div",{style:{marginTop:"2rem",textAlign:"center"},children:(0,pr.jsx)("button",{onClick:e=>{e.stopPropagation(),(async()=>{"themes"===n.category&&n.unlocked&&await o(n.item_id)&&(i(),c("/passport"))})()},style:{background:"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)",color:"#000",border:"none",borderRadius:"12px",padding:"16px 32px",fontWeight:"bold",fontSize:"1.1rem",cursor:"pointer",boxShadow:"0 4px 12px rgba(255, 176, 0, 0.3)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 16px rgba(255, 176, 0, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 12px rgba(255, 176, 0, 0.3)"},children:"\ud83c\udfa8 Equip Theme"})}):(0,pr.jsx)(yf,{style:{color:"#ff6b6b",marginTop:"1rem"},children:"Complete the requirements above to unlock this theme!"})]}):(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(ff,{children:"How You Earned This"}),(0,pr.jsxs)(gf,{children:[(0,pr.jsxs)("div",{children:[(0,pr.jsx)(mf,{children:"Obtained:"})," ",u.obtained]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)(mf,{children:"Date:"})," ",u.date]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)(mf,{children:"Location:"})," ",u.location]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)(mf,{children:"Season:"})," ",u.season]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)(mf,{children:"WNGS:"})," +",n.wings_earned]})]})]}),(0,pr.jsx)(pf,{children:"Tap to flip back"})]})]})})]})}),bf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={wallpapers:"\ud83d\uddbc\ufe0f",tickets:"\ud83c\udf9f\ufe0f",posters:"\ud83d\uddbc\ufe0f",themes:"\ud83c\udfa8"};return"physical_item"===t?{jackets:"\ud83e\udde5",tops:"\ud83d\udc55",bottoms:"\ud83d\udc56",headwear:"\ud83e\udde2",accessories:"\u26d3\ufe0f",footwear:"\ud83d\udc5f"}[e]||"\ud83d\udc55":"themes"===e&&null!==n&&void 0!==n&&n.icon?n.icon:r[e]||"\ud83d\udc8e"},_f=e=>({wallpapers:"Wallpapers",themes:"Themes",jackets:"Jackets",tops:"Tops",bottoms:"Bottoms",headwear:"Headwear",accessories:"Accessories",footwear:"Footwear",tickets:"Tickets",posters:"Posters"}[e]||e.charAt(0).toUpperCase()+e.slice(1)),vf=()=>{const{ownedThemes:e,equippedTheme:n,equipTheme:r,checkThemeOwnership:i,getThemeRequirements:o,userProgress:a}=ya(),{getRewardById:s,getLimitedEditionRewards:l}=vc(),[c,u]=(0,t.useState)("all"),[d,h]=(0,t.useState)("all"),[f,p]=(0,t.useState)([]),[g,m]=(0,t.useState)(!0),[y,w]=(0,t.useState)(null),[b,_]=(0,t.useState)(null),[v,E]=(0,t.useState)(!1);$();(0,t.useEffect)(()=>{(async()=>{try{console.log("Getting current user...");const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Auth timeout")),3e3)),t=kh.auth.getUser(),{data:{user:n}}=await Promise.race([t,e]);console.log("User auth result:",n?"Authenticated":"Not authenticated"),w(n),n?await S(n.id):(console.log("No authenticated user, showing empty state"),p([]),m(!1))}catch(e){console.error("Error getting user:",e),console.log("Auth error, showing empty state"),p([]),m(!1)}})()},[]);const S=async e=>{try{m(!0),console.log("Loading items for user:",e);const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Database query timeout")),5e3)),n=kh.from("user_closet").select("*").eq("user_id",e).order("earned_date",{ascending:!1}),{data:r,error:i}=await Promise.race([n,t]);if(i)throw console.error("Database error:",i),i;console.log("Database query successful, items found:",(null===r||void 0===r?void 0:r.length)||0),p(r||[])}catch(t){console.error("Error loading closet items:",t),console.log("Error occurred, showing empty state"),p([])}finally{m(!1)}},C=[...f,...Object.entries(Tr).map(t=>{let[r,a]=t;const s=o(r),l=i(r);return console.log("Theme ".concat(r,":"),{isUnlocked:l,ownedThemes:e,requirements:s}),{id:"theme-".concat(r),item_type:"digital_collectible",item_id:r,name:a.name,rarity:"epic",category:"themes",gradient:a.gradient,icon:"\ud83c\udfa8",description:(null===s||void 0===s?void 0:s.description)||"",requirements:(null===s||void 0===s?void 0:s.requirements)||[],unlocked:!0,equipped:n===r,earned_date:"2025-03-01",earned_via:"unlock",wings_earned:0}})],A=C.map(e=>{var t,n;const r=s(e.reward_id||e.item_id),i=null===r||void 0===r?void 0:r.limitedEdition;return(0,wr.A)((0,wr.A)({},e),{},{isLimitedEdition:i,limitedEditionConfig:null===r||void 0===r?void 0:r.limitedEdition,exclusivityLevel:(null===r||void 0===r||null===(t=r.limitedEdition)||void 0===t?void 0:t.exclusivityLevel)||"limited",totalSupply:null===r||void 0===r||null===(n=r.limitedEdition)||void 0===n?void 0:n.totalSupply,staticReward:r})}),x=A.filter(e=>("physical"!==c||"physical_item"===e.item_type)&&(("digital"!==c||"digital_collectible"===e.item_type)&&(!("limited"===c&&!e.isLimitedEdition)&&("all"===d||e.category===d)))),I=A.filter(e=>e.isLimitedEdition),T={total:I.length,byExclusivity:I.reduce((e,t)=>{const n=t.exclusivityLevel;return e[n]=(e[n]||0)+1,e},{}),totalSupply:I.reduce((e,t)=>e+(t.totalSupply||0),0),averageRarity:I.length>0?I.reduce((e,t)=>e+(t.totalSupply||0),0)/I.length:0},R={total:C.length,physical:C.filter(e=>"physical_item"===e.item_type).length,digital:C.filter(e=>"digital_collectible"===e.item_type).length,limited:I.length,legendary:C.filter(e=>"legendary"===e.rarity).length,epic:C.filter(e=>"epic"===e.rarity).length};return g?(0,pr.jsxs)(Nh,{children:[(0,pr.jsx)(Dh,{children:"My Closet"}),(0,pr.jsx)("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading your collection..."})]}):(0,pr.jsxs)(Nh,{children:[(0,pr.jsx)(Dh,{children:"My Closet"}),(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)(qh,{onClick:()=>E(!0),children:(0,pr.jsx)("span",{className:"stats-count",children:R.total})}),v&&(0,pr.jsx)(Xh,{onClick:()=>E(!1),children:(0,pr.jsxs)(Qh,{onClick:e=>e.stopPropagation(),children:[(0,pr.jsxs)(Zh,{children:[(0,pr.jsx)("h2",{children:"Collection Stats"}),(0,pr.jsx)(Kh,{onClick:()=>E(!1),children:"\xd7"})]}),(0,pr.jsxs)(Jh,{children:[(0,pr.jsxs)($h,{children:[(0,pr.jsx)(ef,{children:"Total Items"}),(0,pr.jsx)(tf,{children:R.total})]}),(0,pr.jsxs)($h,{children:[(0,pr.jsx)(ef,{children:"Physical"}),(0,pr.jsx)(tf,{children:R.physical})]}),(0,pr.jsxs)($h,{children:[(0,pr.jsx)(ef,{children:"Digital"}),(0,pr.jsx)(tf,{children:R.digital})]}),(0,pr.jsxs)($h,{children:[(0,pr.jsx)(ef,{children:"Limited Edition"}),(0,pr.jsx)(tf,{children:R.limited})]}),(0,pr.jsxs)($h,{children:[(0,pr.jsx)(ef,{children:"Legendary"}),(0,pr.jsx)(tf,{children:R.legendary})]}),(0,pr.jsxs)($h,{children:[(0,pr.jsx)(ef,{children:"Epic"}),(0,pr.jsx)(tf,{children:R.epic})]})]})]})}),T.total>0&&(0,pr.jsxs)(nf,{children:[(0,pr.jsx)("h3",{children:"Limited Edition Collection"}),(0,pr.jsxs)("div",{className:"stats-grid",children:[(0,pr.jsxs)("div",{className:"stat-item",children:[(0,pr.jsx)("div",{className:"label",children:"Total Limited Items"}),(0,pr.jsx)("div",{className:"value",children:T.total})]}),(0,pr.jsxs)("div",{className:"stat-item",children:[(0,pr.jsx)("div",{className:"label",children:"Total Supply"}),(0,pr.jsx)("div",{className:"value",children:T.totalSupply.toLocaleString()})]}),(0,pr.jsxs)("div",{className:"stat-item",children:[(0,pr.jsx)("div",{className:"label",children:"Avg. Rarity"}),(0,pr.jsx)("div",{className:"value",children:Math.round(T.averageRarity)})]})]}),(0,pr.jsx)("div",{className:"exclusivity-breakdown",children:Object.entries(T.byExclusivity).map(e=>{let[t,n]=e;return(0,pr.jsx)(yd,{exclusivityLevel:t,size:"small",showIcon:!1},t)})})]}),(0,pr.jsxs)(Oh,{children:[(0,pr.jsx)(Lh,{type:"main",active:"all"===c,onClick:()=>{u("all"),h("all")},children:"All Items"}),(0,pr.jsx)(Lh,{type:"main",active:"physical"===c,onClick:()=>{u("physical"),h("all")},children:"Physical"}),(0,pr.jsx)(Lh,{type:"main",active:"digital"===c,onClick:()=>{u("digital"),h("all")},children:"Digital"}),(0,pr.jsx)(Lh,{type:"main",active:"limited"===c,onClick:()=>{u("limited"),h("all")},children:"Limited Edition"})]}),(0,pr.jsxs)(Mh,{children:[(0,pr.jsx)(Lh,{type:"sub",active:"all"===d,onClick:()=>h("all"),children:"All Categories"}),[...new Set(C.filter(e=>"physical"===c?"physical_item"===e.item_type:"digital"!==c||"digital_collectible"===e.item_type).map(e=>e.category))].sort().map(e=>(0,pr.jsx)(Lh,{type:"sub",active:d===e,onClick:()=>h(e),children:_f(e)},e))]}),x.length>0?(0,pr.jsx)(jh,{children:x.map(e=>(0,pr.jsxs)(Fh,{rarity:e.rarity,isLimitedEdition:e.isLimitedEdition,onClick:()=>_(e),style:"themes"===e.category?{background:e.gradient,border:e.equipped?"3px solid #FFD700":"3px solid rgba(255, 255, 255, 0.2)",opacity:e.unlocked?1:.6}:{},children:[e.isLimitedEdition&&(0,pr.jsx)(Vh,{children:"Limited"}),e.mint_number&&(0,pr.jsxs)(Wh,{children:["#",e.mint_number]}),(0,pr.jsxs)(Uh,{children:[(0,pr.jsx)(Bh,{children:e.preview_mp4&&"3d_model"===e.file_type?(0,pr.jsx)(Yh,{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:e.preview_mp4}):(0,pr.jsxs)("div",{style:{fontSize:(e.category,"3rem"),position:"relative"},children:[bf(e.category,e.item_type,e),"themes"===e.category&&!e.unlocked&&(0,pr.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"1.5rem",color:"#fff",textShadow:"0 0 4px rgba(0,0,0,0.8)"},children:"\ud83d\udd12"}),"themes"===e.category&&e.equipped&&(0,pr.jsx)("div",{style:{position:"absolute",top:"-10px",right:"-10px",fontSize:"1rem",color:"#FFD700"},children:"\u2713"})]})}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)(zh,{children:e.name}),(0,pr.jsx)(Hh,{rarity:e.rarity,children:e.rarity}),"themes"===e.category&&e.equipped&&(0,pr.jsx)("div",{style:{color:"#FFD700",fontSize:"0.6rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"\u2713 Equipped"}),"themes"===e.category&&!e.unlocked&&(0,pr.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.6rem",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:"\ud83d\udd12 Locked"})]})]})]},e.id))}):(0,pr.jsx)(Gh,{children:g?(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\u23f3"}),(0,pr.jsx)("div",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:"Loading your closet..."}),(0,pr.jsx)("div",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.6)"},children:"Checking for your Papillon treasures"})]}):"all"===c?(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83d\udc55"}),(0,pr.jsx)("div",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:"Your closet is looking a bit empty..."}),(0,pr.jsx)("div",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.6)"},children:"Start scanning QR codes to collect your first Papillon items!"})]}):(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"\ud83d\udd0d"}),(0,pr.jsxs)("div",{style:{fontSize:"1.2rem",marginBottom:"0.5rem"},children:["No ",c," items found"]}),(0,pr.jsx)("div",{style:{fontSize:"1rem",color:"rgba(255,255,255,0.6)"},children:"Try scanning more QR codes or check other categories"})]})}),(0,pr.jsx)(wf,{item:b,isOpen:!!b,onClose:()=>_(null)})]})]})};var Ef,Sf,Cf,Af,xf,If,Tf,Rf,kf,Pf,Nf,Df,Of,Mf,Lf,jf,Ff,Bf;const Uf=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),zf=dr.div(Ef||(Ef=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.8);\n  backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n  \n  /* Ensure the overlay is clickable */\n  pointer-events: auto;\n"]))),Hf=dr(Gr)(Sf||(Sf=o(["\n  max-width: 500px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  pointer-events: auto;\n"]))),Wf=dr.div(Cf||(Cf=o(["\n  padding: 32px 32px 24px 32px;\n  border-bottom: 3px solid ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),Vf=dr.h2(Af||(Af=o(["\n  font-family: ",";\n  color: ",";\n  margin: 0 0 24px 0;\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontSize.h2},e=>{let{theme:t}=e;return t.typography.fontWeight.bold}),Yf=dr.div(xf||(xf=o(["\n  display: flex;\n  gap: 18px;\n  flex-wrap: wrap;\n"]))),Gf=dr.button(If||(If=o(["\n  padding: 12px 20px;\n  border: 3px solid ",";\n  background: ",";\n  color: ",";\n  border-radius: 20px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n  cursor: pointer;\n  transition: all "," ",";\n\n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n"])),e=>{let{$active:t,theme:n}=e;return n.colors.accent.gold},e=>{let{$active:t,theme:n}=e;return t?n.colors.accent.gold:"transparent"},e=>{let{$active:t,theme:n}=e;return t?n.colors.background:n.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.typography.fontSize.small},e=>{let{theme:t}=e;return t.typography.fontWeight.medium},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.effects.neonGlow}),qf=dr.div(Tf||(Tf=o(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 32px 32px 32px;\n"]))),Xf=dr.div(Rf||(Rf=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),Qf=dr.div(kf||(kf=o(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.effects.neonGlow}),Zf=dr.div(Pf||(Pf=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{$type:t,theme:n}=e;switch(t){case"scan":default:return n.colors.accent.purple;case"quest":return n.colors.accent.gold;case"event":return n.colors.accent.pink;case"daily":return n.colors.accent.green;case"referral":return n.colors.accent.cyan}}),Kf=dr.div(Nf||(Nf=o(["\n  flex: 1;\n"]))),Jf=dr.div(Df||(Df=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.body}),$f=dr.div(Of||(Of=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.small}),ep=dr.div(Mf||(Mf=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),tp=dr.div(Lf||(Lf=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),np=dr.div(jf||(jf=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),rp=dr.div(Ff||(Ff=o(["\n  text-align: center;\n  padding: 64px 32px;\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.body}),ip=dr.button(Bf||(Bf=o(["\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: transparent;\n  border: 3px solid ",";\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all "," ",";\n  z-index: 10;\n\n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background}),op=[{key:"all",label:"All",icon:"\ud83d\udccb"},{key:"scan",label:"Scans",icon:"\ud83d\udcf1"},{key:"quest",label:"Quests",icon:"\ud83d\udde1\ufe0f"},{key:"event",label:"Events",icon:"\ud83c\udf89"},{key:"daily",label:"Dailies",icon:"\ud83d\udcc5"},{key:"referral",label:"Referrals",icon:"\ud83d\udc65"}],ap=e=>{let{isOpen:n,onClose:r}=e;const{user:i}=Ur(),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)("all"),[d,h]=(0,t.useState)([]),f=(0,t.useRef)(!1),p=(0,t.useRef)(!1);(0,t.useEffect)(()=>{if(n&&i&&!f.current)g();else if(n&&i&&f.current&&0===d.length)console.log("\ud83d\udd04 Modal opened but no activities, retrying..."),f.current=!1,g();else if(n&&!i){console.log("\ud83d\udc64 No user, showing mock data immediately");const e=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()}];h(e),l(!1)}},[n,i]),(0,t.useEffect)(()=>{d.length>0&&m()},[c,d]),(0,t.useEffect)(()=>{n||(f.current=!1,p.current=!1,h([]),a([]),u("all"))},[n]);const g=(0,t.useCallback)(async()=>{if(p.current)console.log("\ud83d\udd04 Already processing activities, skipping");else{console.log("\ud83d\ude80 Starting fetchAllActivities..."),p.current=!0,l(!0);try{console.log("\ud83d\udd0d Fetching all activities for user:",i.id),console.log("\ud83d\udd0d Supabase configured, attempting database query...");const{data:e,error:t}=await Uf.from("user_activity").select("*").eq("user_id",i.id).order("activity_date",{ascending:!1}).limit(50);if(t)throw t;if(e&&0!==e.length)console.log("\u2705 Database activities loaded:",e.length),h(e),f.current=!0;else{console.log("\ud83d\udcca No database data, using mock activities");const e=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()},{id:3,activity_type:"daily",activity_title:"Daily Login Bonus",activity_description:"Claimed daily login reward",wings_earned:35,activity_date:new Date(Date.now()-864e5).toISOString()},{id:4,activity_type:"referral",activity_title:"Friend Joined",activity_description:"Your friend Alex joined using your referral code",wings_earned:150,activity_date:new Date(Date.now()-1728e5).toISOString()},{id:5,activity_type:"event",activity_title:"Special Event Participation",activity_description:'Participated in "Weekend Warrior" event',wings_earned:150,activity_date:new Date(Date.now()-2592e5).toISOString()},{id:6,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Retail Store Plaza",wings_earned:35,activity_date:new Date(Date.now()-3456e5).toISOString()},{id:7,activity_type:"quest",activity_title:"Weekly Quest Completed",activity_description:'Completed "Explorer Challenge" - visited 5 locations',wings_earned:150,activity_date:new Date(Date.now()-432e6).toISOString()},{id:8,activity_type:"daily",activity_title:"Streak Bonus",activity_description:"7-day login streak achieved!",wings_earned:75,activity_date:new Date(Date.now()-6048e5).toISOString()}];h(e),f.current=!0}}catch(e){console.error("\u274c Error fetching activities:",e),console.log("\ud83d\udd04 Falling back to mock data due to error");const t=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()},{id:3,activity_type:"daily",activity_title:"Daily Login Bonus",activity_description:"Claimed daily login reward",wings_earned:35,activity_date:new Date(Date.now()-864e5).toISOString()},{id:4,activity_type:"referral",activity_title:"Friend Joined",activity_description:"Your friend Alex joined using your referral code",wings_earned:150,activity_date:new Date(Date.now()-1728e5).toISOString()},{id:5,activity_type:"event",activity_title:"Special Event Participation",activity_description:'Participated in "Weekend Warrior" event',wings_earned:150,activity_date:new Date(Date.now()-2592e5).toISOString()},{id:6,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Retail Store Plaza",wings_earned:35,activity_date:new Date(Date.now()-3456e5).toISOString()}];console.log("\ud83d\udcca Setting mock activities:",t.length),h(t),f.current=!0}finally{console.log("\u2705 fetchAllActivities completed, setting loading to false"),l(!1),p.current=!1}}},[i]),m=(0,t.useCallback)(()=>{if(0===d.length)return;console.log("\ud83d\udd0d Filtering activities for:",c);const e="all"===c?d:d.filter(e=>e.activity_type===c);a(e)},[c,d]),y=e=>{const t=new Date(e),n=(new Date-t)/36e5;return n<1?"Just now":n<24?"".concat(Math.floor(n),"h ago"):n<168?"".concat(Math.floor(n/24),"d ago"):t.toLocaleDateString()},w=e=>{const t=op.find(t=>t.key===e);return(null===t||void 0===t?void 0:t.icon)||"\ud83d\udccb"};return n?(0,pr.jsx)(zf,{onClick:r,children:(0,pr.jsxs)(Hf,{onClick:e=>e.stopPropagation(),children:[(0,pr.jsx)(ip,{onClick:e=>{e.stopPropagation(),r()},children:"\xd7"}),(0,pr.jsxs)(Wf,{children:[(0,pr.jsx)(Vf,{children:"Recent Activity"}),(0,pr.jsx)(Yf,{children:op.map(e=>(0,pr.jsxs)(Gf,{$active:c===e.key,onClick:()=>u(e.key),children:[e.icon," ",e.label]},e.key))})]}),(0,pr.jsx)(qf,{children:s?(0,pr.jsx)(rp,{children:"Loading activities..."}):0===o.length?(0,pr.jsx)(rp,{children:"all"===c?"No activity yet. Start scanning QR codes to earn rewards!":"No ".concat(c," activities yet.")}):(0,pr.jsx)(Xf,{children:o.map(e=>(0,pr.jsxs)(Qf,{children:[(0,pr.jsx)(Zf,{$type:e.activity_type,children:w(e.activity_type)}),(0,pr.jsxs)(Kf,{children:[(0,pr.jsx)(Jf,{children:e.activity_title}),e.activity_description&&(0,pr.jsx)($f,{children:e.activity_description})]}),(0,pr.jsxs)(ep,{children:[e.wings_earned>0&&(0,pr.jsxs)(tp,{children:["+",e.wings_earned," WNGS"]}),(0,pr.jsx)(np,{children:y(e.activity_date)})]})]},e.id))})})]})}):null};var sp,lp,cp,up,dp,hp,fp,pp,gp,mp,yp,wp,bp,_p,vp,Ep,Sp,Cp,Ap,xp,Ip,Tp,Rp,kp,Pp,Np,Dp,Op,Mp,Lp,jp,Fp,Bp,Up,zp,Hp,Wp,Vp,Yp,Gp,qp,Xp,Qp,Zp,Kp,Jp,$p,eg;const tg=dr.div(sp||(sp=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 8px 100px 8px;\n  @media (min-width: 900px) {\n    padding: 48px 0 120px 0;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.background}),ng=dr.div(lp||(lp=o(["\n  display: flex;\n  flex-direction: row;\n  gap: 24px;\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto 32px auto;\n"]))),rg="#FFD700",ig=dr(Gr)(cp||(cp=o(["\n  flex: 1;\n  width: 50%;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 0 24px 0;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  cursor: pointer;\n  transition: box-shadow 0.2s, transform 0.2s;\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),rg),og=dr.div(up||(up=o(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.8rem;\n  color: #fff;\n  box-shadow: 0 0 16px 0 #7F3FBF88;\n  margin-bottom: 16px;\n  border: 2.5px solid ",";\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.accent}),ag=dr.div(dp||(dp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin-bottom: 4px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 8px;\n  border-radius: 8px;\n  border: 2px solid transparent;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    border-color: ",";\n    background: rgba(255, 215, 0, 0.1);\n  }\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.colors.accent.gold}),sg=(dr.span(hp||(hp=o(["\n  font-size: 0.9rem;\n  color: ",";\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n  \n  ",":hover & {\n    opacity: 1;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},ag),dr(Gr)(fp||(fp=o(["\n  flex: 1;\n  width: 50%;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  padding: 32px 0 24px 0;\n  transition: box-shadow 0.2s, transform 0.2s;\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),rg)),lg=dr.div(pp||(pp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.3rem;\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent}),cg=(dr.button(gp||(gp=o(["\n  background: ",";\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent}),dr.div(mp||(mp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 2.5rem;\n  font-weight: bold;\n  letter-spacing: 2px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.secondary})),ug=dr(Gr)(yp||(yp=o(["\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto 32px auto;\n  padding: 32px 32px 24px 32px;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  transition: box-shadow 0.2s, transform 0.2s;\n  @media (max-width: 600px) {\n    padding: 20px 8px 16px 8px;\n  }\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),rg),dg=dr.h2(wp||(wp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  text-align: center;\n  letter-spacing: 1px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),hg=(dr.div(bp||(bp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.green},e=>{let{theme:t}=e;return t.typography.fontSize.body},e=>{let{theme:t}=e;return t.typography.fontWeight.bold}),dr.div(_p||(_p=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.body}),dr(ug)(vp||(vp=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 0;\n"]))),dr.div(Ep||(Ep=o(["\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  height: 24px;\n  margin-bottom: 24px;\n  overflow: hidden;\n  width: 100%;\n  max-width: 700px;\n"])),e=>{let{theme:t}=e;return t.colors.glass.background},e=>{let{theme:t}=e;return t.colors.accent.gold}),dr.div(Sp||(Sp=o(["\n  height: 100%;\n  border-radius: 20px;\n  background: ",";\n  width: ","%;\n  transition: width ",";\n"])),e=>{let{color:t,theme:n}=e;return t||n.colors.accent.gold},e=>{let{value:t}=e;return t},e=>{let{theme:t}=e;return t.animation.duration.slow}),dr.div(Cp||(Cp=o(["\n  display: flex;\n  justify-content: center;\n  gap: 32px;\n  margin-top: 24px;\n"]))),dr.div(Ap||(Ap=o(["\n  width: 64px;\n  height: 64px;\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  font-size: 2.2rem;\n  box-shadow: ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n  }\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth}),dr.div(xp||(xp=o(["\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background: rgba(18, 18, 18, 0.75);\n  backdrop-filter: blur(16px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s;\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"])))),fg=dr.div(Ip||(Ip=o(["\n  background: linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(127,63,191,0.13) 100%);\n  border: 2.5px solid ",";\n  border-radius: 22px;\n  box-shadow: 0 8px 40px 0 rgba(255,215,0,0.10), 0 0 32px 0 rgba(127,63,191,0.10);\n  padding: 2.2rem 1.5rem 1.5rem 1.5rem;\n  min-width: 320px;\n  max-width: 95vw;\n  width: 100%;\n  max-width: 400px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  @media (max-width: 500px) {\n    min-width: 0;\n    padding: 1.2rem 0.7rem 1.2rem 0.7rem;\n  }\n"])),rg),pg=dr.h2(Tp||(Tp=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 0.7rem;\n  text-align: center;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),gg=dr.button(Rp||(Rp=o(["\n  width: 100%;\n  max-width: 320px;\n  margin-bottom: 1rem;\n  padding: 0.85rem 0;\n  border-radius: 12px;\n  border: 2px solid ",";\n  background: transparent;\n  color: #fff;\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.08rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.18s, color 0.18s;\n  &:hover, &:focus {\n    background: ",";\n    color: #000000;\n    outline: none;\n  }\n"])),rg,rg),mg=dr.button(kp||(kp=o(["\n  position: absolute;\n  top: 18px;\n  right: 18px;\n  background: none;\n  border: none;\n  color: #fff;\n  font-size: 1.5rem;\n  cursor: pointer;\n  z-index: 10;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n  &:hover {\n    background: rgba(255,255,255,0.08);\n  }\n"]))),yg=(dr.div(Pp||(Pp=o(["\n  width: 120px;\n  height: 120px;\n  background: #fff;\n  border-radius: 16px;\n  margin: 0 auto 1rem auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.5rem;\n  color: #000000;\n  box-shadow: 0 2px 12px 0 rgba(255,215,0,0.10);\n"]))),dr.div(Np||(Np=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"])))),wg=dr.div(Dp||(Dp=o(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n"]))),bg=dr.div(Op||(Op=o(["\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  background: ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent.purple}),_g=dr.div(Mp||(Mp=o(["\n  flex: 1;\n"]))),vg=dr.div(Lp||(Lp=o(["\n  color: ",";\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),Eg=dr.div(jp||(jp=o(["\n  color: ",";\n  font-size: 0.875rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Sg=dr.div(Fp||(Fp=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 0.25rem;\n"]))),Cg=dr.div(Bp||(Bp=o(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),e=>{let{theme:t}=e;return t.colors.accent.green}),Ag=dr.div(Up||(Up=o(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),xg=dr.button(zp||(zp=o(["\n  background: linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  color: #000;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  font-size: 1rem;\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);\n  margin-top: 24px;\n  width: 100%;\n  max-width: 200px;\n  align-self: center;\n  box-shadow: \n    0 0 20px 0 rgba(255,176,0,0.2),\n    0 0 40px 0 rgba(255,176,0,0.1);\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 30px 0 rgba(255,176,0,0.4),\n      0 0 60px 0 rgba(255,176,0,0.2);\n  }\n  \n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n"]))),Ig=dr.div(Hp||(Hp=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),Tg=dr.div(Wp||(Wp=o(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.effects.neonGlow}),Rg=dr.div(Vp||(Vp=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{$type:t,theme:n}=e;switch(t){case"scan":default:return n.colors.accent.purple;case"purchase":return n.colors.accent.pink;case"daily":return n.colors.accent.green}}),kg=dr.div(Yp||(Yp=o(["\n  flex: 1;\n"]))),Pg=dr.div(Gp||(Gp=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.body}),Ng=dr.div(qp||(qp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.small}),Dg=dr.div(Xp||(Xp=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),Og=dr.div(Qp||(Qp=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.green},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),Mg=dr.div(Zp||(Zp=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{$positive:t,theme:n}=e;return t?n.colors.accent.gold:n.colors.accent.pink},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),Lg=dr.div(Kp||(Kp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),jg=(dr(gg)(Jp||(Jp=o(["\n  margin-top: 0.5rem;\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n"]))),dr(gg)($p||($p=o(["\n  background: ",";\n  color: #000;\n  margin-top: 1rem;\n\n  &:hover {\n    background: #FFC72C;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}));dr.button(eg||(eg=o(["\n  background: ",";\n  color: ",";\n  border: none;\n  border-radius: 8px;\n  padding: 12px 24px;\n  font-family: ",";\n  font-size: 1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 0 15px ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.primary},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.primary});function Fg(e){let{open:n,onClose:r,user:i}=e;const{referralCode:o,generateReferralLink:a,shareReferral:s,isBirthdayLaunch:l}=yc(),[c,u]=(0,t.useState)(!1);return n?(0,pr.jsx)(hg,{onClick:e=>{e.target===e.currentTarget&&r()},children:(0,pr.jsxs)(fg,{children:[(0,pr.jsx)(mg,{"aria-label":"Close",onClick:r,children:"\xd7"}),(0,pr.jsx)(pg,{children:"Share Your Referral"}),o?(0,pr.jsxs)("div",{style:{width:"100%",textAlign:"center",marginTop:"0.5rem"},children:[(0,pr.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[(0,pr.jsx)("div",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Your Referral Code"}),(0,pr.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#FFD700",fontFamily:"monospace",letterSpacing:"3px",marginBottom:"0.5rem"},children:o}),(0,pr.jsxs)("div",{style:{color:"#aaa",fontSize:"0.8rem"},children:["Each friend earns you ",l?"100":"50"," WINGS"]})]}),(0,pr.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,pr.jsx)(gg,{onClick:async()=>{o&&await s(o)},children:"\ud83d\udcf1 Share with Friends"}),(0,pr.jsx)(gg,{onClick:async()=>{if(!o)return;(await s(o)).success&&(u(!0),setTimeout(()=>u(!1),2e3))},children:c?"\u2705 Copied!":"\ud83d\udccb Copy Referral Link"}),(0,pr.jsx)(gg,{onClick:()=>window.open("https://www.instagram.com/","_blank"),style:{background:"linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D)"},children:"\ud83d\udcf8 Share to Instagram Story"})]}),l&&(0,pr.jsx)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",fontSize:"0.85rem",color:"#FFD700"},children:"\ud83c\udf82 Birthday Launch Special: DOUBLE REWARDS until Sept 14th!"}),(0,pr.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",fontSize:"0.85rem",color:"#10B981"},children:["\ud83d\udca1 Friends get ",l?"50":"25"," WINGS for joining + ",l?"50":"25"," more for their first scan!"]})]}):(0,pr.jsx)("div",{style:{textAlign:"center",color:"#aaa"},children:"Loading your referral code..."})]})}):null}const Bg=function(){var e,n,r,i;const[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(!0),f=$(),{user:p,isAdmin:g,profile:m}=Ur(),{referralCode:y,referralStats:w,referralHistory:b,loading:_,shareReferral:v,generateReferralLink:E}=yc();(0,t.useEffect)(()=>{console.log("\ud83c\udfaf ProfileScreen: referralCode updated:",y),console.log("\ud83c\udfaf ProfileScreen: referralLoading:",_),console.log("\ud83c\udfaf ProfileScreen: user:",null===p||void 0===p?void 0:p.id)},[y,_,p]);const S=function(){var e=(0,t.useContext)(nr);if(!e)throw yn(18);return e}();return(0,t.useEffect)(()=>{var e,t;if(p&&m)u({name:m.username||(null===(e=p.user_metadata)||void 0===e?void 0:e.username)||(null===(t=p.email)||void 0===t?void 0:t.split("@")[0]),email:p.email,avatar:m.avatar_url||null,joinDate:new Date(p.created_at).toLocaleDateString(),totalWings:m.wings_balance||0,level:Math.floor((m.wings_balance||0)/100)+1,achievements:0,items:0}),h(!1);else if(p){var n,r;u({name:(null===(n=p.user_metadata)||void 0===n?void 0:n.username)||(null===(r=p.email)||void 0===r?void 0:r.split("@")[0])||"User",email:p.email,avatar:null,joinDate:new Date(p.created_at).toLocaleDateString(),totalWings:0,level:1,achievements:0,items:0}),h(!1)}},[p,m]),S.colors.secondary,S.colors.accent,Math.min(60,100),(0,pr.jsxs)(tg,{children:[(0,pr.jsxs)(ng,{children:[(0,pr.jsxs)(ig,{onClick:()=>f("/settings"),children:[(0,pr.jsx)(og,{children:null!==c&&void 0!==c&&c.avatar?(0,pr.jsx)("img",{src:c.avatar,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):null!==p&&void 0!==p&&null!==(e=p.user_metadata)&&void 0!==e&&e.username?p.user_metadata.username.charAt(0).toUpperCase():null!==p&&void 0!==p&&p.email?p.email.charAt(0).toUpperCase():"U"}),(0,pr.jsx)(ag,{children:(null===p||void 0===p||null===(n=p.user_metadata)||void 0===n?void 0:n.username)||(null===p||void 0===p||null===(r=p.email)||void 0===r?void 0:r.split("@")[0])||"User"})]}),(0,pr.jsxs)(sg,{children:[(0,pr.jsx)(lg,{children:"WNGS Balance"}),(0,pr.jsx)(cg,{children:(null===c||void 0===c||null===(i=c.totalWings)||void 0===i?void 0:i.toLocaleString())||"0"})]})]}),(0,pr.jsxs)(ug,{style:{display:"flex",flexDirection:"column"},children:[(0,pr.jsx)(dg,{children:"Referral Program"}),(0,pr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,pr.jsxs)("div",{style:{textAlign:"center"},children:[(0,pr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#FFD700"},children:w.totalReferrals}),(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"Total Referrals"})]}),(0,pr.jsxs)("div",{style:{textAlign:"center"},children:[(0,pr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10B981"},children:w.completedReferrals}),(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"Completed"})]}),(0,pr.jsxs)("div",{style:{textAlign:"center"},children:[(0,pr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#FFB000"},children:w.totalWingsEarned}),(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"WINGS Earned"})]})]}),(0,pr.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[(0,pr.jsx)("div",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"0.5rem"},children:"Your Referral Code"}),_?(0,pr.jsxs)("div",{style:{fontSize:"1.2rem",color:"#aaa",padding:"1rem"},children:["Generating your code...",(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"0.5rem"},children:"This may take a few seconds..."})]}):y?(0,pr.jsxs)(pr.Fragment,{children:[(0,pr.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#FFD700",fontFamily:"monospace",letterSpacing:"2px"},children:y}),(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa",marginTop:"0.5rem"},children:"Share this code to earn 50 WINGS per completed referral"})]}):(0,pr.jsx)("div",{style:{fontSize:"1rem",color:"#e74c3c",padding:"1rem"},children:"Failed to generate referral code. Please refresh the page."})]}),b.length>0?(0,pr.jsxs)(yg,{children:[(0,pr.jsx)("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"1rem",color:"#fff"},children:"Recent Referrals"}),b.slice(0,3).map(e=>(0,pr.jsxs)(wg,{children:[(0,pr.jsx)(bg,{children:"\ud83d\udc65"}),(0,pr.jsxs)(_g,{children:[(0,pr.jsx)(vg,{children:e.refereeName}),(0,pr.jsxs)(Eg,{children:["Joined ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,pr.jsxs)(Sg,{children:[(0,pr.jsx)(Cg,{style:{color:"completed"===e.status?"#10B981":"#FFB000"},children:"completed"===e.status?"Completed":"Pending"}),e.rewardGiven&&e.wingsEarned>0&&(0,pr.jsxs)(Ag,{children:["+",e.wingsEarned," WINGS"]})]})]},e.id)),b.length>3&&(0,pr.jsxs)("div",{style:{textAlign:"center",marginTop:"1rem",color:"#aaa",fontSize:"0.9rem"},children:["+",b.length-3," more referrals"]})]}):(0,pr.jsx)("div",{style:{textAlign:"center",color:"#aaa",marginBottom:"1rem"},children:"No referrals yet. Share your code to start earning!"}),(0,pr.jsx)(xg,{onClick:()=>{y?v(y):(console.log("\u274c No referral code available to share"),alert("Referral code not ready yet. Please wait a moment and try again."))},disabled:!y,style:{opacity:y?1:.6,cursor:y?"pointer":"not-allowed"},children:_?"Loading...":"Share Referral Code"})]}),(0,pr.jsxs)(ug,{as:"button",onClick:()=>l(!0),style:{cursor:"pointer"},children:[(0,pr.jsx)(dg,{children:"Recent Activity"}),(0,pr.jsx)(Ig,{children:[{type:"Scan Quest Earn",amount:"+75 WNGS",positive:!0,status:"Completed",date:"Mar 18, 2025"},{type:"Shop Purchase",amount:"-50 WNGS",positive:!1,status:"Completed",date:"Mar 15, 2025"},{type:"Daily Reward",amount:"+35 WNGS",positive:!0,status:"Completed",date:"Mar 14, 2025"}].map((e,t)=>{return(0,pr.jsxs)(Tg,{children:[(0,pr.jsx)(Rg,{$type:(n=e.type,n.includes("Scan")?"scan":n.includes("Purchase")?"purchase":n.includes("Daily")?"daily":"scan"),children:(e=>e.includes("Scan")?"\ud83d\udcf1":e.includes("Purchase")?"\ud83d\uded2":e.includes("Daily")?"\ud83c\udf81":"\ud83d\udcf1")(e.type)}),(0,pr.jsxs)(kg,{children:[(0,pr.jsx)(Pg,{children:e.type}),(0,pr.jsx)(Ng,{children:"Transaction completed successfully"})]}),(0,pr.jsxs)(Dg,{children:[(0,pr.jsx)(Og,{children:e.status}),(0,pr.jsx)(Mg,{$positive:e.positive,children:e.amount}),(0,pr.jsx)(Lg,{children:e.date})]})]},t);var n})}),(0,pr.jsx)("div",{style:{textAlign:"center",marginTop:"24px",color:"#FFD700",fontSize:"0.9rem",fontWeight:"500"},children:"Click to view all activity \u2192"})]}),(0,pr.jsx)(Fg,{open:o,onClose:()=>a(!1),user:p}),(0,pr.jsx)(ap,{isOpen:s,onClose:()=>l(!1)}),g&&(0,pr.jsx)(jg,{onClick:()=>f("/admin"),children:"Admin Dashboard"})]})};var Ug,zg,Hg,Wg,Vg,Yg,Gg,qg,Xg;const Qg=dr.div(Ug||(Ug=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n"]))),Zg=dr.div(zg||(zg=o(["\n  position: relative;\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  overflow: hidden;\n  background: linear-gradient(135deg, #1a1a2e, #16213e);\n  border: 3px solid #FFB000;\n  box-shadow: 0 0 20px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 0 30px rgba(255, 176, 0, 0.5);\n  }\n"]))),Kg=dr.img(Hg||(Hg=o(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 50%;\n"]))),Jg=dr.div(Wg||(Wg=o(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3rem;\n  color: #FFB000;\n  background: linear-gradient(135deg, #1a1a2e, #16213e);\n"]))),$g=dr.div(Vg||(Vg=o(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #FFB000;\n  font-size: 1.5rem;\n  border-radius: 50%;\n"]))),em=dr.button(Yg||(Yg=o(["\n  background: linear-gradient(135deg, #FFB000, #FF8C00);\n  color: #1a1a2e;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 25px;\n  font-weight: 600;\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(255, 176, 0, 0.3);\n\n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(255, 176, 0, 0.4);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n"]))),tm=dr.input(Gg||(Gg=o(["\n  display: none;\n"]))),nm=dr.div(qg||(qg=o(["\n  color: #ff6b6b;\n  font-size: 0.85rem;\n  text-align: center;\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(255, 107, 107, 0.1);\n  border-radius: 8px;\n  border: 1px solid rgba(255, 107, 107, 0.3);\n"]))),rm=dr.div(Xg||(Xg=o(["\n  color: #51cf66;\n  font-size: 0.85rem;\n  text-align: center;\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(81, 207, 102, 0.1);\n  border-radius: 8px;\n  border: 1px solid rgba(81, 207, 102, 0.3);\n"]))),im=e=>{let{userId:n,currentAvatarUrl:r,onAvatarUpdate:i,size:o=120,showButton:a=!0}=e;const[s,l]=(0,t.useState)(r),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),g=(0,t.useRef)();(0,t.useEffect)(()=>{l(r)},[r]);const m=async e=>{try{u(!0),h(""),p("");const t=new Promise((e,t)=>{setTimeout(()=>t(new Error("Upload timeout - please try again")),3e4)});(e=>{if(e.size>5242880)throw new Error("File size must be less than 5MB");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw new Error("Please select a JPEG, PNG, or WebP image")})(e);const r=e.name.split(".").pop(),o="".concat(n,"-").concat(Date.now(),".").concat(r),a="".concat(n,"/").concat(o);console.log("Starting avatar upload...",{fileName:o,filePath:a});const s=(async()=>{const{error:t}=await pi.storage.from("avatars").upload(a,e,{cacheControl:"3600",upsert:!0});if(t)throw console.error("Upload error:",t),new Error(t.message);const{data:r}=pi.storage.from("avatars").getPublicUrl(a);console.log("Avatar uploaded successfully:",r.publicUrl);const{error:i}=await pi.from("user_profiles").upsert({id:n,avatar_url:r.publicUrl,updated_at:(new Date).toISOString()});if(i)throw console.error("Profile update error:",i),"42501"===i.code?new Error("Permission denied - please contact support"):"23505"===i.code?new Error("Profile already exists - please try again"):new Error("Failed to update profile: ".concat(i.message));return r.publicUrl})(),c=await Promise.race([s,t]);l(c),p("Profile picture updated successfully! \ud83e\udd8b"),i&&i(c),setTimeout(()=>p(""),3e3)}catch(d){console.error("Avatar upload error:",d),h(d.message||"Failed to upload image. Please try again."),setTimeout(()=>h(""),5e3)}finally{u(!1)}};return(0,pr.jsxs)(Qg,{children:[(0,pr.jsxs)(Zg,{style:{width:o,height:o},children:[s?(0,pr.jsx)(Kg,{src:s,alt:"User avatar",onError:()=>l(null)}):(0,pr.jsx)(Jg,{children:"\ud83e\udd8b"}),c&&(0,pr.jsx)($g,{children:"\u23f3"})]}),a&&(0,pr.jsx)(em,{onClick:()=>{var e;null===(e=g.current)||void 0===e||e.click()},disabled:c,children:c?"Uploading...":"Change Picture"}),(0,pr.jsx)(tm,{ref:g,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:e=>{const t=e.target.files[0];t&&m(t),e.target.value=""}}),d&&(0,pr.jsx)(nm,{children:d}),f&&(0,pr.jsx)(rm,{children:f})]})};var om,am,sm,lm,cm,um,dm,hm,fm,pm,gm,mm,ym;const wm=dr.div(om||(om=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 48px 8px 120px 8px;\n"])),e=>{let{theme:t}=e;return t.colors.background}),bm=dr.div(am||(am=o(["\n  width: 100%;\n  max-width: 480px;\n  margin: 0 auto;\n"]))),_m=dr(Gr)(sm||(sm=o(["\n  margin-bottom: 24px;\n  border-radius: 18px;\n  overflow: hidden;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 20px 0 rgba(255,215,0,0.2),\n    0 0 40px 0 rgba(255,215,0,0.1),\n    inset 0 1px 0 rgba(255,215,0,0.15);\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFD700"}),vm=dr.button(lm||(lm=o(["\n  width: 100%;\n  background: none;\n  border: none;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24px 28px;\n  font-size: 1.25rem;\n  font-family: ",";\n  color: ",";\n  font-weight: 700;\n  cursor: pointer;\n  transition: background 0.2s;\n  &:hover, &:focus {\n    background: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.colors.glass}),Em=dr.div(cm||(cm=o(["\n  padding: 0 28px 24px 28px;\n  background: none;\n  animation: fadeIn 0.3s;\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-8px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n"]))),Sm=dr.div(um||(um=o(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 18px;\n  gap: 18px;\n"]))),Cm=dr.label(dm||(dm=o(["\n  font-size: 1.08rem;\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),Am=dr.input(hm||(hm=o(["\n  font-size: 1.08rem;\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 2px solid ",";\n  background: ",";\n  color: ",";\n  transition: all 0.2s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n    box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);\n  }\n  \n  &:hover {\n    border-color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.glass},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.accent.gold}),xm=dr.input.attrs({type:"checkbox"})(fm||(fm=o(["\n  width: 40px;\n  height: 22px;\n  accent-color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent}),Im=dr.button(pm||(pm=o(["\n  background: ",";\n  color: ",";\n  border: none;\n  border-radius: 8px;\n  padding: 8px 18px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s;\n  &:hover, &:focus {\n    background: ",";\n    outline: none;\n  }\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.gradients.gold}),Tm=(dr.div(gm||(gm=o(["\n  display: flex;\n  gap: 14px;\n  margin-top: 12px;\n  margin-bottom: 6px;\n"]))),dr.button(mm||(mm=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  border: 3px solid transparent;\n  background: ",";\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  cursor: pointer;\n  outline: none;\n  transition: border 0.2s, box-shadow 0.2s, transform 0.15s;\n  position: relative;\n  &:hover, &:focus {\n    border-color: ",";\n    transform: scale(1.06);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n  ","\n"])),e=>{let{gradient:t}=e;return t},e=>{let{theme:t}=e;return t.colors.highlight},e=>{let{selected:t,theme:n}=e;return t&&"\n    border-color: ".concat(n.colors.highlight,";\n    box-shadow: \n      0 0 24px 0 rgba(255,215,0,0.4),\n      0 0 48px 0 rgba(255,215,0,0.2),\n      inset 0 1px 0 rgba(255,215,0,0.3);\n    &::after {\n      content: '';\n      position: absolute;\n      top: 6px; right: 6px;\n      width: 12px; height: 12px;\n      border-radius: 50%;\n      background: ").concat(n.colors.highlight,";\n      box-shadow: 0 0 8px 2px ").concat(n.colors.highlight,"55;\n    }\n  ")}),dr.div(ym||(ym=o(["\n  font-size: 0.82rem;\n  color: ",";\n  text-align: center;\n  margin-top: 2px;\n  max-width: 60px;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),e=>{let{themeMode:n="dark",onToggleTheme:r=()=>{},gradientKey:i="monarch",onGradientChange:o=()=>{}}=e;const{user:a,signOut:s,profile:l,refreshProfile:c}=Ur(),{ownedThemes:u,equippedTheme:d,equipTheme:h,checkThemeOwnership:f}=ya(),[p,g]=(0,t.useState)("account"),[m,y]=(0,t.useState)(""),[w,b]=(0,t.useState)(""),[_,v]=(0,t.useState)(!1),[E,S]=(0,t.useState)(!0),[C,A]=(0,t.useState)(null);(0,t.useEffect)(()=>{if(a){var e,t;const n=(null===(e=a.user_metadata)||void 0===e?void 0:e.username)||(null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"User";y(n),b(n),null!==l&&void 0!==l&&l.avatar_url?A(l.avatar_url):A(null),x()}},[a,l]);const x=async()=>{if(a&&!l)try{var e,t;console.log("Ensuring profile exists for user:",a.id);const{error:n}=await pi.from("user_profiles").upsert({id:a.id,display_name:(null===(e=a.user_metadata)||void 0===e?void 0:e.username)||(null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"User",email:a.email,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()});n?console.error("Error creating profile:",n):(console.log("Profile created successfully"),await c())}catch(n){console.error("Error ensuring profile exists:",n)}},I=$(),T=async()=>{try{console.log("\ud83d\udd04 Sign out button clicked!"),console.log("User before sign out:",a),console.log("Sign out function:",s);const e=new Promise((e,t)=>{setTimeout(()=>t(new Error("Sign out timeout - network issue")),5e3)});if(s){console.log("Using useAuth signOut with timeout...");const t=await Promise.race([s(),e]);console.log("Sign out result:",t),await Mr(),console.log("Sign out successful, navigating to home..."),I("/")}else{console.log("useAuth signOut not available, trying direct Supabase...");const{error:t}=await Promise.race([pi.auth.signOut(),e]);if(t)throw t;await Mr(),console.log("Sign out successful, navigating to home..."),I("/")}}catch(e){if(console.error("\u274c Error signing out:",e),e.message.includes("timeout"))return console.log("Network timeout detected, forcing comprehensive cleanup..."),void Lr();console.log("Sign out failed, attempting comprehensive cleanup...");try{await Mr(),(()=>{console.log("\ud83d\udd04 Force reloading page to clear all state...");try{localStorage.clear(),sessionStorage.clear()}catch(e){console.log("\u26a0\ufe0f Final storage clear failed:",e)}window.location.href="/"})()}catch(t){console.error("Cleanup failed, using emergency cleanup:",t),Lr()}}};return(0,pr.jsx)(wm,{children:(0,pr.jsxs)(bm,{children:[(0,pr.jsxs)(_m,{children:[(0,pr.jsxs)(vm,{"aria-expanded":"account"===p,onClick:()=>g("account"===p?"":"account"),children:["Account & Profile",(0,pr.jsx)("span",{children:"account"===p?"\u25b2":"\u25bc"})]}),"account"===p&&(0,pr.jsxs)(Em,{children:[(0,pr.jsxs)(Sm,{children:[(0,pr.jsx)(Cm,{children:"Profile Picture"}),(0,pr.jsx)(im,{userId:null===a||void 0===a?void 0:a.id,currentAvatarUrl:C,onAvatarUpdate:async e=>{A(e),await c()},size:80,showButton:!0})]}),(0,pr.jsxs)(Sm,{children:[(0,pr.jsx)(Cm,{htmlFor:"displayName",children:"Display Name"}),(0,pr.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,pr.jsx)(Am,{id:"displayName",value:m,onChange:e=>y(e.target.value),onKeyDown:e=>{var t;"Enter"===e.key&&_&&m!==w?(e.preventDefault(),null===(t=e.target.nextSibling)||void 0===t||t.click()):"Escape"===e.key&&_&&(e.preventDefault(),y(w),v(!1))},placeholder:"Enter your display name",disabled:!_,style:{borderColor:m!==w?"rgba(255, 215, 0, 0.5)":void 0,boxShadow:m!==w?"0 0 8px rgba(255, 215, 0, 0.2)":void 0,opacity:_?1:.7,cursor:_?"text":"default"}}),(0,pr.jsx)(Im,{type:"button",onClick:async()=>{if(_)if(m!==w)try{const{error:e}=await pi.from("user_profiles").upsert({id:a.id,display_name:m,updated_at:(new Date).toISOString()});if(e)throw e;const{error:t}=await pi.auth.updateUser({data:{username:m}});if(t)throw t;b(m),v(!1),alert("Display name updated successfully!")}catch(e){console.error("Error updating display name:",e),alert("Failed to update display name. Please try again.")}else y(w),v(!1);else v(!0)},style:{padding:"8px 16px",fontSize:"0.9rem",background:_&&m!==w?"rgba(255, 215, 0, 0.3)":"rgba(255, 215, 0, 0.2)",border:_&&m!==w?"1px solid rgba(255, 215, 0, 0.5)":"1px solid rgba(255, 215, 0, 0.3)",color:_&&m!==w?"#000":"#fff",fontWeight:_&&m!==w?"bold":"normal"},disabled:_&&m===w,children:_?m!==w?"Save":"Cancel":"Change"})]})]}),(0,pr.jsxs)(Sm,{children:[(0,pr.jsx)(Cm,{children:"Email"}),(0,pr.jsx)("span",{children:(null===a||void 0===a?void 0:a.email)||"Not logged in"})]}),(0,pr.jsxs)(Sm,{children:[(0,pr.jsx)(Cm,{htmlFor:"emailPref",children:"Email Preferences"}),(0,pr.jsx)(xm,{id:"emailPref",checked:E,onChange:e=>S(e.target.checked)})]}),(0,pr.jsxs)(Sm,{children:[(0,pr.jsx)(Cm,{children:"Password/Security"}),(0,pr.jsx)(Im,{type:"button",children:"Change Password"})]}),a?(0,pr.jsxs)("div",{children:[(0,pr.jsxs)("div",{style:{marginBottom:"1rem",color:"#fff",fontSize:"0.9rem"},children:[(0,pr.jsx)("strong",{children:"Logged in as:"})," ",a.email]}),(0,pr.jsx)(Im,{style:{marginTop:12,width:"100%",background:"rgba(231, 76, 60, 0.2)",borderColor:"rgba(231, 76, 60, 0.3)"},onClick:()=>{console.log("\ud83d\udd04 Sign out button clicked!"),alert("Sign out button clicked!"),T()},children:"Sign Out"})]}):(0,pr.jsx)(Im,{style:{marginTop:12,width:"100%"},onClick:()=>{I("/login")},children:"Sign In"})]})]}),(0,pr.jsxs)(_m,{children:[(0,pr.jsxs)(vm,{"aria-expanded":"theme"===p,onClick:()=>g("theme"===p?"":"theme"),children:["App Experience",(0,pr.jsx)("span",{children:"theme"===p?"\u25b2":"\u25bc"})]}),"theme"===p&&(0,pr.jsx)(Em,{children:(0,pr.jsxs)(Sm,{children:[(0,pr.jsx)(Cm,{children:"Dark Mode"}),(0,pr.jsx)(xm,{type:"checkbox",checked:"dark"===n,onChange:r})]})})]})]})})});var Rm,km,Pm,Nm,Dm,Om,Mm,Lm,jm,Fm,Bm,Um,zm,Hm,Wm,Vm,Ym,Gm,qm,Xm,Qm,Zm,Km,Jm,$m,ey,ty,ny,ry,iy,oy;const ay=dr.div(Rm||(Rm=o(["\n  height: 100vh;\n  overflow: hidden;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 1rem 100px 1rem; /* Added 100px bottom padding */\n  position: relative;\n"])),e=>{var t;let{theme:n}=e;return(null===(t=n.colors)||void 0===t?void 0:t.background)||"#000000"}),sy=(dr.h1(km||(km=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  color: ",";\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),dr.button(Pm||(Pm=o(["\n  position: absolute;\n  top: 2rem;\n  left: 2rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 176, 0, 0.3);\n  border-radius: 12px;\n  color: #FFB000;\n  font-size: 1.2rem;\n  padding: 0.75rem 1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  z-index: 10;\n  \n  &:hover {\n    background: rgba(255, 176, 0, 0.1);\n    border-color: #FFB000;\n    transform: translateY(-2px);\n  }\n"]))),dr.div(Nm||(Nm=o(["\n  background: linear-gradient(135deg, rgba(30,30,40,0.85) 0%, rgba(76,28,140,0.13) 100%), rgba(76, 28, 140, 0.15);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  padding: 2.5rem;\n  margin: 0 auto;\n  max-width: 500px;\n  width: 100%;\n  max-height: 85vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: \n    0 0 20px 0 rgba(255,176,0,0.2),\n    0 0 40px 0 rgba(255,176,0,0.1),\n    inset 0 1px 0 rgba(255,176,0,0.15);\n  position: relative;\n  \n  /* Book spine effect */\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 8px;\n    background: linear-gradient(180deg, #FFB000 0%, #FF9F1C 100%);\n    border-radius: 20px 0 0 20px;\n    box-shadow: inset -2px 0 5px rgba(0,0,0,0.3);\n  }\n  \n  @media (max-width: 767px) {\n    padding: 1.5rem;\n    max-height: 90vh;\n  }\n"])))),ly=dr.div(Dm||(Dm=o(["\n  text-align: center;\n  margin-bottom: 2.5rem;\n  padding-bottom: 2rem;\n  border-bottom: 2px dashed rgba(255,176,0,0.3);\n  position: relative;\n"]))),cy=dr.h2(Om||(Om=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  font-size: 2rem;\n  color: #FFB000;\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  text-shadow: 0 0 10px rgba(255,176,0,0.3);\n  \n  @media (max-width: 767px) {\n    font-size: 1.7rem;\n    letter-spacing: 1px;\n  }\n"]))),uy=dr.div(Mm||(Mm=o(["\n  color: rgba(255,176,0,0.7);\n  font-size: 1.1rem;\n  margin-bottom: 1.5rem;\n  font-style: italic;\n"]))),dy=dr.div(Lm||(Lm=o(["\n  background: rgba(255,176,0,0.1);\n  border: 1px solid rgba(255,176,0,0.3);\n  border-radius: 12px;\n  padding: 1rem;\n  margin-bottom: 0.5rem;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  gap: 1rem;\n  text-align: center;\n"]))),hy=dr.div(jm||(jm=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),fy=dr.div(Fm||(Fm=o(["\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: #FFB000;\n"]))),py=dr.div(Bm||(Bm=o(["\n  font-size: 0.8rem;\n  color: rgba(255,176,0,0.8);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n"]))),gy=dr.div(Um||(Um=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  overflow-y: auto;\n  flex-grow: 1;\n  padding-right: 1rem;\n  margin-right: -1rem;\n\n  /* Custom scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n  &::-webkit-scrollbar-track {\n    background: rgba(0,0,0,0.2);\n    border-radius: 4px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: rgba(255,176,0,0.4);\n    border-radius: 4px;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: rgba(255,176,0,0.6);\n  }\n"]))),my=dr.div(zm||(zm=o(["\n  background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,176,0,0.02) 100%);\n  border: 2px solid rgba(255,176,0,0.2);\n  border-radius: 15px;\n  padding: 1rem; /* Adjusted from 1.5rem */\n  position: relative;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  \n  /* Paper texture effect */\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: \n      radial-gradient(circle at 25% 25%, rgba(255,176,0,0.02) 1px, transparent 1px),\n      radial-gradient(circle at 75% 75%, rgba(255,176,0,0.02) 1px, transparent 1px);\n    background-size: 20px 20px;\n    border-radius: 15px;\n    pointer-events: none;\n  }\n  \n  /* Margin line */\n  &::after {\n    content: '';\n    position: absolute;\n    left: 30px; /* Adjusted from 40px */\n    top: 0;\n    bottom: 0;\n    width: 1px;\n    background: rgba(255,176,0,0.1);\n  }\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.01);\n    border-color: rgba(255,176,0,0.4);\n    box-shadow: \n      0 0 15px 0 rgba(255,176,0,0.2),\n      0 0 30px 0 rgba(255,176,0,0.1);\n  }\n  \n  ","\n"])),e=>{let{completed:t}=e;return t&&lr(Hm||(Hm=o(["\n    border-color: rgba(16, 185, 129, 0.4);\n    background: linear-gradient(135deg, rgba(16,185,129,0.05) 0%, rgba(255,176,0,0.02) 100%);\n    \n    &::after {\n      background: rgba(16,185,129,0.2);\n    }\n  "])))}),yy=dr.div(Wm||(Wm=o(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem; /* Adjusted from 1rem */\n  margin-bottom: 0.75rem; /* Adjusted from 1rem */\n  margin-left: 45px; /* Adjusted from 60px */\n"]))),wy=dr.div(Vm||(Vm=o(["\n  font-size: 1.5rem; /* Adjusted from 2rem */\n  min-width: 40px; /* Adjusted from 48px */\n  height: 40px; /* Adjusted from 48px */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255,176,0,0.1);\n  border: 2px solid rgba(255,176,0,0.3);\n  border-radius: 12px;\n  margin-top: 4px;\n"]))),by=dr.div(Ym||(Ym=o(["\n  flex: 1;\n"]))),_y=dr.h3(Gm||(Gm=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.1rem; /* Adjusted from 1.2rem */\n  font-weight: 600;\n  color: #fff;\n  margin: 0 0 0.5rem 0;\n  line-height: 1.3;\n"]))),vy=dr.p(qm||(qm=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem; /* Adjusted from 0.95rem */\n  color: rgba(255,255,255,0.7);\n  margin: 0 0 0.75rem 0; /* Adjusted from 1rem */\n  line-height: 1.5;\n"]))),Ey=dr.div(Xm||(Xm=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 45px; /* Adjusted from 60px */\n"]))),Sy=dr.div(Qm||(Qm=o(["\n  flex: 1;\n  margin-right: 1rem;\n"]))),Cy=dr.div(Zm||(Zm=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n"]))),Ay=dr.span(Km||(Km=o(["\n  color: rgba(255,255,255,0.8);\n  font-weight: 500;\n"]))),xy=dr.span(Jm||(Jm=o(["\n  color: #FFB000;\n  font-weight: 600;\n  font-family: 'Outfit', sans-serif;\n"]))),Iy=dr.div($m||($m=o(["\n  width: 100%;\n  height: 8px;\n  background: rgba(255,255,255,0.1);\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n"]))),Ty=dr.div(ey||(ey=o(["\n  height: 100%;\n  background: linear-gradient(90deg, #FFB000 0%, #FFD700 100%);\n  border-radius: 4px;\n  transition: width 0.5s ease;\n  width: ","%;\n  box-shadow: 0 0 8px rgba(255,176,0,0.4);\n  \n  ","\n"])),e=>{let{value:t}=e;return t},e=>{let{completed:t}=e;return t&&lr(ty||(ty=o(["\n    background: linear-gradient(90deg, #10B981 0%, #34D399 100%);\n    box-shadow: 0 0 8px rgba(16,185,129,0.4);\n  "])))}),Ry=dr.div(ny||(ny=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: rgba(255,176,0,0.1);\n  border: 1px solid rgba(255,176,0,0.3);\n  border-radius: 8px;\n  padding: 0.5rem; /* Adjusted from 0.75rem */\n  min-width: 70px; /* Adjusted from 80px */\n"]))),ky=dr.div(ry||(ry=o(["\n  font-size: 1rem; /* Adjusted from 1.1rem */\n  font-weight: 700;\n  color: #FFB000;\n  font-family: 'Outfit', sans-serif;\n"]))),Py=dr.div(iy||(iy=o(["\n  font-size: 0.7rem;\n  color: rgba(255,176,0,0.8);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"]))),Ny=dr.div(oy||(oy=o(["\n  text-align: center;\n  padding: 3rem 1rem;\n  color: rgba(255,255,255,0.6);\n  \n  .icon {\n    font-size: 4rem;\n    margin-bottom: 1rem;\n  }\n  \n  .message {\n    font-size: 1.2rem;\n    margin-bottom: 0.5rem;\n  }\n  \n  .submessage {\n    font-size: 1rem;\n    color: rgba(255,255,255,0.4);\n  }\n"]))),Dy=()=>{$();const[e,n]=(0,t.useState)(null),{quests:r,loading:i,error:o,refresh:a}=bi(),s=r&&r.length>0&&r.every(e=>0===e.progress),l=r?r.length:0,c=r?r.filter(e=>e.completed).length:0,u=l-c,d=r?r.filter(e=>e.completed).reduce((e,t)=>e+t.reward,0):0;return(0,pr.jsx)(ay,{children:(0,pr.jsxs)(sy,{children:[(0,pr.jsxs)(ly,{children:[(0,pr.jsx)(cy,{children:"Spring '25 Quests"}),(0,pr.jsx)(uy,{children:"Your journey to becoming a Monarch"}),(0,pr.jsxs)(dy,{children:[(0,pr.jsxs)(hy,{children:[(0,pr.jsx)(fy,{children:u}),(0,pr.jsx)(py,{children:"Active"})]}),(0,pr.jsxs)(hy,{children:[(0,pr.jsx)(fy,{children:c}),(0,pr.jsx)(py,{children:"Completed"})]}),(0,pr.jsxs)(hy,{children:[(0,pr.jsx)(fy,{children:d}),(0,pr.jsx)(py,{children:"WINGS Earned"})]})]})]}),(0,pr.jsx)(gy,{children:i?(0,pr.jsxs)(Ny,{children:[(0,pr.jsx)("div",{className:"icon",children:"\u23f3"}),(0,pr.jsx)("div",{className:"message",children:"Loading quests..."}),(0,pr.jsx)("div",{className:"submessage",children:"Fetching your Monarch journey"})]}):o?(0,pr.jsxs)(Ny,{children:[(0,pr.jsx)("div",{className:"icon",children:"\u26a0\ufe0f"}),(0,pr.jsx)("div",{className:"message",children:"Error loading quests"}),(0,pr.jsx)("div",{className:"submessage",children:o})]}):r&&0!==r.length?s?(0,pr.jsxs)(Ny,{children:[(0,pr.jsx)("div",{className:"icon",children:"\ud83e\udd8b"}),(0,pr.jsx)("div",{className:"message",children:"Welcome to Monarch Passport!"}),(0,pr.jsx)("div",{className:"submessage",children:"Start your journey by scanning your first Papillon QR code, sharing on social, or completing a daily challenge. Your progress will appear here!"})]}):r.map(e=>(0,pr.jsxs)(my,{completed:e.completed,onClick:()=>n(e),children:[(0,pr.jsxs)(yy,{children:[(0,pr.jsx)(wy,{children:e.icon}),(0,pr.jsxs)(by,{children:[(0,pr.jsx)(_y,{children:e.title}),(0,pr.jsx)(vy,{children:e.description})]})]}),(0,pr.jsxs)(Ey,{children:[(0,pr.jsxs)(Sy,{children:[(0,pr.jsxs)(Cy,{children:[(0,pr.jsx)(Ay,{children:"Progress"}),(0,pr.jsxs)(xy,{children:[e.progress,"/",e.total]})]}),(0,pr.jsx)(Iy,{children:(0,pr.jsx)(Ty,{value:e.percent,completed:e.completed})})]}),(0,pr.jsxs)(Ry,{children:[(0,pr.jsx)(ky,{children:e.reward}),(0,pr.jsx)(Py,{children:"WINGS"})]})]})]},e.id)):(0,pr.jsxs)(Ny,{children:[(0,pr.jsx)("div",{className:"icon",children:"\ud83d\udcd6"}),(0,pr.jsx)("div",{className:"message",children:"No quests available"}),(0,pr.jsx)("div",{className:"submessage",children:"Check back later for new adventures"})]})})]})})};var Oy,My,Ly,jy,Fy,By,Uy,zy,Hy,Wy,Vy;const Yy=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Gy=dr.div(Oy||(Oy=o(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #4C1C8C 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),qy=dr(Gr)(My||(My=o(["\n  max-width: 450px;\n  width: 100%;\n  text-align: center;\n  padding: 3rem 2.5rem;\n"]))),Xy=dr.h1(Ly||(Ly=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  color: #FFB000;\n  font-size: 2.5rem;\n  margin-bottom: 0.5rem;\n"]))),Qy=dr.p(jy||(jy=o(["\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1.1rem;\n  line-height: 1.6;\n  margin-bottom: 2.5rem;\n"]))),Zy=dr.div(Fy||(Fy=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]))),Ky=dr.div(By||(By=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  text-align: left;\n"]))),Jy=dr.label(Uy||(Uy=o(["\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.9rem;\n  font-weight: 500;\n"]))),$y=dr.input(zy||(zy=o(["\n  padding: 12px 16px;\n  border: 3px solid rgba(255, 215, 0, 0.3);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  color: white;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  box-shadow: \n    0 0 8px 0 rgba(255,215,0,0.1),\n    0 0 16px 0 rgba(255,215,0,0.05),\n    inset 0 1px 0 rgba(255,215,0,0.05);\n  \n  &:focus {\n    outline: none;\n    border: 3px solid #FFD700;\n    background: rgba(255, 255, 255, 0.08);\n    box-shadow: \n      0 0 16px 0 rgba(255,215,0,0.25),\n      0 0 32px 0 rgba(255,215,0,0.12),\n      inset 0 1px 0 rgba(255,215,0,0.15);\n  }\n  \n  &::placeholder {\n    color: rgba(255, 255, 255, 0.4);\n  }\n"]))),ew=dr.button(Hy||(Hy=o(["\n  background: none;\n  border: none;\n  color: #FFB000;\n  font-size: 0.9rem;\n  cursor: pointer;\n  text-decoration: underline;\n  margin-top: 1rem;\n  \n  &:hover {\n    color: #FFC533;\n  }\n"]))),tw=dr.div(Wy||(Wy=o(["\n  background: rgba(231, 76, 60, 0.1);\n  border: 1px solid rgba(231, 76, 60, 0.3);\n  border-radius: 8px;\n  padding: 12px;\n  color: #e74c3c;\n  font-size: 0.9rem;\n  margin-bottom: 1rem;\n"]))),nw=dr.div(Vy||(Vy=o(["\n  background: rgba(46, 204, 113, 0.1);\n  border: 1px solid rgba(46, 204, 113, 0.3);\n  border-radius: 8px;\n  padding: 12px;\n  color: #2ecc71;\n  font-size: 0.9rem;\n  margin-bottom: 1rem;\n"]))),rw=()=>{const e=$(),{user:n,loading:r}=Ur(),{processReferralSignup:i}=yc(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(""),[c,u]=(0,t.useState)({email:"",password:"",confirmPassword:"",username:""}),[d,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&!r&&e("/")},[n,r,e]),(0,t.useEffect)(()=>{const e=window.location.pathname.split("/");if("join"===e[1]&&e[2]){const t=e[2].toUpperCase();l(t),a(!0),p("Welcome! You're joining via referral code: ".concat(t))}},[]);const y=e=>{u((0,wr.A)((0,wr.A)({},c),{},{[e.target.name]:e.target.value})),h(""),p("")},w=()=>{if(!c.email||!c.password)return h("Email and password are required"),!1;if(o){if(!c.username)return h("Username is required"),!1;if(c.password!==c.confirmPassword)return h("Passwords do not match"),!1;if(c.password.length<6)return h("Password must be at least 6 characters"),!1}return!0};return r?(0,pr.jsxs)("div",{style:{minHeight:"100vh",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999},children:[(0,pr.jsx)("div",{style:{fontFamily:"Outfit, sans-serif",fontSize:"2.5rem",fontWeight:"700",color:"#FFFFFF",textAlign:"center",textShadow:"0 0 20px rgba(255,255,255,0.8), 0 0 40px rgba(255,255,255,0.4)",animation:"pulse 2s ease-in-out infinite"},children:"Monarch Passport"}),(0,pr.jsx)("style",{children:"\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.7; }\n          }\n        "})]}):(0,pr.jsx)(Gy,{children:(0,pr.jsxs)(qy,{children:[(0,pr.jsx)(Xy,{children:"Find Your Wings"}),(0,pr.jsx)(Qy,{children:o?"Create your account to start collecting":"Welcome back to your digital passport"}),d&&(0,pr.jsx)(tw,{children:d}),f&&(0,pr.jsx)(nw,{children:f}),(0,pr.jsx)("form",{onSubmit:t=>{t.preventDefault(),o?(async()=>{if(w()){m(!0),h("");try{const t="https://passport.papillonbrand.us/",{data:n,error:r}=await Yy.auth.signUp({email:c.email,password:c.password,options:{data:{username:c.username,full_name:c.username,referral_code:s||null},emailRedirectTo:"".concat(t,"/auth/callback")}});if(r)throw r;if(s&&n.user){const e=await i(s,n.user.id);e.success?p("Account created! You earned ".concat(e.bonusAmount," WINGS for joining via referral. Check your email to confirm your account.")):p("Account created! Please check your email to confirm your account.")}else n.user&&!n.user.email_confirmed_at?p("Account created! Please check your email to confirm your account."):(p("Account created successfully! Redirecting..."),setTimeout(()=>e("/"),1e3))}catch(d){h(d.message)}finally{m(!1)}}})():(async()=>{if(w()){m(!0),h("");try{const{data:t,error:n}=await Yy.auth.signInWithPassword({email:c.email,password:c.password});if(n)throw n;p("Login successful! Redirecting..."),setTimeout(()=>e("/"),1e3)}catch(d){h(d.message)}finally{m(!1)}}})()},children:(0,pr.jsxs)(Zy,{children:[o&&(0,pr.jsxs)(Ky,{children:[(0,pr.jsx)(Jy,{children:"Username"}),(0,pr.jsx)($y,{type:"text",name:"username",placeholder:"Enter your username",value:c.username,onChange:y})]}),o&&(0,pr.jsxs)(Ky,{children:[(0,pr.jsx)(Jy,{children:"Referral Code (Optional)"}),(0,pr.jsx)($y,{type:"text",name:"referralCode",placeholder:"Enter referral code",value:s,onChange:e=>l(e.target.value.toUpperCase()),style:{textTransform:"uppercase"}}),s&&(0,pr.jsx)("div",{style:{fontSize:"0.8rem",color:"#2ecc71",marginTop:"0.25rem"},children:"\u2713 You'll earn 25 WINGS for joining + 25 more for your first scan!"})]}),(0,pr.jsxs)(Ky,{children:[(0,pr.jsx)(Jy,{children:"Email"}),(0,pr.jsx)($y,{type:"email",name:"email",placeholder:"Enter your email",value:c.email,onChange:y})]}),(0,pr.jsxs)(Ky,{children:[(0,pr.jsx)(Jy,{children:"Password"}),(0,pr.jsx)($y,{type:"password",name:"password",placeholder:"Enter your password",value:c.password,onChange:y})]}),o&&(0,pr.jsxs)(Ky,{children:[(0,pr.jsx)(Jy,{children:"Confirm Password"}),(0,pr.jsx)($y,{type:"password",name:"confirmPassword",placeholder:"Confirm your password",value:c.confirmPassword,onChange:y})]}),(0,pr.jsx)(Zr,{type:"submit",disabled:g,style:{width:"100%",marginTop:"1rem"},children:g?"Processing...":o?"Create Account":"Sign In"})]})}),(0,pr.jsx)(ew,{onClick:()=>a(!o),children:o?"Already have an account? Sign in":"Don't have an account? Sign up"})]})})},iw=()=>{const{user:e,isAdmin:n}=Ur(),r=$();return(0,t.useEffect)(()=>(console.log("AdminDashboard loaded!"),console.log("User:",e),console.log("IsAdmin:",n),e?n?void console.log("Admin access granted!"):(console.log("User is not admin, redirecting..."),void r("/")):(console.log("No user found, redirecting..."),void r("/"))),[e,n,r]),e&&n?(0,pr.jsxs)("div",{style:{minHeight:"100vh",background:"#000000",color:"#00ff00",fontFamily:"Courier New, monospace",padding:"2rem"},children:[(0,pr.jsx)("h1",{style:{color:"#00ff00",textShadow:"0 0 10px #00ff00"},children:"> MATRIX ADMIN INTERFACE"}),(0,pr.jsx)("p",{children:"If you can see this, the component is loading!"}),(0,pr.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,pr.jsx)("h2",{style:{color:"#00ff00"},children:"> SYSTEM_STATUS"}),(0,pr.jsxs)("ul",{style:{color:"#00ff00"},children:[(0,pr.jsx)("li",{children:"Component loaded successfully"}),(0,pr.jsx)("li",{children:"Matrix theme applied"}),(0,pr.jsx)("li",{children:"Green text working"}),(0,pr.jsx)("li",{children:"Black background working"}),(0,pr.jsxs)("li",{children:["User authenticated: ",null===e||void 0===e?void 0:e.email]}),(0,pr.jsxs)("li",{children:["Admin access: ",n?"GRANTED":"DENIED"]})]})]})]}):(0,pr.jsx)("div",{style:{minHeight:"100vh",background:"#000000",color:"#00ff00",fontFamily:"Courier New, monospace",padding:"2rem",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,pr.jsxs)("div",{children:[(0,pr.jsx)("h1",{style:{color:"#00ff00",textShadow:"0 0 10px #00ff00"},children:"> CHECKING_ACCESS..."}),(0,pr.jsx)("p",{children:"Verifying admin privileges..."})]})})},ow=()=>{const[e,n]=(0,t.useState)("test"),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(!0),s=e=>{const t=e.substring(0,5);const n=t.split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join("").padEnd(40,"0");return n+(e=>{let t=0;for(let n=0;n<e.length;n+=8)t^=parseInt(e.substr(n,8),2)||0;return t.toString(2).padStart(8,"0")})(n)};(0,t.useEffect)(()=>{i(s(e))},[e]);return(0,pr.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #121212 0%, #1a1a2e 50%, #16213e 100%)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif'},children:[(0,pr.jsxs)("div",{style:{background:"rgba(76, 28, 140, 0.1)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(244, 176, 25, 0.2)",padding:"2rem 0",textAlign:"center"},children:[(0,pr.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"800",background:"linear-gradient(135deg, #F4B019, #FFD700)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:"0 0 0.5rem 0"},children:"\ud83e\udd8b Monarch Circular QR Generator"}),(0,pr.jsx)("p",{style:{color:"#B19CD9",fontSize:"1.2rem",margin:0,opacity:.9},children:"Generate scannable circular QR codes with Papillon branding"})]}),(0,pr.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem",display:"grid",gridTemplateColumns:"minmax(400px, 1fr) minmax(500px, 1fr)",gap:"3rem",alignItems:"start"},children:[(0,pr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(244, 176, 25, 0.2)",padding:"2rem",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[(0,pr.jsx)("h2",{style:{color:"#F4B019",fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\u2699\ufe0f Generator Settings"}),(0,pr.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,pr.jsx)("label",{style:{display:"block",color:"#F4B019",fontWeight:"600",marginBottom:"0.75rem",fontSize:"1rem"},children:"Product Code (max 5 characters):"}),(0,pr.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),style:{width:"100%",padding:"1rem",background:"rgba(255, 255, 255, 0.1)",border:"2px solid rgba(244, 176, 25, 0.3)",borderRadius:"12px",color:"white",fontSize:"1.1rem",fontWeight:"500",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},placeholder:"Enter code...",maxLength:5,onFocus:e=>e.target.style.borderColor="#F4B019",onBlur:e=>e.target.style.borderColor="rgba(244, 176, 25, 0.3)"}),(0,pr.jsxs)("p",{style:{color:"#B19CD9",fontSize:"0.9rem",margin:"0.5rem 0 0 0",opacity:.8},children:[e.length,"/5 characters used"]})]}),(0,pr.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,pr.jsx)("label",{style:{display:"block",color:"#F4B019",fontWeight:"600",marginBottom:"0.75rem",fontSize:"1rem"},children:"Quick Select Products:"}),(0,pr.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem"},children:Object.entries({monarch_jacket_001:{name:"Monarch Varsity Jacket",description:"Limited edition varsity jacket with embroidered Monarch logo",category:"jackets",rarity:"rare",wngs_value:75,shortId:"jkt01"},monarch_tee_001:{name:"Monarch Classic Tee",description:"Premium cotton t-shirt with subtle Monarch branding",category:"tops",rarity:"common",wngs_value:15,shortId:"tee01"},monarch_cap_001:{name:"Monarch Snapback",description:"Embroidered snapback cap with adjustable strap",category:"headwear",rarity:"uncommon",wngs_value:35,shortId:"cap01"},test_reward:{name:"Test Demo Item",description:"Demo item for testing circular QR detection",category:"demo",rarity:"legendary",wngs_value:300,shortId:"test"}}).map(t=>{let[r,i]=t;return(0,pr.jsxs)("button",{onClick:()=>n(i.shortId),style:{padding:"1rem",background:e===i.shortId?"linear-gradient(135deg, #4C1C8C, #7F3FBF)":"rgba(76, 28, 140, 0.2)",border:e===i.shortId?"2px solid #F4B019":"2px solid rgba(127, 63, 191, 0.3)",borderRadius:"12px",color:"white",cursor:"pointer",transition:"all 0.3s ease",textAlign:"left"},onMouseEnter:t=>{e!==i.shortId&&(t.target.style.background="rgba(76, 28, 140, 0.4)",t.target.style.transform="translateY(-2px)")},onMouseLeave:t=>{e!==i.shortId&&(t.target.style.background="rgba(76, 28, 140, 0.2)",t.target.style.transform="translateY(0)")},children:[(0,pr.jsx)("div",{style:{fontWeight:"600",fontSize:"0.95rem",marginBottom:"0.25rem"},children:i.name}),(0,pr.jsxs)("div",{style:{fontSize:"0.8rem",opacity:.8,marginBottom:"0.25rem"},children:["Code: ",i.shortId]}),(0,pr.jsxs)("div",{style:{fontSize:"0.8rem",color:"#4CAF50",fontWeight:"600"},children:[i.wngs_value," WNGS"]})]},r)})})]}),(0,pr.jsx)("div",{style:{marginBottom:"2rem"},children:(0,pr.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"white",fontSize:"1rem",cursor:"pointer"},children:[(0,pr.jsx)("input",{type:"checkbox",checked:o,onChange:e=>a(e.target.checked),style:{width:"20px",height:"20px",accentColor:"#F4B019"}}),"Show Papillon Logo in Center"]})}),(0,pr.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(244, 176, 25, 0.2)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,pr.jsx)("h3",{style:{color:"#B19CD9",fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udd22 Binary Encoding"}),(0,pr.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.6)",borderRadius:"8px",padding:"1rem",fontFamily:'"Fira Code", "Monaco", monospace',fontSize:"0.85rem",color:"#4CAF50",wordBreak:"break-all",lineHeight:"1.4"},children:r}),(0,pr.jsxs)("div",{style:{marginTop:"1rem",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem",fontSize:"0.85rem"},children:[(0,pr.jsxs)("div",{style:{color:"#B19CD9"},children:[(0,pr.jsx)("strong",{children:"Data:"})," ",r.substring(0,40)]}),(0,pr.jsxs)("div",{style:{color:"#B19CD9"},children:[(0,pr.jsx)("strong",{children:"Checksum:"})," ",r.substring(40,48)]}),(0,pr.jsxs)("div",{style:{color:"#F4B019"},children:[(0,pr.jsx)("strong",{children:"Total:"})," 48 bits"]})]})]}),(0,pr.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,pr.jsxs)("button",{onClick:()=>{const t=document.getElementById("circular-qr-svg"),n=(new XMLSerializer).serializeToString(t),r=new Blob([n],{type:"image/svg+xml"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download="monarch-".concat(e,"-circular-qr.svg"),o.click(),URL.revokeObjectURL(i)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",background:"linear-gradient(135deg, #F4B019, #FFD700)",color:"#121212",fontWeight:"700",fontSize:"1rem",padding:"1rem 1.5rem",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(244, 176, 25, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 25px rgba(244, 176, 25, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(244, 176, 25, 0.3)"},children:[(0,pr.jsx)("span",{children:"\ud83d\udce5"}),"Download SVG"]}),(0,pr.jsx)("button",{onClick:()=>n(""),style:{padding:"1rem",background:"rgba(255, 255, 255, 0.1)",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)"},children:(0,pr.jsx)("span",{children:"\ud83d\udd04"})})]})]}),(0,pr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.98)",borderRadius:"24px",padding:"2rem",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(244, 176, 25, 0.2)",textAlign:"center"},children:[(0,pr.jsx)("h2",{style:{color:"#121212",fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"\ud83c\udfaf Generated QR Code"}),(0,pr.jsx)("div",{style:{background:"white",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",boxShadow:"inset 0 2px 10px rgba(0, 0, 0, 0.1)"},children:(0,pr.jsxs)("svg",{id:"circular-qr-svg",width:"350",height:"350",viewBox:"0 0 300 300",style:{display:"block",margin:"0 auto"},children:[(0,pr.jsx)("rect",{width:"300",height:"300",fill:"#FFFFFF"}),(0,pr.jsx)("circle",{cx:"150",cy:"150",r:"145",fill:"none",stroke:"#000000",strokeWidth:"6"}),Array.from({length:12},(e,t)=>{const n=30*t*(Math.PI/180),r=n-15*Math.PI/180,i=n+15*Math.PI/180,o=145,a=130,s=150+Math.cos(r)*a,l=150+Math.sin(r)*a,c=150+Math.cos(i)*a,u=150+Math.sin(i)*a,d=150+Math.cos(i)*o,h=150+Math.sin(i)*o,f=150+Math.cos(r)*o,p=150+Math.sin(r)*o,g=t%3===0;return(0,pr.jsx)("path",{d:"M ".concat(s," ").concat(l," A ").concat(a," ").concat(a," 0 0 1 ").concat(c," ").concat(u," L ").concat(d," ").concat(h," A ").concat(o," ").concat(o," 0 0 0 ").concat(f," ").concat(p," Z"),fill:g?"#000000":"#FFFFFF",stroke:"#000000",strokeWidth:"1"},"outer-".concat(t))}),(0,pr.jsx)("circle",{cx:"150",cy:"150",r:"120",fill:"none",stroke:"#000000",strokeWidth:"3"}),[{segments:8,radius:{inner:65,outer:75},angleSpan:18,startBit:0},{segments:16,radius:{inner:85,outer:95},angleSpan:9,startBit:8},{segments:24,radius:{inner:105,outer:115},angleSpan:6,startBit:24}].map((e,t)=>Array.from({length:e.segments},(n,i)=>{const o=i*(360/e.segments)*(Math.PI/180),a=o-e.angleSpan*Math.PI/180,s=o+e.angleSpan*Math.PI/180,l=150+Math.cos(a)*e.radius.inner,c=150+Math.sin(a)*e.radius.inner,u=150+Math.cos(s)*e.radius.inner,d=150+Math.sin(s)*e.radius.inner,h=150+Math.cos(s)*e.radius.outer,f=150+Math.sin(s)*e.radius.outer,p=150+Math.cos(a)*e.radius.outer,g=150+Math.sin(a)*e.radius.outer,m=e.startBit+i,y="1"===r[m];return(0,pr.jsx)("path",{d:"M ".concat(l," ").concat(c," A ").concat(e.radius.inner," ").concat(e.radius.inner," 0 0 1 ").concat(u," ").concat(d," L ").concat(h," ").concat(f," A ").concat(e.radius.outer," ").concat(e.radius.outer," 0 0 0 ").concat(p," ").concat(g," Z"),fill:y?"#000000":"#FFFFFF",stroke:"#000000",strokeWidth:"0.5"},"ring-".concat(t,"-").concat(i))})),(0,pr.jsx)("circle",{cx:"150",cy:"150",r:"55",fill:"#FFFFFF",stroke:"#000000",strokeWidth:"4"}),(0,pr.jsx)("circle",{cx:"150",cy:"150",r:"45",fill:"none",stroke:"#000000",strokeWidth:"3"}),(0,pr.jsx)("circle",{cx:"150",cy:"115",r:"4",fill:"#000000"}),(0,pr.jsx)("circle",{cx:"185",cy:"150",r:"4",fill:"#000000"}),(0,pr.jsx)("circle",{cx:"150",cy:"185",r:"4",fill:"#000000"}),(0,pr.jsx)("circle",{cx:"115",cy:"150",r:"4",fill:"#000000"}),o?(0,pr.jsxs)("g",{transform:"translate(150, 145) scale(0.03) translate(-965, -410)",children:[(0,pr.jsx)("path",{d:"M965.35,380.63c-53.21,1.58-99.94-37.36-100.16-97.49-.2-54.36,38.41-99.68,100.16-100.14,55.99-.42,98.03,40.8,99.26,97.88,1.22,56.35-42.99,101.52-99.27,99.75Z",fill:"#000000"}),(0,pr.jsx)("path",{d:"M966.46,439.05c47.18-2.32,98.18,37.36,98.17,98.68,0,55.27-41.86,99.73-99.63,98.75-60.67-1.03-99.14-42.83-99.9-97.4-.86-61.26,50.23-102.87,101.37-100.03Z",fill:"#000000"}),(0,pr.jsx)("path",{d:"M236.74,262.16c4.24,.25,7.04-2.85,10.3-4.95,35.77-23.06,78.33-20.59,112.28,4.79,40.25,30.08,54.38,86.37,35.04,136.47-14.39,37.29-41.54,62.37-78.27,77.53-17.69,7.3-36.28,11.97-55.09,11.84-37.53-.26-71.65-11.49-100.36-36.96-28.13-24.95-43.88-56.5-51.22-92.84-11.23-55.55-1.27-108.45,21.14-159.34,23.73-53.88,60.05-98.07,107.56-132.82C284.89,31.68,337.56,12.12,394.65,3.7c29.15-4.3,58.57-4.72,87.59-1.92,48.25,4.66,94.63,17.27,137.57,40.86,66.42,36.48,115.74,89.41,149.97,156.48,21.05,41.23,34.11,85.05,39.19,131.26,3.15,28.68,5.46,57.46,3.87,86.17-2.65,48.19-11.14,95.48-25.31,141.79-27.17,88.79-71.22,168.99-123.39,245.11-37.17,54.23-77.54,106.01-120.45,155.83-30.53,35.45-61.47,70.51-93.43,104.72-23.31,24.95-46.07,50.49-69.42,75.41-70.8,75.55-143.47,149.3-217.8,221.35-30.3,29.37-61.18,58.3-93.28,85.83-13.53,11.6-28.74,14.4-45.38,11.63-16.21-2.71-27.3-20.35-23.7-36.76,1.96-8.91,6.27-16.77,11.15-24.44,17.42-27.41,37.62-52.79,57.51-78.36,57.5-73.89,115.36-147.49,173.21-221.11,48.68-61.95,96.29-124.71,142.59-188.46,55.87-76.92,109.09-155.58,153.83-239.6,32.46-60.96,59.52-124.21,76.27-191.5,8.52-34.21,13.5-68.98,13.22-104.18-.37-48.6-11.37-95.01-37.3-136.42-33.78-53.94-82.9-86.77-145.84-97.34-59.39-9.98-112.46,6.05-159.33,42.87-24.3,19.09-41.59,43.47-49.46,73.87-.44,1.72-1.16,3.41,.21,5.37Z",fill:"#000000"}),(0,pr.jsx)("path",{d:"M1695.11,264.15c-3.87-22.28-12.68-40.21-25.49-56.03-31.54-38.96-73.39-60.6-122.15-68-76.02-11.54-139.34,14.6-190.01,70.76-29.32,32.5-44.49,72.67-51.91,115.55-10.35,59.8-1.62,118.08,14.96,175.64,20.57,71.42,52.55,137.82,89.39,202.03,52.52,91.52,113.86,177.08,177.14,261.33,54.59,72.67,110.97,143.95,167.02,215.48,47.73,60.91,95.63,121.69,141.96,183.68,9.97,13.33,19.6,26.96,27.71,41.55,5.95,10.71,8.2,21.92,3.05,33.67-5.14,11.73-13.86,18.21-26.95,19.23-16.72,1.3-30.31-3.95-43.08-15.07-82.91-72.22-159.38-151.09-236.49-229.24-33.47-33.93-65.79-69.06-98.59-103.68-31.86-33.64-63.52-67.51-94.03-102.36-35.26-40.27-70.04-80.95-103.23-123.02-37.15-47.08-71.74-95.89-102.59-147.23-36.79-61.24-65.49-126.16-84.5-195.23-15.29-55.58-21.92-112.14-19.43-169.67,4.56-105.31,40.12-197.82,115.47-273.1,53.73-53.67,119.21-85.11,194-95.75,92.53-13.17,179.85,2.43,257.42,56.57,75.73,52.85,123.95,124.99,138.04,216.96,7.33,47.83,3.27,95.62-23.74,138.08-25.55,40.17-61.92,64.11-109.97,69.79-41.07,4.85-77.82-6.27-110.35-30.22-45.3-33.36-64.26-94.2-43.97-145.77,16.74-42.55,57.05-69.78,101.87-68.7,16.18,.39,30.85,5.69,44.53,14.04,4.13,2.52,8.2,5.16,13.93,8.77Z",fill:"#000000"})]}):(0,pr.jsx)("text",{x:"150",y:"155",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontSize:"16",fontWeight:"bold",fill:"#666",children:"LOGO"})]})}),(0,pr.jsxs)("div",{style:{background:"linear-gradient(135deg, #f8f9fa, #e9ecef)",borderRadius:"12px",padding:"1.5rem",textAlign:"left"},children:[(0,pr.jsxs)("h3",{style:{color:"#121212",fontSize:"1.25rem",fontWeight:"700",marginBottom:"1rem",textAlign:"center"},children:['Encoded: "',e,'"']}),(0,pr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",fontSize:"0.9rem",color:"#495057"},children:[(0,pr.jsxs)("div",{children:[(0,pr.jsx)("strong",{style:{color:"#121212"},children:"Total bits:"})," 48"]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)("strong",{style:{color:"#121212"},children:"Filled segments:"})," ",r.split("1").length-1,"/48"]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)("strong",{style:{color:"#121212"},children:"Contrast:"})," Maximum"]}),(0,pr.jsxs)("div",{children:[(0,pr.jsx)("strong",{style:{color:"#121212"},children:"Format:"})," Circular QR"]})]}),(0,pr.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(76, 28, 140, 0.1)",borderRadius:"8px",borderLeft:"4px solid #4C1C8C"},children:[(0,pr.jsx)("h4",{style:{color:"#4C1C8C",margin:"0 0 0.5rem 0",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udcf1 Testing Instructions"}),(0,pr.jsxs)("ol",{style:{color:"#495057",margin:0,paddingLeft:"1.2rem",fontSize:"0.9rem",lineHeight:"1.5"},children:[(0,pr.jsx)("li",{children:"Download the SVG file"}),(0,pr.jsxs)("li",{children:["Open scanner: ",(0,pr.jsx)("code",{style:{background:"rgba(0,0,0,0.1)",padding:"2px 4px",borderRadius:"3px"},children:"/scan"})]}),(0,pr.jsx)("li",{children:"Point camera at QR code"}),(0,pr.jsx)("li",{children:"Watch console for detection logs"})]})]})]})]})]})]})};var aw,sw,lw;const cw=(0,Or.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),uw=dr.div(aw||(aw=o(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #4C1C8C 100%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n"]))),dw=dr.div(sw||(sw=o(["\n  text-align: center;\n  color: #FFFFFF;\n  font-size: 1.2rem;\n  margin-bottom: 2rem;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 500;\n"]))),hw=dr.div(lw||(lw=o(["\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(255, 255, 255, 0.1);\n  border-left: 4px solid #FFB000;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 2rem;\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n"]))),fw=()=>{const e=$(),[n,r]=(0,t.useState)("\ud83e\udd8b Confirming your account...");return(0,t.useEffect)(()=>{(async()=>{try{console.log("\ud83d\udd04 Processing auth callback...");const{data:t,error:n}=await cw.auth.getSession();if(n)return console.error("\u274c Auth callback error:",n),r("\u274c Confirmation failed. Redirecting to login..."),void setTimeout(()=>{e("/login?error=confirmation-failed")},3e3);t.session?(console.log("\u2705 Email confirmed, user logged in"),r("\u2705 Email confirmed! Welcome to Monarch Passport!"),setTimeout(()=>{e("/",{state:{message:"\ud83c\udf89 Email confirmed! Welcome to Monarch Passport!"}})},2e3)):(console.log("\u2139\ufe0f No active session, redirecting to login"),r("Please log in to continue..."),setTimeout(()=>{e("/login?message=please-login")},2e3))}catch(t){console.error("\ud83d\udca5 Unexpected error in auth callback:",t),r("An unexpected error occurred. Redirecting..."),setTimeout(()=>{e("/login?error=unexpected-error")},3e3)}})()},[e]),(0,pr.jsxs)(uw,{children:[(0,pr.jsx)(hw,{}),(0,pr.jsx)(dw,{children:n})]})};var pw=n(950),gw=n.t(pw,2);function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mw.apply(this,arguments)}function yw(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ww=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Zw){}new Map;const bw=r.startTransition;gw.flushSync,r.useId;function _w(e){let{basename:n,children:r,future:i,window:o}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),p(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,s)));let l=a.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},g=t.useCallback(e=>{f&&bw?bw(()=>u(e)):u(e)},[u,f]);return t.useLayoutEffect(()=>l.listen(g),[l,g]),t.useEffect(()=>pe(i),[i]),t.createElement(we,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const vw="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ew=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sw=t.forwardRef(function(e,n){let r,{onClick:i,relative:o,reloadDocument:a,replace:s,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=yw(e,ww),{basename:m}=t.useContext(G),y=!1;if("string"===typeof d&&Ew.test(d)&&(r=d,vw))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(Zw){}let w=function(e,n){let{relative:r}=void 0===n?{}:n;Z()||l(!1);let{basename:i,navigator:o}=t.useContext(G),{hash:a,pathname:s,search:c}=te(e,{relative:r}),u=s;return"/"!==i&&(u="/"===s?i:L([i,s])),o.createHref({pathname:u,search:c,hash:a})}(d,{relative:o}),b=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===n?{}:n,c=$(),u=K(),d=te(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:h(u)===h(d);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}},[u,c,d,i,o,r,e,a,s,l])}(d,{replace:s,state:c,target:u,preventScrollReset:f,relative:o,viewTransition:p});return t.createElement("a",mw({},g,{href:r||w,onClick:y||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))});var Cw,Aw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cw||(Cw={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Aw||(Aw={}));var xw,Iw,Tw,Rw,kw,Pw,Nw,Dw,Ow,Mw,Lw;const jw=fr(xw||(xw=o(["\n  0%, 100% { \n    background-position: 0% 50%; \n  }\n  50% { \n    background-position: 100% 50%; \n  }\n"]))),Fw=dr.nav(Iw||(Iw=o(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(18, 18, 18, 0.95);\n  backdrop-filter: blur(20px);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 8px 0 max(8px, env(safe-area-inset-bottom));\n  z-index: 1000;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);\n"]))),Bw=dr.div(Tw||(Tw=o(["\n  max-width: 100%;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  position: relative;\n  padding: 0 20px;\n"]))),Uw=(fr(Rw||(Rw=o(["\n  0% { transform: scale(0); opacity: 1; }\n  100% { transform: scale(2); opacity: 0; }\n"]))),dr(Sw)(kw||(kw=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 12px;\n  border-radius: 12px;\n  text-decoration: none;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  min-width: 60px;\n  min-height: 48px; /* Ensure 44px+ touch target */\n  color: ",";\n  \n  ","\n  \n  &:hover {\n    color: #FFB000;\n    background: rgba(76, 28, 140, 0.1);\n    transform: translateY(-1px);\n  }\n  \n  &:active::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    background: rgba(127, 63, 191, 0.3);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    animation: ripple 0.3s ease-out;\n  }\n"])),e=>{let{$isActive:t}=e;return t?"#FFB000":"rgba(250, 250, 250, 0.7)"},e=>{let{$isActive:t}=e;return t&&"\n    background: rgba(127, 63, 191, 0.15);\n    transform: translateY(-2px);\n  "})),zw=dr.div(Pw||(Pw=o(["\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 4px;\n  position: relative;\n  \n  svg {\n    width: 22px;\n    height: 22px;\n    stroke-width: 2;\n    transition: all 0.2s ease;\n  }\n  \n  ","\n"])),e=>{let{$isActive:t}=e;return t&&"\n    svg {\n      stroke-width: 2.5;\n      transform: scale(1.1);\n    }\n  "}),Hw=dr.span(Nw||(Nw=o(["\n  font-size: 11px;\n  font-weight: ",";\n  color: ",";\n  transition: all 0.2s ease;\n  text-align: center;\n  line-height: 1.2;\n"])),e=>{let{$isActive:t}=e;return t?"600":"500"},e=>{var t,n;let{$isActive:r,theme:i}=e;return r?(null===(t=i.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.purple)||"#7F3FBF":"rgba(255, 255, 255, 0.7)"}),Ww=dr.div(Dw||(Dw=o(["\n  position: absolute;\n  top: -2px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 4px;\n  height: 4px;\n  background: ",";\n  border-radius: 50%;\n  opacity: ",";\n  transition: opacity 0.2s ease;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.purple)||"#7F3FBF"},e=>{let{$isActive:t}=e;return t?1:0}),Vw=dr.div(Ow||(Ow=o(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Yw=(fr(Mw||(Mw=o(["\n  0% { box-shadow: 0 0 0 0 rgba(127, 63, 191, 0.4); }\n  70% { box-shadow: 0 0 0 12px rgba(127, 63, 191, 0); }\n  100% { box-shadow: 0 0 0 0 rgba(127, 63, 191, 0); }\n"]))),dr(Sw)(Lw||(Lw=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%);\n  border-radius: 18px;\n  text-decoration: none;\n  color: white;\n  font-size: 24px;\n  box-shadow: \n    0 8px 25px rgba(76, 28, 140, 0.4),\n    0 0 20px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);\n  transform: translateY(-8px);\n  position: relative;\n  overflow: hidden;\n  \n  /* Brand shimmer */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: linear-gradient(45deg, \n      transparent 30%, \n      rgba(250,250,250,0.4) 50%, \n      transparent 70%\n    );\n    transform: rotate(45deg);\n    animation: "," 3s linear infinite;\n  }\n  \n  &:hover {\n    transform: translateY(-12px) scale(1.1);\n    box-shadow: \n      0 12px 35px rgba(76, 28, 140, 0.6),\n      0 0 30px rgba(255, 176, 0, 0.5);\n  }\n  \n  &:active {\n    transform: translateY(-6px) scale(0.95);\n  }\n  \n  svg {\n    width: 26px;\n    height: 26px;\n    stroke-width: 2.5;\n  }\n"])),jw)),Gw=()=>{const e=K(),t=[{path:"/",icon:"Home",label:"Home"},{path:"/passport",icon:"Book",label:"Passport"},{path:"/closet",icon:"Shirt",label:"Closet"},{path:"/profile",icon:"User",label:"Profile"}],n=(e,t)=>{const n=t?"#7F3FBF":"rgba(255, 255, 255, 0.7)";switch(e){case"Home":return(0,pr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,pr.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,pr.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]});case"Book":return(0,pr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,pr.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,pr.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});case"Shirt":return(0,pr.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:(0,pr.jsx)("path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"})});case"User":return(0,pr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,pr.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,pr.jsx)("circle",{cx:"12",cy:"7",r:"4"})]});default:return null}};return(0,pr.jsx)(Fw,{children:(0,pr.jsxs)(Bw,{children:[t.slice(0,2).map(t=>{const r=e.pathname===t.path;return(0,pr.jsxs)(Uw,{to:t.path,$isActive:r,children:[(0,pr.jsx)(Ww,{$isActive:r}),(0,pr.jsx)(zw,{$isActive:r,children:n(t.icon,r)}),(0,pr.jsx)(Hw,{$isActive:r,children:t.label})]},t.path)}),(0,pr.jsx)(Vw,{children:(0,pr.jsx)(Yw,{to:"/scan","aria-label":"Scan QR Code",children:(0,pr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,pr.jsx)("path",{d:"M9 12l2 2 4-4"}),(0,pr.jsx)("path",{d:"M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c.39 0 .78.03 1.17.08"}),(0,pr.jsx)("path",{d:"M16 3v6h6"})]})})}),t.slice(2).map(t=>{const r=e.pathname===t.path;return(0,pr.jsxs)(Uw,{to:t.path,$isActive:r,children:[(0,pr.jsx)(Ww,{$isActive:r}),(0,pr.jsx)(zw,{$isActive:r,children:n(t.icon,r)}),(0,pr.jsx)(Hw,{$isActive:r,children:t.label})]},t.path)})]})})};var qw;const Xw=dr.div(qw||(qw=o(["\n  background-color: ",";\n  color: ",";\n  min-height: 100vh;\n  position: relative;\n"])),e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.text.primary});const Qw=function(){const e=K(),{user:n}=Ur(),[r,i]=(0,t.useState)(()=>localStorage.getItem("themeMode")||"dark");(0,t.useEffect)(()=>{localStorage.setItem("themeMode",r)},[r]);const o="dark"===r?Rr:kr;return(0,pr.jsx)(Br,{children:(0,pr.jsxs)(rr,{theme:o,children:[(0,pr.jsx)(Dr,{}),(0,pr.jsxs)(Xw,{children:[(0,pr.jsx)(Ir,{mode:"wait",children:(0,pr.jsxs)(be,{location:e,children:[(0,pr.jsx)(ye,{path:"/join/:referralCode",element:(0,pr.jsx)(rw,{})}),(0,pr.jsx)(ye,{path:"/login",element:(0,pr.jsx)(rw,{})}),(0,pr.jsx)(ye,{path:"/welcome",element:(0,pr.jsx)(di,{})}),(0,pr.jsx)(ye,{path:"/auth/callback",element:(0,pr.jsx)(fw,{})}),(0,pr.jsxs)(ye,{element:(0,pr.jsx)(zr,{}),children:[(0,pr.jsx)(ye,{path:"/",element:(0,pr.jsx)(ga,{})}),(0,pr.jsx)(ye,{path:"/passport",element:(0,pr.jsx)(ns,{})}),(0,pr.jsx)(ye,{path:"/season-roadmap",element:(0,pr.jsx)($s,{})}),(0,pr.jsx)(ye,{path:"/scan",element:(0,pr.jsx)(id,{})}),(0,pr.jsx)(ye,{path:"/closet",element:(0,pr.jsx)(vf,{})}),(0,pr.jsx)(ye,{path:"/profile",element:(0,pr.jsx)(Bg,{})}),(0,pr.jsx)(ye,{path:"/settings",element:(0,pr.jsx)(Tm,{themeMode:r,onToggleTheme:()=>{i(e=>"dark"===e?"light":"dark")}})}),(0,pr.jsx)(ye,{path:"/quests",element:(0,pr.jsx)(Dy,{})}),(0,pr.jsx)(ye,{path:"/generate-qr",element:(0,pr.jsx)(ow,{})}),(0,pr.jsx)(ye,{path:"/admin",element:(0,pr.jsx)(iw,{})})]}),(0,pr.jsx)(ye,{path:"*",element:(0,pr.jsx)(rw,{})})]},e.pathname)}),n&&(0,pr.jsx)(Gw,{})]})]})})};i.createRoot(document.getElementById("root")).render((0,pr.jsx)(t.StrictMode,{children:(0,pr.jsx)(_w,{children:(0,pr.jsx)(Br,{children:(0,pr.jsx)(Qw,{})})})}))})()})();
//# sourceMappingURL=main.e1bd3fd0.js.map