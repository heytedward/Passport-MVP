"use strict";(self.webpackChunkmonarch_passport_mvp=self.webpackChunkmonarch_passport_mvp||[]).push([[607],{2765:(e,t,n)=>{n.d(t,{A:()=>j});var a,s,r,i,o,l,c,d,m,p=n(7528),g=(n(5043),n(5475)),u=n(3216),h=n(5464),f=n(579);const v=(0,h.i7)(a||(a=(0,p.A)(["\n  0%, 100% { \n    background-position: 0% 50%; \n  }\n  50% { \n    background-position: 100% 50%; \n  }\n"]))),x=h.Ay.nav(s||(s=(0,p.A)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(18, 18, 18, 0.95);\n  backdrop-filter: blur(20px);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 8px 0 max(8px, env(safe-area-inset-bottom));\n  z-index: 1000;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);\n"]))),y=h.Ay.div(r||(r=(0,p.A)(["\n  max-width: 100%;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  position: relative;\n  padding: 0 20px;\n"]))),S=(0,h.Ay)(g.N_)(i||(i=(0,p.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 12px;\n  border-radius: 12px;\n  text-decoration: none;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  min-width: 60px;\n  min-height: 48px; /* Ensure 44px+ touch target */\n  color: ",";\n  \n  ","\n  \n  &:hover {\n    color: #FFB000;\n    background: rgba(76, 28, 140, 0.1);\n    transform: translateY(-1px);\n  }\n  \n  &:active::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    background: rgba(127, 63, 191, 0.3);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    animation: ripple 0.3s ease-out;\n  }\n"])),e=>{let{$isActive:t}=e;return t?"#FFB000":"rgba(250, 250, 250, 0.7)"},e=>{let{$isActive:t}=e;return t&&"\n    background: rgba(127, 63, 191, 0.15);\n    transform: translateY(-2px);\n  "}),_=h.Ay.div(o||(o=(0,p.A)(["\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 4px;\n  position: relative;\n  \n  svg {\n    width: 22px;\n    height: 22px;\n    stroke-width: 2;\n    transition: all 0.2s ease;\n  }\n  \n  ","\n"])),e=>{let{$isActive:t}=e;return t&&"\n    svg {\n      stroke-width: 2.5;\n      transform: scale(1.1);\n    }\n  "}),b=h.Ay.span(l||(l=(0,p.A)(["\n  font-size: 11px;\n  font-weight: ",";\n  color: ",";\n  transition: all 0.2s ease;\n  text-align: center;\n  line-height: 1.2;\n"])),e=>{let{$isActive:t}=e;return t?"600":"500"},e=>{var t,n;let{$isActive:a,theme:s}=e;return a?(null===(t=s.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.purple)||"#7F3FBF":"rgba(255, 255, 255, 0.7)"}),w=h.Ay.div(c||(c=(0,p.A)(["\n  position: absolute;\n  top: -2px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 4px;\n  height: 4px;\n  background: ",";\n  border-radius: 50%;\n  opacity: ",";\n  transition: opacity 0.2s ease;\n"])),e=>{var t,n;let{theme:a}=e;return(null===(t=a.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.purple)||"#7F3FBF"},e=>{let{$isActive:t}=e;return t?1:0}),k=h.Ay.div(d||(d=(0,p.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),A=(0,h.Ay)(g.N_)(m||(m=(0,p.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%);\n  border-radius: 18px;\n  text-decoration: none;\n  color: white;\n  font-size: 24px;\n  box-shadow: \n    0 8px 25px rgba(76, 28, 140, 0.4),\n    0 0 20px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);\n  transform: translateY(-8px);\n  position: relative;\n  overflow: hidden;\n  \n  /* Brand shimmer */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: linear-gradient(45deg, \n      transparent 30%, \n      rgba(250,250,250,0.4) 50%, \n      transparent 70%\n    );\n    transform: rotate(45deg);\n    animation: "," 3s linear infinite;\n  }\n  \n  &:hover {\n    transform: translateY(-12px) scale(1.1);\n    box-shadow: \n      0 12px 35px rgba(76, 28, 140, 0.6),\n      0 0 30px rgba(255, 176, 0, 0.5);\n  }\n  \n  &:active {\n    transform: translateY(-6px) scale(0.95);\n  }\n  \n  svg {\n    width: 40px;\n    height: 40px;\n    stroke-width: 2.5;\n  }\n"])),v),j=()=>{const e=(0,u.zy)(),t=[{path:"/",icon:"Home",label:"Home"},{path:"/passport",icon:"Book",label:"Passport"},{path:"/closet",icon:"Shirt",label:"Closet"},{path:"/profile",icon:"User",label:"Profile"}],n=(e,t)=>{const n=t?"#7F3FBF":"rgba(255, 255, 250, 0.7)";switch(e){case"Home":return(0,f.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,f.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,f.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]});case"Book":return(0,f.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,f.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,f.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});case"Shirt":return(0,f.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:(0,f.jsx)("path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"})});case"User":return(0,f.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,f.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,f.jsx)("circle",{cx:"12",cy:"7",r:"4"})]});default:return null}};return(0,f.jsx)(x,{children:(0,f.jsxs)(y,{children:[t.slice(0,2).map(t=>{const a=e.pathname===t.path;return(0,f.jsxs)(S,{to:t.path,$isActive:a,children:[(0,f.jsx)(w,{$isActive:a}),(0,f.jsx)(_,{$isActive:a,children:n(t.icon,a)}),(0,f.jsx)(b,{$isActive:a,children:t.label})]},t.path)}),(0,f.jsx)(k,{children:(0,f.jsx)(A,{to:"/scan","aria-label":"Scan QR Code",children:(0,f.jsx)("svg",{viewBox:"0 0 1929.64 1459.22",fill:"currentColor",children:(0,f.jsxs)("g",{children:[(0,f.jsx)("path",{d:"M965.35,380.63c-53.21,1.58-99.94-37.36-100.16-97.49-.2-54.36,38.41-99.68,100.16-100.14,55.99-.42,98.03,40.8,99.26,97.88,1.22,56.35-42.99,101.52-99.27,99.75Z"}),(0,f.jsx)("path",{d:"M966.46,439.05c47.18-2.32,98.18,37.36,98.17,98.68,0,55.27-41.86,99.73-99.63,98.75-60.67-1.03-99.14-42.83-99.9-97.4-.86-61.26,50.23-102.87,101.37-100.03Z"}),(0,f.jsx)("path",{d:"M236.74,262.16c4.24,.25,7.04-2.85,10.3-4.95,35.77-23.06,78.33-20.59,112.28,4.79,40.25,30.08,54.38,86.37,35.04,136.47-14.39,37.29-41.54,62.37-78.27,77.53-17.69,7.3-36.28,11.97-55.09,11.84-37.53-.26-71.65-11.49-100.36-36.96-28.13-24.95-43.88-56.5-51.22-92.84-11.23-55.55-1.27-108.45,21.14-159.34,23.73-53.88,60.05-98.07,107.56-132.82C284.89,31.68,337.56,12.12,394.65,3.7c29.15-4.3,58.57-4.72,87.59-1.92,48.25,4.66,94.63,17.27,137.57,40.86,66.42,36.48,115.74,89.41,149.97,156.48,21.05,41.23,34.11,85.05,39.19,131.26,3.15,28.68,5.46,57.46,3.87,86.17-2.65,48.19-11.14,95.48-25.31,141.79-27.17,88.79-71.22,168.99-123.39,245.11-37.17,54.23-77.54,106.01-120.45,155.83-30.53,35.45-61.47,70.51-93.43,104.72-23.31,24.95-46.07,50.49-69.42,75.41-70.8,75.55-143.47,149.3-217.8,221.35-30.3,29.37-61.18,58.3-93.28,85.83-13.53,11.6-28.74,14.4-45.38,11.63-16.21-2.71-27.3-20.35-23.7-36.76,1.96-8.91,6.27-16.77,11.15-24.44,17.42-27.41,37.62-52.79,57.51-78.36,57.5-73.89,115.36-147.49,173.21-221.11,48.68-61.95,96.29-124.71,142.59-188.46,55.87-76.92,109.09-155.58,153.83-239.6,32.46-60.96,59.52-124.21,76.27-191.5,8.52-34.21,13.5-68.98,13.22-104.18-.37-48.6-11.37-95.01-37.3-136.42-33.78-53.94-82.9-86.77-145.84-97.34-59.39-9.98-112.46,6.05-159.33,42.87-24.3,19.09-41.59,43.47-49.46,73.87-.44,1.72-1.16,3.41,.21,5.37Z"}),(0,f.jsx)("path",{d:"M1695.11,264.15c-3.87-22.28-12.68-40.21-25.49-56.03-31.54-38.96-73.39-60.6-122.15-68-76.02-11.54-139.34,14.6-190.01,70.76-29.32,32.5-44.49,72.67-51.91,115.55-10.35,59.8-1.62,118.08,14.96,175.64,20.57,71.42,52.55,137.82,89.39,202.03,52.52,91.52,113.86,177.08,177.14,261.33,54.59,72.67,110.97,143.95,167.02,215.48,47.73,60.91,95.63,121.69,141.96,183.68,9.97,13.33,19.6,26.96,27.71,41.55,5.95,10.71,8.2,21.92,3.05,33.67-5.14,11.73-13.86,18.21-26.95,19.23-16.72,1.3-30.31-3.95-43.08-15.07-82.91-72.22-159.38-151.09-236.49-229.24-33.47-33.93-65.79-69.06-98.59-103.68-31.86-33.64-63.52-67.51-94.03-102.36-35.26-40.27-70.04-80.95-103.23-123.02-37.15-47.08-71.74-95.89-102.59-147.23-36.79-61.24-65.49-126.16-84.5-195.23-15.29-55.58-21.92-112.14-19.43-169.67,4.56-105.31,40.12-197.82,115.47-273.1,53.73-53.67,119.21-85.11,194-95.75,92.53-13.17,179.85,2.43,257.42,56.57,75.73,52.85,123.95,124.99,138.04,216.96,7.33,47.83,3.27,95.62-23.74,138.08-25.55,40.17-61.92,64.11-109.97,69.79-41.07,4.85-77.82-6.27-110.35-30.22-45.3-33.36-64.26-94.2-43.97-145.77,16.74-42.55,57.05-69.78,101.87-68.7,16.18,.39,30.85,5.69,44.53,14.04,4.13,2.52,8.2,5.16,13.93,8.77Z"})]})})})}),t.slice(2).map(t=>{const a=e.pathname===t.path;return(0,f.jsxs)(S,{to:t.path,$isActive:a,children:[(0,f.jsx)(w,{$isActive:a}),(0,f.jsx)(_,{$isActive:a,children:n(t.icon,a)}),(0,f.jsx)(b,{$isActive:a,children:t.label})]},t.path)})]})})}},3987:(e,t,n)=>{n.d(t,{S:()=>c});var a=n(2555),s=n(5043),r=n(7337),i=n(342);const o={first_item:{id:"first_item",name:"First Item",description:"Collect your first item",imageUrl:"/Stamps/stamp_first_item.svg",altText:"First Item Stamp"},gm:{id:"gm",name:"Good Morning",description:"Complete your first daily quest",imageUrl:"/Stamps/stamp_gm.svg",altText:"Good Morning Stamp"},master:{id:"master",name:"Master Collector",description:"Collect 10 unique items",imageUrl:"/Stamps/stamp_master.svg",altText:"Master Collector Stamp"},passport:{id:"passport",name:"Passport Holder",description:"Unlock your digital passport",imageUrl:"/Stamps/stamp_passport.svg",altText:"Passport Holder Stamp"},qr:{id:"qr",name:"QR Scanner",description:"Scan your first QR code",imageUrl:"/Stamps/stamp_qr.svg",altText:"QR Scanner Stamp"},quest:{id:"quest",name:"Quest Master",description:"Complete 5 quests",imageUrl:"/Stamps/stamp_quest.svg",altText:"Quest Master Stamp"},social:{id:"social",name:"Social Butterfly",description:"Connect with 3 friends",imageUrl:"/Stamps/stamp_social.svg",altText:"Social Butterfly Stamp"},streak:{id:"streak",name:"Streak Keeper",description:"Maintain a 7-day streak",imageUrl:"/Stamps/stamp_streak.svg",altText:"Streak Keeper Stamp"},style:{id:"style",name:"Style Icon",description:"Unlock 3 different themes",imageUrl:"/Stamps/stamp_style.svg",altText:"Style Icon Stamp"}};const l=[{stamp_id:"received_passport",name:"Received Passport",description:"Welcome to the Monarch family",image:o.passport.imageUrl,category:"milestone"},{stamp_id:"morning_gm",name:"GM",description:"Said GM to the community",image:o.gm.imageUrl,category:"social"},{stamp_id:"quest_completed",name:"Quest Master",description:"Completed your first quest",image:o.quest.imageUrl,category:"achievement"},{stamp_id:"qr_scanner",name:"QR Scanner Pro",description:"Scanned your first QR code",image:o.qr.imageUrl,category:"scan"},{stamp_id:"first_item",name:"First Item",description:"Scanned your first clothing item",image:o.first_item.imageUrl,category:"scan"},{stamp_id:"style_icon",name:"Style Icon",description:"Collected items from 3+ different categories",image:o.style.imageUrl,category:"collection"},{stamp_id:"social_share",name:"Social Butterfly",description:"Shared content on social media",image:o.social.imageUrl,category:"social"},{stamp_id:"streak_master",name:"Streak Master",description:"Maintained a 7-day login streak",image:o.streak.imageUrl,category:"dedication"},{stamp_id:"master_collector",name:"Master Collector",description:"Achieved elite collector status",image:o.master.imageUrl,category:"elite"}],c=()=>{const{user:e}=(0,i.A)(),[t,n]=(0,s.useState)([]),[o,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{console.log("\ud83d\udd0d useStamps - User state:",e?"Authenticated":"Not authenticated"),console.log("\ud83d\udd0d useStamps - Loading state:",o),console.log("\ud83d\udd0d useStamps - Error state:",d)},[e,o,d]);const p=l.map(e=>{var n;return(0,a.A)((0,a.A)({},e),{},{unlocked:t.some(t=>t.stamp_id===e.stamp_id),earnedAt:null===(n=t.find(t=>t.stamp_id===e.stamp_id))||void 0===n?void 0:n.created_at})}),g=p.filter(e=>e.unlocked).length,u=l.length,h=Math.round(g/u*100),f=(0,s.useCallback)(async()=>{if(console.log("\ud83d\udd0d loadUserStamps called - User ID:",null===e||void 0===e?void 0:e.id),null===e||void 0===e||!e.id)return console.log("\u26a0\ufe0f No user ID found, setting empty stamps and loading false"),n([]),c(!1),void m(null);try{c(!0),m(null),console.log("\ud83d\udd0d Starting database query for user stamps...");const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Database query timeout")),8e3)),a=r.N.from("user_stamps").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),{data:s,error:i}=await Promise.race([a,t]);if(i)throw i;n(s||[]),console.log("\u2705 User stamps loaded successfully:",(null===s||void 0===s?void 0:s.length)||0,"stamps")}catch(t){console.error("\u274c Error loading user stamps:",t),m(t.message),n([])}finally{c(!1)}},[e]),v=(0,s.useCallback)(e=>t.some(t=>t.stamp_id===e),[t]),x=(0,s.useCallback)(async function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e||void 0===e||!e.id)throw new Error("User must be logged in to earn stamps");if(v(a))return console.log("User already has stamp: ".concat(a)),{success:!0,alreadyEarned:!0};try{const{data:i,error:o}=await r.N.from("user_stamps").insert([{user_id:e.id,stamp_id:a,metadata:s,created_at:(new Date).toISOString()}]).select().single();if(o)throw o;n(e=>[i,...e]);return 8!==t.length+1||v("master_collector")||setTimeout(()=>{C()},1e3),{success:!0,data:i,alreadyEarned:!1}}catch(i){throw console.error("Error awarding stamp ".concat(a,":"),i),i}},[null===e||void 0===e?void 0:e.id,v,t.length]),y=(0,s.useCallback)(async()=>x("received_passport",{trigger:"first_login",timestamp:(new Date).toISOString()}),[x]),S=(0,s.useCallback)(async()=>x("morning_gm",{trigger:"daily_gm_quest",timestamp:(new Date).toISOString()}),[x]),_=(0,s.useCallback)(async function(){return x("quest_completed",{trigger:"quest_completion",quest_type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general",timestamp:(new Date).toISOString()})},[x]),b=(0,s.useCallback)(async()=>x("qr_scanner",{trigger:"first_qr_scan",timestamp:(new Date).toISOString()}),[x]),w=(0,s.useCallback)(async function(){return x("first_item",{trigger:"first_item_scan",item_type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clothing",timestamp:(new Date).toISOString()})},[x]),k=(0,s.useCallback)(async function(){return x("social_share",{trigger:"social_sharing",platform:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"instagram",timestamp:(new Date).toISOString()})},[x]),A=(0,s.useCallback)(async function(){return x("streak_master",{trigger:"login_streak",streak_days:arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,timestamp:(new Date).toISOString()})},[x]),j=(0,s.useCallback)(async function(){return x("style_icon",{trigger:"style_diversity",categories_collected:arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,timestamp:(new Date).toISOString()})},[x]),C=(0,s.useCallback)(async()=>x("master_collector",{trigger:"achievement_milestone",stamps_count:8,timestamp:(new Date).toISOString()}),[x]);return(0,s.useEffect)(()=>{console.log("\ud83d\udd0d useStamps useEffect triggered - User ID:",null===e||void 0===e?void 0:e.id),(null!==e&&void 0!==e&&e.id||null===e)&&f()},[null===e||void 0===e?void 0:e.id,f]),(0,s.useEffect)(()=>{const e=setTimeout(()=>{o&&(console.warn("\u26a0\ufe0f Maximum loading time reached, forcing loading to false"),c(!1),m("Loading timeout - please refresh the page"))},1e4);return()=>clearTimeout(e)},[o]),(0,s.useEffect)(()=>{null!==e&&void 0!==e&&e.id},[null===e||void 0===e?void 0:e.id]),{stamps:p,userStamps:t,unlockedCount:g,totalCount:u,completionPercentage:h,loading:o,error:d,hasStamp:v,loadUserStamps:f,refreshStamps:f,awardPassportStamp:y,awardGMStamp:S,awardQuestStamp:_,awardQRStamp:b,awardFirstItemStamp:w,awardSocialStamp:k,awardStreakStamp:A,awardStyleStamp:j,awardMasterStamp:C}}}}]);
//# sourceMappingURL=607.b920b915.chunk.js.map