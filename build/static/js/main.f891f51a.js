/*! For license information please see main.f891f51a.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},72:function(e,t,n){!function(e){"use strict";function t(e){return null===e||void 0===e}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n=Object.setPrototypeOf;n?n(e,t):e.__proto__=t}function a(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}var s,l=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),o(r,n.prototype),a(r),r}return i(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class d extends c{}d.kind="ArgumentException";class u extends c{}u.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new u("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new h(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class m extends c{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class w{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){w.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new u("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new y(t);if(n>e)throw new y(n)}static asList(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return g.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=w.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const o=i+r>>1,a=n(t,e[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-r-1}static numberComparator(e,t){return e-t}}class b{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return t=e<<16,0!==t&&(n-=16,e=t),t=e<<8,0!==t&&(n-=8,e=t),t=e<<4,0!==t&&(n-=4,e=t),t=e<<2,0!==t&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class v{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?v.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=v.makeArray(e);g.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=n[r]}const a=32*r+b.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);const o=n.length;for(;0===i;){if(++r===o)return t;i=~n[r]}const a=32*r+b.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new u;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){const a=(2<<(o<r?31:31&t))-(1<<(o>n?0:31&e));i[o]|=a}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new u;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let a=r;a<=i;a++){const s=(2<<(a<i?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((o[a]&s)!==(n?s:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new u("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit(1===(e>>n-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new u("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){const t=32*n-this.size;let r=e[0]>>>t;for(let i=1;i<n;i++){const n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof v))return!1;const t=e;return this.size===t.size&&w.equals(this.bits,t.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new v(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(s||(s={}));var S,C=s;class _ extends c{static getFormatInstance(){return new _}}_.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(S||(S={}));class x{constructor(e,t,n){this.valueIdentifier=e,this.name=n,this.values="number"===typeof t?Int32Array.from([t]):t;for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];this.otherEncodingNames=i,x.VALUE_IDENTIFIER_TO_ECI.set(e,this),x.NAME_TO_ECI.set(n,this);const a=this.values;for(let s=0,l=a.length;s!==l;s++){const e=a[s];x.VALUES_TO_ECI.set(e,this)}for(const s of i)x.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new _("incorect value");const t=x.VALUES_TO_ECI.get(e);if(void 0===t)throw new _("incorect value");return t}static getCharacterSetECIByName(e){const t=x.NAME_TO_ECI.get(e);if(void 0===t)throw new _("incorect value");return t}equals(e){if(!(e instanceof x))return!1;const t=e;return this.getName()===t.getName()}}x.VALUE_IDENTIFIER_TO_ECI=new Map,x.VALUES_TO_ECI=new Map,x.NAME_TO_ECI=new Map,x.Cp437=new x(S.Cp437,Int32Array.from([0,2]),"Cp437"),x.ISO8859_1=new x(S.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),x.ISO8859_2=new x(S.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),x.ISO8859_3=new x(S.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),x.ISO8859_4=new x(S.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),x.ISO8859_5=new x(S.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),x.ISO8859_6=new x(S.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),x.ISO8859_7=new x(S.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),x.ISO8859_8=new x(S.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),x.ISO8859_9=new x(S.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),x.ISO8859_10=new x(S.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),x.ISO8859_11=new x(S.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),x.ISO8859_13=new x(S.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),x.ISO8859_14=new x(S.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),x.ISO8859_15=new x(S.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),x.ISO8859_16=new x(S.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),x.SJIS=new x(S.SJIS,20,"SJIS","Shift_JIS"),x.Cp1250=new x(S.Cp1250,21,"Cp1250","windows-1250"),x.Cp1251=new x(S.Cp1251,22,"Cp1251","windows-1251"),x.Cp1252=new x(S.Cp1252,23,"Cp1252","windows-1252"),x.Cp1256=new x(S.Cp1256,24,"Cp1256","windows-1256"),x.UnicodeBigUnmarked=new x(S.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),x.UTF8=new x(S.UTF8,26,"UTF8","UTF-8"),x.ASCII=new x(S.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),x.Big5=new x(S.Big5,28,"Big5"),x.GB18030=new x(S.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),x.EUC_KR=new x(S.EUC_KR,30,"EUC_KR","EUC-KR");class E extends c{}E.kind="UnsupportedOperationException";class I{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!I.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof x?e:x.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(I.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(x.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new E("Encoding ".concat(this.encodingName(t)," not supported by fallback."))}static isDecodeFallbackSupported(e){return e.equals(x.UTF8)||e.equals(x.ISO8859_1)||e.equals(x.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)}}class A{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=t?t.getName():this.ISO88591;return I.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(C.CHARACTER_SET))return t.get(C.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,o=!0,a=0,s=0,l=0,c=0,d=0,u=0,h=0,f=0,p=0,g=0,m=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let w=0;w<n&&(r||i||o);w++){const t=255&e[w];o&&(a>0?0===(128&t)?o=!1:a--:0!==(128&t)&&(0===(64&t)?o=!1:(a++,0===(32&t)?s++:(a++,0===(16&t)?l++:(a++,0===(8&t)?c++:o=!1))))),r&&(t>127&&t<160?r=!1:t>159&&(t<192||215===t||247===t)&&m++),i&&(d>0?t<64||127===t||t>252?i=!1:d--:128===t||160===t||t>239?i=!1:t>160&&t<224?(u++,f=0,h++,h>p&&(p=h)):t>127?(d++,h=0,f++,f>g&&(g=f)):(h=0,f=0))}return o&&a>0&&(o=!1),i&&d>0&&(i=!1),o&&(y||s+l+c>0)?A.UTF8:i&&(A.ASSUME_SHIFT_JIS||p>=3||g>=3)?A.SHIFT_JIS:r&&i?2===p&&2===u||10*m>=n?A.SHIFT_JIS:A.ISO88591:r?A.ISO88591:i?A.SHIFT_JIS:o?A.UTF8:A.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=-1;function o(e,t,r,o,a,s){if("%%"===e)return"%";if(void 0===n[++i])return;e=o?parseInt(o.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=n[i];break;case"c":l=n[i][0];break;case"f":l=parseFloat(n[i]).toFixed(e);break;case"p":l=parseFloat(n[i]).toPrecision(e);break;case"e":l=parseFloat(n[i]).toExponential(e);break;case"x":l=parseInt(n[i]).toString(c||16);break;case"d":l=parseFloat(parseInt(n[i],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let d=parseInt(r),u=r&&r[0]+""==="0"?"0":" ";for(;l.length<d;)l=void 0!==t?l+u:u+l;return l}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)}static getBytes(e,t){return I.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}A.SHIFT_JIS=x.SJIS.getName(),A.GB2312="GB2312",A.ISO88591=x.ISO8859_1.getName(),A.EUC_JP="EUC_JP",A.UTF8=x.UTF8.getName(),A.PLATFORM_DEFAULT_ENCODING=A.UTF8,A.ASSUME_SHIFT_JIS=!1;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=A.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class k{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new u("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((e+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new k(n,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new u("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,o=0,a=-1,s=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new u("row lengths do not match");o=i,s++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else{if(e.substring(l,l+n.length)!==n)throw new u("illegal character encountered: "+e.substring(l));l+=n.length,r[i]=!1,i++}if(i>o){if(-1===a)a=i-o;else if(i-o!==a)throw new u("row lengths do not match");s++}const c=new k(a,s);for(let d=0;d<i;d++)r[d]&&c.set(Math.floor(d%a),Math.floor(d/a));return c}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[n]>>>(31&e)&1)}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new u("input matrix dimensions do not match");const t=new v(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*n,a=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[o+e]^=a[e]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new u("Left and top must be nonnegative");if(r<1||n<1)throw new u("Height and width must be at least 1");const i=e+n,o=t+r;if(o>this.height||i>this.width)throw new u("The region must fit inside the matrix");const a=this.rowSize,s=this.bits;for(let l=t;l<o;l++){const t=l*a;for(let n=e;n<i;n++)s[t+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new v(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(32*o,r[i+o]);return t}setRow(e,t){g.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new v(e),r=new v(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,o=t,a=-1,s=-1;for(let l=0;l<t;l++)for(let e=0;e<n;e++){const t=r[l*n+e];if(0!==t){if(l<o&&(o=l),l>s&&(s=l),32*e<i){let n=0;for(;0===(t<<31-n&4294967295);)n++;32*e+n<i&&(i=32*e+n)}if(32*e+31>a){let n=31;for(;t>>>n===0;)n--;32*e+n>a&&(a=32*e+n)}}}return a<i||s<o?null:Int32Array.from([i,o,a-i+1,s-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const o=t[n];let a=0;for(;0===(o<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;const r=Math.floor(n/e);let i=32*Math.floor(n%e);const o=t[n];let a=31;for(;o>>>a===0;)a--;return i+=a,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof k))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&w.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+w.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new T;for(let i=0,o=this.height;i<o;i++){for(let n=0,o=this.width;n<o;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new k(this.width,this.height,this.rowSize,this.bits.slice())}}class R extends c{static getNotFoundInstance(){return new R}}R.kind="NotFoundException";class N extends p{constructor(e){super(e),this.luminances=N.EMPTY,this.buckets=new Int32Array(N.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();void 0===t||null===t||t.getSize()<r?t=new v(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),o=this.buckets;for(let s=0;s<r;s++)o[(255&i[s])>>N.LUMINANCE_SHIFT]++;const a=N.estimateBlackPoint(o);if(r<3)for(let s=0;s<r;s++)(255&i[s])<a&&t.set(s);else{let e=255&i[0],n=255&i[1];for(let o=1;o<r-1;o++){const r=255&i[o+1];(4*n-e-r)/2<a&&t.set(o),e=n,n=r}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new k(t,n);this.initArrays(t);const i=this.buckets;for(let s=1;s<5;s++){const r=Math.floor(n*s/5),o=e.getRow(r,this.luminances),a=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<a;e++)i[(255&o[e])>>N.LUMINANCE_SHIFT]++}const o=N.estimateBlackPoint(i),a=e.getMatrix();for(let s=0;s<n;s++){const e=s*t;for(let n=0;n<t;n++)(255&a[e+n])<o&&r.set(n,s)}return r}createBinarizer(e){return new N(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<N.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(r=c,i=e[c]),e[c]>n&&(n=e[c]);let o=0,a=0;for(let c=0;c<t;c++){const t=c-r,n=e[c]*t*t;n>a&&(o=c,a=n)}if(r>o){const e=r;r=o,o=e}if(o-r<=t/16)throw new R;let s=o-1,l=-1;for(let c=o-1;c>r;c--){const t=c-r,i=t*t*(o-c)*(n-e[c]);i>l&&(s=c,l=i)}return s<<N.LUMINANCE_SHIFT}}N.LUMINANCE_BITS=5,N.LUMINANCE_SHIFT=8-N.LUMINANCE_BITS,N.LUMINANCE_BUCKETS=1<<N.LUMINANCE_BITS,N.EMPTY=Uint8ClampedArray.from([0]);class D extends N{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=D.MINIMUM_DIMENSION&&n>=D.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>D.BLOCK_SIZE_POWER;0!==(t&D.BLOCK_SIZE_MASK)&&i++;let o=n>>D.BLOCK_SIZE_POWER;0!==(n&D.BLOCK_SIZE_MASK)&&o++;const a=D.calculateBlackPoints(r,i,o,t,n),s=new k(t,n);D.calculateThresholdForBlock(r,i,o,t,n,a,s),this.matrix=s}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new D(e)}static calculateThresholdForBlock(e,t,n,r,i,o,a){const s=i-D.BLOCK_SIZE,l=r-D.BLOCK_SIZE;for(let c=0;c<n;c++){let i=c<<D.BLOCK_SIZE_POWER;i>s&&(i=s);const d=D.cap(c,2,n-3);for(let n=0;n<t;n++){let s=n<<D.BLOCK_SIZE_POWER;s>l&&(s=l);const c=D.cap(n,2,t-3);let u=0;for(let e=-2;e<=2;e++){const t=o[d+e];u+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=u/25;D.thresholdBlock(e,s,i,h,r,a)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let a=0,s=n*i+t;a<D.BLOCK_SIZE;a++,s+=i)for(let i=0;i<D.BLOCK_SIZE;i++)(255&e[s+i])<=r&&o.set(t+i,n+a)}static calculateBlackPoints(e,t,n,r,i){const o=i-D.BLOCK_SIZE,a=r-D.BLOCK_SIZE,s=new Array(n);for(let l=0;l<n;l++){s[l]=new Int32Array(t);let n=l<<D.BLOCK_SIZE_POWER;n>o&&(n=o);for(let i=0;i<t;i++){let t=i<<D.BLOCK_SIZE_POWER;t>a&&(t=a);let o=0,c=255,d=0;for(let i=0,a=n*r+t;i<D.BLOCK_SIZE;i++,a+=r){for(let t=0;t<D.BLOCK_SIZE;t++){const n=255&e[a+t];o+=n,n<c&&(c=n),n>d&&(d=n)}if(d-c>D.MIN_DYNAMIC_RANGE)for(i++,a+=r;i<D.BLOCK_SIZE;i++,a+=r)for(let t=0;t<D.BLOCK_SIZE;t++)o+=255&e[a+t]}let u=o>>2*D.BLOCK_SIZE_POWER;if(d-c<=D.MIN_DYNAMIC_RANGE&&(u=c/2,l>0&&i>0)){const e=(s[l-1][i]+2*s[l][i-1]+s[l-1][i-1])/4;c<e&&(u=e)}s[l][i]=u}}return s}}D.BLOCK_SIZE_POWER=3,D.BLOCK_SIZE=1<<D.BLOCK_SIZE_POWER,D.BLOCK_SIZE_MASK=D.BLOCK_SIZE-1,D.MINIMUM_DIMENSION=5*D.BLOCK_SIZE,D.MIN_DYNAMIC_RANGE=24;class M{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new E("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new E("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new E("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new T;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let e=0;e<this.width;e++){const n=255&r[e];let i;i=n<64?"#":n<128?"+":n<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class O extends M{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new O(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new O(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new O(this.delegate.rotateCounterClockwise45())}}class P extends M{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=P.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return P.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,o=0,a=e.length;i<a;i+=4,o++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[o]=t}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*P.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),s=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=a,t.height=s,n.translate(a/2,s/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=P.makeBufferFromCanvasImageData(t),this}invert(){return new O(this)}}P.DEGREE_TO_RADIANS=Math.PI/180;class j{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B,L=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){e.done?n(e.value):i(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())})};class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return L(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;const r={deviceId:n.deviceId||n.id,label:n.label||"Video device ".concat(t.length+1),kind:e,groupId:n.groupId};t.push(r)}return t})}getVideoInputDevices(){return L(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new j(e.deviceId,e.label))})}findDeviceById(e){return L(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return L(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return L(this,void 0,void 0,function*(){let n;this.reset(),n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return L(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return L(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return L(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return L(this,void 0,void 0,function*(){let r;r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return L(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return L(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return L(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return L(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new d("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new d("element with id '".concat(e,"' must be an ").concat(t," element"));return n}decodeFromImage(e,t){if(!e&&!t)throw new d("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new d("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new d("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new d("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let n;return this.imageElement=t,n=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new d("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new d("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new d("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new d("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return L(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return L(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode)return o(new R("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(a){if(t&&a instanceof R||(a instanceof f||a instanceof _)&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(a)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r),(r instanceof f||r instanceof _||r instanceof R)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new P(t),r=new D(n);return new h(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class z{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:g.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=void 0===n||null===n?null===t||void 0===t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?g.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const n=new Array(t.length+e.length);g.arraycopy(t,0,n,0,t.length),g.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(B||(B={}));var U,H=B;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(U||(U={}));var W,V,G,Y,X,Z,q=U;class Q{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class J{exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class K{constructor(e,t){if(0===t.length)throw new u;this.field=e;const n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let n;if(1===e){n=0;for(let e=0,r=t.length;e!==r;e++){const r=t[e];n=J.addOrSubtract(n,r)}return n}n=t[0];const r=t.length,i=this.field;for(let o=1;o<r;o++)n=J.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const e=t;t=n,n=e}let r=new Int32Array(n.length);const i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=J.addOrSubtract(t[o-i],n[o]);return new K(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),a=this.field;for(let s=0;s<n;s++){const e=t[s];for(let t=0;t<i;t++)o[s+t]=J.addOrSubtract(o[s+t],a.multiply(e,r[t]))}return new K(a,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new K(n,r)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let a=0;a<r;a++)i[a]=o.multiply(n[a],t);return new K(o,i)}divide(e){if(!this.field.equals(e.field))throw new u("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new u("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const i=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),o),s=e.multiplyByMonomial(i,a),l=t.buildMonomial(i,a);n=n.addOrSubtract(l),r=r.addOrSubtract(s)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){const t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class $ extends c{}$.kind="ArithmeticException";class ee extends J{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let a=0;a<t;a++)r[a]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const o=new Int32Array(t);for(let a=0;a<t-1;a++)o[r[a]]=a;this.logTable=o,this.zero=new K(this,Int32Array.from([0])),this.one=new K(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new K(this,n)}inverse(e){if(0===e)throw new $;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class ne extends c{}ne.kind="IllegalStateException";class re{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new K(n,e),i=new Int32Array(t);let o=!0;for(let h=0;h<t;h++){const e=r.evaluateAt(n.exp(h+n.getGeneratorBase()));i[i.length-1-h]=e,0!==e&&(o=!1)}if(o)return;const a=new K(n,i),s=this.runEuclideanAlgorithm(n.buildMonomial(t,1),a,t),l=s[0],c=s[1],d=this.findErrorLocations(l),u=this.findErrorMagnitudes(c,d);for(let h=0;h<d.length;h++){const t=e.length-1-n.log(d[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],u[h])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const n=e;e=t,t=n}const r=this.field;let i=e,o=t,a=r.getZero(),s=r.getOne();for(;o.getDegree()>=(n/2|0);){let e=i,t=a;if(i=o,a=s,i.isZero())throw new te("r_{i-1} was zero");o=e;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),c=r.inverse(l);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const e=o.getDegree()-i.getDegree(),t=r.multiply(o.getCoefficient(o.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(s=n.multiply(a).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new ne("Division algorithm failed to reduce polynomial?")}const l=s.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=r.inverse(l);return[s.multiplyScalar(c),o.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==t)throw new te("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const a=i.inverse(t[o]);let s=1;for(let e=0;e<n;e++)if(o!==e){const n=i.multiply(t[e],a),r=0===(1&n)?1|n:-2&n;s=i.multiply(s,r)}r[o]=i.multiply(e.evaluateAt(a),i.inverse(s)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],a))}return r}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(W||(W={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=ie.convertBoolArrayToByteArray(r),o=ie.getEncodedData(r),a=new Q(i,o,null,null);return a.setNumBits(r.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=W.UPPER,r=W.UPPER,i="",o=0;for(;o<t;)if(r===W.BINARY){if(t-o<5)break;let a=ie.readCode(e,o,5);if(o+=5,0===a){if(t-o<11)break;a=ie.readCode(e,o,11)+31,o+=11}for(let n=0;n<a;n++){if(t-o<8){o=t;break}const n=ie.readCode(e,o,8);i+=A.castAsNonUtf8Char(n),o+=8}r=n}else{let a=r===W.DIGIT?4:5;if(t-o<a)break;let s=ie.readCode(e,o,a);o+=a;let l=ie.getCharacter(r,s);l.startsWith("CTRL_")?(n=r,r=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return W.LOWER;case"P":return W.PUNCT;case"M":return W.MIXED;case"D":return W.DIGIT;case"B":return W.BINARY;default:return W.UPPER}}static getCharacter(e,t){switch(e){case W.UPPER:return ie.UPPER_TABLE[t];case W.LOWER:return ie.LOWER_TABLE[t];case W.MIXED:return ie.MIXED_TABLE[t];case W.PUNCT:return ie.PUNCT_TABLE[t];case W.DIGIT:return ie.DIGIT_TABLE[t];default:throw new ne("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=ee.AZTEC_DATA_10):(n=12,t=ee.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new _;let o=e.length%n,a=new Int32Array(i);for(let h=0;h<i;h++,o+=n)a[h]=ie.readCode(e,o,n);try{new re(t).decode(a,i-r)}catch(u){throw new _(u)}let s=(1<<n)-1,l=0;for(let h=0;h<r;h++){let e=a[h];if(0===e||e===s)throw new _;1!==e&&e!==s-1||l++}let c=new Array(r*n-l),d=0;for(let h=0;h<r;h++){let e=a[h];if(1===e||e===s-1)c.fill(e>1,d,d+n-1),d+=n-1;else for(let t=n-1;t>=0;--t)c[d++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(let a=0;a<i.length;a++)i[a]=a;else{let e=r+1+2*b.truncDivision(b.truncDivision(r,2)-1,15),t=r/2,n=b.truncDivision(e,2);for(let r=0;r<t;r++){let e=r+b.truncDivision(r,15);i[t-r-1]=n-e-1,i[t+r]=n+e+1}}for(let a=0,s=0;a<n;a++){let l=4*(n-a)+(t?9:12),c=2*a,d=r-1-c;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)o[s+n+r]=e.get(i[c+r],i[c+t]),o[s+2*l+n+r]=e.get(i[c+t],i[d-r]),o[s+4*l+n+r]=e.get(i[d-r],i[d-t]),o[s+6*l+n+r]=e.get(i[d-t],i[c+r])}s+=8*l}return o}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ie.readCode(e,t,8):ie.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ie.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class ae{static floatToIntBits(e){return e}}ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class se{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof se){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*ae.floatToIntBits(this.x)+ae.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,o,a;if(n>=t&&n>=r?(o=e[0],i=e[1],a=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],a=e[2]):(o=e[2],i=e[0],a=e[1]),this.crossProductZ(i,o,a)<0){const e=i;i=a,a=e}e[0]=i,e[1]=o,e[2]=a}static distance(e,t){return oe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class de{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=de.INIT_SIZE),void 0!==n&&null!==n||(n=e.getWidth()/2|0),void 0!==r&&null!==r||(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new R}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,a=!1,s=!1,l=!1,c=!1,d=!1;const u=this.width,h=this.height;for(;o;){o=!1;let f=!0;for(;(f||!s)&&t<u;)f=this.containsBlackPoint(n,r,t,!1),f?(t++,o=!0,s=!0):s||t++;if(t>=u){i=!0;break}let p=!0;for(;(p||!l)&&r<h;)p=this.containsBlackPoint(e,t,r,!0),p?(r++,o=!0,l=!0):l||r++;if(r>=h){i=!0;break}let g=!0;for(;(g||!c)&&e>=0;)g=this.containsBlackPoint(n,r,e,!1),g?(e--,o=!0,c=!0):c||e--;if(e<0){i=!0;break}let m=!0;for(;(m||!d)&&n>=0;)m=this.containsBlackPoint(e,t,n,!0),m?(n--,o=!0,d=!0):d||n--;if(n<0){i=!0;break}o&&(a=!0)}if(!i&&a){const i=t-e;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==o)throw new R;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==a)throw new R;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==s)throw new R;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new R;return this.centerEdges(l,o,s,a)}throw new R}getBlackPointOnSegment(e,t,n,r){const i=oe.round(oe.distance(e,t,n,r)),o=(n-e)/i,a=(r-t)/i,s=this.image;for(let l=0;l<i;l++){const n=oe.round(e+l*o),r=oe.round(t+l*a);if(s.get(n,r))return new se(n,r)}return null}centerEdges(e,t,n,r){const i=e.getX(),o=e.getY(),a=t.getX(),s=t.getY(),l=n.getX(),c=n.getY(),d=r.getX(),u=r.getY(),h=de.CORR;return i<this.width/2?[new se(d-h,u+h),new se(a+h,s+h),new se(l-h,c-h),new se(i+h,o-h)]:[new se(d+h,u+h),new se(a+h,s-h),new se(l-h,c+h),new se(i-h,o-h)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let o=e;o<=t;o++)if(i.get(o,n))return!0}else for(let o=e;o<=t;o++)if(i.get(n,o))return!0;return!1}}de.INIT_SIZE=10,de.CORR=1;class ue{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const e=Math.floor(t[o]),a=Math.floor(t[o+1]);if(e<-1||e>n||a<-1||a>r)throw new R;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===a?(t[o+1]=0,i=!0):a===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const e=Math.floor(t[o]),a=Math.floor(t[o+1]);if(e<-1||e>n||a<-1||a>r)throw new R;i=!1,-1===e?(t[o]=0,i=!0):e===n&&(t[o]=n-1,i=!0),-1===a?(t[o+1]=0,i=!0):a===r&&(t[o+1]=r-1,i=!0)}}}class he{constructor(e,t,n,r,i,o,a,s,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=a,this.a23=s,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,o,a,s,l,c,d,u,h,f,p,g){const m=he.quadrilateralToSquare(e,t,n,r,i,o,a,s);return he.squareToQuadrilateral(l,c,d,u,h,f,p,g).times(m)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,d=this.a33;for(let u=0;u<t;u+=2){const t=e[u],h=e[u+1],f=i*t+s*h+d;e[u]=(n*t+o*h+l)/f,e[u+1]=(r*t+a*h+c)/f}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,s=this.a23,l=this.a31,c=this.a32,d=this.a33,u=e.length;for(let h=0;h<u;h++){const u=e[h],f=t[h],p=i*u+s*f+d;e[h]=(n*u+o*f+l)/p,t[h]=(r*u+a*f+c)/p}}static squareToQuadrilateral(e,t,n,r,i,o,a,s){const l=e-n+i-a,c=t-r+o-s;if(0===l&&0===c)return new he(n-e,i-n,e,r-t,o-r,t,0,0,1);{const d=n-i,u=a-i,h=r-o,f=s-o,p=d*f-u*h,g=(l*f-u*c)/p,m=(d*c-l*h)/p;return new he(n-e+g*n,a-e+m*a,e,r-t+g*r,s-t+m*s,t,g,m,1)}}static quadrilateralToSquare(e,t,n,r,i,o,a,s){return he.squareToQuadrilateral(e,t,n,r,i,o,a,s).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends ue{sampleGrid(e,t,n,r,i,o,a,s,l,c,d,u,h,f,p,g,m,y,w){const b=he.quadrilateralToQuadrilateral(r,i,o,a,s,l,c,d,u,h,f,p,g,m,y,w);return this.sampleGridWithTransform(e,t,n,b)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new R;const i=new k(t,n),o=new Float32Array(2*t);for(let s=0;s<n;s++){const t=o.length,n=s+.5;for(let e=0;e<t;e+=2)o[e]=e/2+.5,o[e+1]=n;r.transformPoints(o),ue.checkAndNudgePoints(e,o);try{for(let n=0;n<t;n+=2)e.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,s)}catch(a){throw new R}}return i}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class ge{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class me{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ce(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new R;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let e=n[(this.shift+o)%4];this.compact?(r<<=7,r+=e>>1&127):(r<<=10,r+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(e>>t-2<<1)+(1&e)+(n<<3)}),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(b.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new R}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let l=n-1;l>=0;--l)o[l]=15&e,e>>=4;try{new re(ee.AZTEC_PARAM).decode(o,i)}catch(s){throw new R}let a=0;for(let l=0;l<r;l++)a=(a<<4)+o[l];return a}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),a=this.getFirstDifferent(n,o,1,1),s=this.getFirstDifferent(r,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,a,s,l))break}t=e,n=a,r=s,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new R;this.compact=5===this.nbCenterLayers;let a=new se(t.getX()+.5,t.getY()-.5),s=new se(n.getX()+.5,n.getY()+.5),l=new se(r.getX()-.5,r.getY()+.5),c=new se(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,s,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new de(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(a){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}let i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let a=new de(this.image,15,i,o).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(a){e=this.getFirstDifferent(new ge(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ge(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ge(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new ge(i-7,o-7),!1,-1,-1).toResultPoint()}return i=oe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=oe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new ge(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=pe.getInstance(),a=this.getDimension(),s=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,s,s,l,s,l,l,s,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,a=e.getX(),s=e.getY(),l=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i;for(let d=0;d<n;d++)this.image.get(oe.round(a+d*l),oe.round(s+d*c))&&(r|=1<<n-d-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new ge(e.getX()-i,e.getY()+i),t=new ge(t.getX()-i,t.getY()-i),n=new ge(n.getX()+i,n.getY()-i),r=new ge(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(0===o)return!1;let a=this.getColor(e,t);return a===o&&(a=this.getColor(t,n),a===o&&(a=this.getColor(n,r),a===o))}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,a=e.getX(),s=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(n);for(let u=0;u<c;u++)a+=r,s+=i,this.image.get(oe.round(a),oe.round(s))!==l&&o++;let d=o/n;return d>.1&&d<.9?0:d<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new ge(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,s=(e[0].getY()+e[2].getY())/2,l=new se(a+r*i,s+r*o),c=new se(a-r*i,s-r*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,s=(e[1].getY()+e[3].getY())/2,[l,new se(a+r*i,s+r*o),c,new se(a-r*i,s-r*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=oe.round(e.getX()),n=oe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,r=new me(e.getBlackMatrix()),i=null,o=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){n=c}if(null==o)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){if(null!=n)throw n;throw c}let a=new z(o.getText(),o.getRawBytes(),o.getNumBits(),i,H.AZTEC,g.currentTimeMillis()),s=o.getByteSegments();null!=s&&a.putMetadata(q.BYTE_SEGMENTS,s);let l=o.getECLevel();return null!=l&&a.putMetadata(q.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(C.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class we extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class be{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(C.TRY_HARDER)&&e.isRotateSupported()){const n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata();let o=270;null!==i&&!0===i.get(q.ORIENTATION)&&(o+=i.get(q.ORIENTATION)%360),r.putMetadata(q.ORIENTATION,o);const a=r.getResultPoints();if(null!==a){const e=n.getHeight();for(let t=0;t<a.length;t++)a[t]=new se(e-a[t].getY()-1,a[t].getX())}return r}throw new R}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new v(n);const o=t&&!0===t.get(C.TRY_HARDER),a=Math.max(1,r>>(o?8:5));let s;s=o?r:15;const l=Math.trunc(r/2);for(let u=0;u<s;u++){const o=Math.trunc((u+1)/2),s=l+a*(0===(1&u)?o:-o);if(s<0||s>=r)break;try{i=e.getBlackRow(s,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(C.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(C.NEED_RESULT_POINT_CALLBACK),t=e}try{const r=this.decodeRow(s,i,t);if(1===e){r.putMetadata(q.ORIENTATION,180);const e=r.getResultPoints();null!==e&&(e[0]=new se(n-e[0].getX()-1,e[0].getY()),e[1]=new se(n-e[1].getX()-1,e[1].getY()))}return r}catch(d){}}}throw new R}static recordPattern(e,t,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=e.getSize();if(t>=i)throw new R;let o=!e.get(t),a=0,s=t;for(;s<i;){if(e.get(s)!==o)n[a]++;else{if(++a===r)break;n[a]=1,o=!o}s++}if(a!==r&&(a!==r-1||s!==i))throw new R}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new R;be.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,o=0;for(let l=0;l<r;l++)i+=e[l],o+=t[l];if(i<o)return Number.POSITIVE_INFINITY;const a=i/o;n*=a;let s=0;for(let l=0;l<r;l++){const r=e[l],i=t[l]*a,o=r>i?r-i:i-r;if(o>n)return Number.POSITIVE_INFINITY;s+=o}return s/i}}class ve extends be{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,a=!1;const s=6;for(let l=n;l<t;l++)if(e.get(l)!==a)i[r]++;else{if(r===s-1){let t=ve.MAX_AVG_VARIANCE,n=-1;for(let e=ve.CODE_START_A;e<=ve.CODE_START_C;e++){const r=be.patternMatchVariance(i,ve.CODE_PATTERNS[e],ve.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,n]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,a=!a}throw new R}static decodeCode(e,t,n){be.recordPattern(e,n,t);let r=ve.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<ve.CODE_PATTERNS.length;o++){const e=ve.CODE_PATTERNS[o],n=this.patternMatchVariance(t,e,ve.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=o)}if(i>=0)return i;throw new R}decodeRow(e,t,n){const r=n&&!0===n.get(C.ASSUME_GS1),i=ve.findStartPattern(t),o=i[2];let a=0;const s=new Uint8Array(20);let l;switch(s[a++]=o,o){case ve.CODE_START_A:l=ve.CODE_CODE_A;break;case ve.CODE_START_B:l=ve.CODE_CODE_B;break;case ve.CODE_START_C:l=ve.CODE_CODE_C;break;default:throw new _}let c=!1,d=!1,u="",h=i[0],p=i[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,w=o,b=0,v=!0,S=!1,x=!1;for(;!c;){const e=d;switch(d=!1,m=y,y=ve.decodeCode(t,g,p),s[a++]=y,y!==ve.CODE_STOP&&(v=!0),y!==ve.CODE_STOP&&(b++,w+=b*y),h=p,p+=g.reduce((e,t)=>e+t,0),y){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new _}switch(l){case ve.CODE_CODE_A:if(y<64)u+=x===S?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),x=!1;else if(y<96)u+=x===S?String.fromCharCode(y-64):String.fromCharCode(y+64),x=!1;else switch(y!==ve.CODE_STOP&&(v=!1),y){case ve.CODE_FNC_1:r&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!S&&x?(S=!0,x=!1):S&&x?(S=!1,x=!1):x=!0;break;case ve.CODE_SHIFT:d=!0,l=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_B:if(y<96)u+=x===S?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),x=!1;else switch(y!==ve.CODE_STOP&&(v=!1),y){case ve.CODE_FNC_1:r&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!S&&x?(S=!0,x=!1):S&&x?(S=!1,x=!1):x=!0;break;case ve.CODE_SHIFT:d=!0,l=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_C:if(y<100)y<10&&(u+="0"),u+=y;else switch(y!==ve.CODE_STOP&&(v=!1),y){case ve.CODE_FNC_1:r&&(0===u.length?u+="]C1":u+=String.fromCharCode(29));break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_STOP:c=!0}}e&&(l=l===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const E=p-h;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-h)/2),!1))throw new R;if(w-=b*m,w%103!==m)throw new f;const I=u.length;if(0===I)throw new R;I>0&&v&&(u=l===ve.CODE_CODE_C?u.substring(0,I-2):u.substring(0,I-1));const A=(i[1]+i[0])/2,T=h+E/2,k=s.length,N=new Uint8Array(k);for(let f=0;f<k;f++)N[f]=s[f];const D=[new se(A,e),new se(T,e)];return new z(u,N,0,D,H.CODE_128,(new Date).getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class Se extends be{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,o,a=Se.findAsteriskPattern(t,r),s=t.getNextSet(a[1]),l=t.getSize();do{Se.recordPattern(t,s,r);let e=Se.toNarrowWidePattern(r);if(e<0)throw new R;i=Se.patternToChar(e),this.decodeRowResult+=i,o=s;for(let t of r)s+=t;s=t.getNextSet(s)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,d=0;for(let f of r)d+=f;if(s!==l&&2*(s-o-d)<d)throw new R;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=Se.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==Se.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new R;c=this.extendedMode?Se.decodeExtended(this.decodeRowResult):this.decodeRowResult;let u=(a[1]+a[0])/2,h=o+d/2;return new z(c,null,0,[new se(u,e),new se(h,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,o=r,a=!1,s=t.length;for(let l=r;l<n;l++)if(e.get(l)!==a)t[i]++;else{if(i===s-1){if(this.toNarrowWidePattern(t)===Se.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new R}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=2147483647;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let o=0,a=0;for(let s=0;s<n;s++){let i=e[s];i>r&&(a|=1<<n-1-s,t++,o+=i)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=o))return-1}return a}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<Se.CHARACTER_ENCODINGS.length;t++)if(Se.CHARACTER_ENCODINGS[t]===e)return Se.ALPHABET_STRING.charAt(t);if(e===Se.ASTERISK_ENCODING)return"*";throw new R}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),o="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new _;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new _;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new _;o="\x7f"}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new _;o=":"}}n+=o,r++}else n+=t}return n}}Se.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Se.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Se.ASTERISK_ENCODING=148;class Ce extends be{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new T;Ce.decodeMiddle(t,r[1],i[0],o);let a=o.toString(),s=null;null!=n&&(s=n.get(C.ALLOWED_LENGTHS)),null==s&&(s=Ce.DEFAULT_ALLOWED_LENGTHS);let l=a.length,c=!1,d=0;for(let h of s){if(l===h){c=!0;break}h>d&&(d=h)}if(!c&&l>d&&(c=!0),!c)throw new _;const u=[new se(r[1],e),new se(i[0],e)];return new z(a,null,0,u,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),o.fill(0),a.fill(0);t<n;){be.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],a[e]=i[t+1]}let n=Ce.decodeDigit(o);r.append(n.toString()),n=this.decodeDigit(a),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=Ce.skipWhiteSpace(e),n=Ce.findGuardPattern(e,t,Ce.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new R}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new R;return n}decodeEnd(e){e.reverse();try{let n,r=Ce.skipWhiteSpace(e);try{n=Ce.findGuardPattern(e,r,Ce.END_PATTERN_REVERSED[0])}catch(t){t instanceof R&&(n=Ce.findGuardPattern(e,r,Ce.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let i=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-i,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),a=!1,s=0,l=t;i.fill(0);for(let c=t;c<o;c++)if(e.get(c)!==a)i[s]++;else{if(s===r-1){if(be.patternMatchVariance(i,n,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],g.arraycopy(i,2,i,0,s-1),i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,a=!a}throw new R}static decodeDigit(e){let t=Ce.MAX_AVG_VARIANCE,n=-1,r=Ce.PATTERNS.length;for(let i=0;i<r;i++){let r=Ce.PATTERNS[i],o=be.patternMatchVariance(e,r,Ce.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,n=i):o===t&&(n=-1)}if(n>=0)return n%10;throw new R}}Ce.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ce.MAX_AVG_VARIANCE=.38,Ce.MAX_INDIVIDUAL_VARIANCE=.5,Ce.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ce.START_PATTERN=Int32Array.from([1,1,1,1]),Ce.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class _e extends be{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]),t=_e.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=t[0];r=t[1];let a=o-(r-o);a>=0&&(n=e.isRange(a,o,!1))}return t}static checkChecksum(e){return _e.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return _e.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new _;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new _;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return _e.findGuardPattern(e,t,!1,_e.START_END_PATTERN,new Int32Array(_e.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize(),a=0,s=t=n?e.getNextUnset(t):e.getNextSet(t),l=r.length,c=n;for(let d=t;d<o;d++)if(e.get(d)!==c)i[a]++;else{if(a===l-1){if(be.patternMatchVariance(i,r,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return Int32Array.from([s,d]);s+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<a-1;t++)i[t]=e[t];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,c=!c}throw new R}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,a=r.length;for(let s=0;s<a;s++){let e=r[s],n=be.patternMatchVariance(t,e,_e.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,o=s)}if(o>=0)return o;throw new R}}_e.MAX_AVG_VARIANCE=.48,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.START_END_PATTERN=Int32Array.from([1,1,1]),_e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),_e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),_e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class xe{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),a=xe.parseExtensionString(o),s=[new se((n[0]+n[1])/2,e),new se(i,e)],l=new z(o,null,0,s,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],a=0;for(let l=0;l<5&&o<i;l++){let t=_e.decodeDigit(e,r,o,_e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<4-l),4!==l&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==n.length)throw new R;let s=this.determineCheckDigit(a);if(xe.extensionChecksum(n.toString())!==s)throw new R;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new R}static parseExtensionString(e){if(5!==e.length)return null;let t=xe.parseExtension5String(e);return null==t?null:new Map([[q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())}}class Ee{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),a=Ee.parseExtensionString(o),s=[new se((n[0]+n[1])/2,e),new se(i,e)],l=new z(o,null,0,s,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=a&&l.putAllMetadata(a),l}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],a=0;for(let s=0;s<2&&o<i;s++){let t=_e.decodeDigit(e,r,o,_e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<1-s),1!==s&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==n.length)throw new R;if(parseInt(n.toString())%4!==a)throw new R;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[q.ISSUE_NUMBER,parseInt(e)]])}}class Ie{static decodeRow(e,t,n){let r=_e.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new xe).decodeRow(e,t,r)}catch(i){return(new Ee).decodeRow(e,t,r)}}}Ie.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ae extends _e{constructor(){super(),this.decodeRowStringBuffer="",Ae.L_AND_G_PATTERNS=Ae.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ae.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];Ae.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ae.findStartGuardPattern(t),i=null==n?null:n.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new se((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),a=o.rowOffset,s=o.resultString;if(null!=i){const t=new se(a,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=i){const t=new se((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],d=c+(c-l[0]);if(d>=t.getSize()||!t.isRange(c,d,!1))throw new R;let u=s.toString();if(u.length<8)throw new _;if(!Ae.checkChecksum(u))throw new f;let h=(r[1]+r[0])/2,p=(l[1]+l[0])/2,g=this.getBarcodeFormat(),m=[new se(h,e),new se(p,e)],y=new z(u,null,0,m,g,(new Date).getTime()),w=0;try{let n=Ie.decodeRow(e,t,l[1]);y.putMetadata(q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),w=n.getText().length}catch(v){}let b=null==n?null:n.get(C.ALLOWED_EAN_EXTENSIONS);if(null!=b){let e=!1;for(let t in b)if(w.toString()===t){e=!0;break}if(!e)throw new R}return y}decodeEnd(e,t){return Ae.findGuardPattern(e,t,!1,Ae.START_END_PATTERN,new Int32Array(Ae.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ae.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return Ae.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new _;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new _;n+=t}return(1e3-n)%10}}class Te extends Ae{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],a=0;for(let s=0;s<6&&o<i;s++){let t=Ae.decodeDigit(e,r,o,Ae.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<5-s)}n=Te.determineFirstDigit(n,a),o=Ae.findGuardPattern(e,o,!0,Ae.MIDDLE_PATTERN,new Int32Array(Ae.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<6&&o<i;s++){let t=Ae.decodeDigit(e,r,o,Ae.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e;throw new R}}Te.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ke extends Ae{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let a=0;a<4&&o<i;a++){let t=Ae.decodeDigit(e,r,o,Ae.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}o=Ae.findGuardPattern(e,o,!0,Ae.MIDDLE_PATTERN,new Int32Array(Ae.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&o<i;a++){let t=Ae.decodeDigit(e,r,o,Ae.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of r)o+=e}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class Re extends Ae{constructor(){super(...arguments),this.ean13Reader=new Te}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new z(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new R}reset(){this.ean13Reader.reset()}}class Ne extends Ae{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let o=t[1],a=0;for(let s=0;s<6&&o<i;s++){const t=Ne.decodeDigit(e,r,o,Ne.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of r)o+=e;t>=10&&(a|=1<<5-s)}return{rowOffset:o,resultString:Ne.determineNumSysAndCheckDigit(n,a)}}decodeEnd(e,t){return Ne.findGuardPatternWithoutCounters(e,t,!0,Ne.MIDDLE_END_PATTERN)}checkChecksum(e){return Ae.checkChecksum(Ne.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode("0".charCodeAt(0)+n)+e+String.fromCharCode("0".charCodeAt(0)+r);throw R.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new T;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Ne.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ne.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class De extends be{constructor(e){super();let n=null==e?null:e.get(C.POSSIBLE_FORMATS),r=[];t(n)?(r.push(new Te),r.push(new Re),r.push(new ke),r.push(new Ne)):(n.indexOf(H.EAN_13)>-1&&r.push(new Te),n.indexOf(H.UPC_A)>-1&&r.push(new Re),n.indexOf(H.EAN_8)>-1&&r.push(new ke),n.indexOf(H.UPC_E)>-1&&r.push(new Ne)),this.readers=r}decodeRow(e,t,n){for(let i of this.readers)try{const r=i.decodeRow(e,t,n),o=r.getBarcodeFormat()===H.EAN_13&&"0"===r.getText().charAt(0),a=null==n?null:n.get(C.POSSIBLE_FORMATS),s=null==a||a.includes(H.UPC_A);if(o&&s){const e=r.getRawBytes(),t=new z(r.getText().substring(1),e,e?e.length:null,r.getResultPoints(),H.UPC_A);return t.putAllMetadata(r.getResultMetadata()),t}return r}catch(r){}throw new R}reset(){for(let e of this.readers)e.reset()}}class Me extends be{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(be.patternMatchVariance(e,t[n],Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return n;throw new R}static count(e){return oe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t/(t+e[2]+e[3]);if(n>=Me.MIN_FINDER_PATTERN_RATIO&&n<=Me.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}Me.MAX_AVG_VARIANCE=.2,Me.MAX_INDIVIDUAL_VARIANCE=.45,Me.MIN_FINDER_PATTERN_RATIO=9.5/12,Me.MAX_FINDER_PATTERN_RATIO=12.5/14;class Oe{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Oe))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pe{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new se(n,i)),this.resultPoints.push(new se(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Pe))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class je{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let s of e)r+=s;let i=0,o=0,a=e.length;for(let s=0;s<a-1;s++){let l;for(l=1,o|=1<<s;l<e[s];l++,o&=~(1<<s)){let e=je.combins(r-l-1,a-s-2);if(n&&0===o&&r-l-(a-s-1)>=a-s-1&&(e-=je.combins(r-l-(a-s),a-s-2)),a-s-1>1){let n=0;for(let e=r-l-(a-s-2);e>t;e--)n+=je.combins(r-l-e-1,a-s-3);e-=n*(a-1-s)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let a=e;a>n;a--)i*=a,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class Be{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new v(12*t),r=0,i=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)0!=(i&1<<o)&&n.set(r),r++;for(let o=1;o<e.length;++o){let t=e[o],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&n.set(r),r++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&n.set(r),r++}}return n}}class Le{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fe{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class ze extends Fe{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===ze.FNC1}}ze.FNC1="$";class Ue extends Fe{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Fe{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new _;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class We{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new R;let t=e.substring(0,2);for(let i of We.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(2,i[2],e):We.processFixedAI(2,i[1],e);if(e.length<3)throw new R;let n=e.substring(0,3);for(let i of We.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(3,i[2],e):We.processFixedAI(3,i[1],e);for(let i of We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,i[2],e):We.processFixedAI(4,i[1],e);if(e.length<4)throw new R;let r=e.substring(0,4);for(let i of We.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===We.VARIABLE_LENGTH?We.processVariableAI(4,i[2],e):We.processFixedAI(4,i[1],e);throw new R}static processFixedAI(e,t,n){if(n.length<e)throw new R;let r=n.substring(0,e);if(n.length<e+t)throw new R;let i=n.substring(e,e+t),o=n.substring(e+t),a="("+r+")"+i,s=We.parseFieldsInGeneralPurpose(o);return null==s?a:a+s}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let o=n.substring(e,r),a=n.substring(r),s="("+i+")"+o,l=We.parseFieldsInGeneralPurpose(a);return null==l?s:s+l}}We.VARIABLE_LENGTH=[],We.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",We.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",We.VARIABLE_LENGTH,20],["22",We.VARIABLE_LENGTH,29],["30",We.VARIABLE_LENGTH,8],["37",We.VARIABLE_LENGTH,8],["90",We.VARIABLE_LENGTH,30],["91",We.VARIABLE_LENGTH,30],["92",We.VARIABLE_LENGTH,30],["93",We.VARIABLE_LENGTH,30],["94",We.VARIABLE_LENGTH,30],["95",We.VARIABLE_LENGTH,30],["96",We.VARIABLE_LENGTH,30],["97",We.VARIABLE_LENGTH,3],["98",We.VARIABLE_LENGTH,30],["99",We.VARIABLE_LENGTH,30]],We.THREE_DIGIT_DATA_LENGTH=[["240",We.VARIABLE_LENGTH,30],["241",We.VARIABLE_LENGTH,30],["242",We.VARIABLE_LENGTH,6],["250",We.VARIABLE_LENGTH,30],["251",We.VARIABLE_LENGTH,30],["253",We.VARIABLE_LENGTH,17],["254",We.VARIABLE_LENGTH,20],["400",We.VARIABLE_LENGTH,30],["401",We.VARIABLE_LENGTH,30],["402",17],["403",We.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",We.VARIABLE_LENGTH,20],["421",We.VARIABLE_LENGTH,15],["422",3],["423",We.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],We.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",We.VARIABLE_LENGTH,15],["391",We.VARIABLE_LENGTH,18],["392",We.VARIABLE_LENGTH,15],["393",We.VARIABLE_LENGTH,18],["703",We.VARIABLE_LENGTH,30]],We.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",We.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",We.VARIABLE_LENGTH,20],["8003",We.VARIABLE_LENGTH,30],["8004",We.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",We.VARIABLE_LENGTH,30],["8008",We.VARIABLE_LENGTH,12],["8018",18],["8020",We.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",We.VARIABLE_LENGTH,70],["8200",We.VARIABLE_LENGTH,70]];class Ve{constructor(e){this.buffer=new T,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=We.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return Ve.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ue(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ue(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new Ue(this.current.getPosition(),this.buffer.toString()):new Ue(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Le(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Le(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Le(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Le(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Le(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new Ue(this.current.getPosition(),this.buffer.toString());return new Le(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Le(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ze(e+7,""+(r+1));if(r>=90&&r<116)return new ze(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new _}return new ze(e+8,n)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));let n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ze(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new ne("Decoding invalid alphanumeric value: "+r)}return new ze(e+6,n)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ge{constructor(e){this.information=e,this.generalDecoder=new Ve(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ye extends Ge{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);n/100===0&&e.append("0"),n/10===0&&e.append("0"),e.append(n)}Ye.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),e.append(n)}}Ye.GTIN_SIZE=40;class Xe extends Ye{constructor(e){super(e)}parseInformation(){let e=new T;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Xe.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Xe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE+44)}}Xe.HEADER_SIZE=4;class Ze extends Ge{constructor(e){super(e)}parseInformation(){let e=new T;return this.getGeneralDecoder().decodeAllCodes(e,Ze.HEADER_SIZE)}}Ze.HEADER_SIZE=5;class qe extends Ye{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let a=0;a<5;++a)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Qe extends qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Qe.HEADER_SIZE+qe.GTIN_SIZE+Qe.WEIGHT_SIZE)throw new R;let e=new T;return this.encodeCompressedGtin(e,Qe.HEADER_SIZE),this.encodeCompressedWeight(e,Qe.HEADER_SIZE+qe.GTIN_SIZE,Qe.WEIGHT_SIZE),e.toString()}}Qe.HEADER_SIZE=5,Qe.WEIGHT_SIZE=15;class Je extends Qe{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ke extends Qe{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class $e extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+Ye.GTIN_SIZE)throw new R;let e=new T;this.encodeCompressedGtin(e,$e.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+Ye.GTIN_SIZE,$e.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+Ye.GTIN_SIZE+$e.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2;class et extends Ye{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+Ye.GTIN_SIZE)throw new R;let e=new T;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+Ye.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends qe{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new R;let e=new T;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function nt(e){try{if(e.get(1))return new Xe(e);if(!e.get(2))return new Ze(e);switch(Ve.extractNumericValueFromBitArray(e,1,4)){case 4:return new Je(e);case 5:return new Ke(e)}switch(Ve.extractNumericValueFromBitArray(e,1,5)){case 12:return new $e(e);case 13:return new et(e)}switch(Ve.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new ne("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class rt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof rt&&rt.equalsOrNull(e.leftchar,t.leftchar)&&rt.equalsOrNull(e.rightchar,t.rightchar)&&rt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:rt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class ot extends Me{constructor(e){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof R){if(!this.pairs.length)throw new R;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new R}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let r=t;r<this.rows.length;r++){let t=this.rows[r];this.pairs.length=0;for(let n of e)this.pairs.push(n.getPairs());if(this.pairs.push(t.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new R}static isValidSequence(e){for(let t of ot.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length)for(let t of n.getPairs())for(let n of e)if(rt.equals(t,n))break}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=nt(Be.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new z(t,null,null,i,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let e=this.pairs.get(o);r+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(r+=t.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i=t.length%2==0;this.startFromEven&&(i=!i);let o=!0,a=-1;do{this.findNextPair(e,t,a),r=this.parseFoundFinderPattern(e,n,i),null==r?a=ot.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);let s,l=this.decodeDataCharacter(e,r,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new R;try{s=this.decodeDataCharacter(e,r,i,!1)}catch(c){s=null,this.verbose&&console.log(c)}return new rt(l,s,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,o=e.getSize();i=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let s=!1;for(;i<o&&(s=!e.get(i),s);)i++;let l=0,c=i;for(let d=i;d<o;d++)if(e.get(d)!=s)r[l]++;else{if(3==l){if(a&&ot.reverseCounters(r),ot.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=d);a&&ot.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,s=!s}throw new R}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let a,s=this.getDecodeFinderCounters();g.arraycopy(s,0,s,1,s.length-1),s[0]=r;try{a=this.parseFinderValue(s,ot.FINDER_PATTERNS)}catch(l){return null}return new Pe(a,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let x=0;x<i.length;x++)i[x]=0;if(r)ot.recordPatternInReverse(e,t.getStartEnd()[0],i);else{ot.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let o=17,a=oe.sum(new Int32Array(i))/o,s=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-s)/s>.3)throw new R;let l=this.getOddCounts(),c=this.getEvenCounts(),d=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let x=0;x<i.length;x++){let e=1*i[x]/a,t=e+.5;if(t<1){if(e<.3)throw new R;t=1}else if(t>8){if(e>8.7)throw new R;t=8}let n=x/2;0==(1&x)?(l[n]=t,d[n]=e-t):(c[n]=t,u[n]=e-t)}this.adjustOddEvenCounts(o);let h=4*t.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let x=l.length-1;x>=0;x--){if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[h][2*x];p+=l[x]*e}f+=l[x]}let g=0;for(let x=c.length-1;x>=0;x--)if(ot.isNotA1left(t,n,r)){let e=ot.WEIGHTS[h][2*x+1];g+=c[x]*e}let m=p+g;if(0!=(1&f)||f>13||f<4)throw new R;let y=(13-f)/2,w=ot.SYMBOL_WIDEST[y],b=9-w,v=je.getRSSvalue(l,w,!0),S=je.getRSSvalue(c,b,!1),C=ot.EVEN_TOTAL_SUBSET[y],_=ot.GSUM[y];return new Oe(v*C+S+_,m)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=oe.sum(new Int32Array(this.getOddCounts())),n=oe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,a=!1;n>13?a=!0:n<4&&(o=!0);let s=t+n-e,l=1==(1&t),c=0==(1&n);if(1==s)if(l){if(c)throw new R;i=!0}else{if(!c)throw new R;a=!0}else if(-1==s)if(l){if(c)throw new R;r=!0}else{if(!c)throw new R;o=!0}else{if(0!=s)throw new R;if(l){if(!c)throw new R;t<n?(r=!0,a=!0):(i=!0,o=!0)}else if(c)throw new R}if(r){if(i)throw new R;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new R;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class at extends Oe{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends Me{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);st.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);st.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&st.checkChecksum(o,e))return st.constructResult(o,e);throw new R}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new T;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let o=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&l)?3*e:e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let a=e.getFinderPattern().getResultPoints(),s=t.getFinderPattern().getResultPoints();return new z(i.toString(),null,0,[a[0],a[1],s[0],s[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),a=null==r?null:r.get(C.NEED_RESULT_POINT_CALLBACK);if(null!=a){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),a.foundPossibleResultPoint(new se(r,n))}let s=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new at(1597*s.getValue()+l.getValue(),s.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let g=0;g<r.length;g++)r[g]=0;if(n)be.recordPatternInReverse(e,t.getStartEnd()[0],r);else{be.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,o=oe.sum(new Int32Array(r))/i,a=this.getOddCounts(),s=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let g=0;g<r.length;g++){let e=r[g]/o,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let n=Math.floor(g/2);0===(1&g)?(a[n]=t,l[n]=e-t):(s[n]=t,c[n]=e-t)}this.adjustOddEvenCounts(n,i);let d=0,u=0;for(let g=a.length-1;g>=0;g--)u*=9,u+=a[g],d+=a[g];let h=0,f=0;for(let g=s.length-1;g>=0;g--)h*=9,h+=s[g],f+=s[g];let p=u+3*h;if(n){if(0!==(1&d)||d>12||d<4)throw new R;let e=(12-d)/2,t=st.OUTSIDE_ODD_WIDEST[e],n=9-t,r=je.getRSSvalue(a,t,!1),i=je.getRSSvalue(s,n,!0),o=st.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=st.OUTSIDE_GSUM[e];return new Oe(r*o+i+l,p)}{if(0!==(1&f)||f>10||f<4)throw new R;let e=(10-f)/2,t=st.INSIDE_ODD_WIDEST[e],n=9-t,r=je.getRSSvalue(a,t,!0),i=je.getRSSvalue(s,n,!1),o=st.INSIDE_ODD_TOTAL_SUBSET[e],l=st.INSIDE_GSUM[e];return new Oe(i*o+r+l,p)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let a=0,s=o;for(let l=o;l<r;l++)if(e.get(l)!==i)n[a]++;else{if(3===a){if(Me.isFinderPattern(n))return[s,l];s+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new R}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const a=r[0]-o,s=this.getDecodeFinderCounters(),l=new Int32Array(s.length);g.arraycopy(s,0,l,1,s.length-1),l[0]=a;const c=this.parseFinderValue(l,st.FINDER_PATTERNS);let d=o,u=r[1];return n&&(d=e.getSize()-1-d,u=e.getSize()-1-u),new Pe(c,[o,r[1]],d,u,t)}adjustOddEvenCounts(e,t){let n=oe.sum(new Int32Array(this.getOddCounts())),r=oe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,a=!1,s=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?s=!0:r<4&&(a=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?s=!0:r<4&&(a=!0));let l=n+r-t,c=(1&n)===(e?1:0),d=1===(1&r);if(1===l)if(c){if(d)throw new R;o=!0}else{if(!d)throw new R;s=!0}else if(-1===l)if(c){if(d)throw new R;i=!0}else{if(!d)throw new R;a=!0}else{if(0!==l)throw new R;if(c){if(!d)throw new R;n<r?(i=!0,s=!0):(o=!0,a=!0)}else if(d)throw new R}if(i){if(o)throw new R;Me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(s)throw new R;Me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&Me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends be{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const n=e?e.get(C.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(C.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new De(e)),n.includes(H.CODE_39)&&this.readers.push(new Se(r)),n.includes(H.CODE_128)&&this.readers.push(new ve),n.includes(H.ITF)&&this.readers.push(new Ce),n.includes(H.RSS_14)&&this.readers.push(new st),n.includes(H.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new De(e)),this.readers.push(new Se),this.readers.push(new De(e)),this.readers.push(new ve),this.readers.push(new Ce),this.readers.push(new st),this.readers.push(new ot(this.verbose)))}decodeRow(e,t,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,n)}catch(r){}throw new R}reset(){this.readers.forEach(e=>e.reset())}}class ct extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class dt{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let a=0;const s=o.getECCodewords(),l=o.getECBlocks();for(let c of l)a+=c.getCount()*(c.getDataCodewords()+s);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new _;for(let n of ht.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new _}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new dt(5,new ut(1,3))),new ht(2,12,12,10,10,new dt(7,new ut(1,5))),new ht(3,14,14,12,12,new dt(10,new ut(1,8))),new ht(4,16,16,14,14,new dt(12,new ut(1,12))),new ht(5,18,18,16,16,new dt(14,new ut(1,18))),new ht(6,20,20,18,18,new dt(18,new ut(1,22))),new ht(7,22,22,20,20,new dt(20,new ut(1,30))),new ht(8,24,24,22,22,new dt(24,new ut(1,36))),new ht(9,26,26,24,24,new dt(28,new ut(1,44))),new ht(10,32,32,14,14,new dt(36,new ut(1,62))),new ht(11,36,36,16,16,new dt(42,new ut(1,86))),new ht(12,40,40,18,18,new dt(48,new ut(1,114))),new ht(13,44,44,20,20,new dt(56,new ut(1,144))),new ht(14,48,48,22,22,new dt(68,new ut(1,174))),new ht(15,52,52,24,24,new dt(42,new ut(2,102))),new ht(16,64,64,14,14,new dt(56,new ut(2,140))),new ht(17,72,72,16,16,new dt(36,new ut(4,92))),new ht(18,80,80,18,18,new dt(48,new ut(4,114))),new ht(19,88,88,20,20,new dt(56,new ut(4,144))),new ht(20,96,96,22,22,new dt(68,new ut(4,174))),new ht(21,104,104,24,24,new dt(56,new ut(6,136))),new ht(22,120,120,18,18,new dt(68,new ut(6,175))),new ht(23,132,132,20,20,new dt(62,new ut(8,163))),new ht(24,144,144,22,22,new dt(62,new ut(8,156),new ut(2,155))),new ht(25,8,18,6,16,new dt(7,new ut(1,5))),new ht(26,8,32,6,14,new dt(11,new ut(1,10))),new ht(27,12,26,10,24,new dt(14,new ut(1,16))),new ht(28,12,36,10,16,new dt(18,new ut(1,22))),new ht(29,16,36,14,16,new dt(24,new ut(1,32))),new ht(30,16,48,14,22,new dt(28,new ut(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new _;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new k(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return ht.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let a=!1,s=!1,l=!1,c=!1;do{if(n!==i||0!==r||a)if(n!==i-2||0!==r||0===(3&o)||s)if(n!==i+4||2!==r||0!==(7&o)||l)if(n!==i-2||0!==r||4!==(7&o)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,o),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(i,o),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,o),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner1(i,o),n-=2,r+=2,a=!0}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new _;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new u("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,a=n/i|0,s=new k(a*i,o*r);for(let l=0;l<o;++l){const t=l*r;for(let n=0;n<a;++n){const o=n*i;for(let a=0;a<r;++a){const c=l*(r+2)+1+a,d=t+a;for(let t=0;t<i;++t){const r=n*(i+2)+1+t;if(e.get(r,c)){const e=o+t;s.set(e,d)}}}}}return s}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let u of i)r+=u.getCount();const o=new Array(r);let a=0;for(let u of i)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=n.getECCodewords()+e;o[a++]=new pt(e,new Uint8Array(t))}const s=o[0].codewords.length-n.getECCodewords(),l=s-1;let c=0;for(let u=0;u<l;u++)for(let t=0;t<a;t++)o[t].codewords[u]=e[c++];const d=24===t.getVersionNumber(),h=d?8:a;for(let u=0;u<h;u++)o[u].codewords[s-1]=e[c++];const f=o[0].codewords.length;for(let u=s;u<f;u++)for(let t=0;t<a;t++){const n=d?(t+8)%a:t,r=d&&n>7?u-1:u;o[n].codewords[r]=e[c++]}if(c!==e.length)throw new u;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new u(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,a=e<o?e:o,s=o-a,l=255>>8-a<<s;t=(i[r]&l)>>s,e-=a,n+=a,8===n&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){const o=8-e,a=255>>o<<o;t=t<<e|(i[r]&a)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(V||(V={}));class mt{static decode(e){const t=new gt(e),n=new T,r=new T,i=new Array;let o=V.ASCII_ENCODE;do{if(o===V.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case V.C40_ENCODE:this.decodeC40Segment(t,n);break;case V.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case V.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case V.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case V.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new _}o=V.ASCII_ENCODE}}while(o!==V.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Q(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new _;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),V.ASCII_ENCODE;if(129===i)return V.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return V.C40_ENCODE;case 231:return V.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return V.ANSIX12_ENCODE;case 239:return V.TEXT_ENCODE;case 240:return V.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new _}}while(e.available()>0);return V.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new _;{const e=this.C40_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new _}i=0;break;case 3:n?(t.append(String.fromCharCode(o+224)),n=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new _}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(let e=0;e<3;e++){const o=r[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new _;{const e=this.TEXT_BASIC_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}}break;case 1:n?(t.append(String.fromCharCode(o+128)),n=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new _}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new _;{const e=this.TEXT_SHIFT3_SET_CHARS[o];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}break;default:throw new _}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(8===e.available())return;const r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){const r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else{if(!(r<40))throw new _;t.append(String.fromCharCode(r+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&n)&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let o;if(o=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new _;const a=new Uint8Array(o);for(let l=0;l<o;l++){if(e.available()<8)throw new _;a[l]=this.unrandomize255State(e.readBits(8),r++)}n.push(a);try{t.append(I.decode(a,A.ISO88591))}catch(s){throw new ne("Platform does not support required encoding: "+s.message)}}static unrandomize255State(e,t){const n=e-(149*t%255+1);return n>=0?n:n+256}}mt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],mt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],mt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],mt.TEXT_SHIFT2_SET_CHARS=mt.C40_SHIFT2_SET_CHARS,mt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new re(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),n=t.getVersion(),r=t.readCodewords(),i=pt.getDataBlocks(r,n);let o=0;for(let l of i)o+=l.getNumDataCodewords();const a=new Uint8Array(o),s=i.length;for(let l=0;l<s;l++){const e=i[l],t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let r=0;r<n;r++)a[r*s+l]=t[r]}return mt.decode(a)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class wt{constructor(e){this.image=e,this.rectangleDetector=new de(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new R;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],o=t[3];let a=this.transitionsBetween(n,o)+1,s=this.transitionsBetween(i,o)+1;1===(1&a)&&(a+=1),1===(1&s)&&(s+=1),4*a<7*s&&4*s<7*a&&(a=s=Math.max(a,s));let l=wt.sampleGrid(this.image,n,r,i,o,a,s);return new le(l,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new se(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new se(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),c=o,d=[i,t,n,r];return c>a&&(c=a,d[0]=t,d[1]=n,d[2]=r,d[3]=i),c>s&&(c=s,d[0]=n,d[1]=r,d[2]=i,d[3]=t),c>l&&(d[0]=r,d[1]=i,d[2]=t,d[3]=n),d}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),a=wt.shiftPoint(n,r,4*(o+1)),s=wt.shiftPoint(r,n,4*(o+1));return this.transitionsBetween(a,t)<this.transitionsBetween(s,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),a=this.transitionsBetween(n,i),s=wt.shiftPoint(t,n,4*(a+1)),l=wt.shiftPoint(r,n,4*(o+1));o=this.transitionsBetween(s,i),a=this.transitionsBetween(l,i);let c=new se(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),d=new se(i.getX()+(t.getX()-n.getX())/(a+1),i.getY()+(t.getY()-n.getY())/(a+1));return this.isValid(c)?this.isValid(d)?this.transitionsBetween(s,c)+this.transitionsBetween(l,c)>this.transitionsBetween(s,d)+this.transitionsBetween(l,d)?c:d:c:this.isValid(d)?d:null}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,a=this.transitionsBetween(r,i)+1,s=wt.shiftPoint(t,n,4*a),l=wt.shiftPoint(r,n,4*o);o=this.transitionsBetween(s,i)+1,a=this.transitionsBetween(l,i)+1,1===(1&o)&&(o+=1),1===(1&a)&&(a+=1);let c,d,u=(t.getX()+n.getX()+r.getX()+i.getX())/4,h=(t.getY()+n.getY()+r.getY()+i.getY())/4;return t=wt.moveAway(t,u,h),n=wt.moveAway(n,u,h),r=wt.moveAway(r,u,h),i=wt.moveAway(i,u,h),s=wt.shiftPoint(t,n,4*a),s=wt.shiftPoint(s,i,4*o),c=wt.shiftPoint(n,t,4*a),c=wt.shiftPoint(c,r,4*o),l=wt.shiftPoint(r,i,4*a),l=wt.shiftPoint(l,n,4*o),d=wt.shiftPoint(i,r,4*a),d=wt.shiftPoint(d,t,4*o),[s,c,l,d]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,a){return pe.getInstance().sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-r)>Math.abs(i-n);if(a){let e=n;n=r,r=e,e=i,i=o,o=e}let s=Math.abs(i-n),l=Math.abs(o-r),c=-s/2,d=r<o?1:-1,u=n<i?1:-1,h=0,f=this.image.get(a?r:n,a?n:r);for(let p=n,g=r;p!==i;p+=u){let e=this.image.get(a?g:p,a?p:g);if(e!==f&&(h++,f=e),c+=l,c>0){if(g===o)break;g+=d,c-=s}}return h}}class bt{constructor(){this.decoder=new yt}decode(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=r&&r.has(C.PURE_BARCODE)){const r=bt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(r),n=bt.NO_POINTS}else{const r=new wt(e.getBlackMatrix()).detect();t=this.decoder.decode(r.getBits()),n=r.getPoints()}const i=t.getRawBytes(),o=new z(t.getText(),i,8*i.length,n,H.DATA_MATRIX,g.currentTimeMillis()),a=t.getByteSegments();null!=a&&o.putMetadata(q.BYTE_SEGMENTS,a);const s=t.getECLevel();return null!=s&&o.putMetadata(q.ERROR_CORRECTION_LEVEL,s),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new R;const r=this.moduleSize(t,e);let i=t[1];const o=n[1];let a=t[0];const s=(n[0]-a+1)/r,l=(o-i+1)/r;if(s<=0||l<=0)throw new R;const c=r/2;i+=c,a+=c;const d=new k(s,l);for(let u=0;u<l;u++){const t=i+u*r;for(let n=0;n<s;n++)e.get(a+n*r,t)&&d.set(n,u)}return d}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new R;const o=r-e[0];if(0===o)throw new R;return o}}bt.NO_POINTS=[];class vt extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new bt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(G||(G={}));class St{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,St.FOR_BITS.set(n,this),St.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return St.L;case"M":return St.M;case"Q":return St.Q;case"H":return St.H;default:throw new d(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof St))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=St.FOR_BITS.size)throw new u;return St.FOR_BITS.get(e)}}St.FOR_BITS=new Map,St.FOR_VALUE=new Map,St.L=new St(G.L,"L",1),St.M=new St(G.M,"M",0),St.Q=new St(G.Q,"Q",3),St.H=new St(G.H,"H",2);class Ct{constructor(e){this.errorCorrectionLevel=St.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return b.bitCount(e^t)}static decodeFormatInformation(e,t){const n=Ct.doDecodeFormatInformation(e,t);return null!==n?n:Ct.doDecodeFormatInformation(e^Ct.FORMAT_INFO_MASK_QR,t^Ct.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of Ct.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new Ct(i[1]);let a=Ct.numBitsDiffering(e,o);a<n&&(r=i[1],n=a),e!==t&&(a=Ct.numBitsDiffering(t,o),a<n&&(r=i[1],n=a))}return n<=3?new Ct(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Ct))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Ct.FORMAT_INFO_MASK_QR=21522,Ct.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class _t{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class xt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.ecBlocks=r;let o=0;const a=r[0].getECCodewordsPerBlock(),s=r[0].getECBlocks();for(const l of s)o+=l.getCount()*(l.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new _;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new _}}static getVersionForNumber(e){if(e<1||e>40)throw new u;return Et.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<Et.VERSION_DECODE_INFO.length;r++){const i=Et.VERSION_DECODE_INFO[r];if(i===e)return Et.getVersionForNumber(r+7);const o=Ct.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?Et.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new k(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const e=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Et.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Et.VERSIONS=[new Et(1,new Int32Array(0),new _t(7,new xt(1,19)),new _t(10,new xt(1,16)),new _t(13,new xt(1,13)),new _t(17,new xt(1,9))),new Et(2,Int32Array.from([6,18]),new _t(10,new xt(1,34)),new _t(16,new xt(1,28)),new _t(22,new xt(1,22)),new _t(28,new xt(1,16))),new Et(3,Int32Array.from([6,22]),new _t(15,new xt(1,55)),new _t(26,new xt(1,44)),new _t(18,new xt(2,17)),new _t(22,new xt(2,13))),new Et(4,Int32Array.from([6,26]),new _t(20,new xt(1,80)),new _t(18,new xt(2,32)),new _t(26,new xt(2,24)),new _t(16,new xt(4,9))),new Et(5,Int32Array.from([6,30]),new _t(26,new xt(1,108)),new _t(24,new xt(2,43)),new _t(18,new xt(2,15),new xt(2,16)),new _t(22,new xt(2,11),new xt(2,12))),new Et(6,Int32Array.from([6,34]),new _t(18,new xt(2,68)),new _t(16,new xt(4,27)),new _t(24,new xt(4,19)),new _t(28,new xt(4,15))),new Et(7,Int32Array.from([6,22,38]),new _t(20,new xt(2,78)),new _t(18,new xt(4,31)),new _t(18,new xt(2,14),new xt(4,15)),new _t(26,new xt(4,13),new xt(1,14))),new Et(8,Int32Array.from([6,24,42]),new _t(24,new xt(2,97)),new _t(22,new xt(2,38),new xt(2,39)),new _t(22,new xt(4,18),new xt(2,19)),new _t(26,new xt(4,14),new xt(2,15))),new Et(9,Int32Array.from([6,26,46]),new _t(30,new xt(2,116)),new _t(22,new xt(3,36),new xt(2,37)),new _t(20,new xt(4,16),new xt(4,17)),new _t(24,new xt(4,12),new xt(4,13))),new Et(10,Int32Array.from([6,28,50]),new _t(18,new xt(2,68),new xt(2,69)),new _t(26,new xt(4,43),new xt(1,44)),new _t(24,new xt(6,19),new xt(2,20)),new _t(28,new xt(6,15),new xt(2,16))),new Et(11,Int32Array.from([6,30,54]),new _t(20,new xt(4,81)),new _t(30,new xt(1,50),new xt(4,51)),new _t(28,new xt(4,22),new xt(4,23)),new _t(24,new xt(3,12),new xt(8,13))),new Et(12,Int32Array.from([6,32,58]),new _t(24,new xt(2,92),new xt(2,93)),new _t(22,new xt(6,36),new xt(2,37)),new _t(26,new xt(4,20),new xt(6,21)),new _t(28,new xt(7,14),new xt(4,15))),new Et(13,Int32Array.from([6,34,62]),new _t(26,new xt(4,107)),new _t(22,new xt(8,37),new xt(1,38)),new _t(24,new xt(8,20),new xt(4,21)),new _t(22,new xt(12,11),new xt(4,12))),new Et(14,Int32Array.from([6,26,46,66]),new _t(30,new xt(3,115),new xt(1,116)),new _t(24,new xt(4,40),new xt(5,41)),new _t(20,new xt(11,16),new xt(5,17)),new _t(24,new xt(11,12),new xt(5,13))),new Et(15,Int32Array.from([6,26,48,70]),new _t(22,new xt(5,87),new xt(1,88)),new _t(24,new xt(5,41),new xt(5,42)),new _t(30,new xt(5,24),new xt(7,25)),new _t(24,new xt(11,12),new xt(7,13))),new Et(16,Int32Array.from([6,26,50,74]),new _t(24,new xt(5,98),new xt(1,99)),new _t(28,new xt(7,45),new xt(3,46)),new _t(24,new xt(15,19),new xt(2,20)),new _t(30,new xt(3,15),new xt(13,16))),new Et(17,Int32Array.from([6,30,54,78]),new _t(28,new xt(1,107),new xt(5,108)),new _t(28,new xt(10,46),new xt(1,47)),new _t(28,new xt(1,22),new xt(15,23)),new _t(28,new xt(2,14),new xt(17,15))),new Et(18,Int32Array.from([6,30,56,82]),new _t(30,new xt(5,120),new xt(1,121)),new _t(26,new xt(9,43),new xt(4,44)),new _t(28,new xt(17,22),new xt(1,23)),new _t(28,new xt(2,14),new xt(19,15))),new Et(19,Int32Array.from([6,30,58,86]),new _t(28,new xt(3,113),new xt(4,114)),new _t(26,new xt(3,44),new xt(11,45)),new _t(26,new xt(17,21),new xt(4,22)),new _t(26,new xt(9,13),new xt(16,14))),new Et(20,Int32Array.from([6,34,62,90]),new _t(28,new xt(3,107),new xt(5,108)),new _t(26,new xt(3,41),new xt(13,42)),new _t(30,new xt(15,24),new xt(5,25)),new _t(28,new xt(15,15),new xt(10,16))),new Et(21,Int32Array.from([6,28,50,72,94]),new _t(28,new xt(4,116),new xt(4,117)),new _t(26,new xt(17,42)),new _t(28,new xt(17,22),new xt(6,23)),new _t(30,new xt(19,16),new xt(6,17))),new Et(22,Int32Array.from([6,26,50,74,98]),new _t(28,new xt(2,111),new xt(7,112)),new _t(28,new xt(17,46)),new _t(30,new xt(7,24),new xt(16,25)),new _t(24,new xt(34,13))),new Et(23,Int32Array.from([6,30,54,78,102]),new _t(30,new xt(4,121),new xt(5,122)),new _t(28,new xt(4,47),new xt(14,48)),new _t(30,new xt(11,24),new xt(14,25)),new _t(30,new xt(16,15),new xt(14,16))),new Et(24,Int32Array.from([6,28,54,80,106]),new _t(30,new xt(6,117),new xt(4,118)),new _t(28,new xt(6,45),new xt(14,46)),new _t(30,new xt(11,24),new xt(16,25)),new _t(30,new xt(30,16),new xt(2,17))),new Et(25,Int32Array.from([6,32,58,84,110]),new _t(26,new xt(8,106),new xt(4,107)),new _t(28,new xt(8,47),new xt(13,48)),new _t(30,new xt(7,24),new xt(22,25)),new _t(30,new xt(22,15),new xt(13,16))),new Et(26,Int32Array.from([6,30,58,86,114]),new _t(28,new xt(10,114),new xt(2,115)),new _t(28,new xt(19,46),new xt(4,47)),new _t(28,new xt(28,22),new xt(6,23)),new _t(30,new xt(33,16),new xt(4,17))),new Et(27,Int32Array.from([6,34,62,90,118]),new _t(30,new xt(8,122),new xt(4,123)),new _t(28,new xt(22,45),new xt(3,46)),new _t(30,new xt(8,23),new xt(26,24)),new _t(30,new xt(12,15),new xt(28,16))),new Et(28,Int32Array.from([6,26,50,74,98,122]),new _t(30,new xt(3,117),new xt(10,118)),new _t(28,new xt(3,45),new xt(23,46)),new _t(30,new xt(4,24),new xt(31,25)),new _t(30,new xt(11,15),new xt(31,16))),new Et(29,Int32Array.from([6,30,54,78,102,126]),new _t(30,new xt(7,116),new xt(7,117)),new _t(28,new xt(21,45),new xt(7,46)),new _t(30,new xt(1,23),new xt(37,24)),new _t(30,new xt(19,15),new xt(26,16))),new Et(30,Int32Array.from([6,26,52,78,104,130]),new _t(30,new xt(5,115),new xt(10,116)),new _t(28,new xt(19,47),new xt(10,48)),new _t(30,new xt(15,24),new xt(25,25)),new _t(30,new xt(23,15),new xt(25,16))),new Et(31,Int32Array.from([6,30,56,82,108,134]),new _t(30,new xt(13,115),new xt(3,116)),new _t(28,new xt(2,46),new xt(29,47)),new _t(30,new xt(42,24),new xt(1,25)),new _t(30,new xt(23,15),new xt(28,16))),new Et(32,Int32Array.from([6,34,60,86,112,138]),new _t(30,new xt(17,115)),new _t(28,new xt(10,46),new xt(23,47)),new _t(30,new xt(10,24),new xt(35,25)),new _t(30,new xt(19,15),new xt(35,16))),new Et(33,Int32Array.from([6,30,58,86,114,142]),new _t(30,new xt(17,115),new xt(1,116)),new _t(28,new xt(14,46),new xt(21,47)),new _t(30,new xt(29,24),new xt(19,25)),new _t(30,new xt(11,15),new xt(46,16))),new Et(34,Int32Array.from([6,34,62,90,118,146]),new _t(30,new xt(13,115),new xt(6,116)),new _t(28,new xt(14,46),new xt(23,47)),new _t(30,new xt(44,24),new xt(7,25)),new _t(30,new xt(59,16),new xt(1,17))),new Et(35,Int32Array.from([6,30,54,78,102,126,150]),new _t(30,new xt(12,121),new xt(7,122)),new _t(28,new xt(12,47),new xt(26,48)),new _t(30,new xt(39,24),new xt(14,25)),new _t(30,new xt(22,15),new xt(41,16))),new Et(36,Int32Array.from([6,24,50,76,102,128,154]),new _t(30,new xt(6,121),new xt(14,122)),new _t(28,new xt(6,47),new xt(34,48)),new _t(30,new xt(46,24),new xt(10,25)),new _t(30,new xt(2,15),new xt(64,16))),new Et(37,Int32Array.from([6,28,54,80,106,132,158]),new _t(30,new xt(17,122),new xt(4,123)),new _t(28,new xt(29,46),new xt(14,47)),new _t(30,new xt(49,24),new xt(10,25)),new _t(30,new xt(24,15),new xt(46,16))),new Et(38,Int32Array.from([6,32,58,84,110,136,162]),new _t(30,new xt(4,122),new xt(18,123)),new _t(28,new xt(13,46),new xt(32,47)),new _t(30,new xt(48,24),new xt(14,25)),new _t(30,new xt(42,15),new xt(32,16))),new Et(39,Int32Array.from([6,26,54,82,110,138,166]),new _t(30,new xt(20,117),new xt(4,118)),new _t(28,new xt(40,47),new xt(7,48)),new _t(30,new xt(43,24),new xt(22,25)),new _t(30,new xt(10,15),new xt(67,16))),new Et(40,Int32Array.from([6,30,58,86,114,142,170]),new _t(30,new xt(19,118),new xt(6,119)),new _t(28,new xt(18,47),new xt(31,48)),new _t(30,new xt(34,24),new xt(34,25)),new _t(30,new xt(20,15),new xt(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(Y||(Y={}));class It{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}It.values=new Map([[Y.DATA_MASK_000,new It(Y.DATA_MASK_000,(e,t)=>0===(e+t&1))],[Y.DATA_MASK_001,new It(Y.DATA_MASK_001,(e,t)=>0===(1&e))],[Y.DATA_MASK_010,new It(Y.DATA_MASK_010,(e,t)=>t%3===0)],[Y.DATA_MASK_011,new It(Y.DATA_MASK_011,(e,t)=>(e+t)%3===0)],[Y.DATA_MASK_100,new It(Y.DATA_MASK_100,(e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1))],[Y.DATA_MASK_101,new It(Y.DATA_MASK_101,(e,t)=>e*t%6===0)],[Y.DATA_MASK_110,new It(Y.DATA_MASK_110,(e,t)=>e*t%6<3)],[Y.DATA_MASK_111,new It(Y.DATA_MASK_111,(e,t)=>0===(e+t+e*t%3&1))]]);class At{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new _;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Ct.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new _}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Et.getVersionForNumber(t);let n=0;const r=e-11;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(t,o,n);let i=Et.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let t=e-9;t>=r;t--)n=this.copyBit(o,t,n);if(i=Et.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new _}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=It.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let o=!0;const a=new Uint8Array(t.getTotalCodewords());let s=0,l=0,c=0;for(let d=r-1;d>0;d-=2){6===d&&d--;for(let e=0;e<r;e++){const t=o?r-1-e:e;for(let e=0;e<2;e++)i.get(d-e,t)||(c++,l<<=1,this.bitMatrix.get(d-e,t)&&(l|=1),8===c&&(a[s++]=l,c=0,l=0))}o=!o}if(s!==t.getTotalCodewords())throw new _;return a}remask(){if(null===this.parsedFormatInfo)return;const e=It.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Tt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new u;const r=t.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const u of o)i+=u.getCount();const a=new Array(i);let s=0;for(const u of o)for(let e=0;e<u.getCount();e++){const e=u.getDataCodewords(),t=r.getECCodewordsPerBlock()+e;a[s++]=new Tt(e,new Uint8Array(t))}const l=a[0].codewords.length;let c=a.length-1;for(;c>=0&&a[c].codewords.length!==l;)c--;c++;const d=l-r.getECCodewordsPerBlock();let h=0;for(let u=0;u<d;u++)for(let t=0;t<s;t++)a[t].codewords[u]=e[h++];for(let u=c;u<s;u++)a[u].codewords[d]=e[h++];const f=a[0].codewords.length;for(let u=d;u<f;u++)for(let t=0;t<s;t++){const n=t<c?u:u+1;a[t].codewords[n]=e[h++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(X||(X={}));class kt{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,kt.FOR_BITS.set(r,this),kt.FOR_VALUE.set(e,this)}static forBits(e){const t=kt.FOR_BITS.get(e);if(void 0===t)throw new u;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return n=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof kt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}kt.FOR_BITS=new Map,kt.FOR_VALUE=new Map,kt.TERMINATOR=new kt(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),kt.NUMERIC=new kt(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),kt.ALPHANUMERIC=new kt(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),kt.STRUCTURED_APPEND=new kt(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),kt.BYTE=new kt(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),kt.ECI=new kt(X.ECI,"ECI",Int32Array.from([0,0,0]),7),kt.KANJI=new kt(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),kt.FNC1_FIRST_POSITION=new kt(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),kt.FNC1_SECOND_POSITION=new kt(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),kt.HANZI=new kt(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Rt{static decode(e,t,n,r){const i=new gt(e);let o=new T;const a=new Array;let s=-1,l=-1;try{let e,n=null,c=!1;do{if(i.available()<4)e=kt.TERMINATOR;else{const t=i.readBits(4);e=kt.forBits(t)}switch(e){case kt.TERMINATOR:break;case kt.FNC1_FIRST_POSITION:case kt.FNC1_SECOND_POSITION:c=!0;break;case kt.STRUCTURED_APPEND:if(i.available()<16)throw new _;s=i.readBits(8),l=i.readBits(8);break;case kt.ECI:const d=Rt.parseECIValue(i);if(n=x.getCharacterSetECIByValue(d),null===n)throw new _;break;case kt.HANZI:const u=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));u===Rt.GB2312_SUBSET&&Rt.decodeHanziSegment(i,o,h);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case kt.NUMERIC:Rt.decodeNumericSegment(i,o,f);break;case kt.ALPHANUMERIC:Rt.decodeAlphanumericSegment(i,o,f,c);break;case kt.BYTE:Rt.decodeByteSegment(i,o,f,n,a,r);break;case kt.KANJI:Rt.decodeKanjiSegment(i,o,f);break;default:throw new _}}}while(e!==kt.TERMINATOR)}catch(c){throw new _}return new Q(e,o.toString(),0===a.length?null:a,null===n?null:n.toString(),s,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new _;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/96<<8&4294967295|t%96;o+=o<959?41377:42657,r[i]=o>>8&255,r[i+1]=255&o,i+=2,n--}try{t.append(I.decode(r,A.GB2312))}catch(o){throw new _(o)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new _;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const t=e.readBits(13);let o=t/192<<8&4294967295|t%192;o+=o<7936?33088:49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{t.append(I.decode(r,A.SHIFT_JIS))}catch(o){throw new _(o)}}static decodeByteSegment(e,t,n,r,i,o){if(8*n>e.available())throw new _;const a=new Uint8Array(n);for(let c=0;c<n;c++)a[c]=e.readBits(8);let s;s=null===r?A.guessEncoding(a,o):r.getName();try{t.append(I.decode(a,s))}catch(l){throw new _(l)}i.push(a)}static toAlphaNumericChar(e){if(e>=Rt.ALPHANUMERIC_CHARS.length)throw new _;return Rt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new _;const r=e.readBits(11);t.append(Rt.toAlphaNumericChar(Math.floor(r/45))),t.append(Rt.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(e.available()<6)throw new _;t.append(Rt.toAlphaNumericChar(e.readBits(6)))}if(r)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new _;const r=e.readBits(10);if(r>=1e3)throw new _;t.append(Rt.toAlphaNumericChar(Math.floor(r/100))),t.append(Rt.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(Rt.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(e.available()<7)throw new _;const n=e.readBits(7);if(n>=100)throw new _;t.append(Rt.toAlphaNumericChar(Math.floor(n/10))),t.append(Rt.toAlphaNumericChar(n%10))}else if(1===n){if(e.available()<4)throw new _;const n=e.readBits(4);if(n>=10)throw new _;t.append(Rt.toAlphaNumericChar(n))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new _}}Rt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Rt.GB2312_SUBSET=1;class Nt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Dt{constructor(){this.rsDecoder=new re(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(k.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new At(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const e=this.decodeBitMatrixParser(n,t);return e.setOther(new Nt(!0)),e}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=Tt.getDataBlocks(i,n,r);let a=0;for(const c of o)a+=c.getNumDataCodewords();const s=new Uint8Array(a);let l=0;for(const c of o){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let n=0;n<t;n++)s[l++]=e[n]}return Rt.decode(s,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(r){throw new f}for(let i=0;i<t;i++)e[i]=n[i]}}class Mt extends se{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new Mt(r,i,o)}}class Ot{constructor(e,t,n,r,i,o,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){const t=r+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;let s=e;for(;s<n&&!o.get(s,t);)s++;let l=0;for(;s<n;){if(o.get(s,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,s);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;s++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new R}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let s=e;for(;s>=0&&i.get(t,s)&&a[1]<=n;)a[1]++,s--;if(s<0||a[1]>n)return NaN;for(;s>=0&&!i.get(t,s)&&a[0]<=n;)a[0]++,s--;if(a[0]>n)return NaN;for(s=e+1;s<o&&i.get(t,s)&&a[1]<=n;)a[1]++,s++;if(s===o||a[1]>n)return NaN;for(;s<o&&!i.get(t,s)&&a[2]<=n;)a[2]++,s++;if(a[2]>n)return NaN;const l=a[0]+a[1]+a[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(a)?Ot.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Ot.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);const n=new Mt(i,o,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Pt extends se{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,a=(this.count*this.estimatedModuleSize+n)/r;return new Pt(i,o,a,r)}}class jt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Bt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(C.TRY_HARDER),n=null!==e&&void 0!==e&&void 0!==e.get(C.PURE_BARCODE),r=this.image,i=r.getHeight(),o=r.getWidth();let a=Math.floor(3*i/(4*Bt.MAX_MODULES));(a<Bt.MIN_SKIP||t)&&(a=Bt.MIN_SKIP);let s=!1;const l=new Int32Array(5);for(let d=a-1;d<i&&!s;d+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<o;t++)if(r.get(t,d))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Bt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,d,t,n)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(a=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(d+=e-l[2]-a,t=o-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Bt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,d,o,n)&&(a=l[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return se.orderBestPatterns(c),new jt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const n=e[i];if(0===n)return!1;t+=n}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let o=0;const a=this.image;for(;e>=o&&t>=o&&a.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!a.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&a.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;const s=a.getHeight(),l=a.getWidth();for(o=1;e+o<s&&t+o<l&&a.get(t+o,e+o);)i[2]++,o++;if(e+o>=s||t+o>=l)return!1;for(;e+o<s&&t+o<l&&!a.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=s||t+o>=l||i[3]>=n)return!1;for(;e+o<s&&t+o<l&&a.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-r)<2*r&&Bt.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,o=i.getHeight(),a=this.getCrossCheckStateCount();let s=e;for(;s>=0&&i.get(t,s);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(t,s)&&a[1]<=n;)a[1]++,s--;if(s<0||a[1]>n)return NaN;for(;s>=0&&i.get(t,s)&&a[0]<=n;)a[0]++,s--;if(a[0]>n)return NaN;for(s=e+1;s<o&&i.get(t,s);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(t,s)&&a[3]<n;)a[3]++,s++;if(s===o||a[3]>=n)return NaN;for(;s<o&&i.get(t,s)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-r)>=2*r?NaN:Bt.foundPatternCross(a)?Bt.centerFromEnd(a,s):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,o=i.getWidth(),a=this.getCrossCheckStateCount();let s=e;for(;s>=0&&i.get(s,t);)a[2]++,s--;if(s<0)return NaN;for(;s>=0&&!i.get(s,t)&&a[1]<=n;)a[1]++,s--;if(s<0||a[1]>n)return NaN;for(;s>=0&&i.get(s,t)&&a[0]<=n;)a[0]++,s--;if(a[0]>n)return NaN;for(s=e+1;s<o&&i.get(s,t);)a[2]++,s++;if(s===o)return NaN;for(;s<o&&!i.get(s,t)&&a[3]<n;)a[3]++,s++;if(s===o||a[3]>=n)return NaN;for(;s<o&&i.get(s,t)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return NaN;const l=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(l-r)>=r?NaN:Bt.foundPatternCross(a)?Bt.centerFromEnd(a,s):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=Bt.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(a)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(a),e[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(a),Math.floor(o),e[2],i)))){const e=i/7;let t=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(e,a,o)){n[r]=i.combineEstimate(a,o,e),t=!0;break}}if(!t){const t=new Pt(o,a,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Bt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Bt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new R;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();r+=t,i+=t*t}n=r/e;let o=Math.sqrt(i/e-n*n);t.sort((e,t)=>{const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0});const a=Math.max(.2*n,o);for(let e=0;e<t.length&&t.length>3;e++){const r=t[e];Math.abs(r.getEstimatedModuleSize()-n)>a&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const n of t)e+=n.getEstimatedModuleSize();n=e/t.length,t.sort((e,t)=>{if(t.getCount()===e.getCount()){const r=Math.abs(t.getEstimatedModuleSize()-n),i=Math.abs(e.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return t.getCount()-e.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Bt.CENTER_QUORUM=2,Bt.MIN_SKIP=3,Bt.MAX_MODULES=57;class Lt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(C.NEED_RESULT_POINT_CALLBACK);const t=new Bt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new R("No pattern found in proccess finder.");const o=Lt.computeDimension(t,n,r,i),a=Et.getProvisionalVersionForDimension(o),s=a.getDimensionForVersion()-7;let l=null;if(a.getAlignmentPatternCenters().length>0){const e=n.getX()-t.getX()+r.getX(),o=n.getY()-t.getY()+r.getY(),a=1-3/s,c=Math.floor(t.getX()+a*(e-t.getX())),d=Math.floor(t.getY()+a*(o-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,d,t);break}catch(h){if(!(h instanceof R))throw h}}const c=Lt.createTransform(t,n,r,l,o),d=Lt.sampleGrid(this.image,c,o);let u;return u=null===l?[r,t,n]:[r,t,n,l],new le(d,u)}static createTransform(e,t,n,r,i){const o=i-3.5;let a,s,l,c;return null!==r?(a=r.getX(),s=r.getY(),l=o-3,c=l):(a=t.getX()-e.getX()+n.getX(),s=t.getY()-e.getY()+n.getY(),l=o,c=o),he.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,l,c,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),a,s,n.getX(),n.getY())}static sampleGrid(e,t,n){return pe.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=oe.round(se.distance(e,t)/r),o=oe.round(se.distance(e,n)/r);let a=Math.floor((i+o)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new R("Dimensions could be not found.")}return a}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,a=e-(n-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let s=Math.floor(t-(r-t)*o);return o=1,s<0?(o=t/(t-s),s=0):s>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(s-t),s=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,a,s),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}const o=Math.abs(n-e),a=Math.abs(r-t);let s=-o/2;const l=e<n?1:-1,c=t<r?1:-1;let d=0;const u=n+l;for(let h=e,f=t;h!==u;h+=l){const n=i?f:h,l=i?h:f;if(1===d===this.image.get(n,l)){if(2===d)return oe.distance(h,f,e,t);d++}if(s+=a,s>0){if(f===r)break;f+=c,s-=o}}return 2===d?oe.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),o=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-o<3*e)throw new R("Alignment top exceeds estimated module size.");const s=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-s<3*e)throw new R("Alignment bottom exceeds estimated module size.");return new Ot(this.image,o,s,a-o,l-s,e,this.resultPointCallback).find()}}class Ft{constructor(){this.decoder=new Dt}getDecoder(){return this.decoder}decode(e,t){let n,r;if(void 0!==t&&null!==t&&void 0!==t.get(C.PURE_BARCODE)){const i=Ft.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=Ft.NO_POINTS}else{const i=new Lt(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof Nt&&n.getOther().applyMirroredCorrection(r);const i=new z(n.getText(),n.getRawBytes(),void 0,r,H.QR_CODE,void 0),o=n.getByteSegments();null!==o&&i.putMetadata(q.BYTE_SEGMENTS,o);const a=n.getECLevel();return null!==a&&i.putMetadata(q.ERROR_CORRECTION_LEVEL,a),n.hasStructuredAppend()&&(i.putMetadata(q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new R;const r=this.moduleSize(t,e);let i=t[1],o=n[1],a=t[0],s=n[0];if(a>=s||i>=o)throw new R;if(o-i!==s-a&&(s=a+(o-i),s>=e.getWidth()))throw new R;const l=Math.round((s-a+1)/r),c=Math.round((o-i+1)/r);if(l<=0||c<=0)throw new R;if(c!==l)throw new R;const d=Math.floor(r/2);i+=d,a+=d;const u=a+Math.floor((l-1)*r)-s;if(u>0){if(u>d)throw new R;a-=u}const h=i+Math.floor((c-1)*r)-o;if(h>0){if(h>d)throw new R;i-=h}const f=new k(l,c);for(let p=0;p<c;p++){const t=i+Math.floor(p*r);for(let n=0;n<l;n++)e.get(a+Math.floor(n*r),t)&&f.set(n,p)}return f}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],o=e[1],a=!0,s=0;for(;i<r&&o<n;){if(a!==t.get(i,o)){if(5===++s)break;a=!a}i++,o++}if(i===r||o===n)throw new R;return(i-e[0])/7}}Ft.NO_POINTS=new Array;class zt{PDF417Common(){}static getBitCountSum(e){return oe.sum(e)}static toIntArray(e){if(null==e||!e.length)return zt.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=w.binarySearch(zt.SYMBOL_TABLE,262143&e);return t<0?-1:(zt.CODEWORD_TABLE[t]-1)%zt.NUMBER_OF_CODEWORDS}}zt.NUMBER_OF_CODEWORDS=929,zt.MAX_CODEWORDS_IN_BARCODE=zt.NUMBER_OF_CODEWORDS-1,zt.MIN_ROWS_IN_BARCODE=3,zt.MAX_ROWS_IN_BARCODE=90,zt.MODULES_IN_CODEWORD=17,zt.MODULES_IN_STOP_PATTERN=18,zt.BARS_IN_MODULE=8,zt.EMPTY_INT_ARRAY=new Int32Array([]),zt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),zt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ut{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Ht.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Ht.detect(n,r)),new Ut(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,o=!1;for(;r<t.getHeight();){const a=Ht.findVertices(t,r,i);if(null!=a[0]||null!=a[3]){if(o=!0,n.push(a),!e)break;null!=a[2]?(i=Math.trunc(a[2].getX()),r=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY()))}else{if(!o)break;o=!1,i=0;for(const e of n)null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=Ht.ROW_STEP}}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),o=new Array(8);return Ht.copyToResult(o,Ht.findRowsWithPattern(e,r,i,t,n,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=o[4]&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Ht.copyToResult(o,Ht.findRowsWithPattern(e,r,i,t,n,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){const a=new Array(4);let s=!1;const l=new Int32Array(o.length);for(;r<t;r+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,i,r,n,!1,o,l);if(null!=t){for(;r>0;){const a=Ht.findGuardPattern(e,i,--r,n,!1,o,l);if(null==a){r++;break}t=a}a[0]=new se(t[0],r),a[1]=new se(t[1],r),s=!0;break}}let c=r+1;if(s){let r=0,i=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;c<t;c++){const t=Ht.findGuardPattern(e,i[0],c,n,!1,o,l);if(null!=t&&Math.abs(i[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Ht.MAX_PATTERN_DRIFT)i=t,r=0;else{if(r>Ht.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,a[2]=new se(i[0],c),a[3]=new se(i[1],c)}return c-r<Ht.BARCODE_MIN_HEIGHT&&w.fill(a,null),a}static findGuardPattern(e,t,n,r,i,o,a){w.fillWithin(a,0,a.length,0);let s=t,l=0;for(;e.get(s,n)&&s>0&&l++<Ht.MAX_PIXEL_DRIFT;)s--;let c=s,d=0,u=o.length;for(let h=i;c<r;c++)if(e.get(c,n)!==h)a[d]++;else{if(d===u-1){if(Ht.patternMatchVariance(a,o,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([s,c]);s+=a[0]+a[1],g.arraycopy(a,2,a,0,d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,h=!h}return d===u-1&&Ht.patternMatchVariance(a,o,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([s,c-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let l=0;l<r;l++)i+=e[l],o+=t[l];if(i<o)return 1/0;let a=i/o;n*=a;let s=0;for(let l=0;l<r;l++){let r=e[l],i=t[l]*a,o=r>i?r-i:i-r;if(o>n)return 1/0;s+=o}return s/i}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Wt{constructor(e,t){if(0===t.length)throw new u;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),g.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new Wt(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Wt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new u("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Wt(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let a=0;a<n;a++){let e=t[a];for(let t=0;t<i;t++)o[a+t]=this.field.add(o[a+t],this.field.multiply(e,r[t]))}return new Wt(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Wt(this.field,t)}multiplyScalar(e){if(0===e)return new Wt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Wt(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new u;if(0===t)return new Wt(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Wt(this.field,r)}toString(){let e=new T;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Vt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new u;return this.logTable[e]}inverse(e){if(0===e)throw new $;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Gt extends Vt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Wt(this,new Int32Array([0])),this.one=new Wt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new u;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Wt(this,n)}}Gt.PDF417_GF=new Gt(zt.NUMBER_OF_CODEWORDS,3);class Yt{constructor(){this.field=Gt.PDF417_GF}decode(e,t,n){let r=new Wt(this.field,e),i=new Int32Array(t),o=!1;for(let f=t;f>0;f--){let e=r.evaluateAt(this.field.exp(f));i[t-f]=e,0!==e&&(o=!0)}if(!o)return 0;let a=this.field.getOne();if(null!=n)for(const f of n){let t=this.field.exp(e.length-1-f),n=new Wt(this.field,new Int32Array([this.field.subtract(0,t),1]));a=a.multiply(n)}let s=new Wt(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),s,t),c=l[0],d=l[1],u=this.findErrorLocations(c),h=this.findErrorMagnitudes(d,c,u);for(let p=0;p<u.length;p++){let t=e.length-1-this.field.log(u[p]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],h[p])}return u.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,o=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=o;if(r=i,o=a,r.isZero())throw f.getChecksumInstance();i=e;let n=this.field.getZero(),s=r.getCoefficient(r.getDegree()),l=this.field.inverse(s);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}a=n.multiply(o).subtract(t).negative()}let s=a.getCoefficient(0);if(0===s)throw f.getChecksumInstance();let l=this.field.inverse(s);return[a.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw f.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,t.getCoefficient(l));let o=new Wt(this.field,i),a=n.length,s=new Int32Array(a);for(let l=0;l<a;l++){let t=this.field.inverse(n[l]),r=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(o.evaluateAt(t));s[l]=this.field.multiply(r,i)}return s}}class Xt{constructor(e,t,n,r,i){e instanceof Xt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const o=null==t||null==n,a=null==r||null==i;if(o&&a)throw new R;o?(t=new se(0,r.getY()),n=new se(0,i.getY())):a&&(r=new se(e.getWidth()-1,t.getY()),i=new se(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Xt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,a=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let a=new se(t.getX(),i);n?r=a:o=a}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let o=new se(e.getX(),r);n?i=o:a=o}return new Xt(this.image,r,i,o,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zt{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qt{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(e,r,i,o,a,s){if("%%"===e)return"%";if(void 0===t[++n])return;e=o?parseInt(o.substr(1)):void 0;let l,c=a?parseInt(a.substr(1)):void 0;switch(s){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let d=parseInt(i),u=i&&i[0]+""==="0"?"0":" ";for(;l.length<d;)l=void 0!==r?l+u:u+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.buffer+=qt.form(e,n)}toString(){return this.buffer}}class Qt{constructor(e){this.boundingBox=new Xt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<Qt.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],null!=t))return t;if(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qt;let t=0;for(const n of this.codewords)null!=n?e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Qt.MAX_NEARBY_DISTANCE=5;class Jt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return zt.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Kt extends Qt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=-1,l=1,c=0;for(let d=o;d<a;d++){if(null==t[d])continue;let n=t[d],r=n.getRowNumber()-s;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,s=n.getRowNumber();else if(r<0||n.getRowNumber()>=e.getRowCount()||r>d)t[d]=null;else{let e;e=l>2?(l-2)*r:r;let i=e>=d;for(let n=1;n<=e&&!i;n++)i=null!=t[d-n];i?t[d]=null:(s=n.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(null!=n){let e=n.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),s=-1;for(let l=i;l<o;l++){if(null==a[l])continue;let t=a[l];t.setRowNumberAsRowIndicatorColumn();let n=t.getRowNumber()-s;0===n||(1===n?s=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?a[l]=null:s=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Jt,n=new Jt,r=new Jt,i=new Jt;for(let a of e){if(null==a)continue;a.setRowNumberAsRowIndicatorColumn();let e=a.getValue()%30,o=a.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<zt.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>zt.MAX_ROWS_IN_BARCODE)return null;let o=new Zt(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount())e[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class $t{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=zt.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let n=0;n<e.length;n++)null!=e[n]&&(e[n].hasValidRowNumber()||this.adjustRowNumbers(t,n,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=$t.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[n];null!=o&&(i=$t.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=i[t],a[3]=o[t],t>0&&(a[0]=n[t-1],a[4]=i[t-1],a[5]=o[t-1]),t>1&&(a[8]=n[t-2],a[10]=i[t-2],a[11]=o[t-2]),t<n.length-1&&(a[1]=n[t+1],a[6]=i[t+1],a[7]=o[t+1]),t<n.length-2&&(a[9]=n[t+2],a[12]=i[t+2],a[13]=o[t+2]);for(let s of a)if($t.adjustRowNumber(r,s))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new qt;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];null!=r?t.format(" %3d|%3d",r.getRowNumber(),r.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class en{constructor(e,t,n,r){this.rowNumber=en.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==en.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}en.BARCODE_ROW_UNKNOWN=-1;class tn{static initialize(){for(let e=0;e<zt.SYMBOL_TABLE.length;e++){let t=zt.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<zt.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tn.RATIOS_TABLE[e]||(tn.RATIOS_TABLE[e]=new Array(zt.BARS_IN_MODULE)),tn.RATIOS_TABLE[e][zt.BARS_IN_MODULE-r-1]=Math.fround(i/zt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tn.getDecodedCodewordValue(tn.sampleBitCounts(e));return-1!==t?t:tn.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=oe.sum(e),n=new Int32Array(zt.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<zt.MODULES_IN_CODEWORD;o++){let a=t/(2*zt.MODULES_IN_CODEWORD)+o*t/zt.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tn.getBitValue(e);return-1===zt.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=oe.sum(e),n=new Array(zt.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=ae.MAX_VALUE,i=-1;this.bSymbolTableReady||tn.initialize();for(let o=0;o<tn.RATIOS_TABLE.length;o++){let e=0,t=tn.RATIOS_TABLE[o];for(let i=0;i<zt.BARS_IN_MODULE;i++){let o=Math.fround(t[i]-n[i]);if(e+=Math.fround(o*o),e>=r)break}e<r&&(r=e,i=zt.SYMBOL_TABLE[o])}return i}}tn.bSymbolTableReady=!1,tn.RATIOS_TABLE=new Array(zt.SYMBOL_TABLE.length).map(e=>new Array(zt.BARS_IN_MODULE));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class rn{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class on extends c{}on.kind="NullPointerException";class an{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new on;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new m;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class sn extends c{}class ln extends an{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new u("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new sn;t=b.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new m;this.ensureCapacity(this.count+n),g.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof n.g)return n.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let dn;function un(e){if("undefined"===typeof dn&&(dn=cn()),null===dn)throw new Error("BigInt is not supported!");return dn(e)}function hn(){let e=[];e[0]=un(1);let t=un(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Z||(Z={}));class fn{static decode(e,t){let n=new T(""),r=x.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],a=new nn;for(;i<e[0];){switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(e,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(o,e,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(e,i,n);break;case fn.ECI_CHARSET:x.getCharacterSetECIByValue(e[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(e,i,a);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new _;default:i--,i=fn.textCompaction(e,i,n)}if(!(i<e.length))throw _.getFormatInstance();o=e[i++]}if(0===n.length())throw _.getFormatInstance();let s=new Q(null,n.toString(),null,t);return s.setOther(a),s}static decodeMacroBlock(e,t,n){if(t+fn.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw _.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<fn.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)r[a]=e[t];n.setSegmentIndex(b.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new T;t=fn.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new T;t=fn.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new T;t=fn.textCompaction(e,t+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new T;t=fn.textCompaction(e,t+1,o),n.setAddressee(o.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new T;t=fn.numericCompaction(e,t+1,a),n.setSegmentCount(b.parseInt(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let s=new T;t=fn.numericCompaction(e,t+1,s),n.setTimestamp(rn.parseLong(s.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new T;t=fn.numericCompaction(e,t+1,l),n.setChecksum(b.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new T;t=fn.numericCompaction(e,t+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw _.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw _.getFormatInstance()}if(-1!==o){let r=t-o;n.isLastSegment()&&r--,n.setOptionalData(w.copyOfRange(e,o,o+r))}return t}static textCompaction(e,t,n){let r=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),o=0,a=!1;for(;t<e[0]&&!a;){let n=e[t++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[o]=n/30,r[o+1]=n%30,o+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[o++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[o]=n,o++}}return fn.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=Z.ALPHA,o=Z.ALPHA,a=0;for(;a<n;){let n=e[a],s="";switch(i){case Z.ALPHA:if(n<26)s=String.fromCharCode(65+n);else switch(n){case 26:s=" ";break;case fn.LL:i=Z.LOWER;break;case fn.ML:i=Z.MIXED;break;case fn.PS:o=i,i=Z.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Z.ALPHA}break;case Z.LOWER:if(n<26)s=String.fromCharCode(97+n);else switch(n){case 26:s=" ";break;case fn.AS:o=i,i=Z.ALPHA_SHIFT;break;case fn.ML:i=Z.MIXED;break;case fn.PS:o=i,i=Z.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Z.ALPHA}break;case Z.MIXED:if(n<fn.PL)s=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=Z.PUNCT;break;case 26:s=" ";break;case fn.LL:i=Z.LOWER;break;case fn.AL:i=Z.ALPHA;break;case fn.PS:o=i,i=Z.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Z.ALPHA}break;case Z.PUNCT:if(n<fn.PAL)s=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=Z.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Z.ALPHA}break;case Z.ALPHA_SHIFT:if(i=o,n<26)s=String.fromCharCode(65+n);else switch(n){case 26:s=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Z.ALPHA}break;case Z.PUNCT_SHIFT:if(i=o,n<fn.PAL)s=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=Z.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Z.ALPHA}}""!==s&&r.append(s),a++}}static byteCompaction(e,t,n,r,i){let o=new ln,a=0,s=0,l=!1;switch(e){case fn.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),n=t[r++];for(;r<t[0]&&!l;)switch(e[a++]=n,s=900*s+n,n=t[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(a%5===0&&a>0){for(let e=0;e<6;++e)o.write(Number(un(s)>>un(8*(5-e))));s=0,a=0}}r===t[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(e[a++]=n);for(let t=0;t<a;t++)o.write(e[t]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<fn.TEXT_COMPACTION_MODE_LATCH)a++,s=900*s+e;else switch(e){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0}if(a%5===0&&a>0){for(let e=0;e<6;++e)o.write(Number(un(s)>>un(8*(5-e))));s=0,a=0}}}return i.append(I.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<fn.TEXT_COMPACTION_MODE_LATCH)o[r]=a,r++;else switch(a){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%fn.MAX_NUMERIC_CODEWORDS===0||a===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=un(0);for(let i=0;i<t;i++)n+=fn.EXP900[t-i-1]*un(e[i]);let r=n.toString();if("1"!==r.charAt(0))throw new _;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?hn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(e,t,n,r,i,o,a){let s,l=new Xt(e,t,n,r,i),c=null,d=null;for(let f=!0;;f=!1){if(null!=t&&(c=pn.getRowIndicatorColumn(e,l,t,!0,o,a)),null!=r&&(d=pn.getRowIndicatorColumn(e,l,r,!1,o,a)),s=pn.merge(c,d),null==s)throw R.getNotFoundInstance();let n=s.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}s.setBoundingBox(l);let u=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,c),s.setDetectionResultColumn(u,d);let h=null!=c;for(let f=1;f<=u;f++){let t,n=h?f:u-f;if(void 0!==s.getDetectionResultColumn(n))continue;t=0===n||n===u?new Kt(l,0===n):new Qt(l),s.setDetectionResultColumn(n,t);let r=-1,i=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=pn.getStartColumn(s,n,c,h),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let d=pn.detectCodeword(e,l.getMinX(),l.getMaxX(),h,r,c,o,a);null!=d&&(t.setCodeword(c,d),i=r,o=Math.min(o,d.getWidth()),a=Math.max(a,d.getWidth()))}}return pn.createDecoderResult(s)}static merge(e,t){if(null==e&&null==t)return null;let n=pn.getBarcodeMetadata(e,t);if(null==n)return null;let r=Xt.merge(pn.adjustBoundingBox(e),pn.adjustBoundingBox(t));return new $t(n,r)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=pn.getMax(t),r=0;for(let a of t)if(r+=n-a,a>0)break;let i=e.getCodewords();for(let a=0;r>0&&null==i[a];a++)r--;let o=0;for(let a=t.length-1;a>=0&&(o+=n-t[a],!(t[a]>0));a--);for(let a=i.length-1;o>0&&null==i[a];a--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let a=new Kt(t,r);for(let s=0;s<2;s++){let l=0===s?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let s=Math.trunc(Math.trunc(n.getY()));s<=t.getMaxY()&&s>=t.getMinY();s+=l){let t=pn.detectCodeword(e,0,e.getWidth(),r,c,s,i,o);null!=t&&(a.setCodeword(s,t),c=r?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-pn.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>zt.MAX_CODEWORDS_IN_BARCODE)throw R.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=pn.createBarcodeMatrix(e);pn.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let s=0;s<e.getBarcodeRowCount();s++)for(let a=0;a<e.getBarcodeColumnCount();a++){let l=t[s][a+1].getValue(),c=s*e.getBarcodeColumnCount()+a;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(o.push(c),i.push(l))}let a=new Array(i.length);for(let s=0;s<a.length;s++)a[s]=i[s];return pn.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,zt.toIntArray(n),zt.toIntArray(o),a)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),a=100;for(;a-- >0;){for(let e=0;e<o.length;e++)t[r[e]]=i[e][o[e]];try{return pn.decodeCodewords(t,e,n)}catch(s){if(!(s instanceof f))throw s}if(0===o.length)throw f.getChecksumInstance();for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let e=0;e<t[r].length;e++)t[r][e]=new Jt;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r)for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(pn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=o)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),null!=o)return r?o.getStartX():o.getEndX();if(pn.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=o)return r?o.getEndX():o.getStartX();let a=0;for(;pn.isValidBarcodeColumn(e,t-i);){t-=i;for(let n of e.getDetectionResultColumn(t).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*a*(n.getEndX()-n.getStartX());a++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,a,s){i=pn.adjustCodewordStartColumn(e,t,n,r,i,o);let l,c=pn.getModuleBitCount(e,t,n,r,i,o);if(null==c)return null;let d=oe.sum(c);if(r)l=i+d;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-d}if(!pn.checkCodewordSkew(d,a,s))return null;let u=tn.getDecodedValue(c),h=zt.getCodeword(u);return-1===h?null:new en(i,l,pn.getCodewordBucketNumber(u),h)}static getModuleBitCount(e,t,n,r,i,o){let a=i,s=new Int32Array(8),l=0,c=r?1:-1,d=r;for(;(r?a<n:a>=t)&&l<s.length;)e.get(a,o)===d?(s[l]++,a+=c):(l++,d=!d);return l===s.length||a===(r?n:t)&&l===s.length-1?s:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let a=i,s=r?-1:1;for(let l=0;l<2;l++){for(;(r?a>=t:a<n)&&r===e.get(a,o);){if(Math.abs(i-a)>pn.CODEWORD_SKEW_SIZE)return i;a+=s}s=-s,r=!r}return a}static checkCodewordSkew(e,t,n){return t-pn.CODEWORD_SKEW_SIZE<=e&&e<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw _.getFormatInstance();let r=1<<t+1,i=pn.correctErrors(e,n,r);pn.verifyCodewordCount(e,r);let o=fn.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw _.getFormatInstance();let n=e[0];if(n>e.length)throw _.getFormatInstance();if(0===n){if(!(t<e.length))throw _.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new qt;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new Yt;class gn{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=gn.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw R.getNotFoundInstance();return n[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return gn.decode(e,t,!0)}catch(n){if(n instanceof _||n instanceof f)throw R.getNotFoundInstance();throw n}}static decode(e,t,n){const r=new Array,i=Ht.detectMultiple(e,t,n);for(const o of i.getPoints()){const e=pn.decode(i.getBits(),o[4],o[5],o[6],o[7],gn.getMinCodewordWidth(o),gn.getMaxCodewordWidth(o)),t=new z(e.getText(),e.getRawBytes(),void 0,o,H.PDF_417);t.putMetadata(q.ERROR_CORRECTION_LEVEL,e.getECLevel());const n=e.getOther();null!=n&&t.putMetadata(q.PDF417_EXTRA_METADATA,n),r.push(t)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?b.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(gn.getMaxWidth(e[0],e[4]),gn.getMaxWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(e[1],e[5]),gn.getMaxWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(gn.getMinWidth(e[0],e[4]),gn.getMinWidth(e[6],e[2])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(e[1],e[5]),gn.getMinWidth(e[7],e[3])*zt.MODULES_IN_CODEWORD/zt.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends c{}mn.kind="ReaderException";class yn{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!t(e)&&!0===e.get(C.TRY_HARDER),r=t(e)?null:e.get(C.POSSIBLE_FORMATS),i=new Array;if(!t(r)){const t=r.some(e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED);t&&!n&&i.push(new lt(e,this.verbose)),r.includes(H.QR_CODE)&&i.push(new Ft),r.includes(H.DATA_MATRIX)&&i.push(new bt),r.includes(H.AZTEC)&&i.push(new ye),r.includes(H.PDF_417)&&i.push(new gn),t&&n&&i.push(new lt(e,this.verbose))}0===i.length&&(n||i.push(new lt(e,this.verbose)),i.push(new Ft),i.push(new bt),i.push(new ye),i.push(new gn),n&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(t){if(t instanceof mn)continue}throw new R("No MultiFormat Readers were able to detect the code.")}}class wn extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=new yn;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class bn extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new gn,e)}}class vn extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Ft,e)}}var Sn;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(Sn||(Sn={}));var Cn=Sn;class _n{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new K(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const e=n.multiply(new K(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new u("No error correction bytes");const n=e.length-t;if(n<=0)throw new u("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);g.arraycopy(e,0,i,0,n);let o=new K(this.field,i);o=o.multiplyByMonomial(t,1);const a=o.divide(r)[1].getCoefficients(),s=t-a.length;for(let l=0;l<s;l++)e[n+l]=0;g.arraycopy(a,0,e,n+s,a.length)}}class xn{constructor(){}static applyMaskPenaltyRule1(e){return xn.applyMaskPenaltyRule1Internal(e,!0)+xn.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const e=n[o];for(let i=0;i<r-1;i++){const r=e[i];r===e[i+1]&&r===n[o+1][i]&&r===n[o+1][i+1]&&t++}}return xn.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let e=0;e<r;e++){const a=n[o];e+6<r&&1===a[e]&&0===a[e+1]&&1===a[e+2]&&1===a[e+3]&&1===a[e+4]&&0===a[e+5]&&1===a[e+6]&&(xn.isWhiteHorizontal(a,e-4,e)||xn.isWhiteHorizontal(a,e+7,e+11))&&t++,o+6<i&&1===n[o][e]&&0===n[o+1][e]&&1===n[o+2][e]&&1===n[o+3][e]&&1===n[o+4][e]&&0===n[o+5][e]&&1===n[o+6][e]&&(xn.isWhiteVertical(n,e,o-4,o)||xn.isWhiteVertical(n,e,o+7,o+11))&&t++}return t*xn.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let a=0;a<i;a++){const e=n[a];for(let n=0;n<r;n++)1===e[n]&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*xn.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(1&i)+i%3;break;case 6:i=n*t,r=(1&i)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new u("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let a=0;a<r;a++){let e=0,r=-1;for(let s=0;s<i;s++){const i=t?o[a][s]:o[s][a];i===r?e++:(e>=5&&(n+=xn.N1+(e-5)),e=1,r=i)}e>=5&&(n+=xn.N1+(e-5))}return n}}xn.N1=3,xn.N2=3,xn.N3=40,xn.N4=10;class En{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)w.fill(t,e)}equals(e){if(!(e instanceof En))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const e=this.bytes[n],r=t.bytes[n];for(let t=0,n=this.width;t<n;++t)if(e[t]!==r[t])return!1}return!0}toString(){const e=new T;for(let t=0,n=this.height;t<n;++t){const n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class In{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new T;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<In.NUM_MASK_PATTERNS}}In.NUM_MASK_PATTERNS=8;class An extends c{}An.kind="WriterException";class Tn{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){Tn.clearMatrix(i),Tn.embedBasicPatterns(n,i),Tn.embedTypeInfo(t,r,i),Tn.maybeEmbedVersionInfo(n,i),Tn.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){Tn.embedPositionDetectionPatternsAndSeparators(t),Tn.embedDarkDotAtLeftBottomCorner(t),Tn.maybeEmbedPositionAdjustmentPatterns(e,t),Tn.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new v;Tn.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){const e=r.get(r.getSize()-1-i),t=Tn.TYPE_INFO_COORDINATES[i],o=t[0],a=t[1];if(n.setBoolean(o,a,e),i<8){const t=n.getWidth()-i-1,r=8;n.setBoolean(t,r,e)}else{const t=8,r=n.getHeight()-7+(i-8);n.setBoolean(t,r,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new v;Tn.makeVersionInfoBits(e,n);let r=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const o=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+e,o),t.setBoolean(t.getHeight()-11+e,i,o)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,a=n.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);a>=0&&a<n.getHeight();){for(let i=0;i<2;++i){const s=o-i;if(!Tn.isEmpty(n.get(s,a)))continue;let l;r<e.getSize()?(l=e.get(r),++r):l=!1,255!==t&&xn.getDataMaskBit(t,s,a)&&(l=!l),n.setBoolean(s,a,l)}a+=i}i=-i,a+=i,o-=2}if(r!==e.getSize())throw new An("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-b.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new u("0 polynomial");const n=Tn.findMSBSet(t);for(e<<=n-1;Tn.findMSBSet(e)>=n;)e^=t<<Tn.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!In.isValidMaskPattern(t))throw new An("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=Tn.calculateBCHCode(r,Tn.TYPE_INFO_POLY);n.appendBits(i,10);const o=new v;if(o.appendBits(Tn.TYPE_INFO_MASK_PATTERN,15),n.xor(o),15!==n.getSize())throw new An("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=Tn.calculateBCHCode(e.getVersionNumber(),Tn.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new An("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;Tn.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),Tn.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new An;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!Tn.isEmpty(n.get(e+r,t)))throw new An;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!Tn.isEmpty(n.get(e,t+r)))throw new An;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=Tn.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=Tn.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Tn.POSITION_DETECTION_PATTERN[0].length;Tn.embedPositionDetectionPattern(0,0,e),Tn.embedPositionDetectionPattern(e.getWidth()-t,0,e),Tn.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;Tn.embedHorizontalSeparationPattern(0,n-1,e),Tn.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Tn.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;Tn.embedVerticalSeparationPattern(r,0,e),Tn.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),Tn.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const e=r[i];if(e>=0)for(let n=0;n!==o;n++){const i=r[n];i>=0&&Tn.isEmpty(t.get(i,e))&&Tn.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Tn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Tn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Tn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Tn.VERSION_INFO_POLY=7973,Tn.TYPE_INFO_POLY=1335,Tn.TYPE_INFO_MASK_PATTERN=21522;class kn{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rn{constructor(){}static calculateMaskPenalty(e){return xn.applyMaskPenaltyRule1(e)+xn.applyMaskPenaltyRule2(e)+xn.applyMaskPenaltyRule3(e)+xn.applyMaskPenaltyRule4(e)}static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Rn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(Cn.CHARACTER_SET);i&&(r=n.get(Cn.CHARACTER_SET).toString());const o=this.chooseMode(e,r),a=new v;if(o===kt.BYTE&&(i||Rn.DEFAULT_BYTE_MODE_ENCODING!==r)){const e=x.getCharacterSetECIByName(r);void 0!==e&&this.appendECI(e,a)}this.appendModeInfo(o,a);const s=new v;let l;if(this.appendBytes(e,o,s,r),null!==n&&void 0!==n.get(Cn.QR_VERSION)){const e=Number.parseInt(n.get(Cn.QR_VERSION).toString(),10);l=Et.getVersionForNumber(e);const r=this.calculateBitsNeeded(o,a,s,l);if(!this.willFit(r,l,t))throw new An("Data too big for requested version")}else l=this.recommendVersion(t,o,a,s);const c=new v;c.appendBitArray(a);const d=o===kt.BYTE?s.getSizeInBytes():e.length;this.appendLengthInfo(d,l,o,c),c.appendBitArray(s);const u=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-u.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,u.getNumBlocks()),p=new In;p.setECLevel(t),p.setMode(o),p.setVersion(l);const g=l.getDimensionForVersion(),m=new En(g,g),y=this.chooseMaskPattern(f,t,l,m);return p.setMaskPattern(y),Tn.buildMatrix(f,t,l,y,m),p.setMatrix(m),p}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,Et.getVersionForNumber(1)),o=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Rn.ALPHANUMERIC_TABLE.length?Rn.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(x.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return kt.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){const t=e.charAt(i);if(Rn.isDigit(t))n=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return kt.BYTE;r=!0}}return r?kt.ALPHANUMERIC:n?kt.NUMERIC:kt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=I.encode(e,x.SJIS)}catch(r){return!1}const n=t.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let a=0;a<In.NUM_MASK_PATTERNS;a++){Tn.buildMatrix(e,t,n,a,r);let s=this.calculateMaskPenalty(r);s<i&&(i=s,o=a)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=Et.getVersionForNumber(n);if(Rn.willFit(e,r,t))return r}throw new An("Data too big")}static willFit(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const n=8*e;if(t.getSize()>n)throw new An("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);const r=7&t.getSize();if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(0===(1&o)?236:17,8);if(t.getSize()!==n)throw new An("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new An("Block ID too large");const a=e%n,s=n-a,l=Math.floor(e/n),c=l+1,d=Math.floor(t/n),u=d+1,h=l-d,f=c-u;if(h!==f)throw new An("EC bytes mismatch");if(n!==s+a)throw new An("RS blocks mismatch");if(e!==(d+h)*s+(u+f)*a)throw new An("Total bytes mismatch");r<s?(i[0]=d,o[0]=h):(i[0]=u,o[0]=f)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new An("Number of bits and data bytes does not match");let i=0,o=0,a=0;const s=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),d=new Int32Array(1);Rn.getNumDataBytesAndNumECBytesForBlockID(t,n,r,c,l,d);const u=l[0],h=new Uint8Array(u);e.toBytes(8*i,h,0,u);const f=Rn.generateECBytes(h,d[0]);s.push(new kn(h,f)),o=Math.max(o,u),a=Math.max(a,f.length),i+=l[0]}if(n!==i)throw new An("Data bytes does not match offset");const l=new v;for(let c=0;c<o;++c)for(const e of s){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<a;++c)for(const e of s){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new An("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=255&e[o];new _n(ee.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new An(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case kt.NUMERIC:Rn.appendNumericBytes(e,n);break;case kt.ALPHANUMERIC:Rn.appendAlphanumericBytes(e,n);break;case kt.BYTE:Rn.append8BitBytes(e,n,r);break;case kt.KANJI:Rn.appendKanjiBytes(e,n);break;default:throw new An("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Rn.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Rn.getDigit(e.charAt(r));if(r+2<n){const n=Rn.getDigit(e.charAt(r+1)),o=Rn.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+o,10),r+=3}else if(r+1<n){const n=Rn.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Rn.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new An;if(r+1<n){const n=Rn.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new An;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=I.encode(e,n)}catch(i){throw new An(i)}for(let o=0,a=r.length;o!==a;o++){const e=r[o];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let n;try{n=I.encode(e,x.SJIS)}catch(i){throw new An(i)}const r=n.length;for(let o=0;o<r;o+=2){const e=(255&n[o])<<8&4294967295|255&n[o+1];let r=-1;if(e>=33088&&e<=40956?r=e-33088:e>=57408&&e<=60351&&(r=e-49472),-1===r)throw new An("Invalid byte sequence");const i=192*(r>>8)+(255&r);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(kt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Rn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rn.DEFAULT_BYTE_MODE_ENCODING=x.UTF8.getName();class Nn{write(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new u("Found empty contents");if(t<0||n<0)throw new u("Requested dimensions are too small: "+t+"x"+n);let i=St.L,o=Nn.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Cn.ERROR_CORRECTION)&&(i=St.fromString(r.get(Cn.ERROR_CORRECTION).toString())),void 0!==r.get(Cn.MARGIN)&&(o=Number.parseInt(r.get(Cn.MARGIN).toString(),10)));const a=Rn.encode(e,i,r);return this.renderResult(a,t,n,o)}writeToDom(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const o=this.write(t,n,r,i);e&&e.appendChild(o)}renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),a=i.getHeight(),s=o+2*r,l=a+2*r,c=Math.max(t,s),d=Math.max(n,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-o*u)/2),f=Math.floor((d-a*u)/2),p=this.createSVGElement(c,d);for(let g=0,m=f;g<a;g++,m+=u)for(let e=0,t=h;e<o;e++,t+=u)if(1===i.get(e,g)){const e=this.createSvgRectElement(t,m,u,u);p.appendChild(e)}return p}createSVGElement(e,t){const n=document.createElementNS(Nn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Nn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Nn.QUIET_ZONE_SIZE=4,Nn.SVG_NS="http://www.w3.org/2000/svg";class Dn{encode(e,t,n,r,i){if(0===e.length)throw new u("Found empty contents");if(t!==H.QR_CODE)throw new u("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new u("Requested dimensions are too small: ".concat(n,"x").concat(r));let o=St.L,a=Dn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Cn.ERROR_CORRECTION)&&(o=St.fromString(i.get(Cn.ERROR_CORRECTION).toString())),void 0!==i.get(Cn.MARGIN)&&(a=Number.parseInt(i.get(Cn.MARGIN).toString(),10)));const s=Rn.encode(e,o,i);return Dn.renderResult(s,n,r,a)}static renderResult(e,t,n,r){const i=e.getMatrix();if(null===i)throw new ne;const o=i.getWidth(),a=i.getHeight(),s=o+2*r,l=a+2*r,c=Math.max(t,s),d=Math.max(n,l),u=Math.min(Math.floor(c/s),Math.floor(d/l)),h=Math.floor((c-o*u)/2),f=Math.floor((d-a*u)/2),p=new k(c,d);for(let g=0,m=f;g<a;g++,m+=u)for(let e=0,t=h;e<o;e++,t+=u)1===i.get(e,g)&&p.setRegion(t,m,u,u);return p}}Dn.QUIET_ZONE_SIZE=4;class Mn{encode(e,t,n,r,i){let o;if(t!==H.QR_CODE)throw new u("No encoder available for format "+t);return o=new Dn,o.encode(e,t,n,r,i)}}class On extends M{constructor(e,t,n,r,i,o,a,s){if(super(o,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+o>t||i+a>n)throw new u("Crop rectangle does not fit within image data.");s&&this.reverseHorizontal(o,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;g.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new On(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/On.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/On.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const t=o*e;for(let o=0;o<e;o++){const e=255&r[i+o*On.THUMBNAIL_SCALE_FACTOR];n[t+o]=4278190080|65793*e}i+=this.dataWidth*On.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/On.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/On.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const t=i+e/2;for(let r=i,o=i+e-1;r<t;r++,o--){const e=n[r];n[r]=n[o],n[o]=e}}}invert(){return new O(this)}}On.THUMBNAIL_SCALE_FACTOR=2;class Pn extends M{constructor(e,t,n,r,i,o,a){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=a,4===e.BYTES_PER_ELEMENT){const r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){const n=e[t],r=n>>16&255,o=n>>7&510,a=255&n;i[t]=(r+o+a)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===o&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new u("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new u("Requested row is outside the image: "+e);const n=this.getWidth();(null===t||void 0===t||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return g.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){const t=o*e;g.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Pn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new O(this)}}class jn extends x{static forName(e){return this.getCharacterSetECIByName(e)}}class Bn{}Bn.ISO_8859_1=x.ISO8859_1;class Ln{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Fn{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class zn{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Un extends zn{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Un(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Un(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+b.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hn extends Un{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Hn(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Wn(e,t,n){return new Hn(e,t,n)}function Vn(e,t,n){return new Un(e,t,n)}const Gn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Yn=0,Xn=1,Zn=2,qn=3,Qn=4,Jn=new Un(null,0,0),Kn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function $n(e){for(let t of e)w.fill(t,-1);return e[Yn][Qn]=0,e[Xn][Qn]=0,e[Xn][Yn]=28,e[qn][Qn]=0,e[Zn][Qn]=0,e[Zn][Yn]=15,e}const er=$n(w.createInt32Array(6,6));class tr{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=Kn[this.mode][e];r=Vn(r,65535&t,t>>16),n+=t>>16}let i=e===Zn?4:5;return r=Vn(r,t,i),new tr(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Zn?4:5;return n=Vn(n,er[this.mode][e],r),n=Vn(n,t,5),new tr(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Qn||this.mode===Zn){let e=Kn[n][Yn];t=Vn(t,65535&e,e>>16),r+=e>>16,n=Yn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new tr(t,n,this.binaryShiftByteCount+1,r+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Wn(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new tr(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Kn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=tr.calculateBinaryShiftCost(e)-tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;null!==r;r=r.getPrevious())t.unshift(r);let n=new v;for(const r of t)r.appendTo(n,e);return n}toString(){return A.format("%s bits=%d bytes=%d",Gn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function nr(e){const t=A.getCharCode(" "),n=A.getCharCode("."),r=A.getCharCode(",");e[Yn][t]=1;const i=A.getCharCode("Z"),o=A.getCharCode("A");for(let h=o;h<=i;h++)e[Yn][h]=h-o+2;e[Xn][t]=1;const a=A.getCharCode("z"),s=A.getCharCode("a");for(let h=s;h<=a;h++)e[Xn][h]=h-s+2;e[Zn][t]=1;const l=A.getCharCode("9"),c=A.getCharCode("0");for(let h=c;h<=l;h++)e[Zn][h]=h-c+2;e[Zn][r]=12,e[Zn][n]=13;const d=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<d.length;h++)e[qn][A.getCharCode(d[h])]=h;const u=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<u.length;h++)A.getCharCode(u[h])>0&&(e[Qn][A.getCharCode(u[h])]=h);return e}tr.INITIAL_STATE=new tr(Jn,Yn,0,0);const rr=nr(w.createInt32Array(5,256));class ir{constructor(e){this.text=e}encode(){const e=A.getCharCode(" "),t=A.getCharCode("\n");let n=Fn.singletonList(tr.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,o=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case A.getCharCode("\r"):i=o===t?2:0;break;case A.getCharCode("."):i=o===e?3:0;break;case A.getCharCode(","):i=o===e?4:0;break;case A.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=ir.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return Fn.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return ir.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=rr[e.getMode()][r]>0,o=null;for(let a=0;a<=Qn;a++){let s=rr[a][r];if(s>0){if(null==o&&(o=e.endBinaryShift(t)),!i||a===e.getMode()||a===Zn){const e=o.latchAndAppend(a,s);n.push(e)}if(!i&&er[e.getMode()][a]>=0){const e=o.shiftAndAppend(a,s);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rr[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Qn,n)),e.getMode()!==Qn&&r.push(i.shiftAndAppend(Qn,n)),3===n||4===n){let e=i.latchAndAppend(Zn,16-n).latchAndAppend(Zn,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(const n of e){let e=!0;for(const r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class or{constructor(){}static encodeBytes(e){return or.encode(e,or.DEFAULT_EC_PERCENT,or.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,o,a,s,l=new ir(e).encode(),c=b.truncDivision(l.getSize()*t,100)+11,d=l.getSize()+c;if(n!==or.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?or.MAX_NB_BITS_COMPACT:or.MAX_NB_BITS))throw new u(A.format("Illegal value %s for layers",n));o=or.totalBitsInLayer(i,r),a=or.WORD_SIZE[i];let e=o-o%a;if(s=or.stuffBits(l,a),s.getSize()+c>e)throw new u("Data to large for user specified layer");if(r&&s.getSize()>64*a)throw new u("Data to large for user specified layer")}else{a=0,s=null;for(let e=0;;e++){if(e>or.MAX_NB_BITS)throw new u("Data too large for an Aztec code");if(r=e<=3,i=r?e+1:e,o=or.totalBitsInLayer(i,r),d>o)continue;null!=s&&a===or.WORD_SIZE[i]||(a=or.WORD_SIZE[i],s=or.stuffBits(l,a));let t=o-o%a;if(!(r&&s.getSize()>64*a)&&s.getSize()+c<=t)break}}let h,f=or.generateCheckWords(s,o,a),p=s.getSize()/a,g=or.generateModeMessage(r,i,p),m=(r?11:14)+4*i,y=new Int32Array(m);if(r){h=m;for(let e=0;e<y.length;e++)y[e]=e}else{h=m+1+2*b.truncDivision(b.truncDivision(m,2)-1,15);let e=b.truncDivision(m,2),t=b.truncDivision(h,2);for(let n=0;n<e;n++){let r=n+b.truncDivision(n,15);y[e-n-1]=t-r-1,y[e+n]=t+r+1}}let w=new k(h);for(let u=0,b=0;u<i;u++){let e=4*(i-u)+(r?9:12);for(let t=0;t<e;t++){let n=2*t;for(let r=0;r<2;r++)f.get(b+n+r)&&w.set(y[2*u+r],y[2*u+t]),f.get(b+2*e+n+r)&&w.set(y[2*u+t],y[m-1-2*u-r]),f.get(b+4*e+n+r)&&w.set(y[m-1-2*u-r],y[m-1-2*u-t]),f.get(b+6*e+n+r)&&w.set(y[m-1-2*u-t],y[2*u+r])}b+=8*e}if(or.drawModeMessage(w,r,h,g),r)or.drawBullsEye(w,b.truncDivision(h,2),5);else{or.drawBullsEye(w,b.truncDivision(h,2),7);for(let e=0,t=0;e<b.truncDivision(m,2)-1;e+=15,t+=16)for(let n=1&b.truncDivision(h,2);n<h;n+=2)w.set(b.truncDivision(h,2)-t,n),w.set(b.truncDivision(h,2)+t,n),w.set(n,b.truncDivision(h,2)-t),w.set(n,b.truncDivision(h,2)+t)}let v=new Ln;return v.setCompact(r),v.setSize(h),v.setLayers(i),v.setCodeWords(p),v.setMatrix(w),v}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new v;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=or.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=or.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=b.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let t=i-3+o;r.get(o)&&e.set(t,i-5),r.get(o+7)&&e.set(i+5,t),r.get(20-o)&&e.set(t,i+5),r.get(27-o)&&e.set(i-5,t)}else for(let o=0;o<10;o++){let t=i-5+o+b.truncDivision(o,5);r.get(o)&&e.set(t,i-7),r.get(o+10)&&e.set(i+7,t),r.get(29-o)&&e.set(t,i+7),r.get(39-o)&&e.set(i-7,t)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new _n(or.getGF(n)),o=b.truncDivision(t,n),a=or.bitsToWords(e,n,o);i.encode(a,o-r);let s=t%n,l=new v;l.appendBits(0,s);for(const c of Array.from(a))l.appendBits(c,n);return l}static bitsToWords(e,t,n){let r,i,o=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;o[r]=n}return o}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new u("Unsupported word size "+e)}}static stuffBits(e,t){let n=new v,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let a=0;for(let n=0;n<t;n++)(o+n>=r||e.get(o+n))&&(a|=1<<t-1-n);(a&i)===i?(n.appendBits(a&i,t),o--):0===(a&i)?(n.appendBits(1|a,t),o--):n.appendBits(a,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}or.DEFAULT_EC_PERCENT=33,or.DEFAULT_AZTEC_LAYERS=0,or.MAX_NB_BITS=32,or.MAX_NB_BITS_COMPACT=4,or.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ar{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=Bn.ISO_8859_1,a=or.DEFAULT_EC_PERCENT,s=or.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Cn.CHARACTER_SET)&&(o=jn.forName(i.get(Cn.CHARACTER_SET).toString())),i.has(Cn.ERROR_CORRECTION)&&(a=b.parseInt(i.get(Cn.ERROR_CORRECTION).toString())),i.has(Cn.AZTEC_LAYERS)&&(s=b.parseInt(i.get(Cn.AZTEC_LAYERS).toString()))),ar.encodeLayers(e,t,n,r,o,a,s)}static encodeLayers(e,t,n,r,i,o,a){if(t!==H.AZTEC)throw new u("Can only encode AZTEC, but got "+t);let s=or.encode(A.getBytes(e,i),o,a);return ar.renderResult(s,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new ne;let i=r.getWidth(),o=r.getHeight(),a=Math.max(t,i),s=Math.max(n,o),l=Math.min(a/i,s/o),c=(a-i*l)/2,d=(s-o*l)/2,u=new k(a,s);for(let h=0,f=d;h<o;h++,f+=l)for(let e=0,t=c;e<i;e++,t+=l)r.get(e,h)&&u.setRegion(t,f,l,l);return u}}e.AbstractExpandedDecoder=Ge,e.ArgumentException=d,e.ArithmeticException=$,e.AztecCode=Ln,e.AztecCodeReader=ye,e.AztecCodeWriter=ar,e.AztecDecoder=ie,e.AztecDetector=me,e.AztecDetectorResult=ce,e.AztecEncoder=or,e.AztecHighLevelEncoder=ir,e.AztecPoint=ge,e.BarcodeFormat=H,e.Binarizer=p,e.BinaryBitmap=h,e.BitArray=v,e.BitMatrix=k,e.BitSource=gt,e.BrowserAztecCodeReader=we,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=F,e.BrowserDatamatrixCodeReader=vt,e.BrowserMultiFormatReader=wn,e.BrowserPDF417Reader=bn,e.BrowserQRCodeReader=vn,e.BrowserQRCodeSvgWriter=Nn,e.CharacterSetECI=x,e.ChecksumException=f,e.Code128Reader=ve,e.Code39Reader=Se,e.DataMatrixDecodedBitStreamParser=mt,e.DataMatrixReader=bt,e.DecodeHintType=C,e.DecoderResult=Q,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Te,e.EncodeHintType=Cn,e.Exception=c,e.FormatException=_,e.GenericGF=ee,e.GenericGFPoly=K,e.GlobalHistogramBinarizer=N,e.GridSampler=ue,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=P,e.HybridBinarizer=D,e.ITFReader=Ce,e.IllegalArgumentException=u,e.IllegalStateException=ne,e.InvertedLuminanceSource=O,e.LuminanceSource=M,e.MathUtils=oe,e.MultiFormatOneDReader=lt,e.MultiFormatReader=yn,e.MultiFormatWriter=Mn,e.NotFoundException=R,e.OneDReader=be,e.PDF417DecodedBitStreamParser=fn,e.PDF417DecoderErrorCorrection=Yt,e.PDF417Reader=gn,e.PDF417ResultMetadata=nn,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=On,e.QRCodeByteMatrix=En,e.QRCodeDataMask=It,e.QRCodeDecodedBitStreamParser=Rt,e.QRCodeDecoderErrorCorrectionLevel=St,e.QRCodeDecoderFormatInformation=Ct,e.QRCodeEncoder=Rn,e.QRCodeEncoderQRCode=In,e.QRCodeMaskUtil=xn,e.QRCodeMatrixUtil=Tn,e.QRCodeMode=kt,e.QRCodeReader=Ft,e.QRCodeVersion=Et,e.QRCodeWriter=Dn,e.RGBLuminanceSource=Pn,e.RSS14Reader=st,e.RSSExpandedReader=ot,e.ReaderException=mn,e.ReedSolomonDecoder=re,e.ReedSolomonEncoder=_n,e.ReedSolomonException=te,e.Result=z,e.ResultMetadataType=q,e.ResultPoint=se,e.StringUtils=A,e.UnsupportedOperationException=E,e.VideoInputDevice=j,e.WhiteRectangleDetector=de,e.WriterException=An,e.ZXingArrays=w,e.ZXingCharset=jn,e.ZXingInteger=b,e.ZXingStandardCharsets=Bn,e.ZXingStringBuilder=T,e.ZXingStringEncoding=I,e.ZXingSystem=g,e.createAbstractExpandedDecoder=nt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},198:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=y.prototype;var v=b.prototype=new w;v.constructor=b,g(v,y.prototype),v.isPureReactComponent=!0;var S=Array.isArray,C=Object.prototype.hasOwnProperty,_={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,i)&&!x.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,S(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),k(a,t,i,"",function(e){return e})):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",S(e))for(var c=0;c<e.length;c++){var d=o+T(s=e[c],c);l+=k(s,t,i,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(s=e.next()).done;)l+=k(s=s.value,t,i,d=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},M={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:_};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(829)),o=r(n(736)),a=n(745);class s{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new s(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:i=!1,count:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new URL("".concat(this.url,"/rpc/").concat(e));let l;r||i?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;s.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return a&&(c.Prefer="count=".concat(a)),new o.default({method:t,url:s,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=s},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,d=e[c];if(0>o(l,n))c<i&&0>o(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function S(e){if(m=!1,v(e),!g)if(null!==r(c))g=!0,M(C);else{var t=r(d);null!==t&&O(S,t.startTime-e)}}function C(e,n){g=!1,m&&(m=!1,w(I),I=-1),p=!0;var o=f;try{for(v(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!k());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),v(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&O(S,u.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,x=!1,E=null,I=-1,A=5,T=-1;function k(){return!(t.unstable_now()-T<A)}function R(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?_():(x=!1,E=null)}}else x=!1}if("function"===typeof b)_=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=R,_=function(){D.postMessage(null)}}else _=function(){y(R,0)};function M(e){E=e,x||(x=!0,_())}function O(e,n){I=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(d,e),null===r(c)&&e===r(d)&&(m?(w(I),I=-1):m=!0,O(S,o-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,M(C))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(630)),o=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let i=null,a=null,s=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),o=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&o&&o.length>1&&(s=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(i={code:"PGRST116",details:"Results contain ".concat(a.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,s=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(a=[],i=null,l=200,c="OK")}catch(d){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new o.default(i)}return{error:i,data:a,count:s,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},324:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var d=e[c],u=t[c];if(!1===(i=n?n.call(r,d,u,c):void 0)||void 0===i&&d!==u)return!1}return!0}},374:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(286));class o extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=i?"".concat(i,".order"):"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,"".concat(a?"".concat(a,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":"".concat(r,".offset"),o="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(i,"".concat(e)),this.url.searchParams.set(o,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const s=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(o,'; for="').concat(l,'"; options=').concat(s,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=o},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},579:(e,t,n)=>{"use strict";e.exports=n(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>s,Response:()=>l,default:()=>o,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,o=r.fetch.bind(r),a=r.Headers,s=r.Request,l=r.Response},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(p,e)||!u.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,w);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,w);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,w);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),A=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,B=Object.assign;function L(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function U(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case C:return"Portal";case E:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function K(e,t){J(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,_e=null,xe=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=Si(t),Ce(e.stateNode,e.type,t))}}function Ie(e){_e?xe?xe.push(e):xe=[e]:_e=e}function Ae(){if(_e){var e=_e,t=xe;if(xe=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function ke(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==_e||null!==xe)&&(ke(),Ae())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Me=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Me=!1}function Pe(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var je=!1,Be=null,Le=!1,Fe=null,ze={onError:function(e){je=!0,Be=e}};function Ue(e,t,n,r,i,o,a,s,l){je=!1,Be=null,Pe.apply(ze,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(He(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ut(s):0!==(o&=a)&&(r=ut(o))}else 0!==(a=n&~i)?r=ut(a):0!==o&&(r=ut(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function wt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,Ct,_t,xt,Et,It=!1,At=[],Tt=null,kt=null,Rt=null,Nt=new Map,Dt=new Map,Mt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=wi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Ft(e,t,n){Lt(e)&&n.delete(t)}function zt(){It=!1,null!==Tt&&Lt(Tt)&&(Tt=null),null!==kt&&Lt(kt)&&(kt=null),null!==Rt&&Lt(Rt)&&(Rt=null),Nt.forEach(Ft),Dt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<At.length){Ut(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==kt&&Ut(kt,e),null!==Rt&&Ut(Rt,e),Nt.forEach(t),Dt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Mt.shift()}var Wt=v.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Yt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Xt(e,t,n,r){if(Vt){var i=qt(e,t,n,r);if(null===i)Vr(e,t,r,Zt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=jt(Tt,e,t,n,r,i),!0;case"dragenter":return kt=jt(kt,e,t,n,r,i),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,jt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Dt.set(o,jt(Dt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&St(o),null===(o=qt(e,t,n,r))&&Vr(e,t,r,Zt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Zt=null;function qt(e,t,n,r){if(Zt=null,null!==(e=wi(e=Se(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Kt=null,$t=null;function en(){if($t)return $t;var e,t,n=Kt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(cn),un=B({},cn,{view:0,detail:0}),hn=on(un),fn=B({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(B({},fn,{dataTransfer:0})),mn=on(B({},un,{relatedTarget:0})),yn=on(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(wn),vn=on(B({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return xn}var In=B({},un,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(In),Tn=on(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=on(B({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Rn=on(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=on(Nn),Mn=[9,13,27,32],On=d&&"CompositionEvent"in window,Pn=null;d&&"documentMode"in document&&(Pn=document.documentMode);var jn=d&&"TextEvent"in window&&!Pn,Bn=d&&(!On||Pn&&8<Pn&&11>=Pn),Ln=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Yr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function Zn(e){Lr(e,0)}function qn(e){if(X(vi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Kn;if(d){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Kn=$n}else Kn=!1;Jn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Xn=Yn=null)}function nr(e){if("value"===e.propertyName&&qn(Xn)){var t=[];Gn(t,Xn,e,Se(e)),Ne(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Xn)}function or(e,t){if("click"===e)return qn(t)}function ar(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=dr(n,o);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,wr=null,br=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Z(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&lr(wr,r)||(wr=r,0<(r=Yr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},_r={},xr={};function Er(e){if(_r[e])return _r[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return _r[e]=n[t];return e}d&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Ir=Er("animationend"),Ar=Er("animationiteration"),Tr=Er("animationstart"),kr=Er("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),l(t,[e])}for(var Mr=0;Mr<Nr.length;Mr++){var Or=Nr[Mr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(Ar,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(kr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Ue.apply(this,arguments),je){if(!je)throw Error(o(198));var d=Be;je=!1,Be=null,Le||(Le=!0,Fe=d)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Br(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Br(i,s,c),o=l}}}if(Le)throw e=Fe,Le=!1,Fe=null,e}function Fr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Ur]){e[Ur]=!0,a.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var i=Gt;break;case 4:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=wi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Ne(function(){var r=o,i=Se(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Ir:case Ar:case Tr:l=yn;break;case kr:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==s?s+"Capture":null:s;d=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=De(p,h))&&d.push(Gr(p,g,f)))),u)break;p=p.return}0<d.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tn,g="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?s:vi(l),f=null==c?s:vi(c),(s=new d(g,p+"leave",l,n,i)).target=u,s.relatedTarget=f,g=null,wi(i)===r&&((d=new d(h,p+"enter",c,n,i)).target=f,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,p=0,f=d=l;f;f=Xr(f))p++;for(f=0,g=h;g;g=Xr(g))f++;for(;0<p-f;)d=Xr(d),p--;for(;0<f-p;)h=Xr(h),f--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Xr(d),h=Xr(h)}d=null}else d=null;null!==l&&Zr(a,s,l,d,!1),null!==c&&null!==u&&Zr(a,u,c,d,!0)}if("select"===(l=(s=r?vi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Qn;else if(Vn(s))if(Jn)m=ar;else{m=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Gn(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?vi(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,wr=null);break;case"focusout":wr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,vr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":vr(a,n,i)}var w;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(w=en()):(Kt="value"in(Jt=i)?Jt.value:Jt.textContent,Hn=!0)),0<(y=Yr(r,b)).length&&(b=new vn(b,e,null,n,i),a.push({event:b,listeners:y}),w?b.data=w:null!==(w=Un(n))&&(b.data=w))),(w=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),$t=Kt=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new vn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=w))}Lr(a,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=De(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=De(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=De(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=De(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var qr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace(Qr,"")}function Kr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,fi="__reactProps$"+ui,pi="__reactContainer$"+ui,gi="__reactEvents$"+ui,mi="__reactListeners$"+ui,yi="__reactHandles$"+ui;function wi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Si(e){return e[fi]||null}var Ci=[],_i=-1;function xi(e){return{current:e}}function Ei(e){0>_i||(e.current=Ci[_i],Ci[_i]=null,_i--)}function Ii(e,t){_i++,Ci[_i]=e.current,e.current=t}var Ai={},Ti=xi(Ai),ki=xi(!1),Ri=Ai;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ei(ki),Ei(Ti)}function Oi(e,t,n){if(Ti.current!==Ai)throw Error(o(168));Ii(Ti,t),Ii(ki,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return B({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ri=Ti.current,Ii(Ti,e),Ii(ki,ki.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ei(ki),Ei(Ti),Ii(Ti,e)):Ei(ki),Ii(ki,n)}var Li=null,Fi=!1,zi=!1;function Ui(e){null===Li?Li=[e]:Li.push(e)}function Hi(){if(!zi&&null!==Li){zi=!0;var e=0,t=bt;try{var n=Li;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Fi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Xe($e,Hi),i}finally{bt=t,zi=!1}}return null}var Wi=[],Vi=0,Gi=null,Yi=0,Xi=[],Zi=0,qi=null,Qi=1,Ji="";function Ki(e,t){Wi[Vi++]=Yi,Wi[Vi++]=Gi,Gi=e,Yi=t}function $i(e,t,n){Xi[Zi++]=Qi,Xi[Zi++]=Ji,Xi[Zi++]=qi,qi=e;var r=Qi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Qi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Ki(e,1),$i(e,1,0))}function to(e){for(;e===Gi;)Gi=Wi[--Vi],Wi[Vi]=null,Yi=Wi[--Vi],Wi[Vi]=null;for(;e===qi;)qi=Xi[--Zi],Xi[Zi]=null,Ji=Xi[--Zi],Xi[Zi]=null,Qi=Xi[--Zi],Xi[Zi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=v.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function vo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,o){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case C:return(t=Lc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pc(t,e.mode,n,null)).return=e,t;wo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?c(e,t,n,r):null;case C:return n.key===i?d(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:u(e,t,n,r,null);wo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return u(t,e=e.get(n)||null,r,i,null);wo(t,r)}return null}function g(i,o,s,l){for(var c=null,d=null,u=o,g=o=0,m=null;null!==u&&g<s.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var y=f(i,u,s[g],l);if(null===y){null===u&&(u=m);break}e&&u&&null===y.alternate&&t(i,u),o=a(y,o,g),null===d?c=y:d.sibling=y,d=y,u=m}if(g===s.length)return n(i,u),io&&Ki(i,g),c;if(null===u){for(;g<s.length;g++)null!==(u=h(i,s[g],l))&&(o=a(u,o,g),null===d?c=u:d.sibling=u,d=u);return io&&Ki(i,g),c}for(u=r(i,u);g<s.length;g++)null!==(m=p(u,i,g,s[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),o=a(m,o,g),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach(function(e){return t(i,e)}),io&&Ki(i,g),c}function m(i,s,l,c){var d=P(l);if("function"!==typeof d)throw Error(o(150));if(null==(l=d.call(l)))throw Error(o(151));for(var u=d=null,g=s,m=s=0,y=null,w=l.next();null!==g&&!w.done;m++,w=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,w.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===u?d=b:u.sibling=b,u=b,g=y}if(w.done)return n(i,g),io&&Ki(i,m),d;if(null===g){for(;!w.done;m++,w=l.next())null!==(w=h(i,w.value,c))&&(s=a(w,s,m),null===u?d=w:u.sibling=w,u=w);return io&&Ki(i,m),d}for(g=r(i,g);!w.done;m++,w=l.next())null!==(w=p(g,i,m,w.value,c))&&(e&&null!==w.alternate&&g.delete(null===w.key?m:w.key),s=a(w,s,m),null===u?d=w:u.sibling=w,u=w);return e&&g.forEach(function(e){return t(i,e)}),io&&Ki(i,m),d}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var c=a.key,d=o;null!==d;){if(d.key===c){if((c=a.type)===_){if(7===d.tag){n(r,d.sibling),(o=i(d,a.props.children)).return=r,r=o;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&bo(c)===d.type){n(r,d.sibling),(o=i(d,a.props)).ref=yo(r,d,a),o.return=r,r=o;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===_?((o=Pc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case C:e:{for(d=a.key;null!==o;){if(o.key===d){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Lc(a,r.mode,l)).return=r,r=o}return s(r);case D:return e(r,o,(d=a._init)(a._payload),l)}if(te(a))return g(r,o,a,l);if(P(a))return m(r,o,a,l);wo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Bc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var So=vo(!0),Co=vo(!1),_o=xi(null),xo=null,Eo=null,Io=null;function Ao(){Io=Eo=xo=null}function To(e){var t=_o.current;Ei(_o),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){xo=e,Io=Eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(Io!==e)if(e={context:e,memoizedValue:t,next:null},null===Eo){if(null===xo)throw Error(o(308));Eo=e,xo.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var Do=null;function Mo(e){null===Do?Do=[e]:Do.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Mo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,Mo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}function Ho(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;jo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==o){var u=i.baseState;for(a=0,d=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(f,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,u,h):p)||void 0===h)break e;u=B({},u,h);break e;case 2:jo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=f,l=u):d=d.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=u}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Yo=xi(Go),Xo=xi(Go),Zo=xi(Go);function qo(e){if(e===Go)throw Error(o(174));return e}function Qo(e,t){switch(Ii(Zo,t),Ii(Xo,e),Ii(Yo,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Yo),Ii(Yo,t)}function Jo(){Ei(Yo),Ei(Xo),Ei(Zo)}function Ko(e){qo(Zo.current);var t=qo(Yo.current),n=le(t,e.type);t!==n&&(Ii(Xo,e),Ii(Yo,n))}function $o(e){Xo.current===e&&(Ei(Yo),Ei(Xo))}var ea=xi(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=v.ReactCurrentDispatcher,oa=v.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,da=!1,ua=!1,ha=0,fa=0;function pa(){throw Error(o(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?$a:es,e=n(r,i),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(ua)}if(ia.current=Ka,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,da=!1,t)throw Error(o(300));return e}function ya(){var e=0!==ha;return ha=0,e}function wa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function va(e,t){return"function"===typeof t?t(e):t}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,d=a;do{var u=d.lane;if((aa&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=u,jl|=u}d=d.next}while(null!==d&&d!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,jl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ca(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function xa(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,ja(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Na(9,Ia.bind(null,n,r,i,t),void 0,null),null===kl)throw Error(o(349));0!==(30&aa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&ka(e)}function Aa(e,t,n){return n(function(){Ta(t)&&ka(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function ka(e){var t=Po(e,1);null!==t&&nc(t,e,1,-1)}function Ra(e){var t=wa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=Za.bind(null,sa,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Da(){return ba().memoizedState}function Ma(e,t,n,r){var i=wa();sa.flags|=e,i.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Na(t,n,o,r))}sa.flags|=e,i.memoizedState=Na(1|t,n,o,r)}function Pa(e,t){return Ma(8390656,8,e,t)}function ja(e,t){return Oa(2048,8,e,t)}function Ba(e,t){return Oa(4,2,e,t)}function La(e,t){return Oa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Fa.bind(null,t,e),n)}function Ua(){}function Ha(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,jl|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Ya(){return ba().memoizedState}function Xa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qa(e))Qa(t,n);else if(null!==(n=Oo(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Za(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(e))Qa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Mo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(nc(n,e,r,i=ec()),Ja(n,t,r))}}function qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Qa(e,t){ua=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wt(e,n)}}var Ka={readContext:No,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},$a={readContext:No,useCallback:function(e,t){return wa().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=wa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wa().memoizedState=e},useState:Ra,useDebugValue:Ua,useDeferredValue:function(e){return wa().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ga.bind(null,e[1]),wa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=wa();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===kl)throw Error(o(349));0!==(30&aa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Pa(Aa.bind(null,r,a,e),[e]),r.flags|=2048,Na(9,Ia.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=wa(),t=kl.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:No,useCallback:Ha,useContext:No,useEffect:ja,useImperativeHandle:za,useInsertionEffect:Ba,useLayoutEffect:La,useMemo:Wa,useReducer:Sa,useRef:Da,useState:function(){return Sa(va)},useDebugValue:Ua,useDeferredValue:function(e){return Va(ba(),la.memoizedState,e)},useTransition:function(){return[Sa(va)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:xa,useId:Ya,unstable_isNewReconciler:!1},ts={readContext:No,useCallback:Ha,useContext:No,useEffect:ja,useImperativeHandle:za,useInsertionEffect:Ba,useLayoutEffect:La,useMemo:Wa,useReducer:Ca,useRef:Da,useState:function(){return Ca(va)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Va(t,la.memoizedState,e)},useTransition:function(){return[Ca(va)[0],ba().memoizedState]},useMutableSource:_a,useSyncExternalStore:xa,useId:Ya,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Fo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Fo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(nc(t,e,r,n),Uo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=No(o):(i=Di(t)?Ri:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Bo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=No(o):(o=Di(t)?Ri:Ti.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function us(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Fo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=r),us(0,t)},n}function ps(e,t,n){(n=Fo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){us(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){us(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ws=v.ReactCurrentOwner,bs=!1;function vs(e,t,n,r){t.child=null===e?Co(t,null,n,r):So(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ma(e,t,n,r,o,i),n=ya(),null===e||bs?(io&&n&&eo(t),t.flags|=1,vs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Cs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Dc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=Mc(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Is(e,t,n,r,i)}function xs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ml,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ml,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ii(Ml,Dl),Dl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ii(Ml,Dl),Dl|=r;return vs(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,i){var o=Di(n)?Ri:Ti.current;return o=Ni(t,o),Ro(t,i),n=ma(e,t,n,r,o,i),r=ya(),null===e||bs?(io&&r&&eo(t),t.flags|=1,vs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function As(e,t,n,r,i){if(Di(n)){var o=!0;ji(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Ws(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=No(c):c=Ni(t,c=Di(n)?Ri:Ti.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),jo=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||ki.current||jo?("function"===typeof d&&(rs(t,n,d,r),l=t.memoizedState),(s=jo||os(t,n,s,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Lo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=No(l):l=Ni(t,l=Di(n)?Ri:Ti.current);var f=n.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==u||h!==l)&&ss(t,a,r,l),jo=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var p=t.memoizedState;s!==u||h!==p||ki.current||jo?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=jo||os(t,n,c,r,h,p,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,o,i)}function Ts(e,t,n,r,i,o){Es(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Bi(t,n,!1),Vs(e,t,o);r=t.stateNode,ws.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,s,o)):vs(e,t,s,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function ks(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Qo(e,t.containerInfo)}function Rs(e,t,n,r,i){return po(),go(i),t.flags|=256,vs(e,t,n,r),t.child}var Ns,Ds,Ms,Os,Ps={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ii(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,i,0,null),e=Pc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ps,e):Ls(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(a=Pc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&So(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ps,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=kl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),nc(r,e,i,-1))}return gc(),Fs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Xi[Zi++]=Qi,Xi[Zi++]=Ji,Xi[Zi++]=qi,Qi=e.id,Ji=e.overflow,qi=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Mc(r,s):(s=Pc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,i}return e=(s=e.child).sibling,i=Mc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&go(r),So(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function Us(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(vs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Di(t.type)&&Mi(),Ys(t),null;case 3:return r=t.stateNode,Jo(),Ei(ki),Ei(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ds(e,t),Ys(t),null;case 5:$o(t);var i=qo(Zo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ys(t),null}if(e=qo(Yo.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Q(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in we(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Kr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":Y(r),$(r,a,!0);break;case"textarea":Y(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Fr(Pr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Q(e,r),i=q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in we(n,i),c=i)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?me(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Fr("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":Y(e),$(e,r,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Os(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=qo(Zo.current),qo(Yo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Kr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ys(t),null;case 13:if(Ei(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return Jo(),Ds(e,t),null===e&&Hr(t.stateNode.containerInfo),Ys(t),null;case 10:return To(t.type._context),Ys(t),null;case 19:if(Ei(ea),null===(a=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Hl&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ys(t),null}else 2*Je()-a.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,Ii(ea,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Zs(e,t){switch(to(t),t.tag){case 1:return Di(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Ei(ki),Ei(Ti),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Ei(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ea),null;case 4:return Jo(),null;case 10:return To(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ns=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Ms=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,qo(Yo.current);var o,a=null;switch(n){case"input":i=q(e,i),r=q(e,r),a=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(d in we(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(s.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(s.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var qs=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Ks=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){xc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||$s(n,t);case 6:var r=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(dl,n.stateNode));break;case 4:r=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Qs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hl(e,t,n),Qs=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach(function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(o(160));fl(a,s,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){xc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){xc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){xc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),be(l,s);var d=be(l,a);for(s=0;s<c.length;s+=2){var u=c[s],h=c[s+1];"style"===u?me(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):b(i,u,h,d)}switch(l){case"input":K(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){xc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){xc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Je())),4&r&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(d=Qs)||u,gl(t,e),Qs=d):gl(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Ks=e,u=e.child;null!==u;){for(h=Ks=u;null!==Ks;){switch(p=(f=Ks).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$s(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){xc(r,n,m)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,Ks=p):Sl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){xc(e,e.return,m)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){xc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Ks=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var i=Ks,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||qs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=qs;var c=Qs;if(qs=a,(Qs=l)&&!c)for(Ks=i;null!==Ks;)l=(a=Ks).child,22===a.tag&&null!==a.memoizedState?Cl(i):null!==l?(l.return=a,Ks=l):Cl(i);for(;null!==o;)Ks=o,bl(o,t,n),o=o.sibling;Ks=i,qs=s,Qs=c}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ks=o):vl(e)}}function vl(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&il(t)}catch(f){xc(t,t.return,f)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function Sl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function Cl(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){xc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xc(t,i,l)}}var o=t.return;try{il(t)}catch(l){xc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){xc(t,a,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var _l,xl=Math.ceil,El=v.ReactCurrentDispatcher,Il=v.ReactCurrentOwner,Al=v.ReactCurrentBatchConfig,Tl=0,kl=null,Rl=null,Nl=0,Dl=0,Ml=xi(0),Ol=0,Pl=null,jl=0,Bl=0,Ll=0,Fl=null,zl=null,Ul=0,Hl=1/0,Wl=null,Vl=!1,Gl=null,Yl=null,Xl=!1,Zl=null,ql=0,Ql=0,Jl=null,Kl=-1,$l=0;function ec(){return 0!==(6&Tl)?Je():-1!==Kl?Kl:Kl=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Nl?Nl&-Nl:null!==mo.transition?(0===$l&&($l=gt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(o(185));yt(e,n,r),0!==(2&Tl)&&e===kl||(e===kl&&(0===(2&Tl)&&(Bl|=n),4===Ol&&sc(e,Nl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Hl=Je()+500,Fi&&Hi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===kl?Nl:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Fi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai(function(){0===(6&Tl)&&Hi()}),n=null;else{switch(vt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=kc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Kl=-1,$l=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var r=ht(e,e===kl?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Tl;Tl|=2;var a=pc();for(kl===e&&Nl===t||(Wl=null,Hl=Je()+500,hc(e,t));;)try{wc();break}catch(l){fc(e,l)}Ao(),El.current=a,Tl=i,null!==Rl?t=0:(kl=null,Nl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Pl,hc(e,0),sc(e,r),rc(e,Je()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Pl,hc(e,0),sc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sc(e,zl,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,zl,Wl),t);break}Sc(e,zl,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,zl,Wl),r);break}Sc(e,zl,Wl);break;default:throw Error(o(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function sc(e,t){for(t&=~Ll,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(o(327));Cc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Pl,hc(e,0),sc(e,t),rc(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,zl,Wl),rc(e,Je()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Hl=Je()+500,Fi&&Hi())}}function dc(e){null!==Zl&&0===Zl.tag&&0===(6&Tl)&&Cc();var t=Tl;Tl|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(Tl=t))&&Hi()}}function uc(){Dl=Ml.current,Ei(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:Jo(),Ei(ki),Ei(Ti),ra();break;case 5:$o(r);break;case 4:Jo();break;case 13:case 19:Ei(ea);break;case 10:To(r.type._context);break;case 22:case 23:uc()}n=n.return}if(kl=e,Rl=e=Mc(e.current,null),Nl=Dl=t,Ol=0,Pl=null,Ll=Bl=jl=0,zl=Fl=null,null!==Do){for(t=0;t<Do.length;t++)if(null!==(r=(n=Do[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Do=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(Ao(),ia.current=Ka,da){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(aa=0,ca=la=sa=null,ua=!1,ha=0,Il.current=null,null===n||null===n.return){Ol=1,Pl=t,Rl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(a,d,t),c=d;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){gs(a,d,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),go(cs(c,l));break e}}a=c=cs(c,l),4!==Ol&&(Ol=2),null===Fl?Fl=[a]:Fl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ho(a,fs(0,c,t));break e;case 1:l=c;var w=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ho(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}vc(n)}catch(v){t=v,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Ka,null===e?Ka:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===kl||0===(268435455&jl)&&0===(268435455&Bl)||sc(kl,Nl)}function mc(e,t){var n=Tl;Tl|=2;var r=pc();for(kl===e&&Nl===t||(Wl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ao(),Tl=n,El.current=r,null!==Rl)throw Error(o(261));return kl=null,Nl=0,Ol}function yc(){for(;null!==Rl;)bc(Rl)}function wc(){for(;null!==Rl&&!qe();)bc(Rl)}function bc(e){var t=_l(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?vc(e):Rl=t,Il.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Zs(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ol=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ol&&(Ol=5)}function Sc(e,t,n){var r=bt,i=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{Cc()}while(null!==Zl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===kl&&(Rl=kl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,kc(tt,function(){return Cc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Al.transition,Al.transition=null;var s=bt;bt=1;var l=Tl;Tl|=4,Il.current=null,function(e,t){if(ei=Vt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(S){n=null;break e}var s=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===i&&(l=s),f===a&&++u===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(o(163))}}catch(S){xc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Vt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Qe(),Tl=l,bt=s,Al.transition=a}else e.current=n;if(Xl&&(Xl=!1,Zl=e,ql=i),a=e.pendingLanes,0===a&&(Yl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&ql)&&0!==e.tag&&Cc(),a=e.pendingLanes,0!==(1&a)?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,Hi()}(e,t,n,r)}finally{Al.transition=i,bt=r}return null}function Cc(){if(null!==Zl){var e=vt(ql),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,ql=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Ks=e.current;null!==Ks;){var a=Ks,s=a.child;if(0!==(16&Ks.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Ks=d;null!==Ks;){var u=Ks;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Ks=h;else for(;null!==Ks;){var f=(u=Ks).sibling,p=u.return;if(ol(u),u===d){Ks=null;break}if(null!==f){f.return=p,Ks=f;break}Ks=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ks=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(a=Ks).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var w=a.sibling;if(null!==w){w.return=a.return,Ks=w;break e}Ks=a.return}}var b=e.current;for(Ks=b;null!==Ks;){var v=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==v)v.return=s,Ks=v;else e:for(s=b;null!==Ks;){if(0!==(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(C){xc(l,l.return,C)}if(l===s){Ks=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Ks=S;break e}Ks=l.return}}if(Tl=i,Hi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(C){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function _c(e,t,n){e=zo(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=zo(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,kl===e&&(Nl&n)===n&&(4===Ol||3===Ol&&(130023424&Nl)===Nl&&500>Je()-Ul?hc(e,0):Ll|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Po(e,t))&&(yt(e,t,n),rc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ic(e,n)}function kc(e,t){return Xe(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Pc(n.children,i,a,t);case x:s=8,i|=8;break;case E:return(e=Nc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case k:return(e=Nc(13,n,t,i)).elementType=k,e.lanes=a,e;case R:return(e=Nc(19,n,t,i)).elementType=R,e.lanes=a,e;case M:return jc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case A:s=9;break e;case T:s=11;break e;case N:s=14;break e;case D:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Pc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,a,s,l){return e=new Fc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),e}function Uc(e){if(!e)return Ai;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Di(n))return Pi(e,n,t)}return t}function Hc(e,t,n,r,i,o,a,s,l){return(e=zc(n,r,!0,e,0,o,0,s,l)).context=Uc(null),n=e.current,(o=Fo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,a))&&(nc(e,i,a,o),Uo(e,i,a)),a}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:ks(t),po();break;case 5:Ko(t);break;case 1:Di(t.type)&&ji(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(_o,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ii(ea,1&ea.current),null!==(e=Vs(e,t,n))?e.sibling:null);Ii(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,xs(e,t,n)}return Vs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&$i(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ni(t,Ti.current);Ro(t,n),i=ma(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Bo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Ts(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),vs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===N)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Is(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(ks(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Lo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Vs(e,t,n);break e}vs(e,t,r,n)}t=t.child}return t;case 5:return Ko(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Es(e,t),vs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Bs(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=So(t,null,r,n):vs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return vs(e,t,t.pendingProps,n),t.child;case 8:case 12:return vs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ii(_o,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!ki.current){t=Vs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fo(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),ko(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ko(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}vs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=No(i)),t.flags|=1,vs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Cs(e,t,r,i=ns(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Di(r)?(e=!0,ji(t)):e=!1,Ro(t,n),as(t,r,i),ls(t,r,i,n),Ts(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return xs(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(){}function $c(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Vc(a);s.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Vc(a);o.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",Kc);return e._reactRootContainer=a,e[pi]=a.current,Hr(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Vc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Kc);return e._reactRootContainer=l,e[pi]=l.current,Hr(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return Vc(a)}qc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},qc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[pi]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Bt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(wt(t,1|n),rc(t,Je()),0===(6&Tl)&&(Hl=Je()+500,Hi()))}break;case 13:dc(function(){var t=Po(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Yc(e,1)}},Ct=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)nc(t,e,134217728,ec());Yc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Po(e,t);if(null!==n)nc(n,e,t,ec());Yc(e,t)}},xt=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ce=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(o(90));X(r),K(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,ke=dc;var ed={usingClientEntryPoint:!1,Events:[bi,vi,Si,Ie,Ae,cc]},td={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),ot=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(374));class o extends i.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const o=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(i,"fts").concat(o,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=o},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(r.version)}},829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let o=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer="count=".concat(n)),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=["resolution=".concat(n?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push("count=".concat(r)),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),this.headers.Prefer=n.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(210));t.PostgrestClient=i.default;const o=r(n(829));t.PostgrestQueryBuilder=o.default;const a=r(n(736));t.PostgrestFilterBuilder=a.default;const s=r(n(374));t.PostgrestTransformBuilder=s.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391);function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const s="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:c=!1}=i,f=o.history,p=e.Pop,g=null,m=y();function y(){return(f.state||{idx:null}).idx}function w(){p=e.Pop;let t=y(),n=null==t?null:t-m;m=t,g&&g({action:p,location:v.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,f.replaceState(a({},f.state,{idx:m}),""));let v={get action(){return p},get location(){return t(o,f)},listen(e){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(s,w),g=e,()=>{o.removeEventListener(s,w),g=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=u(v.location,t,n);r&&r(i,t),m=y()+1;let a=d(i,m),s=v.createHref(i);try{f.pushState(a,"",s)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;o.location.assign(s)}c&&g&&g({action:p,location:v.location,delta:1})},replace:function(t,n){p=e.Replace;let i=u(v.location,t,n);r&&r(i,t),m=y();let o=d(i,m),a=v.createHref(i);f.replaceState(o,"",a),c&&g&&g({action:p,location:v.location,delta:0})},go:e=>f.go(e)};return v}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function m(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=N(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;let o=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=R(i);a=T(o[s],e,r)}return a}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(l(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=j([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),w(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:A(s,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=b(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}const v=/^:[\w-]+$/,S=3,C=2,_=1,x=10,E=-2,I=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=E),t&&(r+=C),n.filter(e=>!I(e)).reduce((e,t)=>e+(v.test(t)?S:""===t?_:x),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",d=k({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=k({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:j([o,d.pathname]),pathnameBase:B(j([o,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(o=j([o,d.pathnameBase]))}return a}function k(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function P(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),l(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,s=""===e||""===i.pathname,c=s?"/":i.pathname;if(null==c)o=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:L(r),hash:F(i)}}(i,o),u=c&&"/"!==c&&c.endsWith("/"),h=(s||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const j=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],H=(new Set(U),["get",...U]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const V=t.createContext(null);const G=t.createContext(null);const Y=t.createContext(null);const X=t.createContext(null);const Z=t.createContext({outlet:null,matches:[],isDataRoute:!1});const q=t.createContext(null);function Q(){return null!=t.useContext(X)}function J(){return Q()||l(!1),t.useContext(X).location}function K(e){t.useContext(Y).static||t.useLayoutEffect(e)}function $(){let{isDataRoute:e}=t.useContext(Z);return e?function(){let{router:e}=de(le.UseNavigateStable),n=he(ce.UseNavigateStable),r=t.useRef(!1);return K(()=>{r.current=!0}),t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,W({fromRouteId:n},i)))},[e,n])}():function(){Q()||l(!1);let e=t.useContext(V),{basename:n,future:r,navigator:i}=t.useContext(Y),{matches:o}=t.useContext(Z),{pathname:a}=J(),s=JSON.stringify(O(o,r.v7_relativeSplatPath)),c=t.useRef(!1);return K(()=>{c.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let o=P(t,JSON.parse(s),a,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:j([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)},[n,i,s,a,e])}()}const ee=t.createContext(null);function te(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(Y),{matches:o}=t.useContext(Z),{pathname:a}=J(),s=JSON.stringify(O(o,i.v7_relativeSplatPath));return t.useMemo(()=>P(e,JSON.parse(s),a,"path"===r),[e,s,a,r])}function ne(n,r,i,o){Q()||l(!1);let{navigator:a}=t.useContext(Y),{matches:s}=t.useContext(Z),c=s[s.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=J();if(r){var g;let e="string"===typeof r?f(r):r;"/"===u||(null==(g=e.pathname)?void 0:g.startsWith(u))||l(!1),h=e}else h=p;let y=h.pathname||"/",w=y;if("/"!==u){let e=u.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=m(n,{pathname:w});let v=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:j([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:j([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,i,o);return r&&v?t.createElement(X.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},v):v}function re(){let e=function(){var e;let n=t.useContext(q),r=ue(ce.UseRouteError),i=he(ce.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ie=t.createElement(re,null);class oe extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Z.Provider,{value:this.props.routeContext},t.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(V);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Z.Provider,{value:n},i)}function se(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let s=e,c=null==(o=r)?void 0:o.errors;if(null!=c){let e=s.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),s=s.slice(0,Math.min(s.length,e+1))}let d=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){d=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,i,o)=>{let a,l=!1,h=null,f=null;var p;r&&(a=c&&i.route.id?c[i.route.id]:void 0,h=i.route.errorElement||ie,d&&(u<0&&0===o?(p="route-fallback",!1||fe[p]||(fe[p]=!0),l=!0,f=null):u===o&&(l=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(s.slice(0,o+1)),m=()=>{let n;return n=a?h:l?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ae,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let n=t.useContext(V);return n||l(!1),n}function ue(e){let n=t.useContext(G);return n||l(!1),n}function he(e){let n=function(){let e=t.useContext(Z);return e||l(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||l(!1),r.route.id}const fe={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ge(e){return function(e){let n=t.useContext(Z).outlet;return n?t.createElement(ee.Provider,{value:e},n):n}(e.context)}function me(e){l(!1)}function ye(n){let{basename:r="/",children:i=null,location:o,navigationType:a=e.Pop,navigator:s,static:c=!1,future:d}=n;Q()&&l(!1);let u=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:u,navigator:s,static:c,future:W({v7_relativeSplatPath:!1},d)}),[u,d,s,c]);"string"===typeof o&&(o=f(o));let{pathname:p="/",search:g="",hash:m="",state:y=null,key:w="default"}=o,b=t.useMemo(()=>{let e=N(p,u);return null==e?null:{location:{pathname:e,search:g,hash:m,state:y,key:w},navigationType:a}},[u,p,g,m,y,w,a]);return null==b?null:t.createElement(Y.Provider,{value:h},t.createElement(X.Provider,{children:i,value:b}))}function we(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise(()=>{});t.Component;function be(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,be(e.props.children,o));e.type!==me&&l(!1),e.props.index&&e.props.children&&l(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,o)),r.push(a)}),r}var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ve.apply(this,arguments)};Object.create;function Se(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ce=n(324),_e=n.n(Ce),xe="-ms-",Ee="-moz-",Ie="-webkit-",Ae="comm",Te="rule",ke="decl",Re="@keyframes",Ne=Math.abs,De=String.fromCharCode,Me=Object.assign;function Oe(e){return e.trim()}function Pe(e,t){return(e=t.exec(e))?e[0]:e}function je(e,t,n){return e.replace(t,n)}function Be(e,t,n){return e.indexOf(t,n)}function Le(e,t){return 0|e.charCodeAt(t)}function Fe(e,t,n){return e.slice(t,n)}function ze(e){return e.length}function Ue(e){return e.length}function He(e,t){return t.push(e),e}function We(e,t){return e.filter(function(e){return!Pe(e,t)})}var Ve=1,Ge=1,Ye=0,Xe=0,Ze=0,qe="";function Qe(e,t,n,r,i,o,a,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Ve,column:Ge,length:a,return:"",siblings:s}}function Je(e,t){return Me(Qe("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Ke(e){for(;e.root;)e=Je(e.root,{children:[e]});He(e,e.siblings)}function $e(){return Ze=Xe>0?Le(qe,--Xe):0,Ge--,10===Ze&&(Ge=1,Ve--),Ze}function et(){return Ze=Xe<Ye?Le(qe,Xe++):0,Ge++,10===Ze&&(Ge=1,Ve++),Ze}function tt(){return Le(qe,Xe)}function nt(){return Xe}function rt(e,t){return Fe(qe,e,t)}function it(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ot(e){return Ve=Ge=1,Ye=ze(qe=e),Xe=0,[]}function at(e){return qe="",e}function st(e){return Oe(rt(Xe-1,dt(91===e?e+2:40===e?e+1:e)))}function lt(e){for(;(Ze=tt())&&Ze<33;)et();return it(e)>2||it(Ze)>3?"":" "}function ct(e,t){for(;--t&&et()&&!(Ze<48||Ze>102||Ze>57&&Ze<65||Ze>70&&Ze<97););return rt(e,nt()+(t<6&&32==tt()&&32==et()))}function dt(e){for(;et();)switch(Ze){case e:return Xe;case 34:case 39:34!==e&&39!==e&&dt(Ze);break;case 40:41===e&&dt(e);break;case 92:et()}return Xe}function ut(e,t){for(;et()&&e+Ze!==57&&(e+Ze!==84||47!==tt()););return"/*"+rt(t,Xe-1)+"*"+De(47===e?e:et())}function ht(e){for(;!it(tt());)et();return rt(e,Xe)}function ft(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function pt(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ke:return e.return=e.return||e.value;case Ae:return"";case Re:return e.return=e.value+"{"+ft(e.children,r)+"}";case Te:if(!ze(e.value=e.props.join(",")))return""}return ze(n=ft(e.children,r))?e.return=e.value+"{"+n+"}":""}function gt(e,t,n){switch(function(e,t){return 45^Le(e,0)?(((t<<2^Le(e,0))<<2^Le(e,1))<<2^Le(e,2))<<2^Le(e,3):0}(e,t)){case 5103:return Ie+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ie+e+e;case 4789:return Ee+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ie+e+Ee+e+xe+e+e;case 5936:switch(Le(e,t+11)){case 114:return Ie+e+xe+je(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ie+e+xe+je(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ie+e+xe+je(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ie+e+xe+e+e;case 6165:return Ie+e+xe+"flex-"+e+e;case 5187:return Ie+e+je(e,/(\w+).+(:[^]+)/,Ie+"box-$1$2"+xe+"flex-$1$2")+e;case 5443:return Ie+e+xe+"flex-item-"+je(e,/flex-|-self/g,"")+(Pe(e,/flex-|baseline/)?"":xe+"grid-row-"+je(e,/flex-|-self/g,""))+e;case 4675:return Ie+e+xe+"flex-line-pack"+je(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ie+e+xe+je(e,"shrink","negative")+e;case 5292:return Ie+e+xe+je(e,"basis","preferred-size")+e;case 6060:return Ie+"box-"+je(e,"-grow","")+Ie+e+xe+je(e,"grow","positive")+e;case 4554:return Ie+je(e,/([^-])(transform)/g,"$1"+Ie+"$2")+e;case 6187:return je(je(je(e,/(zoom-|grab)/,Ie+"$1"),/(image-set)/,Ie+"$1"),e,"")+e;case 5495:case 3959:return je(e,/(image-set\([^]*)/,Ie+"$1$`$1");case 4968:return je(je(e,/(.+:)(flex-)?(.*)/,Ie+"box-pack:$3"+xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ie+e+e;case 4200:if(!Pe(e,/flex-|baseline/))return xe+"grid-column-align"+Fe(e,t)+e;break;case 2592:case 3360:return xe+je(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(e,n){return t=n,Pe(e.props,/grid-\w+-end/)})?~Be(e+(n=n[t].value),"span",0)?e:xe+je(e,"-start","")+e+xe+"grid-row-span:"+(~Be(n,"span",0)?Pe(n,/\d+/):+Pe(n,/\d+/)-+Pe(e,/\d+/))+";":xe+je(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(e){return Pe(e.props,/grid-\w+-start/)})?e:xe+je(je(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return je(e,/(.+)-inline(.+)/,Ie+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ze(e)-1-t>6)switch(Le(e,t+1)){case 109:if(45!==Le(e,t+4))break;case 102:return je(e,/(.+:)(.+)-([^]+)/,"$1"+Ie+"$2-$3$1"+Ee+(108==Le(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Be(e,"stretch",0)?gt(je(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return je(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,n,r,i,o,a,s){return xe+n+":"+r+s+(i?xe+n+"-span:"+(o?a:+a-+r)+s:"")+e});case 4949:if(121===Le(e,t+6))return je(e,":",":"+Ie)+e;break;case 6444:switch(Le(e,45===Le(e,14)?18:11)){case 120:return je(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ie+(45===Le(e,14)?"inline-":"")+"box$3$1"+Ie+"$2$3$1"+xe+"$2box$3")+e;case 100:return je(e,":",":"+xe)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return je(e,"scroll-","scroll-snap-")+e}return e}function mt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ke:return void(e.return=gt(e.value,e.length,n));case Re:return ft([Je(e,{value:je(e.value,"@","@"+Ie)})],r);case Te:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,function(t){switch(Pe(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ke(Je(e,{props:[je(t,/:(read-\w+)/,":-moz-$1")]})),Ke(Je(e,{props:[t]})),Me(e,{props:We(n,r)});break;case"::placeholder":Ke(Je(e,{props:[je(t,/:(plac\w+)/,":"+Ie+"input-$1")]})),Ke(Je(e,{props:[je(t,/:(plac\w+)/,":-moz-$1")]})),Ke(Je(e,{props:[je(t,/:(plac\w+)/,xe+"input-$1")]})),Ke(Je(e,{props:[t]})),Me(e,{props:We(n,r)})}return""})}}function yt(e){return at(wt("",null,null,null,[""],e=ot(e),0,[0],e))}function wt(e,t,n,r,i,o,a,s,l){for(var c=0,d=0,u=a,h=0,f=0,p=0,g=1,m=1,y=1,w=0,b="",v=i,S=o,C=r,_=b;m;)switch(p=w,w=et()){case 40:if(108!=p&&58==Le(_,u-1)){-1!=Be(_+=je(st(w),"&","&\f"),"&\f",Ne(c?s[c-1]:0))&&(y=-1);break}case 34:case 39:case 91:_+=st(w);break;case 9:case 10:case 13:case 32:_+=lt(p);break;case 92:_+=ct(nt()-1,7);continue;case 47:switch(tt()){case 42:case 47:He(vt(ut(et(),nt()),t,n,l),l);break;default:_+="/"}break;case 123*g:s[c++]=ze(_)*y;case 125*g:case 59:case 0:switch(w){case 0:case 125:m=0;case 59+d:-1==y&&(_=je(_,/\f/g,"")),f>0&&ze(_)-u&&He(f>32?St(_+";",r,n,u-1,l):St(je(_," ","")+";",r,n,u-2,l),l);break;case 59:_+=";";default:if(He(C=bt(_,t,n,c,d,i,s,b,v=[],S=[],u,o),o),123===w)if(0===d)wt(_,t,C,C,v,o,u,s,S);else switch(99===h&&110===Le(_,3)?100:h){case 100:case 108:case 109:case 115:wt(e,C,C,r&&He(bt(e,C,C,0,0,i,s,b,i,v=[],u,S),S),i,S,u,s,r?v:S);break;default:wt(_,C,C,C,[""],S,0,s,S)}}c=d=f=0,g=y=1,b=_="",u=a;break;case 58:u=1+ze(_),f=p;default:if(g<1)if(123==w)--g;else if(125==w&&0==g++&&125==$e())continue;switch(_+=De(w),w*g){case 38:y=d>0?1:(_+="\f",-1);break;case 44:s[c++]=(ze(_)-1)*y,y=1;break;case 64:45===tt()&&(_+=st(et())),h=tt(),d=u=ze(b=_+=ht(nt())),w++;break;case 45:45===p&&2==ze(_)&&(g=0)}}return o}function bt(e,t,n,r,i,o,a,s,l,c,d,u){for(var h=i-1,f=0===i?o:[""],p=Ue(f),g=0,m=0,y=0;g<r;++g)for(var w=0,b=Fe(e,h+1,h=Ne(m=a[g])),v=e;w<p;++w)(v=Oe(m>0?f[w]+" "+b:je(b,/&\f/g,f[w])))&&(l[y++]=v);return Qe(e,t,n,0===i?Te:s,l,c,d,u)}function vt(e,t,n,r){return Qe(e,t,n,Ae,De(Ze),Fe(e,2,-2),0,r)}function St(e,t,n,r,i){return Qe(e,t,n,ke,Fe(e,0,r),Fe(e,r+1,-1),r,i)}var Ct={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_t="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.SC_ATTR)||"data-styled",xt="active",Et="data-styled-version",It="6.1.19",At="/*!sc*/\n",Tt="undefined"!=typeof window&&"undefined"!=typeof document,kt=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://ywagbnjejhpdujkftbxq.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo",REACT_APP_SHOPIFY_SHOP:"papillonbrand"}.SC_DISABLE_SPEEDY)),Rt={},Nt=(new Set,Object.freeze([])),Dt=Object.freeze({});function Mt(e,t,n){return void 0===n&&(n=Dt),e.theme!==n.theme&&e.theme||t||n.theme}var Ot=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Pt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,jt=/(^-|-$)/g;function Bt(e){return e.replace(Pt,"-").replace(jt,"")}var Lt=/(a)(d)/gi,Ft=function(e){return String.fromCharCode(e+(e>25?39:97))};function zt(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Ft(t%52)+n;return(Ft(t%52)+n).replace(Lt,"$1-$2")}var Ut,Ht=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Wt=function(e){return Ht(5381,e)};function Vt(e){return zt(Wt(e)>>>0)}function Gt(e){return e.displayName||e.name||"Component"}function Yt(e){return"string"==typeof e&&!0}var Xt="function"==typeof Symbol&&Symbol.for,Zt=Xt?Symbol.for("react.memo"):60115,qt=Xt?Symbol.for("react.forward_ref"):60112,Qt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Jt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Kt={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$t=((Ut={})[qt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ut[Zt]=Kt,Ut);function en(e){return("type"in(t=e)&&t.type.$$typeof)===Zt?Kt:"$$typeof"in e?$t[e.$$typeof]:Qt;var t}var tn=Object.defineProperty,nn=Object.getOwnPropertyNames,rn=Object.getOwnPropertySymbols,on=Object.getOwnPropertyDescriptor,an=Object.getPrototypeOf,sn=Object.prototype;function ln(e,t,n){if("string"!=typeof t){if(sn){var r=an(t);r&&r!==sn&&ln(e,r,n)}var i=nn(t);rn&&(i=i.concat(rn(t)));for(var o=en(e),a=en(t),s=0;s<i.length;++s){var l=i[s];if(!(l in Jt||n&&n[l]||a&&l in a||o&&l in o)){var c=on(t,l);try{tn(e,l,c)}catch(e){}}}}return e}function cn(e){return"function"==typeof e}function dn(e){return"object"==typeof e&&"styledComponentId"in e}function un(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function hn(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function fn(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function pn(e,t,n){if(void 0===n&&(n=!1),!n&&!fn(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=pn(e[r],t[r]);else if(fn(t))for(var r in t)e[r]=pn(e[r],t[r]);return e}function gn(e,t){Object.defineProperty(e,"toString",{value:t})}function mn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var yn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw mn(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=(o=0,t.length);o<s;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+="".concat(this.tag.getRule(o)).concat(At);return t},e}(),wn=new Map,bn=new Map,vn=1,Sn=function(e){if(wn.has(e))return wn.get(e);for(;bn.has(vn);)vn++;var t=vn++;return wn.set(e,t),bn.set(t,e),t},Cn=function(e,t){vn=t+1,wn.set(e,t),bn.set(t,e)},_n="style[".concat(_t,"][").concat(Et,'="').concat(It,'"]'),xn=new RegExp("^".concat(_t,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),En=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},In=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(At),i=[],o=0,a=r.length;o<a;o++){var s=r[o].trim();if(s){var l=s.match(xn);if(l){var c=0|parseInt(l[1],10),d=l[2];0!==c&&(Cn(d,c),En(e,d,l[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},An=function(e){for(var t=document.querySelectorAll(_n),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(_t)!==xt&&(In(e,i),i.parentNode&&i.parentNode.removeChild(i))}};function Tn(){return n.nc}var kn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(_t,"]")));return t[t.length-1]}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(_t,xt),r.setAttribute(Et,It);var a=Tn();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},Rn=function(){function e(e){this.element=kn(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw mn(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Nn=function(){function e(e){this.element=kn(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Dn=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Mn=Tt,On={isServer:!Tt,useCSSOMInjection:!kt},Pn=function(){function e(e,t,n){void 0===e&&(e=Dt),void 0===t&&(t={});var r=this;this.options=ve(ve({},On),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Tt&&Mn&&(Mn=!1,An(this)),gn(this,function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return bn.get(e)}(n);if(void 0===i)return"continue";var o=e.names.get(i),a=t.getGroup(n);if(void 0===o||!o.size||0===a.length)return"continue";var s="".concat(_t,".g").concat(n,'[id="').concat(i,'"]'),l="";void 0!==o&&o.forEach(function(e){e.length>0&&(l+="".concat(e,","))}),r+="".concat(a).concat(s,'{content:"').concat(l,'"}').concat(At)},o=0;o<n;o++)i(o);return r}(r)})}return e.registerId=function(e){return Sn(e)},e.prototype.rehydrate=function(){!this.server&&Tt&&An(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(ve(ve({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Dn(n):t?new Rn(n):new Nn(n)}(this.options),new yn(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Sn(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Sn(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Sn(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),jn=/&/g,Bn=/^\s*\/\/.*$/gm;function Ln(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Ln(e.children,t)),e})}function Fn(e){var t,n,r,i=void 0===e?Dt:e,o=i.options,a=void 0===o?Dt:o,s=i.plugins,l=void 0===s?Nt:s,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},d=l.slice();d.push(function(e){e.type===Te&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(jn,n).replace(r,c))}),a.prefix&&d.push(mt),d.push(pt);var u=function(e,i,o,s){void 0===i&&(i=""),void 0===o&&(o=""),void 0===s&&(s="&"),t=s,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Bn,""),c=yt(o||i?"".concat(o," ").concat(i," { ").concat(l," }"):l);a.namespace&&(c=Ln(c,a.namespace));var u,h=[];return ft(c,function(e){var t=Ue(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}(d.concat((u=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&u(e)})))),h};return u.hash=l.length?l.reduce(function(e,t){return t.name||mn(15),Ht(e,t.name)},5381).toString():"",u}var zn=new Pn,Un=Fn(),Hn=t.createContext({shouldForwardProp:void 0,styleSheet:zn,stylis:Un}),Wn=(Hn.Consumer,t.createContext(void 0));function Vn(){return(0,t.useContext)(Hn)}function Gn(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],o=Vn().styleSheet,a=(0,t.useMemo)(function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,o]),s=(0,t.useMemo)(function(){return Fn({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:r})},[e.enableVendorPrefixes,e.namespace,r]);(0,t.useEffect)(function(){_e()(r,e.stylisPlugins)||i(e.stylisPlugins)},[e.stylisPlugins]);var l=(0,t.useMemo)(function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:s}},[e.shouldForwardProp,a,s]);return t.createElement(Hn.Provider,{value:l},t.createElement(Wn.Provider,{value:s},e.children))}var Yn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Un);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,gn(this,function(){throw mn(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=Un),this.name+e.hash},e}(),Xn=function(e){return e>="A"&&e<="Z"};function Zn(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;Xn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var qn=function(e){return null==e||!1===e||""===e},Qn=function(e){var t,n,r=[];for(var i in e){var o=e[i];e.hasOwnProperty(i)&&!qn(o)&&(Array.isArray(o)&&o.isCss||cn(o)?r.push("".concat(Zn(i),":"),o,";"):fn(o)?r.push.apply(r,Se(Se(["".concat(i," {")],Qn(o),!1),["}"],!1)):r.push("".concat(Zn(i),": ").concat((t=i,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Ct||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Jn(e,t,n,r){return qn(e)?[]:dn(e)?[".".concat(e.styledComponentId)]:cn(e)?!cn(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Jn(e(t),t,n,r):e instanceof Yn?n?(e.inject(n,r),[e.getName(r)]):[e]:fn(e)?Qn(e):Array.isArray(e)?Array.prototype.concat.apply(Nt,e.map(function(e){return Jn(e,t,n,r)})):[e.toString()];var i}function Kn(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(cn(n)&&!dn(n))return!1}return!0}var $n=Wt(It),er=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Kn(e),this.componentId=t,this.baseHash=Ht($n,t),this.baseStyle=n,Pn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=un(r,this.staticRulesId);else{var i=hn(Jn(this.rules,e,t,n)),o=zt(Ht(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(i,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}r=un(r,o),this.staticRulesId=o}else{for(var s=Ht(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var d=this.rules[c];if("string"==typeof d)l+=d;else if(d){var u=hn(Jn(d,e,t,n));s=Ht(s,u+c),l+=u}}if(l){var h=zt(s>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),r=un(r,h)}}return r},e}(),tr=t.createContext(void 0);tr.Consumer;function nr(e){var n=t.useContext(tr),r=(0,t.useMemo)(function(){return function(e,t){if(!e)throw mn(14);if(cn(e))return e(t);if(Array.isArray(e)||"object"!=typeof e)throw mn(8);return t?ve(ve({},t),e):e}(e.theme,n)},[e.theme,n]);return e.children?t.createElement(tr.Provider,{value:r},e.children):null}var rr={};new Set;function ir(e,n,r){var i=dn(e),o=e,a=!Yt(e),s=n.attrs,l=void 0===s?Nt:s,c=n.componentId,d=void 0===c?function(e,t){var n="string"!=typeof e?"sc":Bt(e);rr[n]=(rr[n]||0)+1;var r="".concat(n,"-").concat(Vt(It+n+rr[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):c,u=n.displayName,h=void 0===u?function(e){return Yt(e)?"styled.".concat(e):"Styled(".concat(Gt(e),")")}(e):u,f=n.displayName&&n.componentId?"".concat(Bt(n.displayName),"-").concat(n.componentId):n.componentId||d,p=i&&o.attrs?o.attrs.concat(l).filter(Boolean):l,g=n.shouldForwardProp;if(i&&o.shouldForwardProp){var m=o.shouldForwardProp;if(n.shouldForwardProp){var y=n.shouldForwardProp;g=function(e,t){return m(e,t)&&y(e,t)}}else g=m}var w=new er(r,f,i?o.componentStyle:void 0);function b(e,n){return function(e,n,r){var i=e.attrs,o=e.componentStyle,a=e.defaultProps,s=e.foldedComponentIds,l=e.styledComponentId,c=e.target,d=t.useContext(tr),u=Vn(),h=e.shouldForwardProp||u.shouldForwardProp,f=Mt(n,d,a)||Dt,p=function(e,t,n){for(var r,i=ve(ve({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var a=cn(r=e[o])?r(i):r;for(var s in a)i[s]="className"===s?un(i[s],a[s]):"style"===s?ve(ve({},i[s]),a[s]):a[s]}return t.className&&(i.className=un(i.className,t.className)),i}(i,n,f),g=p.as||c,m={};for(var y in p)void 0===p[y]||"$"===y[0]||"as"===y||"theme"===y&&p.theme===f||("forwardedAs"===y?m.as=p.forwardedAs:h&&!h(y,g)||(m[y]=p[y]));var w=function(e,t){var n=Vn();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,p),b=un(s,l);return w&&(b+=" "+w),p.className&&(b+=" "+p.className),m[Yt(g)&&!Ot.has(g)?"class":"className"]=b,r&&(m.ref=r),(0,t.createElement)(g,m)}(v,e,n)}b.displayName=h;var v=t.forwardRef(b);return v.attrs=p,v.componentStyle=w,v.displayName=h,v.shouldForwardProp=g,v.foldedComponentIds=i?un(o.foldedComponentIds,o.styledComponentId):"",v.styledComponentId=f,v.target=i?o.target:e,Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)pn(e,i[r],!0);return e}({},o.defaultProps,e):e}}),gn(v,function(){return".".concat(v.styledComponentId)}),a&&ln(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),v}function or(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var ar=function(e){return Object.assign(e,{isCss:!0})};function sr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(cn(e)||fn(e))return ar(Jn(or(Nt,Se([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Jn(r):ar(Jn(or(r,t)))}function lr(e,t,n){if(void 0===n&&(n=Dt),!t)throw mn(1,t);var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return e(t,n,sr.apply(void 0,Se([r],i,!1)))};return r.attrs=function(r){return lr(e,t,ve(ve({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return lr(e,t,ve(ve({},n),r))},r}var cr=function(e){return lr(ir,e)},dr=cr;Ot.forEach(function(e){dr[e]=cr(e)});var ur=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Kn(e),Pn.registerId(this.componentId+1)}return e.prototype.createStyles=function(e,t,n,r){var i=r(hn(Jn(this.rules,t,n,r)),""),o=this.componentId+e;n.insertRules(o,o,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&Pn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function hr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=hn(sr.apply(void 0,Se([e],t,!1))),i=Vt(r);return new Yn(i,r)}(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Tn(),r=hn([n&&'nonce="'.concat(n,'"'),"".concat(_t,'="true"'),"".concat(Et,'="').concat(It,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw mn(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw mn(2);var r=e.instance.toString();if(!r)return[];var i=((n={})[_t]="",n[Et]=It,n.dangerouslySetInnerHTML={__html:r},n),o=Tn();return o&&(i.nonce=o),[t.createElement("style",ve({},i,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Pn({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw mn(2);return t.createElement(Gn,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw mn(3)}})(),"__sc-".concat(_t,"__");var fr=n(579);const pr=(0,t.createContext)({});function gr(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const mr="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function wr(e){var t=function(e,t){if("object"!=yr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yr(t)?t:t+""}function br(e,t,n){return(t=wr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach(function(t){br(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Cr=(0,t.createContext)(null);const _r=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class xr extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=function(e){return"object"===typeof(t=e)&&null!==t&&"offsetHeight"in e;var t}(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Er(e){let{children:n,isPresent:r,anchorX:i}=e;const o=(0,t.useId)(),a=(0,t.useRef)(null),s=(0,t.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=(0,t.useContext)(_r);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:c,right:d}=s.current;if(r||!a.current||!e||!t)return;const u="left"===i?"left: ".concat(c):"right: ".concat(d);a.current.dataset.motionPopId=o;const h=document.createElement("style");return l&&(h.nonce=l),document.head.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(o,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(u,"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{document.head.contains(h)&&document.head.removeChild(h)}},[r]),(0,fr.jsx)(xr,{isPresent:r,childRef:a,sizeRef:s,children:t.cloneElement(n,{ref:a})})}const Ir=e=>{let{children:n,initial:r,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:s,mode:l,anchorX:c}=e;const d=gr(Ar),u=(0,t.useId)();let h=!0,f=(0,t.useMemo)(()=>(h=!1,{id:u,initial:r,isPresent:i,custom:a,onExitComplete:e=>{d.set(e,!0);for(const t of d.values())if(!t)return;o&&o()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[i,d,o]);return s&&h&&(f=Sr({},f)),(0,t.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[i]),t.useEffect(()=>{!i&&!d.size&&o&&o()},[i]),"popLayout"===l&&(n=(0,fr.jsx)(Er,{isPresent:i,anchorX:c,children:n})),(0,fr.jsx)(Cr.Provider,{value:f,children:n})};function Ar(){return new Map}const Tr=e=>e.key||"";function kr(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}const Rr=e=>{let{children:n,custom:r,initial:i=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:s="sync",propagate:l=!1,anchorX:c="left"}=e;const[d,u]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(Cr);if(null===n)return[!0,null];const{isPresent:r,onExitComplete:i,register:o}=n,a=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return o(a)},[e]);const s=(0,t.useCallback)(()=>e&&i&&i(a),[a,i,e]);return!r&&i?[!1,s]:[!0]}(l),h=(0,t.useMemo)(()=>kr(n),[n]),f=l&&!d?[]:h.map(Tr),p=(0,t.useRef)(!0),g=(0,t.useRef)(h),m=gr(()=>new Map),[y,w]=(0,t.useState)(h),[b,v]=(0,t.useState)(h);mr(()=>{p.current=!1,g.current=h;for(let e=0;e<b.length;e++){const t=Tr(b[e]);f.includes(t)?m.delete(t):!0!==m.get(t)&&m.set(t,!1)}},[b,f.length,f.join("-")]);const S=[];if(h!==y){let e=[...h];for(let t=0;t<b.length;t++){const n=b[t],r=Tr(n);f.includes(r)||(e.splice(t,0,n),S.push(n))}return"wait"===s&&S.length&&(e=S),v(kr(e)),w(h),null}const{forceRender:C}=(0,t.useContext)(pr);return(0,fr.jsx)(fr.Fragment,{children:b.map(e=>{const t=Tr(e),n=!(l&&!d)&&(h===b||f.includes(t));return(0,fr.jsx)(Ir,{isPresent:n,initial:!(p.current&&!i)&&void 0,custom:r,presenceAffectsLayout:a,mode:s,onExitComplete:n?void 0:()=>{if(!m.has(t))return;m.set(t,!0);let e=!0;m.forEach(t=>{t||(e=!1)}),e&&(null===C||void 0===C||C(),v(g.current),l&&(null===u||void 0===u||u()),o&&o())},anchorX:c,children:e},t)})})},Nr={frequencyPulse:{name:"Frequency Pulse",gradient:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 50%, #9D4EDD 100%)"},solarShine:{name:"Solar Shine",gradient:"linear-gradient(135deg, #FFB000 0%, #FF9F1C 50%, #FFED85 100%)"},echoGlass:{name:"Echo Glass",gradient:"linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(108,108,108,0.3) 100%)"},retroFrame:{name:"Retro Frame",gradient:"linear-gradient(135deg, #6C6C6C 0%, #FAFAFA 100%)"},nightScan:{name:"Night Scan",gradient:"linear-gradient(135deg, #000000 0%, #4C1C8C 100%)"}},Dr={colors:{primary:"#4C1C8C",accent:{purple:"#4C1C8C",gold:"#FFB000",cyan:"#7F3FBF",pink:"#9D4EDD",green:"#10B981"},highlight:"#FFB000",background:"#000000",text:{primary:"#FAFAFA",secondary:"#6C6C6C",accent:"#FFB000"},glass:{background:"rgba(76, 28, 140, 0.08)",border:"rgba(255, 176, 0, 0.3)",overlay:"rgba(250, 250, 250, 0.15)",glow:"rgba(76, 28, 140, 0.2)"},neon:{purple:"#4C1C8C",gold:"#FFB000",white:"#FAFAFA",gray:"#6C6C6C",black:"#000000"}},gradients:{primary:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 50%, #9D4EDD 100%)",gold:"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)",glass:"linear-gradient(135deg, rgba(76,28,140,0.1) 0%, rgba(255,176,0,0.05) 100%)",neon:"linear-gradient(135deg, #4C1C8C 0%, #FFB000 50%, #7F3FBF 100%)",liquid:"linear-gradient(45deg, #4C1C8C, #7F3FBF, #FFB000, #9D4EDD)",retro:"linear-gradient(135deg, #4C1C8C 0%, #6C6C6C 100%)",night:"linear-gradient(135deg, #000000 0%, #4C1C8C 100%)"},typography:{fontFamily:{heading:"Outfit, sans-serif",body:"Space Grotesk, sans-serif",mono:"JetBrains Mono, monospace"},fontWeight:{regular:400,medium:500,bold:700},fontSize:{h1:"3rem",h2:"1.5rem",h3:"1.25rem",body:"1rem",small:"0.875rem",code:"0.9rem"},lineHeight:{heading:1.2,body:1.6,code:1.4}},animation:{duration:{fast:"150ms",normal:"300ms",slow:"500ms",ambient:"1000ms"},timing:{smooth:"cubic-bezier(0.4, 0, 0.2, 1)",bounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",sharp:"cubic-bezier(0.4, 0, 1, 1)"}},glassmorphism:{modal:{opacity:.08,blur:"25px"},card:{opacity:.15,blur:"20px"},navigation:{opacity:.2,blur:"15px"},input:{opacity:.15,blur:"10px"}},effects:{neonGlow:"0 0 20px currentColor, 0 0 40px currentColor",glassBlur:"blur(20px)",liquidMotion:"cubic-bezier(0.23, 1, 0.320, 1)"},breakpoints:{mobile:"428px",tablet:"768px",desktop:"1024px",wide:"1440px"},currentGradient:Nr.frequencyPulse.gradient},Mr=Sr(Sr({},Dr),{},{colors:Sr(Sr({},Dr.colors),{},{background:"#000000",text:{primary:"#000000",secondary:"#6C6C6C",accent:"#4C1C8C"},glass:{background:"rgba(255, 255, 255, 0.9)",border:"rgba(255, 255, 255, 0.3)",overlay:"rgba(255, 255, 255, 0.1)",glow:"rgba(255, 176, 0, 0.2)"}})});var Or;const Pr=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=sr.apply(void 0,Se([e],n,!1)),o="sc-global-".concat(Vt(JSON.stringify(i))),a=new ur(i,o),s=function(e){var n=Vn(),r=t.useContext(tr),i=t.useRef(n.styleSheet.allocateGSInstance(o)).current;return n.styleSheet.server&&l(i,e,n.styleSheet,r,n.stylis),t.useLayoutEffect(function(){if(!n.styleSheet.server)return l(i,e,n.styleSheet,r,n.stylis),function(){return a.removeStyles(i,n.styleSheet)}},[i,e,n.styleSheet,r,n.stylis]),null};function l(e,t,n,r,i){if(a.isStatic)a.renderStyles(e,Rt,n,i);else{var o=ve(ve({},t),{theme:Mt(t,r,s.defaultProps)});a.renderStyles(e,o,n,i)}}return t.memo(s)}(Or||(Or=o(["\n  @tailwind base;\n  @tailwind components;\n  @tailwind utilities;\n\n  @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700&family=Space+Grotesk:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap');\n  \n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n  \n  body {\n    font-family: ",";\n    font-size: ",";\n    line-height: ",";\n    background: ",";\n    color: ",";\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    font-family: ",";\n    line-height: ",";\n  }\n\n  h1 { font-size: ","; }\n  h2 { font-size: ","; }\n  h3 { font-size: ","; }\n\n  code, pre {\n    font-family: ",";\n    font-size: ",";\n    line-height: ",";\n  }\n  \n  button {\n    font-family: inherit;\n  }\n\n  /* Focus styles */\n  :focus {\n    outline: 2px solid ",";\n    outline-offset: 2px;\n  }\n\n  /* High contrast mode support */\n  @media (prefers-contrast: high) {\n    .glass-card {\n      background: rgba(76, 28, 140, 0.3);\n      border-width: 2px;\n    }\n  }\n\n  /* Reduced motion */\n  @media (prefers-reduced-motion: reduce) {\n    * {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n      scroll-behavior: auto !important;\n    }\n  }\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.typography.fontSize.body},e=>{let{theme:t}=e;return t.typography.lineHeight.body},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.typography.lineHeight.heading},e=>{let{theme:t}=e;return t.typography.fontSize.h1},e=>{let{theme:t}=e;return t.typography.fontSize.h2},e=>{let{theme:t}=e;return t.typography.fontSize.h3},e=>{let{theme:t}=e;return t.typography.fontFamily.mono},e=>{let{theme:t}=e;return t.typography.fontSize.code},e=>{let{theme:t}=e;return t.typography.lineHeight.code},e=>{let{theme:t}=e;return t.colors.highlight}),jr=Pr;class Br extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class Lr extends Br{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fr extends Br{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zr extends Br{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ur;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Ur||(Ur={}));var Hr=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Wr{constructor(e){let{headers:t={},customFetch:r,region:i=Ur.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return Hr(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let a,s={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(s["x-region"]=l),o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",a=o):"string"===typeof o?(s["Content-Type"]="text/plain",a=o):"undefined"!==typeof FormData&&o instanceof FormData?a=o:(s["Content-Type"]="application/json",a=JSON.stringify(o)));const c=yield this.fetch("".concat(this.url,"/").concat(e),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),r),body:a}).catch(e=>{throw new Lr(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new Fr(c);if(!c.ok)throw new zr(c);let u,h=(null!==(n=c.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return u="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"text/event-stream"===h?c:"multipart/form-data"===h?yield c.formData():yield c.text(),{data:u,error:null}}catch(r){return{data:null,error:r}}})}}var Vr=n(980);const{PostgrestClient:Gr,PostgrestQueryBuilder:Yr,PostgrestFilterBuilder:Xr,PostgrestTransformBuilder:Zr,PostgrestBuilder:qr,PostgrestError:Qr}=Vr;let Jr;Jr="undefined"===typeof window?n(198):window.WebSocket;const Kr=Jr,$r={"X-Client-Info":"realtime-js/".concat("2.11.10")};var ei,ti,ni,ri,ii,oi;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(ei||(ei={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(ti||(ti={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(ni||(ni={})),function(e){e.websocket="websocket"}(ri||(ri={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(ii||(ii={}));class ai{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o+=r;const s=n.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:a,event:s,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class si{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(oi||(oi={}));const li=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,i)=>(n[i]=ci(i,e,t,r),n),{})},ci=(e,t,n,r)=>{const i=t.find(t=>t.name===e),o=null===i||void 0===i?void 0:i.type,a=n[e];return o&&!r.includes(o)?di(o,a):ui(a)},di=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return gi(t,n)}switch(e){case oi.bool:return hi(t);case oi.float4:case oi.float8:case oi.int2:case oi.int4:case oi.int8:case oi.numeric:case oi.oid:return fi(t);case oi.json:case oi.jsonb:return pi(t);case oi.timestamp:return mi(t);case oi.abstime:case oi.date:case oi.daterange:case oi.int4range:case oi.int8range:case oi.money:case oi.reltime:case oi.text:case oi.time:case oi.timestamptz:case oi.timetz:case oi.tsrange:case oi.tstzrange:default:return ui(t)}},ui=e=>e,hi=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fi=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pi=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},gi=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(Nt){r=i?i.split(","):[]}return r.map(e=>di(t,e))}return e},mi=e=>"string"===typeof e?e.replace(" ","T"):e,yi=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class wi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bi,vi,Si,Ci;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(bi||(bi={}));class _i{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_i.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=_i.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=_i.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},s={};return this.map(i,(e,t)=>{o[e]||(s[e]=t)}),this.map(o,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),o=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(a[e]=o),l.length>0&&(s[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:s},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let i=e[t];if(!i)return;const o=n.map(e=>e.presence_ref);i=i.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(vi||(vi={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Si||(Si={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Ci||(Ci={}));class xi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ti.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wi(this,ni.join,this.params,this.timeout),this.rejoinTimer=new si(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ti.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=ti.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=ti.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=ti.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ni.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new _i(this),this.broadcastEndpointURL=yi(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(Ci.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Ci.CLOSED));const s={},l={broadcast:i,presence:o,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:a};this.socket.accessTokenValue&&(s.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},s)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,o=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:a,schema:s,table:l,filter:c}}=i,d=n&&n[r];if(!d||d.event!==a||d.schema!==s||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=ti.errored,void(null===e||void 0===e||e(Ci.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=o,void(e&&e(Ci.SUBSCRIBED))}null===e||void 0===e||e(Ci.SUBSCRIBED)}).receive("error",t=>{this.state=ti.errored,null===e||void 0===e||e(Ci.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Ci.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,o;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:o,payload:a}=e,s={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=ti.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(ni.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const r=new wi(this,ni.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new wi(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:s,leave:l,join:c}=ni;if(n&&[a,s,l,c].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(d,n)):null===(i=this.bindings[o])||void 0===i||i.filter(e=>{var n,r,i,a,s,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(s=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===s?void 0:s.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:o}=e,a={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:o};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===ti.closed}_isJoined(){return this.state===ti.joined}_isJoining(){return this.state===ti.joining}_isLeaving(){return this.state===ti.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&xi.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ni.close,{},e)}_onError(e){this._on(ni.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ti.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=li(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=li(e.columns,e.old_record)),t}}const Ei=()=>{};class Ii{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=$r,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ei,this.ref=0,this.logger=Ei,this.conn=null,this.sendBuffer=[],this.serializer=new ai,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(ri.websocket),this.httpEndpoint=yi(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new si(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Kr),this.transport){const e="undefined"!==typeof window&&this.transport===window.WebSocket;return this.conn=e?new this.transport(this.endpointURL()):new this.transport(this.endpointURL(),void 0,{headers:this.headers}),void this.setupConnection()}this.conn=new Ai(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(t=>t._joinRef!==e._joinRef),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ei.connecting:return ii.Connecting;case ei.open:return ii.Open;case ei.closing:return ii.Closing;default:return ii.Closed}}isConnected(){return this.connectionState()===ii.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new xi("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(i,")"),r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e,version:this.headers&&this.headers["X-Client-Info"]}),t.joinedOnce&&t._isJoined()&&t._push(ni.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(r.status||""," ").concat(t," ").concat(n," ").concat(i&&"("+i+")"||""),r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){if(this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ni.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Ai{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ei.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Ti extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ki(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Ri extends Ti{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ni extends Ti{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Di=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Mi=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Oi=e=>{if(Array.isArray(e))return e.map(e=>Oi(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const i=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[i]=Oi(r)}),t};var Pi=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ji=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bi=(e,t,r)=>Pi(void 0,void 0,void 0,function*(){const i=yield Di(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof i&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{t(new Ri(ji(n),e.status||500))}).catch(e=>{t(new Ni(ji(e),e))}):t(new Ni(ji(e),e))});function Li(e,t,n,r,i,o){return Pi(this,void 0,void 0,function*(){return new Promise((a,s)=>{e(n,((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))})(t,r,i,o)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>Bi(e,s,r))})})}function Fi(e,t,n,r){return Pi(this,void 0,void 0,function*(){return Li(e,"GET",t,n,r)})}function zi(e,t,n,r,i){return Pi(this,void 0,void 0,function*(){return Li(e,"POST",t,r,i,n)})}function Ui(e,t,n,r,i){return Pi(this,void 0,void 0,function*(){return Li(e,"DELETE",t,r,i,n)})}var Hi=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const Wi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=Mi(r)}uploadOrUpdate(e,t,n,r){return Hi(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vi),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const s=o.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),s&&i.append("metadata",this.encodeMetadata(s)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),s&&i.append("metadata",this.encodeMetadata(s))):(i=n,a["cache-control"]="max-age=".concat(o.cacheControl),a["content-type"]=o.contentType,s&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(s)))),(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch("".concat(this.url,"/object/").concat(c),Object.assign({method:e,body:i,headers:a},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:l,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(i){if(ki(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Hi(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+"/object/upload/sign/".concat(o));a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Vi.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]="max-age=".concat(t.cacheControl),o["content-type"]=t.contentType);const s=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:o}),l=yield s.json();if(s.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(s){if(ki(s))return{data:null,error:s};throw s}})}createSignedUploadUrl(e,t){return Hi(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield zi(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ti("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ki(n))return{data:null,error:n};throw n}})}update(e,t,n){return Hi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Hi(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ki(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Hi(this,void 0,void 0,function*(){try{return{data:{path:(yield zi(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ki(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Hi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield zi(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return i={signedUrl:encodeURI("".concat(this.url).concat(i.signedURL).concat(o))},{data:i,error:null}}catch(r){if(ki(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Hi(this,void 0,void 0,function*(){try{const r=yield zi(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(i)):null})),error:null}}catch(r){if(ki(r))return{data:null,error:r};throw r}})}download(e,t){return Hi(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield Fi(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(i),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(o){if(ki(o))return{data:null,error:o};throw o}})}info(e){return Hi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Fi(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Oi(e),error:null}}catch(n){if(ki(n))return{data:null,error:n};throw n}})}exists(e){return Hi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return Pi(this,void 0,void 0,function*(){return Li(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(ki(n)&&n instanceof Ni){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&r.push(i);const o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let s=r.join("&");return""!==s&&(s="?".concat(s)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(o,"/public/").concat(n).concat(s))}}}remove(e){return Hi(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ki(t))return{data:null,error:t};throw t}})}list(e,t,n){return Hi(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Wi),t),{prefix:e||""});return{data:yield zi(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(ki(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const Yi={"X-Client-Info":"storage-js/".concat("2.7.1")};var Xi=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},Yi),t),this.fetch=Mi(n)}listBuckets(){return Xi(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(ki(e))return{data:null,error:e};throw e}})}getBucket(e){return Xi(this,void 0,void 0,function*(){try{return{data:yield Fi(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(ki(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Xi(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ki(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Xi(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,r,i){return Pi(this,void 0,void 0,function*(){return Li(e,"PUT",t,r,i,n)})}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(ki(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Xi(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(ki(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Xi(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(ki(t))return{data:null,error:t};throw t}})}}class qi extends Zi{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new Gi(this.url,this.headers,e,this.fetch)}}let Qi="";Qi="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ji={headers:{"X-Client-Info":"supabase-js-".concat(Qi,"/").concat("2.50.0")}},Ki={schema:"public"},$i={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eo={};var to=n(630),no=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ro=e=>{let t;return t=e||("undefined"===typeof fetch?to.default:fetch),function(){return t(...arguments)}},io=(e,t,n)=>{const r=ro(n),i="undefined"===typeof Headers?to.Headers:Headers;return(n,o)=>no(void 0,void 0,void 0,function*(){var a;const s=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null===o||void 0===o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(s)),r(n,Object.assign(Object.assign({},o),{headers:l}))})};var oo=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};const ao="2.70.0",so=3e4,lo=9e4,co={"X-Client-Info":"gotrue-js/".concat(ao)},uo="X-Supabase-Api-Version",ho={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},fo=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class po extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function go(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class mo extends po{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class yo extends po{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wo extends po{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class bo extends wo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class vo extends wo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class So extends wo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Co extends wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _o extends wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xo extends wo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Eo(e){return go(e)&&"AuthRetryableFetchError"===e.name}class Io extends wo{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Ao extends wo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ko=" \t\n\r=".split(""),Ro=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ko.length;t+=1)e[ko[t].charCodeAt(0)]=-2;for(let t=0;t<To.length;t+=1)e[To[t].charCodeAt(0)]=t;return e})();function No(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(To[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(To[e]),t.queuedBits-=6}}function Do(e,t,n){const r=Ro[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Mo(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)Do(e.charCodeAt(a),i,o);return t.join("")}function Oo(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Po(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Oo(r,t)}}function jo(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)Do(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Bo(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>No(e,n,r)),No(null,n,r),t.join("")}const Lo=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Fo={tested:!1,writable:!1},zo=()=>{if(!Lo())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(Fo.tested)return Fo.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fo.tested=!0,Fo.writable=!0}catch(t){Fo.tested=!0,Fo.writable=!1}return Fo.writable};const Uo=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Ho=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Wo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Vo=async(e,t)=>{await e.removeItem(t)};class Go{constructor(){this.promise=new Go.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Yo(e){const t=e.split(".");if(3!==t.length)throw new Ao("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!fo.test(t[n]))throw new Ao("JWT not in base64url format");return{header:JSON.parse(Mo(t[0])),payload:JSON.parse(Mo(t[1])),signature:jo(t[2]),raw:{header:t[0],payload:t[1]}}}function Xo(e){return("0"+e.toString(16)).substr(-2)}async function Zo(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Xo).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ho(e,"".concat(t,"-code-verifier"),i);const o=await Zo(r);return[o,r===o?"plain":"s256"]}Go.promiseConstructor=Promise;const Qo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Jo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ko(e){if(!Jo.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var $o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ea=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ta=[502,503,504];async function na(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new xo(ea(e),0);if(ta.includes(e.status))throw new xo(ea(e),e.status);let r,i;try{r=await e.json()}catch(a){throw new yo(ea(a),a)}const o=function(e){const t=e.headers.get(uo);if(!t)return null;if(!t.match(Qo))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(a){return null}}(e);if(o&&o.getTime()>=ho.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?i=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new Io(ea(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new bo}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Io(ea(r),e.status,r.weak_password.reasons);throw new mo(ea(r),e.status||500,i)}async function ra(e,t,n,r){var i;const o=Object.assign({},null===r||void 0===r?void 0:r.headers);o[uo]||(o[uo]=ho.name),(null===r||void 0===r?void 0:r.jwt)&&(o.Authorization="Bearer ".concat(r.jwt));const a=null!==(i=null===r||void 0===r?void 0:r.query)&&void 0!==i?i:{};(null===r||void 0===r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,i,o){const a=((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,o);let s;try{s=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new xo(ea(l),0)}s.ok||await na(s);if(null===r||void 0===r?void 0:r.noResolveJson)return s;try{return await s.json()}catch(l){await na(l)}}(e,t,n+s,{headers:o,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function ia(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function oa(e){const t=ia(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function aa(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function sa(e){return{data:e,error:null}}function la(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,a=$o(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},user:Object.assign({},a)},error:null}}function ca(e){return e}const da=["global","local","others"];var ua=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class ha{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=Uo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:da[0];if(da.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(da.join(", ")));try{return await ra(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(go(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await ra(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:aa})}catch(n){if(go(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ua(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await ra(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:la,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(go(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ra(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:aa})}catch(t){if(go(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,a,s;try{const l={nextPage:null,lastPage:0,total:0},c=await ra(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:ca});if(c.error)throw c.error;const d=await c.json(),u=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(s=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==s?s:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(go(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Ko(e);try{return await ra(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:aa})}catch(t){if(go(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ko(e);try{return await ra(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:aa})}catch(n){if(go(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ko(e);try{return await ra(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:aa})}catch(n){if(go(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ko(e.userId);try{const{data:t,error:n}=await ra(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(go(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ko(e.userId),Ko(e.id);try{return{data:await ra(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(go(t))return{data:null,error:t};throw t}}}const fa={getItem:e=>zo()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{zo()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{zo()&&globalThis.localStorage.removeItem(e)}};function pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ga=!!(globalThis&&zo()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ma extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ya extends ma{}async function wa(e,t,n){ga&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ga&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw ga&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ya('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(ga)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}ga&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{ga&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const ba={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:co,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function va(e,t,n){return await n()}class Sa{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sa.nextInstanceID,Sa.nextInstanceID+=1,this.instanceID>0&&Lo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ba),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new ha({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Uo(r.fetch),this.lock=r.lock||va,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Lo()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=wa:this.lock=va,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:zo()?this.storage=fa:(this.memoryStorage={},this.storage=pa(this.memoryStorage)):(this.memoryStorage={},this.storage=pa(this.memoryStorage)),Lo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(ao,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Lo()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return go(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return go(t)?{error:t}:{error:new yo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await ra(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:ia}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(go(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:o}=e;let a=null,s=null;"pkce"===this.flowType&&([a,s]=await qo(this.storage,this.storageKey)),i=await ra(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:a,code_challenge_method:s},xform:ia})}else{if(!("phone"in e))throw new So("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:a}=e;i=await ra(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:ia})}}const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const s=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(i){if(go(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await ra(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:oa})}else{if(!("phone"in e))throw new So("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await ra(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:oa})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new vo}}catch(t){if(go(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,i,o,a,s,l,c,d,u,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:g,options:m}=e;let y;if(Lo())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const w=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=["".concat(w.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1","URI: ".concat(w.href),"Issued At: ".concat(null!==(r=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(i=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?["Not Before: ".concat(m.signInWithSolana.notBefore)]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.expirationTime)?["Expiration Time: ".concat(m.signInWithSolana.expirationTime)]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?["Chain ID: ".concat(m.signInWithSolana.chainId)]:[],...(null===(s=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===s?void 0:s.nonce)?["Nonce: ".concat(m.signInWithSolana.nonce)]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(m.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...m.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await ra(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Bo(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ia});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new vo}}catch(g){if(go(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await Wo(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await ra(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ia});if(await Vo(this.storage,"".concat(this.storageKey,"-code-verifier")),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new vo}}catch(i){if(go(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,a=await ra(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:ia}),{data:s,error:l}=a;return l?{data:{user:null,session:null},error:l}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:l}):{data:{user:null,session:null},error:new vo}}catch(t){if(go(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:r,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await qo(this.storage,this.storageKey));const{error:s}=await ra(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:s}=await ra(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(o=null===n||void 0===n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:s}}throw new So("You must provide either an email or phone number.")}catch(a){if(go(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:a}=await ra(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ia});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const s=o.session,l=o.user;return(null===s||void 0===s?void 0:s.access_token)&&(await this._saveSession(s),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",s)),{data:{user:l,session:s},error:null}}catch(r){if(go(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await qo(this.storage,this.storageKey)),await ra(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:sa})}catch(i){if(go(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new bo;const{error:r}=await ra(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(go(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await ra(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await ra(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:a}}throw new So("You must provide either an email or phone number and a type")}catch(t){if(go(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Wo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<lo;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await ra(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:aa}):await this._useSession(async e=>{var t,n,r;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ra(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:aa}):{data:{user:null},error:new bo}})}catch(t){if(go(t))return function(e){return go(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Vo(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new bo;const o=r.session;let a=null,s=null;"pkce"===this.flowType&&null!=e.email&&([a,s]=await qo(this.storage,this.storageKey));const{data:l,error:c}=await ra(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:s}),jwt:o.access_token,xform:aa});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(go(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bo;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=Yo(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(go(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new bo;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(go(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Lo())throw new Co("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Co(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new _o("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Co("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _o("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:s,token_type:l}=e;if(!i||!a||!o||!l)throw new Co("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;s&&(u=parseInt(s));const h=u-c;1e3*h<=so&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const f=u-d;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,c);const{data:p,error:g}=await this._getUser(i);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:u,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(go(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Wo(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return go(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Vo(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await qo(this.storage,this.storageKey,!0));try{return await ra(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(go(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(go(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,o,a;const{data:s,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await ra(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(o=s.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return Lo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(go(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await ra(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(go(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await ra(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:ia})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Eo(t)&&Date.now()+n-i<so},new Promise((e,t)=>{(async()=>{for(let o=0;o<1/0;o++)try{const t=await n(o);if(!r(o,null,t))return void e(t)}catch(i){if(!r(o,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),go(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Lo()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Wo(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const r=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<lo;if(this._debug(t,"session has".concat(r?"":" not"," expired with margin of ").concat(lo,"s")),r){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Eo(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return this._debug(t,"error",n),void console.error(n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new bo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new Go;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new bo;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),go(i)){const e={session:null,error:i};return Eo(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ho(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Vo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Lo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),so);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/so);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(so,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof ma))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await qo(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await ra(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(go(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:s,error:l}=await ra(this.fetch,"POST","".concat(this.url,"/factors"),{body:a,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===s||void 0===s?void 0:s.totp)||void 0===r?void 0:r.qr_code)&&(s.totp.qr_code="data:image/svg+xml;utf-8,".concat(s.totp.qr_code)),{data:s,error:null})})}catch(t){if(go(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await ra(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(go(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await ra(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(go(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Yo(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(s="aal2");return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:n,error:r}=await ra(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;if(!n.keys||0===n.keys.length)throw new Ao("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),t=n.keys.find(t=>t.kid===e),!t)throw new Ao("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:s}}=Yo(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!r.kid||"HS256"===r.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:o},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),c=await this.fetchJwk(r.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,function(e){const t=[];return Po(e,e=>t.push(e)),new Uint8Array(t)}("".concat(a,".").concat(s))))throw new Ao("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(go(n))return{data:null,error:n};throw n}}}Sa.nextInstanceID=0;const Ca=Sa;class _a extends Ca{constructor(e){super(e)}}var xa=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};class Ea{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(s=e).endsWith("/")?s:s+"/";var s;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),d=function(e,t){var n,r;const{db:i,auth:o,realtime:a,global:s}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},u),s),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(r=null===s||void 0===s?void 0:s.headers)&&void 0!==r?r:{})}),accessToken:()=>oo(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Ki,realtime:eo,auth:Object.assign(Object.assign({},$i),{storageKey:c}),global:Ji});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=d.global.headers)&&void 0!==i?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(o=d.auth)&&void 0!==o?o:{},this.headers,d.global.fetch),this.fetch=io(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Gr(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Wr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new qi(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return xa(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:a,storageKey:s,flowType:l,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new _a({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:s,autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:a,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ii(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Ia=(e,t,n)=>new Ea(e,t,n),Aa=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Ta=(0,t.createContext)(),ka=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[s,l]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{const{data:{session:e},error:t}=await Aa.auth.getSession();if(t)throw t;if(null!==e&&void 0!==e&&e.user){i(e.user);const{data:t,error:n}=await Aa.from("user_profiles").select("*").eq("id",e.user.id).single();if(n)throw n;a(t)}}catch(e){console.error("Error fetching session:",e)}finally{l(!1)}})();const{data:e}=Aa.auth.onAuthStateChange(async(e,t)=>{try{var n;if(i(null!==(n=null===t||void 0===t?void 0:t.user)&&void 0!==n?n:null),null!==t&&void 0!==t&&t.user){const{data:e,error:n}=await Aa.from("user_profiles").select("*").eq("id",t.user.id).single();if(n)throw n;a(e)}else a(null)}catch(r){console.error("Error in auth state change:",r)}finally{l(!1)}});return()=>{e.subscription.unsubscribe()}},[]);const c={user:r,profile:o,loading:s,isAdmin:"admin"===(null===o||void 0===o?void 0:o.role),signOut:async()=>{try{l(!0);const{error:e}=await Aa.auth.signOut();if(e)throw console.error("Sign out error:",e),e;return i(null),a(null),console.log("Successfully signed out"),{success:!0}}catch(e){throw console.error("Error during sign out:",e),e}finally{l(!1)}}};return(0,fr.jsx)(Ta.Provider,{value:c,children:n})},Ra=()=>(0,t.useContext)(Ta),Na=()=>(0,fr.jsx)(ge,{});var Da,Ma,Oa,Pa,ja;const Ba=dr.div(Da||(Da=o(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 9999;\n"]))),La=dr.div(Ma||(Ma=o(["\n  background: linear-gradient(135deg, rgba(30,30,40,0.95) 0%, rgba(76,28,140,0.15) 100%);\n  backdrop-filter: blur(20px);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  padding: 3rem;\n  max-width: 400px;\n  width: 100%;\n  text-align: center;\n  box-shadow: \n    0 0 32px 0 rgba(255,176,0,0.25), \n    0 0 24px 0 rgba(255,176,0,0.15),\n    0 20px 40px rgba(0,0,0,0.3);\n"]))),Fa=dr.h1(Oa||(Oa=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2rem;\n  color: #FFB000;\n  margin-bottom: 1rem;\n  font-weight: 700;\n"]))),za=dr.input(Pa||(Pa=o(["\n  width: 100%;\n  padding: 1rem;\n  border: 2px solid rgba(255,176,0,0.3);\n  border-radius: 12px;\n  font-size: 1rem;\n  margin: 1rem 0;\n  background: rgba(255,255,255,0.1);\n  color: white;\n  font-family: 'Space Grotesk', sans-serif;\n  \n  &::placeholder {\n    color: rgba(255,255,255,0.6);\n  }\n  \n  &:focus {\n    outline: none;\n    border-color: #FFB000;\n    box-shadow: 0 0 0 3px rgba(255,176,0,0.1);\n  }\n"]))),Ua=dr.button(ja||(ja=o(["\n  width: 100%;\n  padding: 1rem;\n  background: linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%);\n  border: none;\n  border-radius: 12px;\n  color: #000000;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  font-family: 'Space Grotesk', sans-serif;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 16px rgba(255,176,0,0.3);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n"]))),Ha=e=>{let{children:n}=e;const[r,i]=(0,t.useState)(!1),[o,a]=(0,t.useState)(""),[s,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{"granted"===localStorage.getItem("monarch_beta_access")&&i(!0),d(!1)},[]);return c?(0,fr.jsx)(Ba,{children:(0,fr.jsxs)(La,{children:[(0,fr.jsx)(Fa,{children:"\ud83e\udd8b Monarch Passport"}),(0,fr.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",marginBottom:"2rem"},children:"Loading..."})]})}):r?n:(0,fr.jsx)(Ba,{children:(0,fr.jsxs)(La,{children:[(0,fr.jsx)(Fa,{children:"\ud83e\udd8b Monarch Passport"}),(0,fr.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",marginBottom:"2rem"},children:"Private Beta Access Required"}),(0,fr.jsxs)("form",{onSubmit:e=>{e.preventDefault();"papillon2025"===o?(localStorage.setItem("monarch_beta_access","granted"),i(!0),l("")):(l("Invalid access code. Contact support for access."),a(""))},children:[(0,fr.jsx)(za,{type:"password",placeholder:"Enter beta access code",value:o,onChange:e=>a(e.target.value),autoComplete:"off"}),s&&(0,fr.jsx)("p",{style:{color:"#e74c3c",fontSize:"0.9rem",margin:"0.5rem 0"},children:s}),(0,fr.jsx)(Ua,{type:"submit",children:"Access Beta"})]}),(0,fr.jsx)("p",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.5)",marginTop:"1rem"},children:"Need access? Contact: support@monarchpassport.com"})]})})};var Wa,Va;const Ga=hr(Wa||(Wa=o(["\n  0%, 100% { \n    box-shadow: \n      0 0 12px 0 rgba(255,215,0,0.15),\n      0 0 24px 0 rgba(255,215,0,0.08),\n      inset 0 1px 0 rgba(255,215,0,0.1);\n  }\n  50% { \n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),Ya=dr.div(Va||(Va=o(["\n  position: relative;\n  background: ",";\n  border-radius: 20px;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  overflow: hidden;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    border: 3px solid ",";\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n    animation: "," 2s ease-in-out infinite;\n  }\n  \n  /* Content positioning */\n  > * {\n    position: relative;\n    z-index: 1;\n  }\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.glass)||void 0===n?void 0:n.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFD700"},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFD700"},Ga),Xa=Ya;var Za,qa;hr(Za||(Za=o(["\n  0% { box-shadow: 0 0 16px 0 ","55; }\n  100% { box-shadow: 0 0 32px 0 ","; }\n"])),e=>{let{theme:t}=e;return t.colors.accent},e=>{let{theme:t}=e;return t.colors.accent});const Qa=dr.button(qa||(qa=o(["\n  background: ",";\n  color: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ",";\n    box-shadow: ",";\n  }\n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ",";\n    box-shadow: ",";\n  }\n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.typography.fontSize.body},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.effects.neonGlow}),Ja=Qa;var Ka,$a,es,ts,ns,rs,is;const os=hr(Ka||(Ka=o(["\n  from { opacity: 0; transform: translateY(20px); }\n  to { opacity: 1; transform: translateY(0); }\n"]))),as=hr($a||($a=o(["\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n"]))),ss=(dr.div(es||(es=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ",";\n    opacity: 0.1;\n    z-index: 0;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.gradients.primary}),dr(Xa)(ts||(ts=o(["\n  max-width: 600px;\n  width: 100%;\n  text-align: center;\n  animation: "," 1s ease-out;\n  z-index: 1;\n"])),os),dr.h1(ns||(ns=o(["\n  font-family: ",";\n  font-weight: ",";\n  color: ",";\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  background: ",";\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.gradients.primary}),dr.p(rs||(rs=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.2rem;\n  margin-bottom: 2rem;\n  line-height: 1.6;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),dr(Ja)(is||(is=o(["\n  animation: "," 2s infinite;\n  font-size: 1.2rem;\n  padding: 20px 40px;\n"])),as),"https://ywagbnjejhpdujkftbxq.supabase.co"),ls="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo";const cs=Ia(ss,ls),ds=[{stamp_id:"received_passport",name:"Received Passport",description:"Welcome to the Monarch family",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+OqTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"milestone"},{stamp_id:"morning_gm",name:"Morning GM",description:"Said GM to the community",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+4piAPC90ZXh0Pgo8L3N2Zz4KPC9zdmc+",category:"social"},{stamp_id:"quest_completed",name:"Quest Master",description:"Completed your first quest",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+OrzwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"achievement"},{stamp_id:"qr_scanner",name:"QR Scanner Pro",description:"Scanned your first QR code",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+TsTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"scan"},{stamp_id:"first_item",name:"First Item",description:"Scanned your first clothing item",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+RlTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"scan"},{stamp_id:"style_icon",name:"Style Icon",description:"Collected items from 3+ different categories",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+4pyoPC90ZXh0Pgo8L3N2Zz4KPC9zdmc+",category:"collection"},{stamp_id:"social_share",name:"Social Butterfly",description:"Shared content on social media",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+TojwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"social"},{stamp_id:"streak_master",name:"Streak Master",description:"Maintained a 7-day login streak",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+UpTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"dedication"},{stamp_id:"master_collector",name:"Master Collector",description:"Achieved elite collector status",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEMxQzhDIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM2IiBmaWxsPSIjRkZCMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0iY2VudHJhbCI+8J+PhjwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==",category:"elite"}],us=()=>{const{user:e}=Ra(),[n,r]=(0,t.useState)([]),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null);(0,t.useEffect)(()=>{console.log("\ud83d\udd0d useStamps - User state:",e?"Authenticated":"Not authenticated"),console.log("\ud83d\udd0d useStamps - Loading state:",i),console.log("\ud83d\udd0d useStamps - Error state:",a)},[e,i,a]);const l=ds.map(e=>{var t;return Sr(Sr({},e),{},{unlocked:n.some(t=>t.stamp_id===e.stamp_id),earnedAt:null===(t=n.find(t=>t.stamp_id===e.stamp_id))||void 0===t?void 0:t.created_at})}),c=l.filter(e=>e.unlocked).length,d=ds.length,u=Math.round(c/d*100),h=(0,t.useCallback)(async()=>{if(console.log("\ud83d\udd0d loadUserStamps called - User ID:",null===e||void 0===e?void 0:e.id),null===e||void 0===e||!e.id)return console.log("\u26a0\ufe0f No user ID found, setting empty stamps and loading false"),r([]),o(!1),void s(null);try{o(!0),s(null),console.log("\ud83d\udd0d Starting database query for user stamps...");const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Database query timeout")),8e3)),n=cs.from("user_stamps").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}),{data:i,error:a}=await Promise.race([n,t]);if(a)throw a;r(i||[]),console.log("\u2705 User stamps loaded successfully:",(null===i||void 0===i?void 0:i.length)||0,"stamps")}catch(t){console.error("\u274c Error loading user stamps:",t),s(t.message),r([])}finally{o(!1)}},[e]),f=(0,t.useCallback)(e=>n.some(t=>t.stamp_id===e),[n]),p=(0,t.useCallback)(async function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e||void 0===e||!e.id)throw new Error("User must be logged in to earn stamps");if(f(t))return console.log("User already has stamp: ".concat(t)),{success:!0,alreadyEarned:!0};try{const{data:o,error:a}=await cs.from("user_stamps").insert([{user_id:e.id,stamp_id:t,metadata:i,created_at:(new Date).toISOString()}]).select().single();if(a)throw a;r(e=>[o,...e]);return 8!==n.length+1||f("master_collector")||setTimeout(()=>{_()},1e3),{success:!0,data:o,alreadyEarned:!1}}catch(o){throw console.error("Error awarding stamp ".concat(t,":"),o),o}},[null===e||void 0===e?void 0:e.id,f,n.length]),g=(0,t.useCallback)(async()=>p("received_passport",{trigger:"first_login",timestamp:(new Date).toISOString()}),[p]),m=(0,t.useCallback)(async()=>p("morning_gm",{trigger:"daily_gm_quest",timestamp:(new Date).toISOString()}),[p]),y=(0,t.useCallback)(async function(){return p("quest_completed",{trigger:"quest_completion",quest_type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general",timestamp:(new Date).toISOString()})},[p]),w=(0,t.useCallback)(async()=>p("qr_scanner",{trigger:"first_qr_scan",timestamp:(new Date).toISOString()}),[p]),b=(0,t.useCallback)(async function(){return p("first_item",{trigger:"first_item_scan",item_type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clothing",timestamp:(new Date).toISOString()})},[p]),v=(0,t.useCallback)(async function(){return p("social_share",{trigger:"social_sharing",platform:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"instagram",timestamp:(new Date).toISOString()})},[p]),S=(0,t.useCallback)(async function(){return p("streak_master",{trigger:"login_streak",streak_days:arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,timestamp:(new Date).toISOString()})},[p]),C=(0,t.useCallback)(async function(){return p("style_icon",{trigger:"style_diversity",categories_collected:arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,timestamp:(new Date).toISOString()})},[p]),_=(0,t.useCallback)(async()=>p("master_collector",{trigger:"achievement_milestone",stamps_count:8,timestamp:(new Date).toISOString()}),[p]);return(0,t.useEffect)(()=>{console.log("\ud83d\udd0d useStamps useEffect triggered - User ID:",null===e||void 0===e?void 0:e.id),(null!==e&&void 0!==e&&e.id||null===e)&&h()},[null===e||void 0===e?void 0:e.id,h]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{i&&(console.warn("\u26a0\ufe0f Maximum loading time reached, forcing loading to false"),o(!1),s("Loading timeout - please refresh the page"))},1e4);return()=>clearTimeout(e)},[i]),(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.id},[null===e||void 0===e?void 0:e.id]),{stamps:l,userStamps:n,unlockedCount:c,totalCount:d,completionPercentage:u,loading:i,error:a,hasStamp:f,loadUserStamps:h,refreshStamps:h,awardPassportStamp:g,awardGMStamp:m,awardQuestStamp:y,awardQRStamp:w,awardFirstItemStamp:b,awardSocialStamp:v,awardStreakStamp:S,awardStyleStamp:C,awardMasterStamp:_}};var hs,fs,ps,gs,ms,ys;hr(hs||(hs=o(["\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n"])));const ws=dr.div(fs||(fs=o(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 600;\n"]))),bs=dr.div(ps||(ps=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 40px;\n"]))),vs=dr.div(gs||(gs=o(["\n  font-size: ",";\n  font-weight: 700;\n  color: ",";\n  text-shadow: 0 0 10px rgba(255, 176, 0, 0.3);\n"])),e=>e.size||"1.2rem",e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFB000"}),Ss=dr.div(ms||(ms=o(["\n  font-size: 0.7rem;\n  color: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-top: 2px;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),Cs=dr.div(ys||(ys=o(["\n  font-size: ",";\n  font-weight: 700;\n  color: ",";\n  margin: 0 0.2rem;\n"])),e=>e.size||"1.2rem",e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFB000"}),_s=e=>{let{targetDate:n,size:r="1.2rem",showLabels:i=!0,showSeconds:o=!0,showHours:a=!0,showMinutes:s=!0,onComplete:l}=e;const[c,d]=(0,t.useState)({days:0,hours:0,minutes:0,seconds:0});(0,t.useEffect)(()=>{const e=()=>{const e=(new Date).getTime(),t=new Date(n).getTime()-e;if(t>0){const e=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5),r=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);d({days:e,hours:n,minutes:r,seconds:i})}else d({days:0,hours:0,minutes:0,seconds:0}),l&&l()};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[n,l]);const u=e=>e.toString().padStart(2,"0");return(0,fr.jsxs)(ws,{children:[(0,fr.jsxs)(bs,{children:[(0,fr.jsx)(vs,{size:r,children:u(c.days)}),i&&(0,fr.jsx)(Ss,{children:"Days"})]}),a&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Cs,{size:r,children:":"}),(0,fr.jsxs)(bs,{children:[(0,fr.jsx)(vs,{size:r,children:u(c.hours)}),i&&(0,fr.jsx)(Ss,{children:"Hours"})]})]}),s&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Cs,{size:r,children:":"}),(0,fr.jsxs)(bs,{children:[(0,fr.jsx)(vs,{size:r,children:u(c.minutes)}),i&&(0,fr.jsx)(Ss,{children:"Mins"})]})]}),o&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Cs,{size:r,children:":"}),(0,fr.jsxs)(bs,{children:[(0,fr.jsx)(vs,{size:r,children:u(c.seconds)}),i&&(0,fr.jsx)(Ss,{children:"Secs"})]})]})]})};var xs,Es,Is,As,Ts,ks,Rs,Ns,Ds,Ms,Os,Ps,js,Bs,Ls,Fs,zs,Us,Hs,Ws;const Vs=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Gs=dr.div(xs||(xs=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.8);\n  backdrop-filter: blur(20px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s ease;\n  padding: 1rem;\n  \n  /* Ensure the overlay is clickable */\n  pointer-events: auto;\n  \n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),Ys=dr(Xa)(Es||(Es=o(["\n  max-width: 500px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  pointer-events: auto;\n"]))),Xs=dr.div(Is||(Is=o(["\n  padding: 32px 32px 24px 32px;\n  border-bottom: 3px solid ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),Zs=dr.h2(As||(As=o(["\n  font-family: ",";\n  color: ",";\n  margin: 0 0 16px 0;\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontSize.h2},e=>{let{theme:t}=e;return t.typography.fontWeight.bold}),qs=dr.div(Ts||(Ts=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 16px;\n  background: rgba(255, 176, 0, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 176, 0, 0.2);\n  margin-bottom: 16px;\n"]))),Qs=dr.div(ks||(ks=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  color: ",";\n  font-weight: 500;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Js=dr.div(Rs||(Rs=o(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 32px 32px 32px;\n"]))),Ks=dr.div(Ns||(Ns=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),$s=dr.div(Ds||(Ds=o(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  cursor: pointer;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.effects.neonGlow}),el=dr.div(Ms||(Ms=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{platform:t,theme:n}=e;return"twitter"===t?n.colors.accent.cyan:n.colors.accent.pink}),tl=dr.div(Os||(Os=o(["\n  flex: 1;\n"]))),nl=dr.div(Ps||(Ps=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.body}),rl=dr.div(js||(js=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.small}),il=dr.div(Bs||(Bs=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),ol=dr.div(Ls||(Ls=o(["\n  font-family: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{$completed:t,theme:n}=e;return t?n.colors.accent.green:n.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),al=dr.div(Fs||(Fs=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),sl=dr.div(zs||(zs=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),ll=dr.button(Us||(Us=o(["\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: transparent;\n  border: 3px solid ",";\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  z-index: 10;\n  padding: 0;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background}),cl=(dr.button(Hs||(Hs=o(["\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  padding: 12px 24px;\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-top: 1rem;\n  width: 100%;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.15);\n    border-color: rgba(255, 255, 255, 0.3);\n  }\n"]))),dr.div(Ws||(Ws=o(["\n  margin-top: 1rem;\n  padding: 1rem;\n  background: rgba(34, 197, 94, 0.1);\n  border: 1px solid rgba(34, 197, 94, 0.3);\n  border-radius: 12px;\n  text-align: center;\n  color: #22C55E;\n"]))),e=>{let{isOpen:n,onClose:r,onQuestComplete:i}=e;const{user:o}=Ra(),{awardStreakStamp:a}=us(),[s,l]=(0,t.useState)(new Set),[c,d]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&o&&u()},[n,o]);const u=async()=>{if(o)try{const e=(new Date).toISOString().split("T")[0],{data:t,error:n}=await Vs.from("daily_completions").select("quest_id").eq("user_id",o.id).eq("completion_date",e);if(n)return void console.error("Error loading daily completions:",n);const r=new Set(t.map(e=>e.quest_id));l(r)}catch(e){console.error("Error loading daily completions:",e)}},h=async(e,t,n)=>{if(o)try{const r=(new Date).toISOString().split("T")[0],{error:i}=await Vs.from("daily_completions").insert({user_id:o.id,quest_id:e,completion_date:r,wings_earned:t,quest_title:n}).select().single();if(i)return void console.error("Error recording daily completion:",i);const{error:a}=await Vs.rpc("add_wings_to_user",{user_id_param:o.id,wings_amount:t,activity_type_param:"daily_quest",description_param:"Completed daily quest: ".concat(n)});a&&console.error("Error awarding WNGS:",a),await f()}catch(r){console.error("Error in recordDailyCompletion:",r)}},f=async()=>{if(o)try{const t=new Date;t.setDate(t.getDate()-6);const{data:n,error:r}=await Vs.from("daily_completions").select("completion_date").eq("user_id",o.id).gte("completion_date",t.toISOString().split("T")[0]).order("completion_date",{ascending:!1});if(r)return void console.error("Error checking streak:",r);const i=[...new Set(n.map(e=>e.completion_date))];if(i.length>=7){const t=(new Date).toISOString().split("T")[0],n=i.sort().reverse();let r=0,o=new Date(t);for(let e=0;e<n.length&&e<7;e++){const t=o.toISOString().split("T")[0];if(n[e]!==t)break;r++,o.setDate(o.getDate()-1)}if(r>=7)try{"function"===typeof a?(await a(7),console.log("\ud83d\udd25 Streak Master stamp awarded for 7-day streak!")):console.log("\ud83d\udd25 7-day streak achieved! (Streak stamp function not available)")}catch(e){console.warn("Streak stamp might already be earned or function unavailable:",e)}}}catch(t){console.error("Error checking streak:",t)}};if(!n)return null;const p=[{id:"twitter",platform:"twitter",icon:"\ud83d\udc26",title:"Say GM on Twitter/X",description:'Tweet "GM @PapillonBrandUs" to start your day',reward:"+10 WNGS",action:async()=>{if(!s.has("twitter")){d(!0);try{const e=encodeURIComponent("GM @PapillonBrandUs \ud83e\udd8b #PapillonBrand #PapillonMorning #GM"),t="https://twitter.com/intent/tweet?text=".concat(e);window.open(t,"_blank"),await h("twitter",10,"Say GM on Twitter/X"),l(e=>new Set([...e,"twitter"])),i&&i()}catch(e){console.error("Error completing Twitter quest:",e)}finally{d(!1)}}},completed:s.has("twitter"),date:s.has("twitter")?"Mar 18, 2025":""},{id:"instagram",platform:"instagram",icon:"\ud83d\udcf8",title:"Engage on Instagram",description:"Like, comment, or share our latest post",reward:"+15 WNGS",action:async()=>{if(!s.has("instagram")){d(!0);try{const e="https://instagram.com/papillonbrand.us";window.open(e,"_blank"),await h("instagram",15,"Engage on Instagram"),l(e=>new Set([...e,"instagram"])),i&&i()}catch(e){console.error("Error completing Instagram quest:",e)}finally{d(!1)}}},completed:s.has("instagram"),date:s.has("instagram")?"Mar 17, 2025":""}];p.every(e=>e.completed),p.reduce((e,t)=>t.completed?e+parseInt(t.reward.match(/\d+/)[0]):e,0);return(0,fr.jsx)(Gs,{onClick:e=>{e.target===e.currentTarget&&r()},children:(0,fr.jsxs)(Ys,{onClick:e=>e.stopPropagation(),children:[(0,fr.jsx)(ll,{onClick:e=>{e.stopPropagation(),r()},children:"\xd7"}),(0,fr.jsxs)(Xs,{children:[(0,fr.jsx)(Zs,{children:"Daily Social Quests"}),(0,fr.jsxs)(qs,{children:[(0,fr.jsx)(Qs,{children:"Next reset in:"}),(0,fr.jsx)(_s,{targetDate:(new Date).setHours(24,0,0,0),size:"1rem",showSeconds:!1})]})]}),(0,fr.jsx)(Js,{children:(0,fr.jsx)(Ks,{children:p.map(e=>(0,fr.jsxs)($s,{onClick:e.completed?null:e.action,style:{cursor:e.completed?"default":"pointer"},children:[(0,fr.jsx)(el,{platform:e.platform,children:e.icon}),(0,fr.jsxs)(tl,{children:[(0,fr.jsx)(nl,{children:e.title}),(0,fr.jsx)(rl,{children:e.description})]}),(0,fr.jsxs)(il,{children:[(0,fr.jsx)(ol,{$completed:e.completed,children:e.completed?"Completed":"Available"}),e.date&&(0,fr.jsx)(al,{children:e.date}),e.completed&&(0,fr.jsx)(sl,{children:e.reward})]})]},e.id))})})]})})});var dl,ul,hl,fl,pl,gl,ml,yl,wl,bl,vl,Sl,Cl,_l,xl,El,Il,Al,Tl,kl,Rl,Nl,Dl,Ml,Ol,Pl,jl;const Bl=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Ll="#FFB000",Fl="#4C1C8C",zl=dr.div(dl||(dl=o(["\n  min-height: 100vh;\n  background: ",";\n  padding: 0 0 80px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n"])),e=>{var t;let{theme:n}=e;return(null===(t=n.colors)||void 0===t?void 0:t.background)||"#000000"}),Ul=dr.div(ul||(ul=o(["\n  padding: 2.2rem 1.2rem 1.2rem 1.2rem;\n  text-align: left;\n"]))),Hl=dr.h1(hl||(hl=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 0.3rem 0;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),Wl=dr.div(fl||(fl=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.05rem;\n  color: ",";\n  font-weight: 500;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px;\n  padding: 0.8rem 1.2rem;\n  margin-top: 0.8rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",";\n    border-color: ",";\n  }\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll},e=>{var t,n,r,i;let{theme:o}=e;return"linear-gradient(135deg, ".concat((null===(t=o.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll,"22 0%, ").concat((null===(r=o.colors)||void 0===r||null===(i=r.accent)||void 0===i?void 0:i.purple)||Fl,"11 100%)")},e=>{var t,n;let{theme:r}=e;return"".concat((null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll,"33")},e=>{var t,n,r,i;let{theme:o}=e;return"linear-gradient(135deg, ".concat((null===(t=o.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll,"28 0%, ").concat((null===(r=o.colors)||void 0===r||null===(i=r.accent)||void 0===i?void 0:i.purple)||Fl,"15 100%)")},e=>{var t,n;let{theme:r}=e;return"".concat((null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll,"44")}),Vl=dr.span(pl||(pl=o(["\n  font-size: 1.1rem;\n"]))),Gl=dr.div(gl||(gl=o(["\n  padding: 0 1.2rem;\n  margin-bottom: 1.2rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.2rem;\n  @media (max-width: 700px) {\n    gap: 1rem;\n  }\n"]))),Yl=dr.div(ml||(ml=o(["\n  display: flex;\n  gap: 1.2rem;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),Xl=dr.button(yl||(yl=o(["\n  flex: 1;\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  padding: 18px 18px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  cursor: pointer;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  outline: none;\n  position: relative;\n  min-width: 0;\n  min-height: 140px;\n  &:hover, &:focus {\n    border: 3px solid ",";\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.glass)||void 0===n?void 0:n.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll},e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll}),Zl=dr.div(wl||(wl=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.15rem;\n  font-weight: 700;\n  color: ",";\n  margin-bottom: 0.5rem;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),ql=dr.div(bl||(bl=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  color: ",";\n  font-weight: 500;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),Ql=dr.div(vl||(vl=o(["\n  font-size: 2.1rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n"]))),Jl=dr(Xl)(Sl||(Sl=o(["\n  width: 100%;\n  min-height: 100px;\n  align-items: flex-start;\n  flex-direction: column;\n  justify-content: flex-start;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    align-items: flex-start;\n    min-height: 0;\n  }\n"]))),Kl=dr.div(Cl||(Cl=o(["\n  display: flex;\n  gap: 1.2rem;\n  padding: 0 1.2rem;\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),$l=dr(Xl).attrs({as:"div"})(_l||(_l=o(["\n  min-height: 100px;\n  padding: 18px 18px;\n  flex: 1;\n  cursor: default;\n  &:hover, &:focus {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),ec=dr.div(xl||(xl=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  height: 100%;\n"]))),tc=dr.div(El||(El=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: ",";\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),nc=dr.div(Il||(Il=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.98rem;\n  color: ",";\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),rc=(dr.div(Al||(Al=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2.1rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0.1rem 0 0.2rem 0;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll}),dr.span(Tl||(Tl=o(["\n  margin-right: 0.5rem;\n"]))),dr.div(kl||(kl=o(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 1rem;\n"])))),ic=dr.div(Rl||(Rl=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),oc=dr.div(Nl||(Nl=o(["\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n"]))),ac=dr.div(Dl||(Dl=o(["\n  font-size: 1.5rem;\n"]))),sc=dr.div(Ml||(Ml=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  color: ",";\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),lc=dr.div(Ol||(Ol=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  color: ",";\n  margin-left: auto;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.secondary)||"#6C6C6C"}),cc=dr.div(Pl||(Pl=o(["\n  height: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n  overflow: hidden;\n  width: 100%;\n"]))),dc=dr.div(jl||(jl=o(["\n  height: 100%;\n  background: ",";\n  border-radius: 3px;\n  transition: width 0.4s cubic-bezier(0.4,0,0.2,1);\n  width: ","%;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||Ll},e=>{let{value:t}=e;return t});const uc=function(){var e,n;const[r,i]=(0,t.useState)(!1),o=$(),{user:a}=Ra(),{awardPassportStamp:s,hasStamp:l}=us(),{weeklyStats:c,loading:d,error:u,getWeeklyProgressText:h,refreshStats:f}=(e=>{const[n,r]=(0,t.useState)({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0}),[i,o]=(0,t.useState)(!0),[a,s]=(0,t.useState)(null),l=(0,t.useCallback)(async()=>{if(e)try{o(!0),s(null),console.log("Loading weekly stats for user:",e);const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timeout")),5e3)),n=Bl.from("user_profiles").select("wings_balance, current_week_wings, week_start_date").eq("id",e).single(),{data:i,error:a}=await Promise.race([n,t]);if(a){if(console.error("Error fetching profile:",a),"PGRST116"===a.code){console.log("User profile not found, creating...");const{error:t}=await Bl.from("user_profiles").insert({id:e,wings_balance:0,current_week_wings:0,week_start_date:(new Date).toISOString()});t&&console.error("Error creating user profile:",t)}return void r({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0})}console.log("Profile data:",i);const l=new Date,c=new Date(l);c.setDate(l.getDate()-l.getDay()+1);const d=null!==i&&void 0!==i&&i.week_start_date?new Date(i.week_start_date):c,u=new Date(d);u.setDate(d.getDate()+6);const h=Math.max(0,Math.ceil((u-l)/864e5));r({currentWeekWings:(null===i||void 0===i?void 0:i.current_week_wings)||0,totalWings:(null===i||void 0===i?void 0:i.wings_balance)||0,weekStartDate:null===i||void 0===i?void 0:i.week_start_date,daysLeftInWeek:h}),console.log("Weekly stats updated:",{currentWeekWings:(null===i||void 0===i?void 0:i.current_week_wings)||0,totalWings:(null===i||void 0===i?void 0:i.wings_balance)||0})}catch(t){console.error("Error loading weekly stats:",t),s(t.message),r({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0})}finally{o(!1)}else o(!1)},[e]);return(0,t.useEffect)(()=>{e?l():o(!1)},[e,l]),(0,t.useEffect)(()=>{const e=setTimeout(()=>{i&&(console.warn("\u26a0\ufe0f Weekly stats loading timeout"),o(!1),s("Loading timeout - please try again"))},1e4);return()=>clearTimeout(e)},[i]),{weeklyStats:n,loading:i,error:a,getWeeklyProgressText:()=>a?"Error loading WNGS data":0===n.currentWeekWings?"You've earned 0 WNGS this week":1===n.currentWeekWings?"You've earned 1 WNGS this week":"You've earned ".concat(n.currentWeekWings," WNGS this week"),refreshStats:l}})(null===a||void 0===a?void 0:a.id);(0,t.useEffect)(()=>{(async()=>{if(a&&!l("received_passport"))try{await s(),console.log("\ud83c\udfc5 Welcome to Monarch! Passport stamp awarded!")}catch(u){console.warn("Failed to award passport stamp:",u)}})()},[a,l,s]);const p=2,g=7;return(0,fr.jsxs)(zl,{children:[(0,fr.jsxs)(Ul,{children:[(0,fr.jsxs)(Hl,{children:["Welcome back, ",(null===a||void 0===a||null===(e=a.user_metadata)||void 0===e?void 0:e.display_name)||(null===a||void 0===a||null===(n=a.email)||void 0===n?void 0:n.split("@")[0])||"Collector"]}),(0,fr.jsxs)(Wl,{children:[(0,fr.jsx)(Vl,{children:"\ud83d\udcb0"}),d?"Loading...":h()]})]}),(0,fr.jsx)(Gl,{children:(0,fr.jsxs)(Yl,{children:[(0,fr.jsxs)(Xl,{onClick:()=>i(!0),"aria-label":"Go to Dailies",children:[(0,fr.jsx)(Ql,{children:"\ud83e\udd8b"}),(0,fr.jsx)(Zl,{children:"Dailies"}),(0,fr.jsx)(ql,{children:"Complete daily quests"})]}),(0,fr.jsxs)(Xl,{onClick:()=>window.open("https://papillonbrand.us","_blank"),"aria-label":"Shop Now",children:[(0,fr.jsx)(Ql,{children:"\ud83d\udecd\ufe0f"}),(0,fr.jsx)(Zl,{children:"Shop Now"}),(0,fr.jsx)(ql,{children:"Visit Papillon Brand"})]})]})}),(0,fr.jsx)(Gl,{children:(0,fr.jsx)(Jl,{onClick:()=>o("/quests"),"aria-label":"Go to Active Quests",children:(0,fr.jsxs)(ec,{style:{flex:1,width:"100%"},children:[(0,fr.jsx)(tc,{children:"Active Quests"}),(0,fr.jsx)(nc,{children:"2 Active \u2022 Complete to earn rewards"}),(0,fr.jsx)(rc,{children:[{id:1,title:"Scan 10 Papillon Items",description:"Scan 10 different Papillon items to unlock exclusive rewards",progress:7,total:10,reward:50,icon:"\ud83d\udcf1",category:"Collection",percent:70},{icon:"\ud83c\udfea",title:"Visit 3 Store Locations",progress:1,total:3,percent:33},{icon:"\ud83d\udc65",title:"Share on Social Media",progress:2,total:5,percent:40}].map((e,t)=>(0,fr.jsxs)(ic,{children:[(0,fr.jsxs)(oc,{children:[(0,fr.jsx)(ac,{children:e.icon}),(0,fr.jsx)(sc,{children:e.title}),(0,fr.jsxs)(lc,{children:[e.progress,"/",e.total]})]}),(0,fr.jsx)(cc,{children:(0,fr.jsx)(dc,{value:e.percent})})]},t))})]})})}),(0,fr.jsxs)(Kl,{children:[(0,fr.jsx)($l,{onClick:()=>o("/passport"),"aria-label":"Go to Passport",style:{cursor:"pointer"},children:(0,fr.jsx)(ec,{children:(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,fr.jsxs)("div",{style:{flex:1},children:[(0,fr.jsx)(tc,{children:"Passport"}),(0,fr.jsxs)(nc,{children:[p,"/",g," stamps this season"]})]}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"90px"},children:[(0,fr.jsx)("div",{style:{fontSize:"3rem",display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"rgba(255, 176, 0, 0.1)",border:"2px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",marginBottom:"0.5rem"},children:"\ud83c\udfab"}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",textAlign:"center"},children:"View Passport"})]})]})})}),(0,fr.jsx)($l,{onClick:()=>o("/season-roadmap"),"aria-label":"View Season Roadmap",style:{cursor:"pointer"},children:(0,fr.jsx)(ec,{children:(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,fr.jsxs)("div",{style:{flex:1},children:[(0,fr.jsx)(tc,{children:"Digital Genesis"}),(0,fr.jsx)(nc,{children:"Spring '25"})]}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"90px"},children:[(0,fr.jsx)("div",{style:{fontSize:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"rgba(255, 176, 0, 0.1)",border:"2px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",marginBottom:"0.5rem",color:"#FFB000",fontWeight:"700"},children:(0,fr.jsx)(_s,{targetDate:new Date("2025-09-07T12:00:00"),size:"2.5rem",showLabels:!1,showSeconds:!1,showHours:!1,showMinutes:!1})}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",textAlign:"center"},children:"Days Left"})]})]})})})]}),r&&(0,fr.jsx)(cl,{isOpen:r,onClose:()=>i(!1),onQuestComplete:f})]})};var hc,fc,pc,gc,mc,yc;const wc=dr.div(hc||(hc=o(["\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background: rgba(18,18,18,0.55);\n  backdrop-filter: blur(8px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),bc=dr.div(fc||(fc=o(["\n  position: relative;\n  width: 320px;\n  max-width: 90vw;\n  height: 420px;\n  perspective: 1200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),vc=dr.div(pc||(pc=o(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transform-style: preserve-3d;\n  transition: transform 0.6s cubic-bezier(0.4,0,0.2,1);\n  ","\n"])),e=>{let{flipped:t}=e;return t&&"transform: rotateY(180deg);"}),Sc=dr.div(gc||(gc=o(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  backface-visibility: hidden;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  background: linear-gradient(135deg, rgba(30,30,40,0.95) 0%, rgba(76,28,140,0.15) 100%);\n  box-shadow: 0 0 32px 0 rgba(255,176,0,0.25), 0 0 24px 0 rgba(255,176,0,0.15);\n  border: 2px solid #FFB000;\n  padding: 32px 16px;\n"]))),Cc=dr(Sc)(mc||(mc=o(["\n  font-size: 5rem;\n  font-family: 'Outfit', sans-serif;\n  color: #fff;\n"]))),_c=dr(Sc)(yc||(yc=o(["\n  transform: rotateY(180deg);\n  color: #fff;\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.1rem;\n  justify-content: flex-start;\n  padding-top: 48px;\n"]))),xc=e=>{let{emoji:n,date:r,season:i,rarity:o,onClose:a}=e;const[s,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{l(!1)},[n]);const c=()=>l(e=>!e);return(0,fr.jsx)(wc,{onClick:e=>{e.target===e.currentTarget&&a()},children:(0,fr.jsx)(bc,{children:(0,fr.jsxs)(vc,{flipped:s,onClick:c,tabIndex:0,"aria-pressed":s,role:"button",onKeyDown:e=>("Enter"===e.key||" "===e.key)&&c(),children:[(0,fr.jsxs)(Cc,{children:[n,(0,fr.jsx)("div",{style:{marginTop:18,fontSize:"1.1rem",opacity:.7},children:"Tap or swipe to flip"})]}),(0,fr.jsxs)(_c,{children:[(0,fr.jsx)("div",{style:{marginBottom:24,fontWeight:700,fontSize:"1.3rem",textAlign:"center"},children:"How You Earned This"}),(0,fr.jsxs)("div",{style:{marginBottom:12},children:[(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Obtained:"}),(0,fr.jsx)("span",{style:{marginLeft:8},children:"Scanned QR at Papillon Store"})]}),(0,fr.jsxs)("div",{style:{marginBottom:12},children:[(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Date:"}),(0,fr.jsx)("span",{style:{marginLeft:8},children:r})]}),(0,fr.jsxs)("div",{style:{marginBottom:12},children:[(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Location:"}),(0,fr.jsx)("span",{style:{marginLeft:8},children:"NYC"})]}),(0,fr.jsxs)("div",{style:{marginBottom:12},children:[(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"Season:"}),(0,fr.jsx)("span",{style:{marginLeft:8},children:i})]}),(0,fr.jsxs)("div",{style:{marginBottom:12},children:[(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:600},children:"WNGS:"}),(0,fr.jsx)("span",{style:{marginLeft:8,color:"#10B981"},children:"+25"})]}),(0,fr.jsx)("div",{style:{marginTop:32,fontSize:"0.9rem",opacity:.7,textAlign:"center"},children:"Tap to flip back"})]})]})})})};var Ec,Ic,Ac,Tc,kc,Rc,Nc,Dc,Mc,Oc,Pc,jc,Bc;const Lc=dr.div(Ec||(Ec=o(["\n  height: 100vh;\n  overflow: hidden;\n  background: #000000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 1rem 100px 1rem;\n  position: relative;\n"]))),Fc=dr.div(Ic||(Ic=o(["\n  background: linear-gradient(135deg, rgba(30,30,40,0.85) 0%, rgba(76,28,140,0.13) 100%), rgba(76, 28, 140, 0.15);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  padding: 2.5rem;\n  margin: 0 auto;\n  max-width: 500px;\n  width: 100%;\n  max-height: 85vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: \n    0 0 20px 0 rgba(255,176,0,0.2),\n    0 0 40px 0 rgba(255,176,0,0.1),\n    inset 0 1px 0 rgba(255,176,0,0.15);\n  position: relative;\n  \n  /* Book spine effect */\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 8px;\n    background: linear-gradient(180deg, #FFB000 0%, #FF9F1C 100%);\n    border-radius: 20px 0 0 20px;\n    box-shadow: inset -2px 0 5px rgba(0,0,0,0.3);\n  }\n  \n  @media (max-width: 767px) {\n    padding: 1.5rem;\n    max-height: 90vh;\n  }\n"]))),zc=dr.div(Ac||(Ac=o(["\n  text-align: center;\n  margin-bottom: 2.5rem;\n  padding-bottom: 2rem;\n  border-bottom: 2px dashed rgba(255,176,0,0.3);\n  position: relative;\n"]))),Uc=dr.h2(Tc||(Tc=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: #FFB000;\n  margin: 0 0 0.5rem 0;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n"]))),Hc=dr.h1(kc||(kc=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2rem;\n  font-weight: 700;\n  color: #FFFFFF;\n  margin: 0;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  text-shadow: 0 0 10px rgba(255,176,0,0.3);\n  \n  @media (max-width: 767px) {\n    font-size: 1.7rem;\n    letter-spacing: 1px;\n  }\n"]))),Wc=dr.p(Rc||(Rc=o(["\n  font-size: 1.1rem;\n  color: rgba(255,176,0,0.7);\n  margin: 0.5rem 0 0 0;\n  font-family: 'Space Grotesk', sans-serif;\n  font-style: italic;\n"]))),Vc=dr.div(Nc||(Nc=o(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n"]))),Gc=dr.div(Dc||(Dc=o(["\n  aspect-ratio: 1;\n  border: 2px dashed ",";\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  color: ",";\n  font-size: 1.2rem;\n  position: relative;\n  transition: all 0.3s ease;\n  cursor: ",";\n  backdrop-filter: blur(10px);\n  box-shadow: ",";\n\n  /* Indented effect for earned stamps */\n  ","\n\n  &:hover {\n    transform: ",";\n    box-shadow: ",";\n    border-color: ",";\n  }\n"])),e=>e.hasStamp?"#FFB000":"rgba(255, 176, 0, 0.3)",e=>e.hasStamp?"linear-gradient(135deg, #FFB000, #FF9F1C)":"rgba(255, 255, 255, 0.05)",e=>e.hasStamp?"#000000":"rgba(255, 255, 255, 0.4)",e=>e.hasStamp?"pointer":"default",e=>e.hasStamp?"inset 0 2px 4px rgba(0,0,0,0.2), 0 1px 2px rgba(255,176,0,0.1)":"inset 0 2px 4px rgba(0,0,0,0.1)",e=>e.hasStamp&&"\n    transform: translateY(1px);\n    border-style: solid;\n    border-width: 1px;\n  ",e=>e.hasStamp?"translateY(0px) scale(1.02)":"none",e=>e.hasStamp?"inset 0 1px 2px rgba(0,0,0,0.1), 0 4px 8px rgba(255,176,0,0.2)":"inset 0 2px 4px rgba(0,0,0,0.1)",e=>e.hasStamp?"#FFB000":"rgba(255, 176, 0, 0.5)"),Yc=dr.div(Mc||(Mc=o(["\n  font-size: 1.4rem;\n  margin-bottom: 0.25rem;\n"]))),Xc=dr.div(Oc||(Oc=o(["\n  font-size: 0.65rem;\n  font-weight: 600;\n  text-align: center;\n  padding: 0 0.2rem;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Zc=dr.div(Pc||(Pc=o(["\n  font-size: 0.5rem;\n  opacity: 0.8;\n  margin-top: 0.2rem;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),qc=dr.div(jc||(jc=o(["\n  text-align: center;\n  padding: 1rem;\n  background: linear-gradient(135deg, #4C1C8C, #7F3FBF);\n  border-radius: 12px;\n  color: #FFFFFF;\n  border: 1px solid #4C1C8C;\n  box-shadow: 0 4px 12px rgba(76, 28, 140, 0.3);\n"]))),Qc=dr.div(Bc||(Bc=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 600;\n  font-size: 1.1rem;\n  color: #FFFFFF;\n"]))),Jc=()=>{var e,n;$();const{user:r}=Ra(),{stamps:i,loading:o}=us(),[a,s]=(0,t.useState)(null),l=i.reduce((e,t)=>(e[t.stamp_id]=t,e),{}),c=Object.keys(l).length;return(0,fr.jsxs)(Lc,{children:[(0,fr.jsxs)(Fc,{children:[(0,fr.jsxs)(zc,{children:[(0,fr.jsx)(Uc,{children:"Fall 2025 - Digital Genesis"}),(0,fr.jsx)(Hc,{children:"Find Your Wings"}),(0,fr.jsx)(Wc,{children:(null===r||void 0===r||null===(e=r.user_metadata)||void 0===e?void 0:e.display_name)||(null===r||void 0===r||null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Collector"})]}),(0,fr.jsx)(Vc,{children:[{id:"received_passport",name:"Welcome",icon:"\ud83c\udfab",description:"Joined Monarch",rarity:"Common"},{id:"morning_gm",name:"Morning GM",icon:"\u2600\ufe0f",description:"Said GM",rarity:"Common"},{id:"first_item",name:"First Scan",icon:"\ud83d\udc55",description:"First Item",rarity:"Common"},{id:"qr_scanner",name:"Scanner",icon:"\ud83d\udcf1",description:"QR Expert",rarity:"Rare"},{id:"social_share",name:"Social",icon:"\ud83d\udce3",description:"Shared Story",rarity:"Rare"},{id:"style_icon",name:"Style Icon",icon:"\u2728",description:"Multi-Category",rarity:"Epic"},{id:"streak_master",name:"Streak",icon:"\ud83d\udd25",description:"7-Day Streak",rarity:"Epic"},{id:"quest_completed",name:"Quest",icon:"\ud83c\udfaf",description:"Quest Master",rarity:"Rare"},{id:"master_collector",name:"Master",icon:"\ud83d\udc51",description:"All Stamps",rarity:"Legendary"}].map(e=>{const t=l[e.id],n=!!t;return(0,fr.jsxs)(Gc,{hasStamp:n,onClick:()=>(e=>{const t=l[e.id];t&&s({emoji:e.icon,date:new Date(t.earned_at).toLocaleDateString(),season:"Fall 2025",rarity:e.rarity,name:e.name,description:e.description})})(e),children:[(0,fr.jsx)(Yc,{children:e.icon}),(0,fr.jsx)(Xc,{children:e.name}),n&&t.earned_at&&(0,fr.jsx)(Zc,{children:new Date(t.earned_at).toLocaleDateString()})]},e.id)})}),(0,fr.jsxs)(qc,{children:[(0,fr.jsxs)(Qc,{children:[c,"/9 Stamps Collected"]}),(0,fr.jsx)(Qc,{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:9===c?"\ud83c\udf89 Master Collector!":c>=6?"\ud83d\udd25 Almost there!":c>=3?"\u2b50 Great progress!":"\ud83c\udf31 Just getting started!"})]})]}),a&&(0,fr.jsx)(xc,{emoji:a.emoji,date:a.date,season:a.season,rarity:a.rarity,onClose:()=>{s(null)}})]})};var Kc,$c,ed,td,nd,rd,id,od,ad,sd,ld,cd,dd,ud,hd,fd,pd,gd,md,yd,wd,bd,vd,Sd,Cd;const _d=dr.div(Kc||(Kc=o(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%);\n  padding: 0.5rem 0.5rem 6rem 0.5rem;\n  position: relative;\n  overflow-x: hidden;\n  \n  @media (min-width: 768px) {\n    padding: 1rem 1rem 6rem 1rem;\n  }\n  \n  &::before {\n    content: '';\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: radial-gradient(circle at 20% 80%, rgba(255, 176, 0, 0.1) 0%, transparent 50%),\n                radial-gradient(circle at 80% 20%, rgba(76, 28, 140, 0.1) 0%, transparent 50%);\n    pointer-events: none;\n    z-index: 0;\n  }\n"]))),xd=dr.button($c||($c=o(["\n  background: rgba(255, 176, 0, 0.1);\n  border: 1px solid #FFB000;\n  color: #FFB000;\n  padding: 0.75rem 1.5rem;\n  border-radius: 12px;\n  cursor: pointer;\n  backdrop-filter: blur(10px);\n  margin-bottom: 1.5rem;\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  min-height: 44px;\n  touch-action: manipulation;\n\n  @media (min-width: 768px) {\n    margin-bottom: 2rem;\n    padding: 0.5rem 1rem;\n  }\n\n  &:hover, &:active {\n    background: rgba(255, 176, 0, 0.2);\n    transform: translateY(-1px);\n  }\n"]))),Ed=dr.div(ed||(ed=o(["\n  max-width: 900px;\n  margin: 0 auto;\n  position: relative;\n  z-index: 1;\n  padding: 0 0.5rem;\n  \n  @media (min-width: 768px) {\n    padding: 0;\n  }\n"]))),Id=dr.h1(td||(td=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2rem;\n  font-weight: 700;\n  color: #FFFFFF;\n  text-align: center;\n  margin-bottom: 1.5rem;\n  text-shadow: 0 0 20px rgba(255, 176, 0, 0.3);\n  position: relative;\n  \n  @media (min-width: 768px) {\n    font-size: 2.5rem;\n    margin-bottom: 2rem;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -10px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 80px;\n    height: 3px;\n    background: linear-gradient(90deg, transparent, #FFB000, transparent);\n    border-radius: 2px;\n    \n    @media (min-width: 768px) {\n      width: 100px;\n    }\n  }\n"]))),Ad=dr.div(nd||(nd=o(["\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 2rem;\n  overflow-x: auto;\n  padding: 0.5rem 0;\n  justify-content: flex-start;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  -webkit-overflow-scrolling: touch;\n  \n  @media (min-width: 768px) {\n    gap: 0.75rem;\n    margin-bottom: 2.5rem;\n    padding: 1rem 0;\n    justify-content: center;\n  }\n  \n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),Td=dr.button(rd||(rd=o(["\n  background: ",";\n  border: 2px solid ",";\n  color: ",";\n  padding: 0.75rem 1.5rem;\n  border-radius: 20px;\n  cursor: ",";\n  backdrop-filter: blur(15px);\n  white-space: nowrap;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  font-weight: ",";\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  opacity: ",";\n  position: relative;\n  box-shadow: ",";\n  min-height: 44px;\n  touch-action: manipulation;\n\n  @media (min-width: 768px) {\n    padding: 1rem 2rem;\n    border-radius: 25px;\n    font-size: 1rem;\n  }\n\n  &:hover, &:active {\n    background: ",";\n    transform: ",";\n    box-shadow: ",";\n  }\n\n  ","\n"])),e=>e.active?"linear-gradient(135deg, rgba(255, 176, 0, 0.3), rgba(255, 176, 0, 0.1))":"rgba(255, 255, 255, 0.05)",e=>e.active?"#FFB000":"rgba(255, 255, 255, 0.2)",e=>e.active?"#FFFFFF":"rgba(255, 255, 255, 0.6)",e=>e.locked?"not-allowed":"pointer",e=>e.active?"700":"500",e=>e.locked?"0.4":"1",e=>e.active?"0 8px 25px rgba(255, 176, 0, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.2)",e=>!e.locked&&"linear-gradient(135deg, rgba(255, 176, 0, 0.2), rgba(255, 176, 0, 0.05))",e=>e.locked?"none":"translateY(-2px) scale(1.02)",e=>!e.locked&&"0 12px 30px rgba(255, 176, 0, 0.2)",e=>e.locked&&"\n    &::after {\n      content: '\ud83d\udd12';\n      position: absolute;\n      top: -8px;\n      right: -8px;\n      font-size: 1rem;\n      opacity: 0.8;\n      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n    }\n  "),kd=dr.div(id||(id=o(["\n  background: linear-gradient(135deg, rgba(30,30,40,0.95) 0%, rgba(76,28,140,0.15) 100%);\n  border-radius: 20px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n  box-shadow: \n    0 0 32px 0 rgba(255,176,0,0.25), \n    0 0 24px 0 rgba(255,176,0,0.15),\n    0 20px 40px rgba(0,0,0,0.4);\n  border: 2px solid #FFB000;\n  backdrop-filter: blur(25px);\n  position: relative;\n  overflow: hidden;\n  \n  @media (min-width: 768px) {\n    border-radius: 24px;\n    padding: 2.5rem;\n    margin-bottom: 1.5rem;\n  }\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 1px;\n    background: linear-gradient(90deg, transparent, #FFB000, transparent);\n  }\n"]))),Rd=dr.div(od||(od=o(["\n  text-align: center;\n  margin-bottom: 2rem;\n  padding-bottom: 1.5rem;\n  border-bottom: 2px solid rgba(255, 176, 0, 0.3);\n  position: relative;\n  \n  @media (min-width: 768px) {\n    margin-bottom: 3rem;\n    padding-bottom: 2rem;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -2px;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 120px;\n    height: 2px;\n    background: linear-gradient(90deg, transparent, #FFB000, transparent);\n    \n    @media (min-width: 768px) {\n      width: 150px;\n    }\n  }\n"]))),Nd=dr.h2(ad||(ad=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: #FFFFFF;\n  margin: 0;\n"]))),Dd=dr.p(sd||(sd=o(["\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1.1rem;\n  margin: 0.5rem 0 0 0;\n  font-style: italic;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Md=dr.p(ld||(ld=o(["\n  color: #FFB000;\n  font-weight: 600;\n  margin: 0.5rem 0 0 0;\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Od=dr.div(cd||(cd=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1.5rem;\n  padding: 1.5rem;\n  background: linear-gradient(135deg, rgba(255, 176, 0, 0.1), rgba(76, 28, 140, 0.1));\n  border-radius: 16px;\n  border: 2px solid rgba(255, 176, 0, 0.3);\n  margin: 1.5rem 0;\n  box-shadow: 0 8px 25px rgba(255, 176, 0, 0.15);\n  \n  @media (min-width: 768px) {\n    margin: 2rem 0;\n  }\n"]))),Pd=dr.div(dd||(dd=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.1rem;\n  color: rgba(255, 255, 255, 0.8);\n  font-weight: 600;\n  text-align: center;\n"]))),jd=dr.div(ud||(ud=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Bd=dr.div(hd||(hd=o(["\n  margin-bottom: 1.5rem;\n  \n  @media (min-width: 768px) {\n    margin-bottom: 2rem;\n  }\n"]))),Ld=dr.h3(fd||(fd=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 600;\n  color: #FFFFFF;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n"]))),Fd=dr.div(pd||(pd=o(["\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  \n  @media (min-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  }\n"]))),zd=dr.div(gd||(gd=o(["\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));\n  border-radius: 12px;\n  padding: 1.5rem;\n  border-left: 4px solid #FFB000;\n  border: 1px solid rgba(255, 176, 0, 0.3);\n  backdrop-filter: blur(15px);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  \n  @media (min-width: 768px) {\n    border-radius: 16px;\n    padding: 2rem;\n  }\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 176, 0, 0.05), transparent);\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n  \n  &:hover, &:active {\n    transform: translateY(-3px);\n    box-shadow: 0 12px 30px rgba(255, 176, 0, 0.2);\n    \n    &::before {\n      opacity: 1;\n    }\n  }\n"]))),Ud=dr.h4(md||(md=o(["\n  font-weight: 600;\n  color: #FFFFFF;\n  margin: 0 0 0.5rem 0;\n  font-family: 'Outfit', sans-serif;\n"]))),Hd=dr.ul(yd||(yd=o(["\n  margin: 0;\n  padding-left: 1.2rem;\n  color: rgba(255, 255, 255, 0.8);\n  font-family: 'Space Grotesk', sans-serif;\n"]))),Wd=dr.li(wd||(wd=o(["\n  margin-bottom: 0.3rem;\n  line-height: 1.4;\n"]))),Vd=dr.div(bd||(bd=o(["\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 1rem;\n  \n  @media (min-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  }\n"]))),Gd=dr.div(vd||(vd=o(["\n  background: linear-gradient(135deg, #FFB000, #FF9F1C);\n  border-radius: 12px;\n  padding: 1.5rem;\n  color: #000000;\n  border: 2px solid #FFB000;\n  box-shadow: 0 8px 25px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  \n  @media (min-width: 768px) {\n    border-radius: 16px;\n    padding: 2rem;\n  }\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n  \n  &:hover, &:active {\n    transform: translateY(-4px) scale(1.02);\n    box-shadow: 0 15px 35px rgba(255, 176, 0, 0.4);\n    \n    &::before {\n      opacity: 1;\n    }\n  }\n"]))),Yd=dr.h4(Sd||(Sd=o(["\n  font-weight: 600;\n  margin: 0 0 0.5rem 0;\n  font-family: 'Outfit', sans-serif;\n  color: #000000;\n"]))),Xd=dr.div(Cd||(Cd=o(["\n  font-size: 0.9rem;\n  opacity: 0.8;\n  font-family: 'Space Grotesk', sans-serif;\n  color: #000000;\n"]))),Zd=()=>{const e=$(),[n,r]=(0,t.useState)("spring"),i={spring:{title:"Spring 2025",subtitle:"Digital Genesis",dates:"March - May 2025",emoji:"\ud83c\udf38",locked:!1,physicalDrops:[{title:"Genesis Collection (Week 1-2)",items:["Signature Hoodie (Rare) - 150 pieces","Basic Tee (Common) - 200 pieces","Cap (Common) - 100 pieces"]},{title:"Accessories Drop (Week 6)",items:["Phone Case (Rare) - 75 pieces","Sticker Pack (Common) - 500 sets","Tote Bag (Rare) - 100 pieces"]},{title:"Limited Collab (Week 10)",items:["Artist Collaboration Piece (Epic) - 50 pieces","Digital Art NFT (Legendary) - 25 pieces"]}],digitalDrops:["Welcome Passport Badge for app downloads","First digital wallpaper collection - 3 exclusive designs","Spring completion stamp for collecting 3+ items","Early Summer preview content"],communityEvents:["Virtual styling session on Instagram Stories","Community photo contest with prizes"],quests:[{title:"Digital Collector",description:"Scan 5 QR codes",reward:"75 WNGS"},{title:"Social Amplifier",description:"Share 3 posts with brand hashtag",reward:"50 WNGS"},{title:"Early Adopter",description:"Be in first 100 app downloads",reward:"100 WNGS"},{title:"Genesis Supporter",description:"Purchase any item from launch collection",reward:"150 WNGS"}]},summer:{title:"Summer 2025",subtitle:"Going Viral",dates:"June - August 2025",emoji:"\u2600\ufe0f",locked:!0,physicalDrops:[],digitalDrops:[],communityEvents:[],quests:[]},fall:{title:"Fall 2025",subtitle:"Metropolitan Metamorphosis",dates:"September - November 2025",emoji:"\ud83c\udf42",locked:!0,physicalDrops:[],digitalDrops:[],communityEvents:[],quests:[]},winter:{title:"Winter 2025",subtitle:"Crystalline Elegance",dates:"December 2025 - February 2026",emoji:"\u2744\ufe0f",locked:!0,physicalDrops:[],digitalDrops:[],communityEvents:[],quests:[]}},o=i[n];return(0,fr.jsxs)(_d,{children:[(0,fr.jsx)(xd,{onClick:()=>e(-1),children:"\u2190 Back"}),(0,fr.jsxs)(Ed,{children:[(0,fr.jsx)(Id,{children:"Season Roadmap"}),(0,fr.jsx)(Ad,{children:Object.entries(i).map(e=>{let[t,o]=e;return(0,fr.jsxs)(Td,{active:n===t,locked:o.locked,onClick:()=>{var e;i[e=t].locked||r(e)},children:[o.emoji," ",o.title.split(" ")[0]]},t)})}),(0,fr.jsxs)(kd,{children:[(0,fr.jsxs)(Rd,{children:[(0,fr.jsxs)(Nd,{children:[o.emoji," ",o.title]}),(0,fr.jsxs)(Dd,{children:['"',o.subtitle,'"']}),(0,fr.jsx)(Md,{children:o.dates})]}),(0,fr.jsx)(Od,{children:(0,fr.jsxs)(jd,{children:[(0,fr.jsx)(Pd,{children:"Season ends in:"}),(0,fr.jsx)(_s,{targetDate:new Date("2025-09-07T12:00:00"),size:"1.5rem",showSeconds:!0})]})}),o.locked?(0,fr.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"rgba(255, 255, 255, 0.7)",fontFamily:"Space Grotesk, sans-serif",background:"linear-gradient(135deg, rgba(255, 176, 0, 0.05), rgba(76, 28, 140, 0.05))",borderRadius:"20px",border:"1px solid rgba(255, 176, 0, 0.2)",margin:"2rem 0"},children:[(0,fr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1.5rem",filter:"drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3))"},children:"\ud83d\udd12"}),(0,fr.jsx)("h3",{style:{marginBottom:"1rem",color:"#FFFFFF",fontSize:"1.5rem",fontWeight:"600"},children:"Season Locked"}),(0,fr.jsx)("p",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:"This season will be unlocked when Spring 2025 ends."}),(0,fr.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 176, 0, 0.3)",marginTop:"1rem",marginBottom:"1rem"},children:[(0,fr.jsx)("div",{style:{fontSize:"0.9rem",opacity:.8,marginBottom:"0.5rem"},children:"Unlocks in:"}),(0,fr.jsx)(_s,{targetDate:new Date("2025-09-07T12:00:00"),size:"1rem",showSeconds:!1})]}),(0,fr.jsx)("div",{style:{background:"rgba(255, 176, 0, 0.1)",padding:"1rem",borderRadius:"12px",border:"1px solid rgba(255, 176, 0, 0.3)",marginTop:"1.5rem"},children:(0,fr.jsx)("p",{style:{fontSize:"0.9rem",opacity:.8,margin:0},children:"\ud83c\udfaf Complete Spring 2025 objectives to unlock early access!"})})]}):(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsxs)(Bd,{children:[(0,fr.jsx)(Ld,{children:"\ud83d\udecd\ufe0f Physical Drops"}),(0,fr.jsx)(Fd,{children:o.physicalDrops.map((e,t)=>(0,fr.jsxs)(zd,{children:[(0,fr.jsx)(Ud,{children:e.title}),(0,fr.jsx)(Hd,{children:e.items.map((e,t)=>(0,fr.jsx)(Wd,{children:e},t))})]},t))})]}),(0,fr.jsxs)(Bd,{children:[(0,fr.jsx)(Ld,{children:"\ud83d\udcbb Digital Experiences"}),(0,fr.jsx)(Hd,{children:o.digitalDrops.map((e,t)=>(0,fr.jsx)(Wd,{children:e},t))})]}),(0,fr.jsxs)(Bd,{children:[(0,fr.jsx)(Ld,{children:"\ud83c\udf89 Community Events"}),(0,fr.jsx)(Hd,{children:o.communityEvents.map((e,t)=>(0,fr.jsx)(Wd,{children:e},t))})]}),(0,fr.jsxs)(Bd,{children:[(0,fr.jsx)(Ld,{children:"\ud83c\udfaf Quest Objectives"}),(0,fr.jsx)(Vd,{children:o.quests.map((e,t)=>(0,fr.jsxs)(Gd,{children:[(0,fr.jsx)(Yd,{children:e.title}),(0,fr.jsx)("div",{style:{color:"#000000"},children:e.description}),(0,fr.jsxs)(Xd,{children:["Reward: ",e.reward]})]},t))})]})]})]}),(0,fr.jsxs)("div",{style:{textAlign:"center",padding:"2rem 0",marginTop:"1rem"},children:[(0,fr.jsx)("div",{style:{width:"60px",height:"4px",background:"linear-gradient(90deg, transparent, rgba(255, 176, 0, 0.5), transparent)",borderRadius:"2px",margin:"0 auto 1rem auto"}}),(0,fr.jsx)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.5)",fontFamily:"Space Grotesk, sans-serif"},children:"End of Roadmap"})]})]})]})};var qd;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(qd||(qd={}));var Qd,Jd,Kd=new Map([[qd.QR_CODE,"QR_CODE"],[qd.AZTEC,"AZTEC"],[qd.CODABAR,"CODABAR"],[qd.CODE_39,"CODE_39"],[qd.CODE_93,"CODE_93"],[qd.CODE_128,"CODE_128"],[qd.DATA_MATRIX,"DATA_MATRIX"],[qd.MAXICODE,"MAXICODE"],[qd.ITF,"ITF"],[qd.EAN_13,"EAN_13"],[qd.EAN_8,"EAN_8"],[qd.PDF_417,"PDF_417"],[qd.RSS_14,"RSS_14"],[qd.RSS_EXPANDED,"RSS_EXPANDED"],[qd.UPC_A,"UPC_A"],[qd.UPC_E,"UPC_E"],[qd.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function $d(e){return Object.values(qd).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(Qd||(Qd={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(Jd||(Jd={}));var eu,tu=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Jd.SCAN_TYPE_CAMERA,Jd.SCAN_TYPE_FILE],e}(),nu=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Kd.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Kd.get(t))},e}(),ru=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(eu||(eu={}));var iu=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:eu.UNKWOWN_ERROR}},e}(),ou=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function au(e){return"undefined"===typeof e||null===e}var su,lu=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),cu=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),du=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),uu=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if(r.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e}(),hu=n(72),fu=function(){function e(e,t,n){if(this.formatMap=new Map([[qd.QR_CODE,hu.BarcodeFormat.QR_CODE],[qd.AZTEC,hu.BarcodeFormat.AZTEC],[qd.CODABAR,hu.BarcodeFormat.CODABAR],[qd.CODE_39,hu.BarcodeFormat.CODE_39],[qd.CODE_93,hu.BarcodeFormat.CODE_93],[qd.CODE_128,hu.BarcodeFormat.CODE_128],[qd.DATA_MATRIX,hu.BarcodeFormat.DATA_MATRIX],[qd.MAXICODE,hu.BarcodeFormat.MAXICODE],[qd.ITF,hu.BarcodeFormat.ITF],[qd.EAN_13,hu.BarcodeFormat.EAN_13],[qd.EAN_8,hu.BarcodeFormat.EAN_8],[qd.PDF_417,hu.BarcodeFormat.PDF_417],[qd.RSS_14,hu.BarcodeFormat.RSS_14],[qd.RSS_EXPANDED,hu.BarcodeFormat.RSS_EXPANDED],[qd.UPC_A,hu.BarcodeFormat.UPC_A],[qd.UPC_E,hu.BarcodeFormat.UPC_E],[qd.UPC_EAN_EXTENSION,hu.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!hu)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(hu.DecodeHintType.POSSIBLE_FORMATS,r),i.set(hu.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(i){r(i)}})},e.prototype.decode=function(e){var t=new hu.MultiFormatReader(this.verbose,this.hints),n=new hu.HTMLCanvasElementLuminanceSource(e),r=new hu.BinaryBitmap(new hu.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:nu.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),pu=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},gu=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},mu=function(){function e(t,n,r){if(this.formatMap=new Map([[qd.QR_CODE,"qr_code"],[qd.AZTEC,"aztec"],[qd.CODABAR,"codabar"],[qd.CODE_39,"code_39"],[qd.CODE_93,"code_93"],[qd.CODE_128,"code_128"],[qd.DATA_MATRIX,"data_matrix"],[qd.ITF,"itf"],[qd.EAN_13,"ean_13"],[qd.EAN_8,"ean_8"],[qd.PDF_417,"pdf417"],[qd.UPC_A,"upc_a"],[qd.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return pu(this,void 0,void 0,function(){var t,n;return gu(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:nu.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0,i=e;r<i.length;r++){var o=i[r],a=o.boundingBox.width*o.boundingBox.height;a>n&&(n=a,t=o)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),yu=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},wu=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},bu=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&mu.isSupported()?(this.primaryDecoder=new mu(e,n,r),this.secondaryDecoder=new fu(e,n,r)):this.primaryDecoder=new fu(e,n,r)}return e.prototype.decodeAsync=function(e){return yu(this,void 0,void 0,function(){var t;return wu(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return yu(this,void 0,void 0,function(){var t,n;return wu(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++){e+=n[t]}var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),vu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Su=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Cu=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},_u=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),xu=function(e){function t(t){return e.call(this,"zoom",t)||this}return vu(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return vu(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var n={advanced:[t]};return this.track.applyConstraints(n)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(_u)),Eu=function(e){function t(t){return e.call(this,"torch",t)||this}return vu(t,e),t}(_u),Iu=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new xu(this.track)},e.prototype.torchFeature=function(){return new Eu(this.track)},e}(),Au=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return Su(this,void 0,void 0,function(){var o,a;return Cu(this,function(s){switch(s.label){case 0:return o=new e(t,n,i),r.aspectRatio?(a={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)]):[3,2];case 1:s.sent(),s.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return Su(this,void 0,void 0,function(){return Cu(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new Iu(this.getFirstTrackOrFail())},e}(),Tu=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return Su(this,void 0,void 0,function(){return Cu(this,function(r){return[2,Au.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return Su(this,void 0,void 0,function(){var n;return Cu(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),ku=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Ru=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Nu=function(){function e(){}return e.failIfNotSupported=function(){return ku(this,void 0,void 0,function(){return Ru(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return ku(this,void 0,void 0,function(){return Ru(this,function(t){return[2,Tu.create(e)]})})},e}(),Du=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},Mu=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Ou=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=lu.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=lu.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return Du(this,void 0,void 0,function(){var e,t,n,r,i,o,a;return Mu(this,function(s){switch(s.label){case 0:return e=function(e){for(var t=0,n=e.getVideoTracks();t<n.length;t++){var r=n[t];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=s.sent(),r=[],i=0,o=n;i<o.length;i++)"videoinput"===(a=o[i]).kind&&r.push({id:a.deviceId,label:a.label});return e(t),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}e(n)})})},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(su||(su={}));var Pu,ju=function(){function e(){this.state=su.NOT_STARTED,this.onGoingTransactionNewState=su.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===su.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=su.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===su.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=su.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==su.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case su.UNKNOWN:throw"Transition from unknown is not allowed";case su.NOT_STARTED:this.failIfNewStateIs(e,[su.PAUSED]);case su.SCANNING:case su.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0,r=t;n<r.length;n++){if(e===r[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),Bu=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===su.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==su.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===su.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===su.PAUSED},e}(),Lu=function(){function e(){}return e.create=function(){return new Bu(new ju)},e}(),Fu=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fu(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(tu),Uu=function(){function e(e,t){this.logger=t,this.fps=zu.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=zu.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?uu.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!au(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Hu=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var n;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new ou(this.verbose),this.qrcode=new bu(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Lu.create()}return e.prototype.start=function(e,t,n,r){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var a=Uu.create(t,this.logger);this.clearElement();var s=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=s,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:zu.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var d=this,u=this.stateManagerProxy.startTransition(su.SCANNING);return new Promise(function(t,r){var s=l?a.videoConstraints:d.createVideoConstraints(e);if(!s)return u.cancel(),void r("videoConstraints should be defined");var c={};l&&!a.aspectRatio||(c.aspectRatio=a.aspectRatio);var h={onRenderSurfaceReady:function(e,t){d.setupUi(e,t,a),d.isScanning=!0,d.foreverScan(a,n,i)}};Nu.failIfNotSupported().then(function(e){e.create(s).then(function(e){return e.render(o.element,c,h).then(function(e){d.renderedCamera=e,u.execute(),t(null)}).catch(function(e){u.cancel(),r(e)})}).catch(function(e){u.cancel(),r(lu.errorGettingUserMedia(e))})}).catch(function(e){u.cancel(),r(lu.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(su.PAUSED),this.showPausedState(),(au(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(su.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume(function(){t()}):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(su.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),function(){if(e.element){var t=document.getElementById(zu.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(au(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,a=o.height,s=document.getElementById(n.elementId),l=s.clientWidth?s.clientWidth:zu.DEFAULT_WIDTH,c=Math.max(s.clientHeight?s.clientHeight:a,zu.FILE_SCAN_MIN_HEIGHT),d=n.computeCanvasDrawConfig(e,a,l,c);if(t){var u=n.createCanvasElement(l,c,"qr-canvas-visible");u.style.display="inline-block",s.appendChild(u);var h=u.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(o,0,0,e,a,d.x,d.y,d.width,d.height)}var f=zu.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(o.width,d.width),g=Math.max(o.height,d.height),m=p+2*f,y=g+2*f,w=n.createCanvasElement(m,y);s.appendChild(w);var b=w.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=m,b.canvas.height=y,b.drawImage(o,0,0,e,a,f,f,p,g);try{n.qrcode.decodeRobustlyAsync(w).then(function(e){r(ru.createFromQrcodeResult(e))}).catch(i)}catch(v){i("QR code parse error, error = ".concat(v))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return Ou.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!uu.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[qd.QR_CODE,qd.AZTEC,qd.CODABAR,qd.CODE_39,qd.CODE_93,qd.CODE_128,qd.DATA_MATRIX,qd.MAXICODE,qd.ITF,qd.EAN_13,qd.EAN_8,qd.PDF_417,qd.RSS_14,qd.RSS_EXPANDED,qd.UPC_A,qd.UPC_E,qd.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var o=i[r];$d(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(au(e))return!0;if(!au(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(au(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!au(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var o,a=this.toQrdimensions(e,t,i),s=function(e){if(e<zu.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(zu.MIN_QR_BOX_SIZE,"px.")};s(a.width),s(a.height),a.width=((o=a.width)>e&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=e),o)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(e,t)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=au(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=t,a={x:0,y:0,width:e,height:t},s=o?this.getShadedRegionBounds(e,t,i):a,l=this.createCanvasElement(s.width,s.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=s.width,c.canvas.height=s.height,this.element.append(l),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=s,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=lu.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,ru.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=lu.codeParseError(e);return t(r,iu.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,a=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*o,l=this.qrRegion.height*a,c=this.qrRegion.x*o,d=this.qrRegion.y*a;this.context.drawImage(i,c,d,s,l,0,0,this.qrRegion.width,this.qrRegion.height);var u=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?u():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){u()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),u()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",o=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var s=Object.keys(e)[0];if(s!==t&&s!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(s!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(o(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(i in c))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,o=t;return e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?zu.BORDER_SHADER_MATCH_COLOR:zu.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=au(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-r.width)/2,a=(n-r.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(zu.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var s=40;this.insertShaderBorders(i,s,5,-5,null,0,!0),this.insertShaderBorders(i,s,5,-5,null,0,!1),this.insertShaderBorders(i,s,5,null,-5,0,!0),this.insertShaderBorders(i,s,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,o,a){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=zu.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(t,"px"),s.style.height="".concat(n,"px"),null!==r&&(s.style.top="".concat(r,"px")),null!==i&&(s.style.bottom="".concat(i,"px")),a?s.style.left="".concat(o,"px"):s.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),Wu="data:image/svg+xml;base64,",Vu=Wu+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Gu=Wu+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Yu=Wu+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Xu=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Zu=function(){function e(){this.data=Xu.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Xu.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),qu=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=du.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=du.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Qu=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Yu,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Yu,this.infoIcon.style.opacity="0.6")},e}(),Ju=function(){function e(){var e=this;this.infoDiv=new qu,this.infoIcon=new Qu(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Ku=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},$u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},eh=function(){function e(){}return e.hasPermissions=function(){return Ku(this,void 0,void 0,function(){var e,t,n,r;return $u(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,n=e;t<n.length;t++)if("videoinput"===(r=n[t]).kind&&r.label)return[2,!0];return[2,!1]}})})},e}(),th=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===Jd.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Jd.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return tu.DEFAULT_SUPPORTED_SCAN_TYPE;var t=tu.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0,r=e;n<r.length;n++){var i=r[n];if(!tu.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),nh=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),rh=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(nh.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),ih=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})},oh=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},ah=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return ih(this,void 0,void 0,function(){var e,t;return oh(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?cu.torchOffButton():cu.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?cu.torchOnFailedMessage():cu.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),sh=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=rh.createElement("button",nh.TORCH_BUTTON_ID),this.torchController=new ah(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=cu.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return ih(n,void 0,void 0,function(){return oh(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(nh.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(nh.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(nh.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(nh.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new ah(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=cu.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var o=new e(n,i);return o.render(t,r),o},e}(),lh=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=rh.createElement("button",nh.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=rh.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],o=r.name;i.setImageNameToButton(o),n(r)}}});var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var a=!1,s=0;s<r.length;++s){var l=r.item(s);if(l){if(l.type.match(/image.*/)){a=!0;var c=l.name;i.setImageNameToButton(c),n(l),o.innerText=cu.dragAndDropMessage();break}}}a||(o.innerText=cu.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=cu.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=cu.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=cu.fileSelectionChooseImage()+" - "+cu.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),ch=function(){function e(e){this.selectElement=rh.createElement("select",nh.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)t.style.display="none";else{var r=cu.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,a=this.cameras;o<a.length;o++){var s=a[o],l=s.id,c=null==s.label?l:s.label;c&&""!==c||(c=[cu.anonymousCameraPrefix(),i++].join(" "));var d=document.createElement("option");d.value=l,d.innerText=c,this.options.push(d),this.selectElement.appendChild(d)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++){if(n[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),dh=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=rh.createElement("input",nh.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=cu.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=cu.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Pu||(Pu={}));!function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new th(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ou(this.verbose),this.persistedDataManager=new Zu,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,r){if(e)e(t,r);else{if(n.lastMatchFound===t)return;n.lastMatchFound=t,n.setHeaderMessage(cu.lastMatch(t),Pu.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var r,i,o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new Hu(this.getScanRegionId(),(r=this.config,i=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:i}))},e.prototype.pause=function(e){(au(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){e.html5Qrcode?(e.html5Qrcode.clear(),t(),n()):n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n()):n()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=tu.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!tu.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=tu.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=tu.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:tu.SCAN_DEFAULT_FPS,rememberLastUsedCamera:tu.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:tu.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),th.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new Ju).renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(cu.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};Hu.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(cu.noCameraFound(),Pu.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,Pu.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=rh.createElement("button",this.getCameraPermissionButtonId());r.innerText=cu.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;th.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?eh.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)}):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=th.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=th.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=lh.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";th.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(cu.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,Pu.STATUS_WARNING),n.qrCodeErrorCallback(e,iu.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=dh.create(r,!1),o=ch.create(r,e),a=document.createElement("span"),s=rh.createElement("button",nh.CAMERA_START_BUTTON_ID);s.innerText=cu.scanButtonStartScanningText(),a.appendChild(s);var l,c=rh.createElement("button",nh.CAMERA_STOP_BUTTON_ID);c.innerText=cu.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,a.appendChild(c);r.appendChild(a);var d=function(e){e||(s.style.display="none"),s.innerText=cu.scanButtonStartScanningText(),s.style.opacity="1",s.disabled=!1,e&&(s.style.display="inline-block")};if(s.addEventListener("click",function(e){s.innerText=cu.scanButtonScanningStarting(),o.disable(),s.disabled=!0,s.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r,u=o.getValue();n.persistedDataManager.setLastUsedCameraId(u),n.html5Qrcode.start(u,(r=n.config,{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",d(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=sh.create(a,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){n.setHeaderMessage(e,Pu.STATUS_WARNING)}),l.show()):l&&l.hide()}(r),!0===t.config.showZoomSliderIfSupported&&function(e){var n=e.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback(function(e){n.apply(e)});var r,o,a,s=1;t.config.defaultZoomValueIfSupported&&(s=t.config.defaultZoomValueIfSupported),r=s,o=n.min(),s=r>(a=n.max())?a:r<o?o:r,i.setValues(n.min(),n.max(),s,n.step()),i.show()}}(r)}).catch(function(e){n.showHideScanTypeSwapLink(!0),o.enable(),d(!0),n.setHeaderMessage(e,Pu.STATUS_WARNING)})}),o.hasSingleItem()&&s.click(),c.addEventListener("click",function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),o.enable(),s.disabled=!1,c.style.display="none",s.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,n.setHeaderMessage(e,Pu.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var u=n.persistedDataManager.getLastUsedCameraId();o.hasValue(u)?(o.setValue(u),s.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=cu.textIfCameraScanSelected(),n=cu.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var o=rh.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=th.isCameraScanType(this.currentScanType)?t:n,o.addEventListener("click",function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,th.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=n,e.currentScanType=Jd.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=Jd.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")}),i.appendChild(o),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&eh.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Pu.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case Pu.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Pu.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Pu.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Vu,this.cameraScanImage.alt=cu.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Gu,this.fileScanImage.alt=cu.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return nh.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return nh.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();const uh=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),hh=()=>{const{user:e}=Ra(),[n,r]=(0,t.useState)(null),[i,o]=(0,t.useState)({totalReferrals:0,pendingReferrals:0,completedReferrals:0,totalWingsEarned:0}),[a,s]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)(null),h=(0,t.useRef)(!1),f=(0,t.useRef)(!1),p=(0,t.useRef)(null),g=(0,t.useRef)(null),m="2025-09-07",y="2025-09-14",w=2,b=()=>{const e=new Date,t=new Date(m),n=new Date(y);return e>=t&&e<=n},v=(0,t.useCallback)(e=>{var t,n;if(!e)return null;const r=((null===(t=e.user_metadata)||void 0===t?void 0:t.username)||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"user").toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,6),i=Math.random().toString(36).substring(2,5);return"".concat(r).concat(i).toUpperCase()},[]),S=(0,t.useCallback)(async()=>{if(!e)return console.log("\u274c ensureReferralCode: No user provided"),null;if(n)return console.log("\u2705 Referral code already exists:",n),n;if(h.current)return console.log("\ud83d\udd04 ensureReferralCode: Already initialized, skipping"),n;if(f.current)return console.log("\ud83d\udd04 ensureReferralCode: Already processing, skipping"),n;f.current=!0,h.current=!0,console.log("\ud83d\udd27 ensureReferralCode: Starting for user:",e.id);try{0,console.log("\ud83d\udd0d Checking for existing referral code...");const{data:t,error:i}=await uh.from("referral_codes").select("referral_code").eq("user_id",e.id).eq("is_active",!0).single();if(console.log("\ud83d\udcca Existing code query result:",{existingCode:t,fetchError:i}),t)return console.log("\u2705 Found existing referral code:",t.referral_code),g.current&&clearTimeout(g.current),n!==t.referral_code&&r(t.referral_code),t.referral_code;console.log("\ud83c\udd95 No existing code found, generating new one...");let o,a=0,s=!1;for(;!s&&a<5;){o=v(e),console.log("\ud83c\udfb2 Attempt ".concat(a+1,": Generated code ").concat(o));const{data:t,error:i}=await uh.from("referral_codes").insert([{user_id:e.id,referral_code:o}]).select("referral_code").single();if(console.log("\ud83d\udcbe Insert result:",{createdCode:t,createError:i}),!i)return console.log("\u2705 Successfully created referral code:",t.referral_code),g.current&&clearTimeout(g.current),n!==t.referral_code&&r(t.referral_code),t.referral_code;if("23505"!==i.code)throw i;console.log("\u26a0\ufe0f Code collision, trying again..."),a++}throw new Error("Failed to generate unique referral code")}catch(d){return console.error("\u274c Error ensuring referral code:",d),u(d.message),null}finally{f.current=!1}},[e,v]),C=(0,t.useCallback)(async()=>{if(e)try{c(!0);const{data:t,error:n}=await uh.from("referrals").select("status, created_at, referrer_reward_given, referrer_wings_earned").eq("referrer_id",e.id);if(n)throw n;const{data:r,error:i}=await uh.from("user_profiles").select("total_referrals, referral_wings_earned").eq("id",e.id).single();if(i&&"PGRST116"!==i.code)throw i;const a={totalReferrals:(null===t||void 0===t?void 0:t.length)||0,pendingReferrals:(null===t||void 0===t?void 0:t.filter(e=>"pending"===e.status).length)||0,completedReferrals:(null===t||void 0===t?void 0:t.filter(e=>"completed"===e.status).length)||0,totalWingsEarned:(null===r||void 0===r?void 0:r.referral_wings_earned)||0};o(a)}catch(d){console.error("Error loading referral stats:",d),u(d.message)}finally{c(!1)}},[e]),_=(0,t.useCallback)(async()=>{if(e)try{const{data:t,error:n}=await uh.from("referrals").select("\n          *,\n          referee:referee_id (\n            email,\n            user_metadata\n          )\n        ").eq("referrer_id",e.id).order("created_at",{ascending:!1});if(n)throw n;const r=(null===t||void 0===t?void 0:t.map(e=>{var t,n,r,i,o;return{id:e.id,refereeName:(null===(t=e.referee)||void 0===t||null===(n=t.user_metadata)||void 0===n?void 0:n.username)||(null===(r=e.referee)||void 0===r||null===(i=r.email)||void 0===i?void 0:i.split("@")[0])||"User",refereeEmail:null===(o=e.referee)||void 0===o?void 0:o.email,status:e.status,createdAt:e.created_at,completedAt:e.completed_at,rewardGiven:e.referrer_reward_given,wingsEarned:e.referrer_wings_earned||0}}))||[];s(r)}catch(d){console.error("Error loading referral history:",d),u(d.message)}},[e]),x=(0,t.useCallback)(async(e,t)=>{if(e&&t)try{console.log("\ud83d\udd04 Processing referral signup:",{referralCode:e,newUserId:t});const{data:n,error:r}=await uh.from("referral_codes").select("user_id").eq("referral_code",e.toUpperCase()).eq("is_active",!0).single();if(r||!n)return console.warn("Invalid referral code:",e),{success:!1,error:"Invalid referral code"};if(n.user_id===t)return console.warn("Self-referral attempt blocked"),{success:!1,error:"Cannot refer yourself"};let i=25;b()&&(i*=w);const{data:o,error:a}=await uh.from("referrals").insert([{referrer_id:n.user_id,referee_id:t,referral_code:e.toUpperCase(),status:"pending",referee_wings_earned:i}]).select().single();if(a)throw a;const{error:s}=await uh.rpc("add_wings_to_user",{user_id_param:t,wings_amount:i,activity_type_param:"referral_bonus",description_param:"Welcome bonus for joining via referral code: ".concat(e).concat(b()?" (Birthday Launch 2x Bonus!)":"")});return s&&console.warn("Failed to award welcome bonus:",s),console.log("\u2705 Referral signup processed successfully"),{success:!0,data:o,bonusAmount:i}}catch(d){return console.error("Error processing referral signup:",d),{success:!1,error:d.message}}},[]),E=(0,t.useCallback)(async e=>{try{console.log("\ud83d\udd04 Attempting to complete referral for referee:",e);const{data:t,error:n}=await uh.from("referrals").select("*").eq("referee_id",e).eq("status","pending").single();if(n||!t)return console.log("No pending referral found for referee:",e),{success:!1,message:"No pending referral found"};let r=50,i=25;b()&&(r*=w,i*=w);const{error:o}=await uh.from("referrals").update({status:"completed",completed_at:(new Date).toISOString(),referrer_reward_given:!0,referee_reward_given:!0,referrer_wings_earned:r,referee_wings_earned:(t.referee_wings_earned||0)+i}).eq("id",t.id);if(o)throw o;const a=b()?" (Birthday Launch 2x Bonus!)":"";return await Promise.all([uh.rpc("add_wings_to_user",{user_id_param:t.referrer_id,wings_amount:r,activity_type_param:"referral",description_param:"Referral completed - friend completed first scan".concat(a)}),uh.rpc("add_wings_to_user",{user_id_param:e,wings_amount:i,activity_type_param:"referral_bonus",description_param:"First scan bonus - referred user reward".concat(a)})]),await uh.from("user_profiles").update({total_referrals:uh.raw("COALESCE(total_referrals, 0) + 1")}).eq("id",t.referrer_id),console.log("\u2705 Referral completed successfully"),{success:!0,referrerReward:r,refereeReward:i}}catch(d){return console.error("Error completing referral:",d),{success:!1,error:d.message}}},[]),I=(0,t.useCallback)(e=>{if(!e)return"";const t=window.location.origin;return"".concat(t,"/join/").concat(e)},[]),A=(0,t.useCallback)(async e=>{const t=I(e);let n="Join me on Monarch Passport! \ud83e\udd8b\n\nEarn exclusive fashion rewards by scanning QR codes. Use my code: ".concat(e);if(b()&&(n="\ud83c\udf82 IT'S MONARCH PASSPORT'S BIRTHDAY WEEK! \ud83e\udd8b\n\nJoin the celebration with DOUBLE REFERRAL REWARDS!\n\n\u2728 50 WINGS for joining (normally 25)\n\ud83c\udf81 50 more for first scan (normally 25)\n\ud83d\udc51 I get 100 WINGS when you scan (normally 50)\n\nUse code: ".concat(e,"\n\nBirthday bonuses end Sept 14th!")),navigator.share)try{return await navigator.share({title:"Join Monarch Passport",text:n,url:t}),{success:!0}}catch(d){"AbortError"!==d.name&&console.log("Share failed:",d)}try{return await navigator.clipboard.writeText("".concat(n,"\n\n").concat(t)),{success:!0,copied:!0}}catch(d){return console.error("Failed to copy to clipboard:",d),{success:!1,link:t}}},[I]);return(0,t.useEffect)(()=>{console.log("\ud83d\udd27 useReferrals useEffect triggered, user:",null===e||void 0===e?void 0:e.id),(null===e||void 0===e?void 0:e.id)!==p.current?(p.current=null===e||void 0===e?void 0:e.id,e?(console.log("\u2705 User found, calling ensureReferralCode..."),S(),C(),_()):(console.log("\u274c No user found, resetting referral state"),r(null),o({totalReferrals:0,pendingReferrals:0,completedReferrals:0,totalWingsEarned:0}),s([]),c(!1),h.current=!1,f.current=!1)):console.log("\ud83d\udd04 Same user, skipping initialization")},[e]),(0,t.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]),{referralCode:n,referralStats:i,referralHistory:a,loading:l,error:d,processReferralSignup:x,completeReferral:E,generateReferralLink:I,shareReferral:A,isBirthdayLaunch:b(),refreshData:()=>{C(),_()}}};var fh,ph,gh,mh,yh,wh,bh,vh,Sh,Ch,_h,xh,Eh,Ih;const Ah=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Th=hr(fh||(fh=o(["\n  0% { opacity: 0; transform: scale(0.5) rotate(-10deg); }\n  50% { opacity: 1; transform: scale(1.1) rotate(5deg); }\n  100% { opacity: 1; transform: scale(1) rotate(0deg); }\n"]))),kh=dr.div(ph||(ph=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem 1rem 6rem 1rem;\n"])),e=>{let{theme:t}=e;return t.colors.background}),Rh=dr(Xa)(gh||(gh=o(["\n  padding: 2rem;\n  width: 100%;\n  max-width: 400px;\n  text-align: center;\n"]))),Nh=dr.div(mh||(mh=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.3);\n  backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n"]))),Dh=dr(Xa)(yh||(yh=o(["\n  padding: 3rem 2rem;\n  text-align: center;\n  animation: "," 0.6s ease-out;\n  max-width: 90vw;\n  width: 400px;\n"])),Th),Mh=dr.div(wh||(wh=o(["\n  font-size: 4rem;\n  margin-bottom: 1rem;\n"]))),Oh=dr.h2(bh||(bh=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.5rem;\n  margin-bottom: 1rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),Ph=dr.div(vh||(vh=o(["\n  font-size: 1.2rem;\n  color: ",";\n  font-weight: 600;\n  margin-bottom: 2rem;\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),jh=dr(Xa)(Sh||(Sh=o(["\n  padding: 2rem;\n  text-align: center;\n  background: rgba(231, 76, 60, 0.1);\n  border: 1px solid rgba(231, 76, 60, 0.3);\n"]))),Bh=dr.div(Ch||(Ch=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 2rem;\n"]))),Lh=dr.button(_h||(_h=o(["\n  background: ",";\n  color: ",";\n  border: 2px solid #FFB000;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  padding: 0.75rem 2rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n  }\n"])),e=>e.claimed?"linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%)":"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 50%, #9D4EDD 100%)",e=>e.claimed?"#000":"#FAFAFA"),Fh=dr.button(xh||(xh=o(["\n  background: transparent;\n  color: #aaa;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  font-size: 1rem;\n  font-weight: 500;\n  padding: 0.6rem 1.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.1);\n    color: #fff;\n  }\n"]))),zh=dr.div(Eh||(Eh=o(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  background: linear-gradient(135deg, #10B981 0%, #059669 100%);\n  color: white;\n  padding: 0.5rem;\n  font-size: 0.8rem;\n  font-weight: 600;\n  text-align: center;\n  z-index: 10;\n"]))),Uh=dr.div(Ih||(Ih=o(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #10B981 0%, #059669 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto 1.5rem;\n  font-size: 2.5rem;\n  color: white;\n"]))),Hh=e=>{let{reward:n,onClose:r,onShowInCloset:i,user:o}=e;const[a,s]=(0,t.useState)("unclaimed"),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1);return n?(0,fr.jsx)(Nh,{children:(0,fr.jsxs)(Dh,{children:[d&&l&&(0,fr.jsxs)(zh,{children:["\u26a1 Quest Progress: ",l.questName," (",l.newProgress,"/",l.total,")",l.completed&&" - COMPLETED! \ud83c\udf89"]}),"unclaimed"===a&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Mh,{children:(h=n.category,{jackets:"\ud83e\udde5",tops:"\ud83d\udc55",bottoms:"\ud83d\udc56",headwear:"\ud83e\udde2",accessories:"\u26d3\ufe0f",footwear:"\ud83d\udc5f",themes:"\ud83c\udfa8"}[h]||"\ud83c\udf81")}),(0,fr.jsx)(Oh,{children:"Reward Found!"}),(0,fr.jsx)("h3",{style:{color:"#fff",marginBottom:"0.5rem"},children:n.name}),(0,fr.jsxs)("p",{style:{color:"#aaa",marginBottom:"1rem"},children:[n.rarity," \u2022 #",n.mintNumber]}),n.wingsEarned>0&&(0,fr.jsxs)(Ph,{children:["+",n.wingsEarned," WNGS \ud83e\udd8b"]}),(0,fr.jsxs)(Bh,{children:[(0,fr.jsx)(Lh,{onClick:async()=>{if(n&&o){s("claiming");try{await new Promise(e=>setTimeout(e,1500));const e=await(async(e,t)=>{try{const{data:n}=await Ah.from("user_quest_progress").select("*").eq("user_id",e).eq("status","active");if(!n||0===n.length)return null;const r=n.find(e=>"scan_items"===e.quest_type||"scan_physical_items"===e.quest_type||"scan_category"===e.quest_type&&e.category===t);if(r){const e=(r.current_progress||0)+1,t=e>=r.target_value;return await Ah.from("user_quest_progress").update({current_progress:e,status:t?"completed":"active",completed_at:t?(new Date).toISOString():null}).eq("id",r.id),{questName:r.quest_title||"Scan 10 Papillon Items",oldProgress:r.current_progress||0,newProgress:e,total:r.target_value||10,completed:t}}return null}catch(n){return console.warn("Failed to check quest progress:",n),null}})(o.id,n.category);e&&(c(e),u(!0),setTimeout(()=>u(!1),4e3)),s("claimed")}catch(e){console.error("Claim processing failed:",e),s("unclaimed")}}},children:"\ud83c\udf81 Claim Reward"}),(0,fr.jsx)(Fh,{onClick:r,children:"Close"})]})]}),"claiming"===a&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\u23f3"}),(0,fr.jsx)(Oh,{children:"Processing your reward..."}),(0,fr.jsx)("p",{style:{color:"#aaa"},children:"Adding to closet and updating progress"})]}),"claimed"===a&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Uh,{children:"\u2713"}),(0,fr.jsx)(Oh,{children:"Reward Claimed!"}),(0,fr.jsx)("h3",{style:{color:"#fff",marginBottom:"0.5rem"},children:n.name}),(0,fr.jsx)("p",{style:{color:"#10B981",marginBottom:"1rem"},children:"Successfully added to your closet"}),n.wingsEarned>0&&(0,fr.jsxs)("p",{style:{color:"#FFB000",marginBottom:"2rem"},children:["+",n.wingsEarned," WNGS earned!"]}),(0,fr.jsxs)(Bh,{children:[(0,fr.jsx)(Lh,{claimed:!0,onClick:i,children:"\ud83d\udc55 Show in Closet"}),(0,fr.jsx)(Fh,{onClick:r,children:"Continue Scanning"})]})]})]})}):null;var h},Wh=()=>{const e=$(),{user:n}=Ra(),{awardQRStamp:r,awardFirstItemStamp:i,awardStyleStamp:o,hasStamp:a}=us(),{completeReferral:s}=hh(),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[m,y]=(0,t.useState)(null),[w,b]=(0,t.useState)(null),[v,S]=(0,t.useState)(null),[C,_]=(0,t.useState)(!1),x=(0,t.useRef)(null),E="qr-reader",I=(0,t.useCallback)(e=>{try{const t=JSON.parse(e);if("monarch_reward"!==t.type)return!1;if(!t.rewardId)return!1;if(!t.season)return!1;if(t.timestamp&&t.timestamp<Date.now()-864e5)throw new Error("QR code has expired");return!0}catch(w){return console.error("QR validation error:",w),!1}},[]),A=(0,t.useCallback)(async(e,t)=>{try{const{data:n,error:r}=await Ah.from("user_closet").select("id").eq("user_id",t).eq("reward_id",e).maybeSingle();return r?(console.error("Database error checking existing reward:",r),{exists:!1,error:r}):{exists:!!n,error:null}}catch(n){return console.error("Unexpected error in checkExistingReward:",n),{exists:!1,error:n}}},[]),T=(0,t.useCallback)(async e=>{const{data:t,error:n}=await Ah.from("rewards").select("*").eq("reward_id",e).single();return{data:t,error:n}},[]),k=(0,t.useCallback)(async e=>{const{data:t,error:n}=await Ah.from("user_closet").select("mint_number").eq("reward_id",e).order("mint_number",{ascending:!1}).limit(1).maybeSingle();return n?(console.warn("Error fetching mint numbers:",n),Math.floor(999*Math.random())+1):((null===t||void 0===t?void 0:t.mint_number)||0)+1},[]),R=(0,t.useCallback)(async(e,t)=>{const n=await k(e.reward_id),{data:r,error:i}=await Ah.from("user_closet").insert([{user_id:t,reward_id:e.reward_id,name:e.name,rarity:e.rarity,category:e.category,item_type:(o=e.category,["jackets","tops","bottoms","headwear","accessories","footwear","hoodies"].includes(o)?"physical_item":"digital_collectible"),mint_number:n,earned_date:(new Date).toISOString(),earned_via:"qr_scan",wings_earned:e.wings_value||0}]).select().single();var o;return{data:r,error:i}},[k]),N=(0,t.useCallback)(async(e,t)=>{try{const{data:n}=await Ah.from("user_profiles").select("wings_balance").eq("id",e).single(),r=((null===n||void 0===n?void 0:n.wings_balance)||0)+t,{error:i}=await Ah.from("user_profiles").update({wings_balance:r}).eq("id",e);return{error:i}}catch(n){return console.error("Error updating wings balance:",n),{error:n}}},[]),D=(0,t.useCallback)(async(e,t)=>{const{error:n}=await Ah.from("user_activity").insert([{user_id:e,activity_type:"scan",activity_title:"Scanned: ".concat(t.rewardName),activity_description:"Earned ".concat(t.wingsEarned," WNGS \u2022 Mint #").concat(t.mintNumber),wings_earned:t.wingsEarned,reward_id:t.rewardId,metadata:{mintNumber:t.mintNumber,rarity:t.rarity,category:t.category}}]);n&&console.warn("Failed to log activity:",n)},[]),M=(0,t.useCallback)(async e=>{if(null!==e&&void 0!==e&&e.text&&n&&!C){_(!0),await j(),await new Promise(e=>setTimeout(e,300)),c(!1),u(!0),b(null);try{if(console.log("\ud83d\udd04 Processing scan result:",e),console.log("\ud83d\udcf1 Processing regular QR code"),!I(e.text))throw new Error("Invalid QR code. This is not a Monarch reward code.");const c=JSON.parse(e.text),u=c.rewardId;console.log("\ud83c\udf81 Final reward ID:",u),console.log("\ud83d\udce6 Payload:",c),console.log("\ud83d\udd0d Step 2: Checking existing reward...");const{exists:p,error:g}=await A(c.rewardId,n.id);if(g)throw console.error("\u274c checkExistingReward failed:",g),new Error("Database error: ".concat(g.message||"Failed to verify reward status"));if(p)throw new Error("You already own this reward!");console.log("\u2705 User does not own this reward yet"),console.log("\ud83d\udd0d Step 3: Fetching reward details...");const{data:m,error:w}=await T(c.rewardId);if(w)throw console.error("\u274c fetchReward failed:",w),new Error("Failed to fetch reward: ".concat(w.message));if(!m)throw console.warn("\u274c No reward found for ID:",c.rewardId),new Error("Reward not found or no longer available");console.log("\u2705 Reward data fetched:",m),console.log("\ud83d\udd0d Step 4: Adding to closet...");const{data:b,error:v}=await R(m,n.id);if(v)throw console.error("\u274c addToCloset failed:",v),new Error("Failed to add reward to closet: ".concat(v.message));console.log("\u2705 Added to closet:",b),console.log("\ud83d\udd0d Step 5: Updating WNGS balance...");const S=m.wings_value||0;if(S>0){const{error:e}=await N(n.id,S);e?console.warn("\u26a0\ufe0f Failed to update WNGS balance:",e):console.log("\u2705 WNGS balance updated")}console.log("\ud83d\udd0d Step 6: Logging activity...");try{await D(n.id,{rewardId:m.reward_id,rewardName:m.name,wingsEarned:S,mintNumber:b.mint_number,rarity:m.rarity,category:m.category}),console.log("\u2705 Activity logged")}catch(l){console.warn("\u26a0\ufe0f Failed to log activity (non-critical):",l)}console.log("\ud83d\udd0d Step 7: Awarding stamps...");try{var t;a("qr_scanner")||(await r(),console.log("\u2705 QR Scanner stamp awarded!"));if(["tops","bottoms","outerwear","accessories","shoes"].includes(null===(t=m.category)||void 0===t?void 0:t.toLowerCase())&&!a("first_item")&&(await i(m.category),console.log("\u2705 First Item stamp awarded!")),!a("style_icon"))try{const{data:e,error:t}=await Ah.from("user_closet").select("item_id, rewards(category)").eq("user_id",n.id);if(!t&&e){const t=new Set;e.forEach(e=>{var n;null!==(n=e.rewards)&&void 0!==n&&n.category&&t.add(e.rewards.category.toLowerCase())}),t.size>=3&&(await o(t.size),console.log("\u2705 Style Icon stamp awarded!"))}}catch(d){console.warn("\u26a0\ufe0f Failed to check style categories:",d)}}catch(h){console.warn("\u26a0\ufe0f Failed to award stamps (non-critical):",h)}console.log("\ud83d\udd0d Step 8: Checking referral completion...");try{const e=await s(n.id);e.success&&console.log("\u2705 Referral completed! Referrer earned:",e.referrerReward,"WINGS")}catch(f){console.warn("\u26a0\ufe0f Failed to check referral completion (non-critical):",f)}console.log("\ud83d\udd0d Step 9: Showing reward modal..."),y(Sr(Sr({},m),{},{mintNumber:b.mint_number,wingsEarned:S})),console.log("\u2705 Processing complete!"),navigator.vibrate&&navigator.vibrate([100,50,100])}catch(p){console.error("Scan processing error:",p),setTimeout(()=>{b(p.message),navigator.vibrate&&navigator.vibrate([200,100,200])},200)}finally{setTimeout(()=>{u(!1),_(!1)},200)}}},[n,C,I,A,T,R,N,D]),O=(0,t.useCallback)(async(e,t)=>{console.log("\ud83d\udd0d Scan attempt - Text:",e);try{if(e&&"string"===typeof e&&e.length>0){const t=JSON.parse(e);if(t&&t.rewardId)return console.log("\u2705 Regular QR detected successfully"),void M({text:e,type:"regular"})}}catch(w){console.log("\u274c QR code parsing failed - not a valid Monarch QR code")}},[M]),P=(0,t.useCallback)(async()=>{try{S(null);const r="localhost"===window.location.hostname||window.location.hostname.startsWith("192.168.")||window.location.hostname.startsWith("10.")||window.location.hostname.startsWith("172.");if("https:"!==window.location.protocol&&!r)return void S("Camera requires HTTPS connection. Please use a secure connection.");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void S("Camera API not supported in this browser. Please use a modern browser.");let i,o;try{i=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),i&&i.getTracks().forEach(e=>e.stop())}catch(e){return console.error("Permission error:",e),"NotAllowedError"===e.name?void S("Camera permission denied. Please allow camera access when prompted."):"NotFoundError"===e.name?void S("No camera found. Please ensure your device has a camera."):void S("Failed to access camera. Please check permissions and try again.")}await new Promise(e=>setTimeout(e,200));try{o=await Hu.getCameras()}catch(t){return console.error("Failed to get cameras:",t),void S("Failed to access camera devices. Please check permissions and try again.")}if(!o||0===o.length)return void S("No camera found. Please ensure your device has a camera and permissions are granted.");if(!document.getElementById(E))return console.error("Scanner element not found"),void S("Scanner initialization failed. Please refresh the page.");const a=new Hu(E);x.current=a;const s={fps:10,qrbox:{width:200,height:200},aspectRatio:1,disableFlip:!1,supportedScanTypes:[Jd.SCAN_TYPE_CAMERA]};let l=o[0].id;const c=o.find(e=>{const t=e.label.toLowerCase();return t.includes("back")||t.includes("rear")||t.includes("environment")});c&&(l=c.id);try{await a.start(l,s,(e,t)=>{O(e,t)},e=>{console.log("\ud83d\udce1 Scan attempt in progress...")}),S(null)}catch(n){console.error("Failed to start scanner:",n),S("Failed to start camera. Please try again or refresh the page.")}}catch(r){console.error("Failed to start QR scanner:",r),S("Failed to start camera. Please check permissions and try again.")}},[M,O]);(0,t.useEffect)(()=>(l&&n&&!h&&(f(!0),setTimeout(()=>{P()},100)),()=>{l||j()}),[l,n,h,P]);const j=async()=>{if(x.current){try{await x.current.stop(),x.current.clear()}catch(e){console.warn("Error stopping scanner:",e)}x.current=null}};return n?(0,fr.jsxs)(kh,{children:[!l&&(0,fr.jsxs)(Rh,{children:[(0,fr.jsx)("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:"\ud83c\udfaf"}),(0,fr.jsx)("h2",{style:{marginBottom:"1rem",color:"#fff"},children:"Ready to Scan"}),(0,fr.jsx)("p",{style:{marginBottom:"2.5rem",color:"#ccc",lineHeight:"1.6",fontSize:"1.1rem"},children:"Point your camera at a QR code on a Papillon item to earn rewards"}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,fr.jsx)(Ja,{onClick:async()=>{b(null),S(null),u(!0);try{await(async()=>{try{if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"localhost"!==window.location.hostname)return void S("Camera requires HTTPS. Please access this page via https://");const e=navigator.userAgent||navigator.vendor||window.opera;if(/Instagram|FBAN|FBAV|Twitter|Line|WhatsApp|Snapchat|TikTok|WeChat/i.test(e))return void S("Camera not available in in-app browsers. Please open in your default browser (Chrome, Safari, Firefox).");if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void S("Camera API not supported. Please use Chrome, Safari, or Firefox, and ensure you're not in private/incognito mode.");(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(e=>e.stop()),S(null)}catch(w){if(console.error("Permission request failed:",w),"NotAllowedError"===w.name)S("Camera permission denied. Please allow camera access when prompted.");else if("NotFoundError"===w.name)S("No camera found. Please ensure your device has a camera.");else if("NotSupportedError"===w.name)S("Camera not supported. Please use Chrome, Safari, or Firefox.");else if("OverconstrainedError"===w.name)try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),void S(null)}catch(e){S("Failed to access camera. Please check your device and browser.")}else S("Failed to access camera: ".concat(w.message));c(!1)}})(),setTimeout(()=>{u(!1),c(!0)},300)}catch(w){console.error("Camera permission error:",w),u(!1)}},children:"\ud83d\udcf1 Start Scanning"}),(0,fr.jsx)(Ja,{onClick:()=>e("/"),style:{background:"transparent",borderColor:"#666",color:"#ccc"},children:"Back to Home"})]})]}),l&&(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsxs)("div",{style:{position:"absolute",top:"60px",left:"50%",transform:"translateX(-50%)",zIndex:10,textAlign:"center",color:"#fff"},children:[(0,fr.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700"},children:"Scan a Papillon Item"}),(0,fr.jsx)("p",{style:{margin:"0.5rem 0 0 0",color:"#aaa",fontSize:"1rem"},children:"Point your camera at a QR code to earn rewards"})]}),(0,fr.jsxs)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"#000"},children:[(0,fr.jsx)("div",{id:E,style:{width:"100%",height:"100%"}}),(0,fr.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"250px",height:"250px",pointerEvents:"none",zIndex:5,border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"12px"},children:[(0,fr.jsx)("div",{style:{position:"absolute",top:"-2px",left:"-2px",width:"40px",height:"40px",borderTop:"4px solid #4C1C8C",borderLeft:"4px solid #4C1C8C",borderTopLeftRadius:"12px"}}),(0,fr.jsx)("div",{style:{position:"absolute",top:"-2px",right:"-2px",width:"40px",height:"40px",borderTop:"4px solid #FFB000",borderRight:"4px solid #FFB000",borderTopRightRadius:"12px"}}),(0,fr.jsx)("div",{style:{position:"absolute",bottom:"-2px",left:"-2px",width:"40px",height:"40px",borderBottom:"4px solid #FFB000",borderLeft:"4px solid #FFB000",borderBottomLeftRadius:"12px"}}),(0,fr.jsx)("div",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"40px",height:"40px",borderBottom:"4px solid #4C1C8C",borderRight:"4px solid #4C1C8C",borderBottomRightRadius:"12px"}}),(0,fr.jsx)("div",{style:{position:"absolute",top:"0",left:"0",right:"0",height:"2px",background:"linear-gradient(90deg, transparent, #4C1C8C, transparent)",animation:"scan-line 2s ease-in-out infinite"}})]}),(0,fr.jsx)("style",{children:"\n              @keyframes scan-line {\n                0% { transform: translateY(0); opacity: 1; }\n                50% { transform: translateY(125px); opacity: 0.8; }\n                100% { transform: translateY(250px); opacity: 0; }\n              }\n\n              /* Completely hide default HTML5QRCode styling */\n              #".concat(E," img {\n                display: none !important;\n              }\n              #").concat(E," > div {\n                border: none !important;\n                background: transparent !important;\n              }\n              #").concat(E," canvas {\n                border-radius: 0 !important;\n                border: none !important;\n              }\n              \n              /* Hide ALL default QR scanner UI elements */\n              #").concat(E," > div > div {\n                display: none !important;\n              }\n              #").concat(E," > div > img {\n                display: none !important;\n              }\n              #").concat(E," > div > canvas {\n                display: none !important;\n              }\n              #").concat(E," > div > svg {\n                display: none !important;\n              }\n              #").concat(E," > div:last-child {\n                display: none !important;\n              }\n              \n              /* Only show the video element */\n              #").concat(E," video {\n                width: 100% !important;\n                height: 100% !important;\n                object-fit: cover !important;\n                display: block !important;\n              }\n              \n              /* Hide any white/default overlays */\n              #").concat(E," * {\n                border: none !important;\n                background: transparent !important;\n              }\n              #").concat(E," video {\n                background: black !important;\n              }\n            ")})]}),(0,fr.jsx)("div",{style:{position:"absolute",bottom:"120px",left:"50%",transform:"translateX(-50%)",zIndex:10},children:(0,fr.jsx)(Ja,{onClick:()=>e("/"),style:{background:"rgba(0, 0, 0, 0.7)",borderColor:"#666",color:"#fff",backdropFilter:"blur(10px)"},children:"\u2190 Back"})}),v&&(0,fr.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:15,padding:"2rem",background:"rgba(18, 18, 18, 0.95)",borderRadius:"16px",border:"2px solid rgba(231, 76, 60, 0.4)",textAlign:"center",maxWidth:"90vw",width:"350px",backdropFilter:"blur(20px)"},children:[(0,fr.jsx)("div",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:"\ud83d\udcf1"}),(0,fr.jsx)("h3",{style:{color:"#e74c3c",marginBottom:"1rem",fontSize:"1.2rem"},children:"Camera Access Required"}),(0,fr.jsx)("p",{style:{color:"#ccc",marginBottom:"2rem",fontSize:"1rem",lineHeight:"1.4"},children:v}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,fr.jsx)(Ja,{onClick:()=>{S(null),c(!1),setTimeout(()=>c(!0),100)},style:{background:"#4C1C8C",borderColor:"#4C1C8C"},children:"\ud83d\udd04 Try Again"}),(0,fr.jsx)(Ja,{onClick:()=>e("/"),style:{background:"transparent",borderColor:"#666",color:"#ccc"},children:"\u2190 Go Back"})]})]})]}),w&&(0,fr.jsxs)(jh,{children:[(0,fr.jsx)("h3",{style:{color:"#e74c3c",marginBottom:"1rem"},children:"Scan Failed"}),(0,fr.jsx)("p",{style:{marginBottom:"1.5rem"},children:w}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,fr.jsx)(Ja,{onClick:()=>{b(null),S(null),c(!0)},children:"Try Again"}),(0,fr.jsx)(Ja,{onClick:()=>e("/"),children:"Go Home"})]})]}),d&&(0,fr.jsx)(Nh,{children:(0,fr.jsxs)(Rh,{children:[(0,fr.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\u23f3"}),(0,fr.jsx)("h3",{children:"Processing your reward..."})]})}),m&&(0,fr.jsx)(Hh,{reward:m,onClose:()=>y(null),onShowInCloset:()=>{y(null),e("/closet")},user:n})]}):(0,fr.jsx)(kh,{children:(0,fr.jsxs)(Rh,{children:[(0,fr.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"Please log in to scan rewards"}),(0,fr.jsx)(Ja,{onClick:()=>e("/login"),children:"Go to Login"})]})})},Vh={theme_frequency_pulse:"frequencyPulse",theme_solar_shine:"solarShine",theme_echo_glass:"echoGlass",theme_retro_frame:"retroFrame",theme_night_scan:"nightScan"},Gh=()=>{const{user:e}=Ra(),[n,r]=(0,t.useState)(["frequencyPulse"]),[i,o]=(0,t.useState)("frequencyPulse"),[a,s]=(0,t.useState)(!0);(0,t.useEffect)(()=>{e?l():s(!1)},[e]);const l=async()=>{try{const{data:t}=await cs.from("user_closet").select("reward_id").eq("user_id",e.id).like("reward_id","theme_%"),{data:n}=await cs.from("user_equipped_theme").select("theme_key").eq("user_id",e.id).single(),i=["frequencyPulse"];t&&t.forEach(e=>{const t=Vh[e.reward_id];t&&!i.includes(t)&&i.push(t)}),r(i),o((null===n||void 0===n?void 0:n.theme_key)||"frequencyPulse")}catch(t){console.error("Error loading themes:",t)}finally{s(!1)}};return{ownedThemes:n,equippedTheme:i,loading:a,equipTheme:async t=>{if(!e||!n.includes(t))return!1;try{const{error:n}=await cs.from("user_equipped_theme").upsert({user_id:e.id,theme_key:t,updated_at:(new Date).toISOString()});if(n)throw n;return o(t),!0}catch(r){return console.error("Error equipping theme:",r),!1}},checkThemeOwnership:e=>n.includes(e),refreshThemes:l}};var Yh,Xh,Zh,qh,Qh,Jh,Kh,$h,ef,tf,nf,rf,of,af,sf,lf,cf,df,uf,hf,ff,pf,gf,mf,yf,wf,bf,vf,Sf,Cf;const _f=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),xf={"Spring Jacket":{obtained:"Scanned QR at Papillon Flagship Store",date:"March 15, 2025",location:"SoHo, NYC",season:"Spring 2025"},"Gold Chain":{obtained:"Scanned QR at Papillon Pop-up Store",date:"March 12, 2025",location:"Times Square, NYC",season:"Spring 2025"},"Summer Hat":{obtained:"Scanned QR at Papillon Beach Event",date:"March 10, 2025",location:"Montauk, NY",season:"Summer 2025"},"Classic Hoodie":{obtained:"Scanned QR at Papillon Street Event",date:"March 8, 2025",location:"Brooklyn, NYC",season:"Classic Collection"},"Denim Jeans":{obtained:"Scanned QR at Papillon Denim Launch",date:"March 5, 2025",location:"LES, NYC",season:"Spring 2025"},"Long Sleeve Tee":{obtained:"Scanned QR at Papillon Essential Drop",date:"March 1, 2025",location:"Papillon Studio",season:"Classic Collection"},"Butterfly Wallpaper":{obtained:"Community Event Reward",date:"March 22, 2025",location:"Digital Drop",season:"Genesis Collection"}},Ef=[{id:1,item_type:"physical_item",item_id:"spring-jacket-001",name:"Spring Jacket",rarity:"rare",category:"jackets",mint_number:37,wings_earned:75,earned_date:"2025-03-15",earned_via:"qr_scan"},{id:2,item_type:"physical_item",item_id:"gold-chain-001",name:"Gold Chain",rarity:"epic",category:"accessories",mint_number:3,wings_earned:150,earned_date:"2025-03-12",earned_via:"qr_scan"},{id:3,item_type:"physical_item",item_id:"summer-hat-001",name:"Summer Hat",rarity:"common",category:"headwear",mint_number:21,wings_earned:15,earned_date:"2025-03-10",earned_via:"qr_scan"},{id:4,item_type:"physical_item",item_id:"classic-hoodie-001",name:"Classic Hoodie",rarity:"rare",category:"tops",mint_number:89,wings_earned:75,earned_date:"2025-03-08",earned_via:"qr_scan"},{id:5,item_type:"physical_item",item_id:"denim-jeans-001",name:"Denim Jeans",rarity:"rare",category:"bottoms",mint_number:156,wings_earned:75,earned_date:"2025-03-05",earned_via:"qr_scan"},{id:6,item_type:"physical_item",item_id:"long-sleeve-tee-001",name:"Long Sleeve Tee",rarity:"common",category:"tops",mint_number:203,wings_earned:15,earned_date:"2025-03-01",earned_via:"qr_scan"},{id:9,item_type:"digital_collectible",item_id:"butterfly-wallpaper-001",name:"Butterfly Wallpaper",rarity:"epic",category:"wallpapers",mint_number:12,wings_earned:150,earned_date:"2025-03-22",earned_via:"achievement",file_type:"image",file_url:"https://example.com/wallpaper.jpg"}],If={frequencyPulse:{name:"Frequency Pulse",description:"The default theme - available to all users",requirements:["Sign up for Monarch Passport"],unlocked:!0,icon:"\ud83c\udf0a",rarity:"common"},solarShine:{name:"Solar Shine",description:"Bright golden energy theme",requirements:["Scan 10 QR codes","Earn 100 WNGS"],unlocked:!1,icon:"\u2600\ufe0f",rarity:"rare"},echoGlass:{name:"Echo Glass",description:"Mysterious dark glass theme",requirements:["Complete 5 daily quests","Reach level 5"],unlocked:!1,icon:"\ud83c\udf11",rarity:"epic"},retroFrame:{name:"Retro Frame",description:"Classic vintage aesthetic",requirements:["Collect 3 physical items","Join community event"],unlocked:!1,icon:"\ud83d\udcfc",rarity:"rare"},nightScan:{name:"Night Scan",description:"Elite scanner theme for night owls",requirements:["Scan QR code after midnight","Earn 500 WNGS","Complete weekly challenge"],unlocked:!1,icon:"\ud83c\udf19",rarity:"legendary"}},Af=dr.div(Yh||(Yh=o(["\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 2rem 1rem 6rem 1rem;\n  min-height: 100vh;\n"]))),Tf=dr.h1(Xh||(Xh=o(["\n  font-family: ",";\n  font-weight: 700;\n  color: ",";\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),kf=dr.div(Zh||(Zh=o(["\n  display: flex;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  justify-content: center;\n"]))),Rf=dr.div(qh||(qh=o(["\n  display: flex;\n  gap: 0.8rem;\n  margin-bottom: 2rem;\n  overflow-x: auto;\n  padding-bottom: 0.5rem;\n  position: relative;\n  top: 3x;\n  \n  &::-webkit-scrollbar {\n    height: 4px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 2px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: ",";\n    border-radius: 2px;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.purple}),Nf=dr.button(Qh||(Qh=o(["\n  padding: 0.5rem 2rem;\n  border-radius: 12px;\n  border: 2px solid ",";\n  background: ",";\n  color: ",";\n  font-weight: ",";\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  min-width: fit-content;\n  \n  &:hover {\n    background: ",";\n    transform: translateY(-1px);\n  }\n"])),e=>{let{active:t,theme:n}=e;return t?n.colors.accent.gold:"transparent"},e=>{let{active:t,theme:n,type:r}=e;return t?"main"===r?n.colors.accent.gold:n.colors.accent.purple:"rgba(255, 255, 255, 0.05)"},e=>{let{active:t,theme:n}=e;return t?"#000000"===n.colors.background?"#000000":n.colors.text.primary:n.colors.text.secondary},e=>{let{active:t}=e;return t?"600":"500"},e=>{let{active:t,theme:n,type:r}=e;return t?null:"main"===r?"rgba(255, 176, 0, 0.1)":"rgba(76, 28, 140, 0.1)"}),Df=dr.div(Jh||(Jh=o(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n"]))),Mf=dr(Xa)(Kh||(Kh=o(["\n  padding: 1.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 12px 0 ",",\n    0 0 24px 0 ",",\n    inset 0 1px 0 ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 ",",\n      0 0 40px 0 ",",\n      inset 0 1px 0 ",";\n  }\n"])),e=>{let{rarity:t,theme:n}=e;switch(t){case"legendary":return n.colors.accent.gold;case"epic":return"#9B4BFF";case"rare":return"#4B9CD3";default:return n.colors.accent.purple}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.15)";case"epic":return"rgba(155,75,255,0.15)";case"rare":return"rgba(75,156,211,0.15)";default:return"rgba(76,28,140,0.15)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.08)";case"epic":return"rgba(155,75,255,0.08)";case"rare":return"rgba(75,156,211,0.08)";default:return"rgba(76,28,140,0.08)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.1)";case"epic":return"rgba(155,75,255,0.1)";case"rare":return"rgba(75,156,211,0.1)";default:return"rgba(76,28,140,0.1)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.3)";case"epic":return"rgba(155,75,255,0.3)";case"rare":return"rgba(75,156,211,0.3)";default:return"rgba(76,28,140,0.3)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.15)";case"epic":return"rgba(155,75,255,0.15)";case"rare":return"rgba(75,156,211,0.15)";default:return"rgba(76,28,140,0.15)"}},e=>{let{rarity:t}=e;switch(t){case"legendary":return"rgba(255,215,0,0.2)";case"epic":return"rgba(155,75,255,0.2)";case"rare":return"rgba(75,156,211,0.2)";default:return"rgba(76,28,140,0.2)"}}),Of=dr.div($h||($h=o(["\n  width: 100%;\n  aspect-ratio: 1;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  overflow: hidden;\n  position: relative;\n"]))),Pf=dr.video(ef||(ef=o(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  border-radius: 12px;\n"]))),jf=dr.h3(tf||(tf=o(["\n  font-family: ",";\n  font-size: 1.1rem;\n  color: ",";\n  margin: 0 0 0.5rem 0;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),Bf=dr.div(nf||(nf=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.9rem;\n  color: ",";\n  margin-bottom: 0.5rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Lf=dr.div(rf||(rf=o(["\n  font-size: 0.8rem;\n  color: ",";\n  text-transform: capitalize;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Ff=dr.span(of||(of=o(["\n  color: ",";\n  font-weight: 600;\n  text-transform: capitalize;\n"])),e=>{let{rarity:t,theme:n}=e;switch(t){case"legendary":return n.colors.accent.gold;case"epic":return"#9B4BFF";case"rare":return"#4B9CD3";default:return n.colors.accent.purple}}),zf=dr.div(af||(af=o(["\n  text-align: center;\n  padding: 3rem;\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Uf=dr.div(sf||(sf=o(["\n  display: flex;\n  gap: 2rem;\n  justify-content: center;\n  margin-bottom: 2rem;\n  color: ",";\n  font-size: 0.9rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Hf=dr.div(lf||(lf=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.3);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 24px;\n"]))),Wf=dr.div(cf||(cf=o(["\n  width: 420px;\n  max-width: 90vw;\n  height: 600px;\n  max-height: 90vh;\n  perspective: 1200px;\n  background: none;\n  border-radius: 24px;\n  @media (max-width: 480px) {\n    width: 95vw;\n    height: 520px;\n    min-width: 0;\n    padding: 0;\n  }\n"]))),Vf=dr.div(df||(df=o(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  transition: transform 0.7s cubic-bezier(0.4,0.2,0.2,1);\n  transform-style: preserve-3d;\n  ","\n"])),e=>{let{isflipped:t}=e;return t&&"transform: rotateY(180deg);"}),Gf=dr.div(uf||(uf=o(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  backface-visibility: hidden;\n  border-radius: 24px;\n  background: linear-gradient(135deg, rgba(30,30,40,0.85) 0%, rgba(76,28,140,0.13) 100%), rgba(76, 28, 140, 0.15);\n  border: 3px solid #FFD700;\n  box-shadow: \n    0 0 20px 0 rgba(255,215,0,0.2),\n    0 0 40px 0 rgba(255,215,0,0.1),\n    inset 0 1px 0 rgba(255,215,0,0.15);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 2rem 2rem 2rem;\n"]))),Yf=dr(Gf)(hf||(hf=o([""]))),Xf=dr(Gf)(ff||(ff=o(["\n  transform: rotateY(180deg);\n"]))),Zf=dr.button(pf||(pf=o(["\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  background: none;\n  border: none;\n  color: white;\n  font-size: 24px;\n  cursor: pointer;\n  z-index: 1;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),qf=dr.div(gf||(gf=o(["\n  font-size: 6rem;\n  margin-bottom: 2rem;\n"]))),Qf=dr.video(mf||(mf=o(["\n  width: 200px;\n  height: 200px;\n  object-fit: cover;\n  border-radius: 16px;\n  margin-bottom: 2rem;\n"]))),Jf=dr.h2(yf||(yf=o(["\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: ",";\n  margin-bottom: 1rem;\n  text-align: center;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),Kf=dr.div(wf||(wf=o(["\n  font-size: 1.1rem;\n  color: #FFD700;\n  margin-top: 2rem;\n  text-align: center;\n"]))),$f=dr.div(bf||(bf=o(["\n  margin-top: 0.8rem;\n  color: ",";\n  font-size: 1.2rem;\n  text-align: center;\n  line-height: 1.6;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),ep=dr.span(vf||(vf=o(["\n  color: #FFD700;\n  font-weight: 600;\n"]))),tp=dr.div(Sf||(Sf=o(["\n  margin-top: 1rem;\n  color: ",";\n  font-size: 1.1rem;\n  text-align: center;\n  line-height: 1.8;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),np=(dr.div(Cf||(Cf=o(["\n  font-size: 1rem;\n  color: ",";\n  margin-top: 1rem;\n  text-align: center;\n  line-height: 1.6;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),e=>{let{item:n,isOpen:r,onClose:i}=e;const{equipTheme:o}=Gh(),[a,s]=(0,t.useState)(!1);if(!r||!n)return null;const l=xf[n.name]||{obtained:"Scanned QR at Papillon Store",date:"March 2025",location:"NYC",season:"Spring 2025"},c=n.preview_mp4&&"3d_model"===n.file_type;return(0,fr.jsxs)(Hf,{onClick:e=>{e.target===e.currentTarget&&i()},children:[(0,fr.jsx)(Zf,{onClick:i,"aria-label":"Close",children:"\xd7"}),(0,fr.jsx)(Wf,{onClick:e=>e.stopPropagation(),children:(0,fr.jsxs)(Vf,{isflipped:a,children:[(0,fr.jsxs)(Yf,{onClick:()=>s(!0),style:"themes"===n.category?{background:n.gradient}:{},children:[c?(0,fr.jsx)(Qf,{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:n.preview_mp4}):(0,fr.jsxs)(qf,{style:{position:"relative"},children:[rp(n.category,n.item_type,n),"themes"===n.category&&!n.unlocked&&(0,fr.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"2rem",color:"#fff",textShadow:"0 0 8px rgba(0,0,0,0.8)"},children:"\ud83d\udd12"})]}),(0,fr.jsx)(Jf,{children:n.name}),(0,fr.jsxs)($f,{children:[n.rarity.charAt(0).toUpperCase()+n.rarity.slice(1)," \u2022 ","physical_item"===n.item_type?"Physical":"Digital"]}),"themes"===n.category?(0,fr.jsx)(tp,{children:n.description}):(0,fr.jsxs)($f,{children:["#",n.mint_number]}),"themes"===n.category&&n.unlocked&&!n.equipped&&(0,fr.jsx)("button",{onClick:e=>{e.stopPropagation(),"themes"===n.category&&n.unlocked&&(o(n.item_id),i())},style:{background:"#FFD700",color:"#000",border:"none",borderRadius:"12px",padding:"12px 24px",fontWeight:"bold",marginTop:"1rem",cursor:"pointer"},children:"Equip Theme"}),"themes"===n.category&&n.equipped&&(0,fr.jsx)("div",{style:{color:"#FFD700",marginTop:"1rem",fontWeight:"bold"},children:"\u2713 Currently Equipped"}),(0,fr.jsx)(Kf,{children:"Tap to flip"})]}),(0,fr.jsxs)(Xf,{onClick:()=>s(!1),children:["themes"===n.category?(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Jf,{children:"Unlock Requirements"}),(0,fr.jsx)($f,{children:(0,fr.jsx)("div",{style:{textAlign:"left",lineHeight:"2"},children:(n.requirements||[]).map((e,t)=>(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",color:n.unlocked?"#10B981":"#fff"},children:[(0,fr.jsx)("span",{style:{marginRight:"12px",fontSize:"1.2rem"},children:n.unlocked?"\u2705":"\u2b55"}),e]},t))})}),!n.unlocked&&(0,fr.jsx)(tp,{style:{color:"#ff6b6b",marginTop:"1rem"},children:"Complete the requirements above to unlock this theme!"})]}):(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)(Jf,{children:"How You Earned This"}),(0,fr.jsxs)($f,{children:[(0,fr.jsxs)("div",{children:[(0,fr.jsx)(ep,{children:"Obtained:"})," ",l.obtained]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)(ep,{children:"Date:"})," ",l.date]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)(ep,{children:"Location:"})," ",l.location]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)(ep,{children:"Season:"})," ",l.season]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)(ep,{children:"WNGS:"})," +",n.wings_earned]})]})]}),(0,fr.jsx)(Kf,{children:"Tap to flip back"})]})]})})]})}),rp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={wallpapers:"\ud83d\uddbc\ufe0f",tickets:"\ud83c\udf9f\ufe0f",posters:"\ud83d\uddbc\ufe0f",themes:"\ud83c\udfa8"};return"physical_item"===t?{jackets:"\ud83e\udde5",tops:"\ud83d\udc55",bottoms:"\ud83d\udc56",headwear:"\ud83e\udde2",accessories:"\u26d3\ufe0f",footwear:"\ud83d\udc5f"}[e]||"\ud83d\udc55":"themes"===e&&null!==n&&void 0!==n&&n.icon?n.icon:r[e]||"\ud83d\udc8e"},ip=e=>({wallpapers:"Wallpapers",themes:"Themes",jackets:"Jackets",tops:"Tops",bottoms:"Bottoms",headwear:"Headwear",accessories:"Accessories",footwear:"Footwear",tickets:"Tickets",posters:"Posters"}[e]||e.charAt(0).toUpperCase()+e.slice(1)),op=()=>{const{ownedThemes:e,equippedTheme:n,equipTheme:r,checkThemeOwnership:i}=Gh(),[o,a]=(0,t.useState)("all"),[s,l]=(0,t.useState)("all"),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(!0),[f,p]=(0,t.useState)(null),[g,m]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{console.log("Getting current user...");const e=new Promise((e,t)=>setTimeout(()=>t(new Error("Auth timeout")),3e3)),t=_f.auth.getUser(),{data:{user:n}}=await Promise.race([t,e]);console.log("User auth result:",n?"Authenticated":"Not authenticated"),p(n),n?await y(n.id):(console.log("No authenticated user, using mock data"),d(Ef),h(!1))}catch(e){console.error("Error getting user:",e),console.log("Auth error, falling back to mock data"),d(Ef),h(!1)}})()},[]);const y=async e=>{try{h(!0),console.log("Loading items for user:",e);const t=new Promise((e,t)=>setTimeout(()=>t(new Error("Database query timeout")),5e3)),n=_f.from("user_closet").select("*").eq("user_id",e).order("earned_date",{ascending:!1}),{data:r,error:i}=await Promise.race([n,t]);if(i)throw console.error("Database error:",i),i;console.log("Database query successful, items found:",(null===r||void 0===r?void 0:r.length)||0),r&&0!==r.length?(console.log("Using database items"),d(r)):(console.log("No items in database, using mock data"),d(Ef))}catch(t){console.error("Error loading closet items:",t),console.log("Falling back to mock data"),d(Ef)}finally{h(!1)}},w=[...c,...Object.entries(Nr).map((e,t)=>{var r,o,a,s;let[l,c]=e;return{id:"theme-".concat(l),item_type:"digital_collectible",item_id:l,name:c.name,rarity:(null===(r=If[l])||void 0===r?void 0:r.rarity)||"common",category:"themes",gradient:c.gradient,icon:(null===(o=If[l])||void 0===o?void 0:o.icon)||"\ud83c\udfa8",description:(null===(a=If[l])||void 0===a?void 0:a.description)||"",requirements:(null===(s=If[l])||void 0===s?void 0:s.requirements)||[],unlocked:i(l),equipped:n===l,earned_date:"2025-03-01",earned_via:"unlock",wings_earned:0}})],b=w.filter(e=>("physical"!==o||"physical_item"===e.item_type)&&(("digital"!==o||"digital_collectible"===e.item_type)&&("all"===s||e.category===s))),v={total:w.length,physical:w.filter(e=>"physical_item"===e.item_type).length,digital:w.filter(e=>"digital_collectible"===e.item_type).length,legendary:w.filter(e=>"legendary"===e.rarity).length,epic:w.filter(e=>"epic"===e.rarity).length};return u?(0,fr.jsxs)(Af,{children:[(0,fr.jsx)(Tf,{children:"My Closet"}),(0,fr.jsx)("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading your collection..."})]}):(0,fr.jsxs)(Af,{children:[(0,fr.jsx)(Tf,{children:"My Closet"}),(0,fr.jsxs)(Uf,{children:[(0,fr.jsxs)("div",{children:["Total: ",v.total]}),(0,fr.jsxs)("div",{children:["Physical: ",v.physical]}),(0,fr.jsxs)("div",{children:["Digital: ",v.digital]}),(0,fr.jsxs)("div",{children:["Legendary: ",v.legendary]}),(0,fr.jsxs)("div",{children:["Epic: ",v.epic]})]}),(0,fr.jsxs)(kf,{children:[(0,fr.jsx)(Nf,{type:"main",active:"all"===o,onClick:()=>{a("all"),l("all")},children:"All Items"}),(0,fr.jsx)(Nf,{type:"main",active:"physical"===o,onClick:()=>{a("physical"),l("all")},children:"Physical"}),(0,fr.jsx)(Nf,{type:"main",active:"digital"===o,onClick:()=>{a("digital"),l("all")},children:"Digital"})]}),(0,fr.jsxs)(Rf,{children:[(0,fr.jsx)(Nf,{type:"sub",active:"all"===s,onClick:()=>l("all"),children:"All Categories"}),[...new Set(w.filter(e=>"physical"===o?"physical_item"===e.item_type:"digital"!==o||"digital_collectible"===e.item_type).map(e=>e.category))].sort().map(e=>(0,fr.jsx)(Nf,{type:"sub",active:s===e,onClick:()=>l(e),children:ip(e)},e))]}),b.length>0?(0,fr.jsx)(Df,{children:b.map(e=>(0,fr.jsxs)(Mf,{rarity:e.rarity,onClick:()=>m(e),style:"themes"===e.category?{background:e.gradient,border:e.equipped?"3px solid #FFD700":"3px solid rgba(255, 255, 255, 0.2)",opacity:e.unlocked?1:.6}:{},children:[(0,fr.jsx)(Of,{children:e.preview_mp4&&"3d_model"===e.file_type?(0,fr.jsx)(Pf,{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,src:e.preview_mp4}):(0,fr.jsxs)("div",{style:{fontSize:(e.category,"3rem"),position:"relative"},children:[rp(e.category,e.item_type,e),"themes"===e.category&&!e.unlocked&&(0,fr.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"1.5rem",color:"#fff",textShadow:"0 0 4px rgba(0,0,0,0.8)"},children:"\ud83d\udd12"}),"themes"===e.category&&e.equipped&&(0,fr.jsx)("div",{style:{position:"absolute",top:"-10px",right:"-10px",fontSize:"1rem",color:"#FFD700"},children:"\u2713"})]})}),(0,fr.jsx)(jf,{children:e.name}),(0,fr.jsxs)(Bf,{children:[(0,fr.jsx)(Ff,{rarity:e.rarity,children:e.rarity}),e.mint_number&&(0,fr.jsxs)("span",{children:["#",e.mint_number]}),"themes"===e.category&&e.equipped&&(0,fr.jsx)("span",{style:{color:"#FFD700"},children:"\u2713 Equipped"}),"themes"===e.category&&!e.unlocked&&(0,fr.jsx)("span",{style:{color:"#ff6b6b"},children:"\ud83d\udd12 Locked"})]}),(0,fr.jsxs)(Lf,{children:["physical_item"===e.item_type?"\ud83d\udc55 Physical":"\ud83d\udc8e Digital"," \u2022 ",ip(e.category)]})]},e.id))}):(0,fr.jsx)(zf,{children:"all"===o?"Your closet is empty. Start scanning QR codes to collect items!":"No ".concat(o," items found. Try scanning more QR codes or check other categories.")}),(0,fr.jsx)(np,{item:g,isOpen:!!g,onClose:()=>m(null)})]})};var ap,sp,lp,cp,dp,up,hp,fp,pp,gp,mp,yp,wp,bp,vp,Sp,Cp,_p;const xp=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Ep=dr.div(ap||(ap=o(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.8);\n  backdrop-filter: blur(20px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n  \n  /* Ensure the overlay is clickable */\n  pointer-events: auto;\n"]))),Ip=dr(Xa)(sp||(sp=o(["\n  max-width: 500px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  pointer-events: auto;\n"]))),Ap=dr.div(lp||(lp=o(["\n  padding: 32px 32px 24px 32px;\n  border-bottom: 3px solid ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),Tp=dr.h2(cp||(cp=o(["\n  font-family: ",";\n  color: ",";\n  margin: 0 0 24px 0;\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontSize.h2},e=>{let{theme:t}=e;return t.typography.fontWeight.bold}),kp=dr.div(dp||(dp=o(["\n  display: flex;\n  gap: 18px;\n  flex-wrap: wrap;\n"]))),Rp=dr.button(up||(up=o(["\n  padding: 12px 20px;\n  border: 3px solid ",";\n  background: ",";\n  color: ",";\n  border-radius: 20px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n  cursor: pointer;\n  transition: all "," ",";\n\n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n"])),e=>{let{$active:t,theme:n}=e;return n.colors.accent.gold},e=>{let{$active:t,theme:n}=e;return t?n.colors.accent.gold:"transparent"},e=>{let{$active:t,theme:n}=e;return t?n.colors.background:n.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.typography.fontSize.small},e=>{let{theme:t}=e;return t.typography.fontWeight.medium},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.effects.neonGlow}),Np=dr.div(hp||(hp=o(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 32px 32px 32px;\n"]))),Dp=dr.div(fp||(fp=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),Mp=dr.div(pp||(pp=o(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.effects.neonGlow}),Op=dr.div(gp||(gp=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{$type:t,theme:n}=e;switch(t){case"scan":default:return n.colors.accent.purple;case"quest":return n.colors.accent.gold;case"event":return n.colors.accent.pink;case"daily":return n.colors.accent.green;case"referral":return n.colors.accent.cyan}}),Pp=dr.div(mp||(mp=o(["\n  flex: 1;\n"]))),jp=dr.div(yp||(yp=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.body}),Bp=dr.div(wp||(wp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.small}),Lp=dr.div(bp||(bp=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),Fp=dr.div(vp||(vp=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),zp=dr.div(Sp||(Sp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),Up=dr.div(Cp||(Cp=o(["\n  text-align: center;\n  padding: 64px 32px;\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.body}),Hp=dr.button(_p||(_p=o(["\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: transparent;\n  border: 3px solid ",";\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all "," ",";\n  z-index: 10;\n\n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.background}),Wp=[{key:"all",label:"All",icon:"\ud83d\udccb"},{key:"scan",label:"Scans",icon:"\ud83d\udcf1"},{key:"quest",label:"Quests",icon:"\ud83d\udde1\ufe0f"},{key:"event",label:"Events",icon:"\ud83c\udf89"},{key:"daily",label:"Dailies",icon:"\ud83d\udcc5"},{key:"referral",label:"Referrals",icon:"\ud83d\udc65"}],Vp=e=>{let{isOpen:n,onClose:r}=e;const{user:i}=Ra(),[o,a]=(0,t.useState)([]),[s,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)("all"),[u,h]=(0,t.useState)([]),f=(0,t.useRef)(!1),p=(0,t.useRef)(!1);(0,t.useEffect)(()=>{if(n&&i&&!f.current)g();else if(n&&i&&f.current&&0===u.length)console.log("\ud83d\udd04 Modal opened but no activities, retrying..."),f.current=!1,g();else if(n&&!i){console.log("\ud83d\udc64 No user, showing mock data immediately");const e=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()}];h(e),l(!1)}},[n,i]),(0,t.useEffect)(()=>{u.length>0&&m()},[c,u]),(0,t.useEffect)(()=>{n||(f.current=!1,p.current=!1,h([]),a([]),d("all"))},[n]);const g=(0,t.useCallback)(async()=>{if(p.current)console.log("\ud83d\udd04 Already processing activities, skipping");else{console.log("\ud83d\ude80 Starting fetchAllActivities..."),p.current=!0,l(!0);try{console.log("\ud83d\udd0d Fetching all activities for user:",i.id),console.log("\ud83d\udd0d Supabase configured, attempting database query...");const{data:e,error:t}=await xp.from("user_activity").select("*").eq("user_id",i.id).order("activity_date",{ascending:!1}).limit(50);if(t)throw t;if(e&&0!==e.length)console.log("\u2705 Database activities loaded:",e.length),h(e),f.current=!0;else{console.log("\ud83d\udcca No database data, using mock activities");const e=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()},{id:3,activity_type:"daily",activity_title:"Daily Login Bonus",activity_description:"Claimed daily login reward",wings_earned:35,activity_date:new Date(Date.now()-864e5).toISOString()},{id:4,activity_type:"referral",activity_title:"Friend Joined",activity_description:"Your friend Alex joined using your referral code",wings_earned:150,activity_date:new Date(Date.now()-1728e5).toISOString()},{id:5,activity_type:"event",activity_title:"Special Event Participation",activity_description:'Participated in "Weekend Warrior" event',wings_earned:150,activity_date:new Date(Date.now()-2592e5).toISOString()},{id:6,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Retail Store Plaza",wings_earned:35,activity_date:new Date(Date.now()-3456e5).toISOString()},{id:7,activity_type:"quest",activity_title:"Weekly Quest Completed",activity_description:'Completed "Explorer Challenge" - visited 5 locations',wings_earned:150,activity_date:new Date(Date.now()-432e6).toISOString()},{id:8,activity_type:"daily",activity_title:"Streak Bonus",activity_description:"7-day login streak achieved!",wings_earned:75,activity_date:new Date(Date.now()-6048e5).toISOString()}];h(e),f.current=!0}}catch(e){console.error("\u274c Error fetching activities:",e),console.log("\ud83d\udd04 Falling back to mock data due to error");const t=[{id:1,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Coffee Shop Downtown",wings_earned:35,activity_date:new Date(Date.now()-72e5).toISOString()},{id:2,activity_type:"quest",activity_title:"Daily Quest Completed",activity_description:'Completed "Morning Scan Challenge"',wings_earned:75,activity_date:new Date(Date.now()-216e5).toISOString()},{id:3,activity_type:"daily",activity_title:"Daily Login Bonus",activity_description:"Claimed daily login reward",wings_earned:35,activity_date:new Date(Date.now()-864e5).toISOString()},{id:4,activity_type:"referral",activity_title:"Friend Joined",activity_description:"Your friend Alex joined using your referral code",wings_earned:150,activity_date:new Date(Date.now()-1728e5).toISOString()},{id:5,activity_type:"event",activity_title:"Special Event Participation",activity_description:'Participated in "Weekend Warrior" event',wings_earned:150,activity_date:new Date(Date.now()-2592e5).toISOString()},{id:6,activity_type:"scan",activity_title:"QR Code Scanned",activity_description:"Scanned QR code at Retail Store Plaza",wings_earned:35,activity_date:new Date(Date.now()-3456e5).toISOString()}];console.log("\ud83d\udcca Setting mock activities:",t.length),h(t),f.current=!0}finally{console.log("\u2705 fetchAllActivities completed, setting loading to false"),l(!1),p.current=!1}}},[i]),m=(0,t.useCallback)(()=>{if(0===u.length)return;console.log("\ud83d\udd0d Filtering activities for:",c);const e="all"===c?u:u.filter(e=>e.activity_type===c);a(e)},[c,u]),y=e=>{const t=new Date(e),n=(new Date-t)/36e5;return n<1?"Just now":n<24?"".concat(Math.floor(n),"h ago"):n<168?"".concat(Math.floor(n/24),"d ago"):t.toLocaleDateString()},w=e=>{const t=Wp.find(t=>t.key===e);return(null===t||void 0===t?void 0:t.icon)||"\ud83d\udccb"};return n?(0,fr.jsx)(Ep,{onClick:r,children:(0,fr.jsxs)(Ip,{onClick:e=>e.stopPropagation(),children:[(0,fr.jsx)(Hp,{onClick:e=>{e.stopPropagation(),r()},children:"\xd7"}),(0,fr.jsxs)(Ap,{children:[(0,fr.jsx)(Tp,{children:"Recent Activity"}),(0,fr.jsx)(kp,{children:Wp.map(e=>(0,fr.jsxs)(Rp,{$active:c===e.key,onClick:()=>d(e.key),children:[e.icon," ",e.label]},e.key))})]}),(0,fr.jsx)(Np,{children:s?(0,fr.jsx)(Up,{children:"Loading activities..."}):0===o.length?(0,fr.jsx)(Up,{children:"all"===c?"No activity yet. Start scanning QR codes to earn rewards!":"No ".concat(c," activities yet.")}):(0,fr.jsx)(Dp,{children:o.map(e=>(0,fr.jsxs)(Mp,{children:[(0,fr.jsx)(Op,{$type:e.activity_type,children:w(e.activity_type)}),(0,fr.jsxs)(Pp,{children:[(0,fr.jsx)(jp,{children:e.activity_title}),e.activity_description&&(0,fr.jsx)(Bp,{children:e.activity_description})]}),(0,fr.jsxs)(Lp,{children:[e.wings_earned>0&&(0,fr.jsxs)(Fp,{children:["+",e.wings_earned," WNGS"]}),(0,fr.jsx)(zp,{children:y(e.activity_date)})]})]},e.id))})})]})}):null};var Gp,Yp,Xp,Zp,qp,Qp,Jp,Kp,$p,eg,tg,ng,rg,ig,og,ag,sg,lg,cg,dg,ug,hg,fg,pg,gg,mg,yg,wg,bg,vg,Sg,Cg,_g,xg,Eg,Ig,Ag,Tg,kg,Rg,Ng,Dg,Mg,Og,Pg,jg;const Bg=dr.div(Gp||(Gp=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 8px 100px 8px;\n  @media (min-width: 900px) {\n    padding: 48px 0 120px 0;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.background}),Lg=dr.div(Yp||(Yp=o(["\n  display: flex;\n  flex-direction: row;\n  gap: 24px;\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto 32px auto;\n"]))),Fg="#FFD700",zg=dr(Xa)(Xp||(Xp=o(["\n  flex: 1;\n  width: 50%;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 32px 0 24px 0;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  cursor: pointer;\n  transition: box-shadow 0.2s, transform 0.2s;\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),Fg),Ug=dr.div(Zp||(Zp=o(["\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.8rem;\n  color: #fff;\n  box-shadow: 0 0 16px 0 #7F3FBF88;\n  margin-bottom: 16px;\n  border: 2.5px solid ",";\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.accent}),Hg=dr.div(qp||(qp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.3rem;\n  font-weight: 700;\n  margin-bottom: 4px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),Wg=dr(Xa)(Qp||(Qp=o(["\n  flex: 1;\n  width: 50%;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  padding: 32px 0 24px 0;\n  transition: box-shadow 0.2s, transform 0.2s;\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),Fg),Vg=dr.div(Jp||(Jp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.3rem;\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent}),Gg=dr.div(Kp||(Kp=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 2.5rem;\n  font-weight: bold;\n  letter-spacing: 2px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.secondary}),Yg=dr(Xa)($p||($p=o(["\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto 32px auto;\n  padding: 32px 32px 24px 32px;\n  border: 2.5px solid ",";\n  box-shadow: 0 0 8px 0 rgba(255,215,0,0.10);\n  transition: box-shadow 0.2s, transform 0.2s;\n  @media (max-width: 600px) {\n    padding: 20px 8px 16px 8px;\n  }\n  &:hover, &:focus {\n    box-shadow: 0 0 16px 0 rgba(255,215,0,0.25);\n    transform: translateY(-2px) scale(1.02);\n    outline: none;\n  }\n"])),Fg),Xg=dr.h2(eg||(eg=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 1.5rem;\n  margin-bottom: 24px;\n  text-align: center;\n  letter-spacing: 1px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary}),Zg=(dr.div(tg||(tg=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.green},e=>{let{theme:t}=e;return t.typography.fontSize.body},e=>{let{theme:t}=e;return t.typography.fontWeight.bold}),dr.div(ng||(ng=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.body}),dr(Yg)(rg||(rg=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 0;\n"]))),dr.div(ig||(ig=o(["\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  height: 24px;\n  margin-bottom: 24px;\n  overflow: hidden;\n  width: 100%;\n  max-width: 700px;\n"])),e=>{let{theme:t}=e;return t.colors.glass.background},e=>{let{theme:t}=e;return t.colors.accent.gold}),dr.div(og||(og=o(["\n  height: 100%;\n  border-radius: 20px;\n  background: ",";\n  width: ","%;\n  transition: width ",";\n"])),e=>{let{color:t,theme:n}=e;return t||n.colors.accent.gold},e=>{let{value:t}=e;return t},e=>{let{theme:t}=e;return t.animation.duration.slow}),dr.div(ag||(ag=o(["\n  display: flex;\n  justify-content: center;\n  gap: 32px;\n  margin-top: 24px;\n"]))),dr.div(sg||(sg=o(["\n  width: 64px;\n  height: 64px;\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  font-size: 2.2rem;\n  box-shadow: ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n  }\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.effects.neonGlow},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth}),dr.div(lg||(lg=o(["\n  position: fixed;\n  top: 0; left: 0; right: 0; bottom: 0;\n  background: rgba(18, 18, 18, 0.75);\n  backdrop-filter: blur(16px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s;\n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"])))),qg=dr.div(cg||(cg=o(["\n  background: linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(127,63,191,0.13) 100%);\n  border: 2.5px solid ",";\n  border-radius: 22px;\n  box-shadow: 0 8px 40px 0 rgba(255,215,0,0.10), 0 0 32px 0 rgba(127,63,191,0.10);\n  padding: 2.2rem 1.5rem 1.5rem 1.5rem;\n  min-width: 320px;\n  max-width: 95vw;\n  width: 100%;\n  max-width: 400px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  @media (max-width: 500px) {\n    min-width: 0;\n    padding: 1.2rem 0.7rem 1.2rem 0.7rem;\n  }\n"])),Fg),Qg=dr.h2(dg||(dg=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.3rem;\n  font-weight: 700;\n  color: #fff;\n  margin-bottom: 0.7rem;\n  text-align: center;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Jg=dr.button(ug||(ug=o(["\n  width: 100%;\n  max-width: 320px;\n  margin-bottom: 1rem;\n  padding: 0.85rem 0;\n  border-radius: 12px;\n  border: 2px solid ",";\n  background: transparent;\n  color: #fff;\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.08rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.18s, color 0.18s;\n  &:hover, &:focus {\n    background: ",";\n    color: #000000;\n    outline: none;\n  }\n"])),Fg,Fg),Kg=dr.button(hg||(hg=o(["\n  position: absolute;\n  top: 18px;\n  right: 18px;\n  background: none;\n  border: none;\n  color: #fff;\n  font-size: 1.5rem;\n  cursor: pointer;\n  z-index: 10;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s;\n  &:hover {\n    background: rgba(255,255,255,0.08);\n  }\n"]))),$g=(dr.div(fg||(fg=o(["\n  width: 120px;\n  height: 120px;\n  background: #fff;\n  border-radius: 16px;\n  margin: 0 auto 1rem auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2.5rem;\n  color: #000000;\n  box-shadow: 0 2px 12px 0 rgba(255,215,0,0.10);\n"]))),dr.div(pg||(pg=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n"])))),em=dr.div(gg||(gg=o(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n"]))),tm=dr.div(mg||(mg=o(["\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.2rem;\n  background: ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent.purple}),nm=dr.div(yg||(yg=o(["\n  flex: 1;\n"]))),rm=dr.div(wg||(wg=o(["\n  color: ",";\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),im=dr.div(bg||(bg=o(["\n  color: ",";\n  font-size: 0.875rem;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),om=dr.div(vg||(vg=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 0.25rem;\n"]))),am=dr.div(Sg||(Sg=o(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),e=>{let{theme:t}=e;return t.colors.accent.green}),sm=dr.div(Cg||(Cg=o(["\n  color: ",";\n  font-weight: 600;\n  font-size: 0.875rem;\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}),lm=dr.button(_g||(_g=o(["\n  background: linear-gradient(135deg, #FFB000 0%, #FF9F1C 100%);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  color: #000;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  font-size: 1rem;\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);\n  margin-top: 24px;\n  width: 100%;\n  max-width: 200px;\n  align-self: center;\n  box-shadow: \n    0 0 20px 0 rgba(255,176,0,0.2),\n    0 0 40px 0 rgba(255,176,0,0.1);\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 30px 0 rgba(255,176,0,0.4),\n      0 0 60px 0 rgba(255,176,0,0.2);\n  }\n  \n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n"]))),cm=dr.div(xg||(xg=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),dm=dr.div(Eg||(Eg=o(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold},e=>{let{theme:t}=e;return t.animation.duration.normal},e=>{let{theme:t}=e;return t.animation.timing.smooth},e=>{let{theme:t}=e;return t.effects.neonGlow}),um=dr.div(Ig||(Ig=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{$type:t,theme:n}=e;switch(t){case"scan":default:return n.colors.accent.purple;case"purchase":return n.colors.accent.pink;case"daily":return n.colors.accent.green}}),hm=dr.div(Ag||(Ag=o(["\n  flex: 1;\n"]))),fm=dr.div(Tg||(Tg=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.body}),pm=dr.div(kg||(kg=o(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary},e=>{let{theme:t}=e;return t.typography.fontSize.small}),gm=dr.div(Rg||(Rg=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),mm=dr.div(Ng||(Ng=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.accent.green},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),ym=dr.div(Dg||(Dg=o(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{$positive:t,theme:n}=e;return t?n.colors.accent.gold:n.colors.accent.pink},e=>{let{theme:t}=e;return t.typography.fontWeight.bold},e=>{let{theme:t}=e;return t.typography.fontSize.small}),wm=dr.div(Mg||(Mg=o(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.body},e=>{let{theme:t}=e;return t.colors.text.secondary}),bm=(dr(Jg)(Og||(Og=o(["\n  margin-top: 0.5rem;\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n"]))),dr(Jg)(Pg||(Pg=o(["\n  background: ",";\n  color: #000;\n  margin-top: 1rem;\n\n  &:hover {\n    background: #FFC72C;\n  }\n"])),e=>{let{theme:t}=e;return t.colors.accent.gold}));dr.button(jg||(jg=o(["\n  background: ",";\n  color: ",";\n  border: none;\n  border-radius: 8px;\n  padding: 12px 24px;\n  font-family: ",";\n  font-size: 1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n\n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 0 15px ",";\n  }\n"])),e=>{let{theme:t}=e;return t.colors.primary},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.primary});function vm(e){let{open:n,onClose:r,user:i}=e;const{referralCode:o,generateReferralLink:a,shareReferral:s,isBirthdayLaunch:l}=hh(),[c,d]=(0,t.useState)(!1);return n?(0,fr.jsx)(Zg,{onClick:e=>{e.target===e.currentTarget&&r()},children:(0,fr.jsxs)(qg,{children:[(0,fr.jsx)(Kg,{"aria-label":"Close",onClick:r,children:"\xd7"}),(0,fr.jsx)(Qg,{children:"Share Your Referral"}),o?(0,fr.jsxs)("div",{style:{width:"100%",textAlign:"center",marginTop:"0.5rem"},children:[(0,fr.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[(0,fr.jsx)("div",{style:{color:"#aaa",fontSize:"0.9rem",marginBottom:"0.5rem"},children:"Your Referral Code"}),(0,fr.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#FFD700",fontFamily:"monospace",letterSpacing:"3px",marginBottom:"0.5rem"},children:o}),(0,fr.jsxs)("div",{style:{color:"#aaa",fontSize:"0.8rem"},children:["Each friend earns you ",l?"100":"50"," WINGS"]})]}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,fr.jsx)(Jg,{onClick:async()=>{o&&await s(o)},children:"\ud83d\udcf1 Share with Friends"}),(0,fr.jsx)(Jg,{onClick:async()=>{if(!o)return;(await s(o)).success&&(d(!0),setTimeout(()=>d(!1),2e3))},children:c?"\u2705 Copied!":"\ud83d\udccb Copy Referral Link"}),(0,fr.jsx)(Jg,{onClick:()=>window.open("https://www.instagram.com/","_blank"),style:{background:"linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D)"},children:"\ud83d\udcf8 Share to Instagram Story"})]}),l&&(0,fr.jsx)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(255, 215, 0, 0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",borderRadius:"8px",fontSize:"0.85rem",color:"#FFD700"},children:"\ud83c\udf82 Birthday Launch Special: DOUBLE REWARDS until Sept 14th!"}),(0,fr.jsxs)("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",fontSize:"0.85rem",color:"#10B981"},children:["\ud83d\udca1 Friends get ",l?"50":"25"," WINGS for joining + ",l?"50":"25"," more for their first scan!"]})]}):(0,fr.jsx)("div",{style:{textAlign:"center",color:"#aaa"},children:"Loading your referral code..."})]})}):null}const Sm=function(){var e,n,r,i;const[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!0),f=$(),{user:p,isAdmin:g}=Ra(),{referralCode:m,referralStats:y,referralHistory:w,loading:b,shareReferral:v,generateReferralLink:S}=hh();(0,t.useEffect)(()=>{console.log("\ud83c\udfaf ProfileScreen: referralCode updated:",m),console.log("\ud83c\udfaf ProfileScreen: referralLoading:",b),console.log("\ud83c\udfaf ProfileScreen: user:",null===p||void 0===p?void 0:p.id)},[m,b,p]);const C=function(){var e=(0,t.useContext)(tr);if(!e)throw mn(18);return e}();return(0,t.useEffect)(()=>{(async()=>{if(p)try{const i=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),{data:o,error:a}=await i.from("user_profiles").select("*").eq("id",p.id).single();var e,t,n,r;if(a&&"PGRST116"!==a.code&&console.error("Error fetching profile:",a),o)d({name:o.username||(null===(e=p.user_metadata)||void 0===e?void 0:e.username)||(null===(t=p.email)||void 0===t?void 0:t.split("@")[0]),email:p.email,avatar:null,joinDate:new Date(p.created_at).toLocaleDateString(),totalWings:o.wings_balance||0,level:Math.floor((o.wings_balance||0)/100)+1,achievements:0,items:0});else d({name:(null===(n=p.user_metadata)||void 0===n?void 0:n.username)||(null===(r=p.email)||void 0===r?void 0:r.split("@")[0])||"User",email:p.email,avatar:null,joinDate:new Date(p.created_at).toLocaleDateString(),totalWings:0,level:1,achievements:0,items:0})}catch(a){var i,o;console.error("Error fetching profile:",a),d({name:(null===(i=p.user_metadata)||void 0===i?void 0:i.username)||(null===(o=p.email)||void 0===o?void 0:o.split("@")[0])||"User",email:p.email,avatar:null,joinDate:new Date(p.created_at).toLocaleDateString(),totalWings:0,level:1,achievements:0,items:0})}h(!1)})()},[p]),C.colors.secondary,C.colors.accent,Math.min(60,100),(0,fr.jsxs)(Bg,{children:[(0,fr.jsxs)(Lg,{children:[(0,fr.jsxs)(zg,{onClick:()=>f("/settings"),children:[(0,fr.jsx)(Ug,{children:null!==p&&void 0!==p&&null!==(e=p.user_metadata)&&void 0!==e&&e.username?p.user_metadata.username.charAt(0).toUpperCase():null!==p&&void 0!==p&&p.email?p.email.charAt(0).toUpperCase():"U"}),(0,fr.jsx)(Hg,{children:(null===p||void 0===p||null===(n=p.user_metadata)||void 0===n?void 0:n.username)||(null===p||void 0===p||null===(r=p.email)||void 0===r?void 0:r.split("@")[0])||"User"})]}),(0,fr.jsxs)(Wg,{children:[(0,fr.jsx)(Vg,{children:"WNGS Balance"}),(0,fr.jsx)(Gg,{children:(null===c||void 0===c||null===(i=c.totalWings)||void 0===i?void 0:i.toLocaleString())||"0"})]})]}),(0,fr.jsxs)(Yg,{style:{display:"flex",flexDirection:"column"},children:[(0,fr.jsx)(Xg,{children:"Referral Program"}),(0,fr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#FFD700"},children:y.totalReferrals}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"Total Referrals"})]}),(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#10B981"},children:y.completedReferrals}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"Completed"})]}),(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#FFB000"},children:y.totalWingsEarned}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa"},children:"WINGS Earned"})]})]}),(0,fr.jsxs)("div",{style:{background:"rgba(255, 176, 0, 0.1)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",padding:"1rem",marginBottom:"1rem",textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"0.9rem",color:"#aaa",marginBottom:"0.5rem"},children:"Your Referral Code"}),b?(0,fr.jsx)("div",{style:{fontSize:"1.2rem",color:"#aaa",padding:"1rem"},children:"Generating your code..."}):m?(0,fr.jsxs)(fr.Fragment,{children:[(0,fr.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#FFD700",fontFamily:"monospace",letterSpacing:"2px"},children:m}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#aaa",marginTop:"0.5rem"},children:"Share this code to earn 50 WINGS per completed referral"})]}):(0,fr.jsx)("div",{style:{fontSize:"1rem",color:"#e74c3c",padding:"1rem"},children:"Failed to generate referral code. Please refresh the page."})]}),w.length>0?(0,fr.jsxs)($g,{children:[(0,fr.jsx)("div",{style:{fontSize:"1rem",fontWeight:"bold",marginBottom:"1rem",color:"#fff"},children:"Recent Referrals"}),w.slice(0,3).map(e=>(0,fr.jsxs)(em,{children:[(0,fr.jsx)(tm,{children:"\ud83d\udc65"}),(0,fr.jsxs)(nm,{children:[(0,fr.jsx)(rm,{children:e.refereeName}),(0,fr.jsxs)(im,{children:["Joined ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,fr.jsxs)(om,{children:[(0,fr.jsx)(am,{style:{color:"completed"===e.status?"#10B981":"#FFB000"},children:"completed"===e.status?"Completed":"Pending"}),e.rewardGiven&&e.wingsEarned>0&&(0,fr.jsxs)(sm,{children:["+",e.wingsEarned," WINGS"]})]})]},e.id)),w.length>3&&(0,fr.jsxs)("div",{style:{textAlign:"center",marginTop:"1rem",color:"#aaa",fontSize:"0.9rem"},children:["+",w.length-3," more referrals"]})]}):(0,fr.jsx)("div",{style:{textAlign:"center",color:"#aaa",marginBottom:"1rem"},children:"No referrals yet. Share your code to start earning!"}),(0,fr.jsx)(lm,{onClick:()=>{m?v(m):(console.log("\u274c No referral code available to share"),alert("Referral code not ready yet. Please wait a moment and try again."))},disabled:!m,style:{opacity:m?1:.6,cursor:m?"pointer":"not-allowed"},children:b?"Loading...":"Share Referral Code"})]}),(0,fr.jsxs)(Yg,{as:"button",onClick:()=>l(!0),style:{cursor:"pointer"},children:[(0,fr.jsx)(Xg,{children:"Recent Activity"}),(0,fr.jsx)(cm,{children:[{type:"Scan Quest Earn",amount:"+75 WNGS",positive:!0,status:"Completed",date:"Mar 18, 2025"},{type:"Shop Purchase",amount:"-50 WNGS",positive:!1,status:"Completed",date:"Mar 15, 2025"},{type:"Daily Reward",amount:"+35 WNGS",positive:!0,status:"Completed",date:"Mar 14, 2025"}].map((e,t)=>{return(0,fr.jsxs)(dm,{children:[(0,fr.jsx)(um,{$type:(n=e.type,n.includes("Scan")?"scan":n.includes("Purchase")?"purchase":n.includes("Daily")?"daily":"scan"),children:(e=>e.includes("Scan")?"\ud83d\udcf1":e.includes("Purchase")?"\ud83d\uded2":e.includes("Daily")?"\ud83c\udf81":"\ud83d\udcf1")(e.type)}),(0,fr.jsxs)(hm,{children:[(0,fr.jsx)(fm,{children:e.type}),(0,fr.jsx)(pm,{children:"Transaction completed successfully"})]}),(0,fr.jsxs)(gm,{children:[(0,fr.jsx)(mm,{children:e.status}),(0,fr.jsx)(ym,{$positive:e.positive,children:e.amount}),(0,fr.jsx)(wm,{children:e.date})]})]},t);var n})}),(0,fr.jsx)("div",{style:{textAlign:"center",marginTop:"24px",color:"#FFD700",fontSize:"0.9rem",fontWeight:"500"},children:"Click to view all activity \u2192"})]}),(0,fr.jsx)(vm,{open:o,onClose:()=>a(!1),user:p}),(0,fr.jsx)(Vp,{isOpen:s,onClose:()=>l(!1)}),g&&(0,fr.jsx)(bm,{onClick:()=>f("/admin"),children:"Admin Dashboard"})]})};var Cm,_m,xm,Em,Im,Am,Tm,km,Rm,Nm,Dm,Mm,Om,Pm,jm,Bm,Lm,Fm;const zm=dr.div(Cm||(Cm=o(["\n  min-height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 48px 8px 120px 8px;\n"])),e=>{let{theme:t}=e;return t.colors.background}),Um=dr.div(_m||(_m=o(["\n  width: 100%;\n  max-width: 480px;\n  margin: 0 auto;\n"]))),Hm=dr(Xa)(xm||(xm=o(["\n  margin-bottom: 24px;\n  border-radius: 18px;\n  overflow: hidden;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 20px 0 rgba(255,215,0,0.2),\n    0 0 40px 0 rgba(255,215,0,0.1),\n    inset 0 1px 0 rgba(255,215,0,0.15);\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.gold)||"#FFD700"}),Wm=dr.button(Em||(Em=o(["\n  width: 100%;\n  background: none;\n  border: none;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 24px 28px;\n  font-size: 1.25rem;\n  font-family: ",";\n  color: ",";\n  font-weight: 700;\n  cursor: pointer;\n  transition: background 0.2s;\n  &:hover, &:focus {\n    background: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.typography.fontFamily.heading},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.colors.glass}),Vm=dr.div(Im||(Im=o(["\n  padding: 0 28px 24px 28px;\n  background: none;\n  animation: fadeIn 0.3s;\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(-8px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n"]))),Gm=dr.div(Am||(Am=o(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 18px;\n  gap: 18px;\n"]))),Ym=dr.label(Tm||(Tm=o(["\n  font-size: 1.08rem;\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.text.primary}),Xm=dr.input(km||(km=o(["\n  font-size: 1.08rem;\n  padding: 6px 12px;\n  border-radius: 8px;\n  border: 1px solid ",";\n  background: ",";\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.glass},e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.text.primary}),Zm=dr.input.attrs({type:"checkbox"})(Rm||(Rm=o(["\n  width: 40px;\n  height: 22px;\n  accent-color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent}),qm=dr.div(Nm||(Nm=o(["\n  display: flex;\n  align-items: center;\n  gap: 16px;\n"]))),Qm=dr.img(Dm||(Dm=o(["\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 2px solid ",";\n"])),e=>{let{theme:t}=e;return t.colors.accent}),Jm=dr.div(Mm||(Mm=o(["\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n  font-size: 2rem;\n  border: 2px solid ",";\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.accent}),Km=dr.button(Om||(Om=o(["\n  background: ",";\n  color: ",";\n  border: none;\n  border-radius: 8px;\n  padding: 8px 18px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s;\n  &:hover, &:focus {\n    background: ",";\n    outline: none;\n  }\n"])),e=>{let{theme:t}=e;return t.gradients.primary},e=>{let{theme:t}=e;return t.colors.text.primary},e=>{let{theme:t}=e;return t.gradients.gold}),$m=dr.div(Pm||(Pm=o(["\n  display: flex;\n  gap: 12px;\n"]))),ey=dr.img(jm||(jm=o(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: #fff;\n  border: 1.5px solid ",";\n  padding: 2px;\n"])),e=>{let{theme:t}=e;return t.colors.glass}),ty=(dr.div(Bm||(Bm=o(["\n  display: flex;\n  gap: 14px;\n  margin-top: 12px;\n  margin-bottom: 6px;\n"]))),dr.button(Lm||(Lm=o(["\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  border: 3px solid transparent;\n  background: ",";\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  cursor: pointer;\n  outline: none;\n  transition: border 0.2s, box-shadow 0.2s, transform 0.15s;\n  position: relative;\n  &:hover, &:focus {\n    border-color: ",";\n    transform: scale(1.06);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n  ","\n"])),e=>{let{gradient:t}=e;return t},e=>{let{theme:t}=e;return t.colors.highlight},e=>{let{selected:t,theme:n}=e;return t&&"\n    border-color: ".concat(n.colors.highlight,";\n    box-shadow: \n      0 0 24px 0 rgba(255,215,0,0.4),\n      0 0 48px 0 rgba(255,215,0,0.2),\n      inset 0 1px 0 rgba(255,215,0,0.3);\n    &::after {\n      content: '';\n      position: absolute;\n      top: 6px; right: 6px;\n      width: 12px; height: 12px;\n      border-radius: 50%;\n      background: ").concat(n.colors.highlight,";\n      box-shadow: 0 0 8px 2px ").concat(n.colors.highlight,"55;\n    }\n  ")}),dr.div(Fm||(Fm=o(["\n  font-size: 0.82rem;\n  color: ",";\n  text-align: center;\n  margin-top: 2px;\n  max-width: 60px;\n"])),e=>{let{theme:t}=e;return t.colors.text.secondary}),Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo")),ny=e=>{let{themeMode:n="dark",onToggleTheme:r=()=>{},gradientKey:i="monarch",onGradientChange:o=()=>{}}=e;const{user:a,signOut:s}=Ra(),{ownedThemes:l,equippedTheme:c,equipTheme:d,checkThemeOwnership:u}=Gh(),[h,f]=(0,t.useState)("account"),[p,g]=(0,t.useState)(""),[m,y]=(0,t.useState)(!0);(0,t.useEffect)(()=>{var e,t;a&&(g((null===(e=a.user_metadata)||void 0===e?void 0:e.username)||(null===(t=a.email)||void 0===t?void 0:t.split("@")[0])||"User"),w())},[a]);const w=async()=>{if(a)try{const{data:e}=await ty.from("user_profiles").select("avatar_url, display_name").eq("id",a.id).single();e&&(e.avatar_url&&v(e.avatar_url),e.display_name&&g(e.display_name))}catch(e){console.error("Error loading profile:",e)}},[b,v]=(0,t.useState)(null),S=(0,t.useRef)(),C=$();return(0,fr.jsx)(zm,{children:(0,fr.jsxs)(Um,{children:[(0,fr.jsxs)(Hm,{children:[(0,fr.jsxs)(Wm,{"aria-expanded":"account"===h,onClick:()=>f("account"===h?"":"account"),children:["Account & Profile",(0,fr.jsx)("span",{children:"account"===h?"\u25b2":"\u25bc"})]}),"account"===h&&(0,fr.jsxs)(Vm,{children:[(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{children:"Profile Picture"}),(0,fr.jsxs)(qm,{children:[b?(0,fr.jsx)(Qm,{src:b,alt:"Avatar"}):(0,fr.jsx)(Jm,{children:"\ud83e\udd8b"}),(0,fr.jsx)(Km,{type:"button",onClick:()=>S.current.click(),children:"Change"}),(0,fr.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:S,onChange:async e=>{if(e.target.files&&e.target.files[0]){const n=e.target.files[0],r=n.name.split(".").pop(),i="".concat(a.id,"-").concat(Math.random(),".").concat(r),o="avatars/".concat(i);try{const{error:e}=await ty.storage.from("avatars").upload(o,n);if(e)throw e;const{data:t}=ty.storage.from("avatars").getPublicUrl(o),{error:r}=await ty.from("user_profiles").update({avatar_url:t.publicUrl}).eq("id",a.id);if(r)throw r;v(t.publicUrl)}catch(t){console.error("Error uploading avatar:",t),v(URL.createObjectURL(n))}}}})]})]}),(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{htmlFor:"displayName",children:"Display Name"}),(0,fr.jsx)(Xm,{id:"displayName",value:p,onChange:e=>g(e.target.value)})]}),(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{children:"Email"}),(0,fr.jsx)("span",{children:(null===a||void 0===a?void 0:a.email)||"Not logged in"})]}),(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{htmlFor:"emailPref",children:"Email Preferences"}),(0,fr.jsx)(Zm,{id:"emailPref",checked:m,onChange:e=>y(e.target.checked)})]}),(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{children:"Password/Security"}),(0,fr.jsx)(Km,{type:"button",children:"Change Password"})]}),(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{children:"Connected Accounts"}),(0,fr.jsxs)($m,{children:[(0,fr.jsx)(ey,{src:"/google-icon.svg",alt:"Google",title:"Google"}),(0,fr.jsx)(ey,{src:"/apple-icon.svg",alt:"Apple",title:"Apple"})]})]}),a?(0,fr.jsxs)("div",{children:[(0,fr.jsxs)("div",{style:{marginBottom:"1rem",color:"#fff",fontSize:"0.9rem"},children:[(0,fr.jsx)("strong",{children:"Logged in as:"})," ",a.email]}),(0,fr.jsx)(Km,{style:{marginTop:12,width:"100%",background:"rgba(231, 76, 60, 0.2)",borderColor:"rgba(231, 76, 60, 0.3)"},onClick:async()=>{try{console.log("Starting sign out process..."),await s(),console.log("Sign out successful, navigating to home..."),C("/")}catch(e){console.error("Error signing out:",e),alert("Failed to sign out. Please try again.")}},children:"Sign Out"})]}):(0,fr.jsx)(Km,{style:{marginTop:12,width:"100%"},onClick:()=>{C("/login")},children:"Sign In"})]})]}),(0,fr.jsxs)(Hm,{children:[(0,fr.jsxs)(Wm,{"aria-expanded":"theme"===h,onClick:()=>f("theme"===h?"":"theme"),children:["App Experience",(0,fr.jsx)("span",{children:"theme"===h?"\u25b2":"\u25bc"})]}),"theme"===h&&(0,fr.jsx)(Vm,{children:(0,fr.jsxs)(Gm,{children:[(0,fr.jsx)(Ym,{children:"Dark Mode"}),(0,fr.jsx)(Zm,{type:"checkbox",checked:"dark"===n,onChange:r})]})})]})]})})};var ry,iy,oy,ay,sy,ly,cy,dy,uy,hy,fy,py,gy,my,yy,wy,by,vy,Sy,Cy,_y,xy,Ey,Iy,Ay,Ty,ky,Ry,Ny,Dy,My;const Oy=dr.div(ry||(ry=o(["\n  height: 100vh;\n  overflow: hidden;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 1rem 100px 1rem; /* Added 100px bottom padding */\n  position: relative;\n"])),e=>{var t;let{theme:n}=e;return(null===(t=n.colors)||void 0===t?void 0:t.background)||"#000000"}),Py=(dr.h1(iy||(iy=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  color: ",";\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.text)||void 0===n?void 0:n.primary)||"#fff"}),dr.button(oy||(oy=o(["\n  position: absolute;\n  top: 2rem;\n  left: 2rem;\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 176, 0, 0.3);\n  border-radius: 12px;\n  color: #FFB000;\n  font-size: 1.2rem;\n  padding: 0.75rem 1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  z-index: 10;\n  \n  &:hover {\n    background: rgba(255, 176, 0, 0.1);\n    border-color: #FFB000;\n    transform: translateY(-2px);\n  }\n"])))),jy=dr.div(ay||(ay=o(["\n  background: linear-gradient(135deg, rgba(30,30,40,0.85) 0%, rgba(76,28,140,0.13) 100%), rgba(76, 28, 140, 0.15);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border: 3px solid #FFB000;\n  border-radius: 20px;\n  padding: 2.5rem;\n  margin: 0 auto;\n  max-width: 500px;\n  width: 100%;\n  max-height: 85vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: \n    0 0 20px 0 rgba(255,176,0,0.2),\n    0 0 40px 0 rgba(255,176,0,0.1),\n    inset 0 1px 0 rgba(255,176,0,0.15);\n  position: relative;\n  \n  /* Book spine effect */\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 8px;\n    background: linear-gradient(180deg, #FFB000 0%, #FF9F1C 100%);\n    border-radius: 20px 0 0 20px;\n    box-shadow: inset -2px 0 5px rgba(0,0,0,0.3);\n  }\n  \n  @media (max-width: 767px) {\n    padding: 1.5rem;\n    max-height: 90vh;\n  }\n"]))),By=dr.div(sy||(sy=o(["\n  text-align: center;\n  margin-bottom: 2.5rem;\n  padding-bottom: 2rem;\n  border-bottom: 2px dashed rgba(255,176,0,0.3);\n  position: relative;\n"]))),Ly=dr.h2(ly||(ly=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  font-size: 2rem;\n  color: #FFB000;\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  text-shadow: 0 0 10px rgba(255,176,0,0.3);\n  \n  @media (max-width: 767px) {\n    font-size: 1.7rem;\n    letter-spacing: 1px;\n  }\n"]))),Fy=dr.div(cy||(cy=o(["\n  color: rgba(255,176,0,0.7);\n  font-size: 1.1rem;\n  margin-bottom: 1.5rem;\n  font-style: italic;\n"]))),zy=dr.div(dy||(dy=o(["\n  background: rgba(255,176,0,0.1);\n  border: 1px solid rgba(255,176,0,0.3);\n  border-radius: 12px;\n  padding: 1rem;\n  margin-bottom: 0.5rem;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  gap: 1rem;\n  text-align: center;\n"]))),Uy=dr.div(uy||(uy=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Hy=dr.div(hy||(hy=o(["\n  font-size: 1.8rem;\n  font-weight: 700;\n  color: #FFB000;\n"]))),Wy=dr.div(fy||(fy=o(["\n  font-size: 0.8rem;\n  color: rgba(255,176,0,0.8);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n"]))),Vy=dr.div(py||(py=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  overflow-y: auto;\n  flex-grow: 1;\n  padding-right: 1rem;\n  margin-right: -1rem;\n\n  /* Custom scrollbar styling */\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n  &::-webkit-scrollbar-track {\n    background: rgba(0,0,0,0.2);\n    border-radius: 4px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: rgba(255,176,0,0.4);\n    border-radius: 4px;\n  }\n  &::-webkit-scrollbar-thumb:hover {\n    background: rgba(255,176,0,0.6);\n  }\n"]))),Gy=dr.div(gy||(gy=o(["\n  background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,176,0,0.02) 100%);\n  border: 2px solid rgba(255,176,0,0.2);\n  border-radius: 15px;\n  padding: 1rem; /* Adjusted from 1.5rem */\n  position: relative;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  \n  /* Paper texture effect */\n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: \n      radial-gradient(circle at 25% 25%, rgba(255,176,0,0.02) 1px, transparent 1px),\n      radial-gradient(circle at 75% 75%, rgba(255,176,0,0.02) 1px, transparent 1px);\n    background-size: 20px 20px;\n    border-radius: 15px;\n    pointer-events: none;\n  }\n  \n  /* Margin line */\n  &::after {\n    content: '';\n    position: absolute;\n    left: 30px; /* Adjusted from 40px */\n    top: 0;\n    bottom: 0;\n    width: 1px;\n    background: rgba(255,176,0,0.1);\n  }\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.01);\n    border-color: rgba(255,176,0,0.4);\n    box-shadow: \n      0 0 15px 0 rgba(255,176,0,0.2),\n      0 0 30px 0 rgba(255,176,0,0.1);\n  }\n  \n  ","\n"])),e=>{let{completed:t}=e;return t&&sr(my||(my=o(["\n    border-color: rgba(16, 185, 129, 0.4);\n    background: linear-gradient(135deg, rgba(16,185,129,0.05) 0%, rgba(255,176,0,0.02) 100%);\n    \n    &::after {\n      background: rgba(16,185,129,0.2);\n    }\n  "])))}),Yy=dr.div(yy||(yy=o(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem; /* Adjusted from 1rem */\n  margin-bottom: 0.75rem; /* Adjusted from 1rem */\n  margin-left: 45px; /* Adjusted from 60px */\n"]))),Xy=dr.div(wy||(wy=o(["\n  font-size: 1.5rem; /* Adjusted from 2rem */\n  min-width: 40px; /* Adjusted from 48px */\n  height: 40px; /* Adjusted from 48px */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255,176,0,0.1);\n  border: 2px solid rgba(255,176,0,0.3);\n  border-radius: 12px;\n  margin-top: 4px;\n"]))),Zy=dr.div(by||(by=o(["\n  flex: 1;\n"]))),qy=dr.h3(vy||(vy=o(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.1rem; /* Adjusted from 1.2rem */\n  font-weight: 600;\n  color: #fff;\n  margin: 0 0 0.5rem 0;\n  line-height: 1.3;\n"]))),Qy=dr.p(Sy||(Sy=o(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem; /* Adjusted from 0.95rem */\n  color: rgba(255,255,255,0.7);\n  margin: 0 0 0.75rem 0; /* Adjusted from 1rem */\n  line-height: 1.5;\n"]))),Jy=dr.div(Cy||(Cy=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-left: 45px; /* Adjusted from 60px */\n"]))),Ky=dr.div(_y||(_y=o(["\n  flex: 1;\n  margin-right: 1rem;\n"]))),$y=dr.div(xy||(xy=o(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n"]))),ew=dr.span(Ey||(Ey=o(["\n  color: rgba(255,255,255,0.8);\n  font-weight: 500;\n"]))),tw=dr.span(Iy||(Iy=o(["\n  color: #FFB000;\n  font-weight: 600;\n  font-family: 'Outfit', sans-serif;\n"]))),nw=dr.div(Ay||(Ay=o(["\n  width: 100%;\n  height: 8px;\n  background: rgba(255,255,255,0.1);\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n"]))),rw=dr.div(Ty||(Ty=o(["\n  height: 100%;\n  background: linear-gradient(90deg, #FFB000 0%, #FFD700 100%);\n  border-radius: 4px;\n  transition: width 0.5s ease;\n  width: ","%;\n  box-shadow: 0 0 8px rgba(255,176,0,0.4);\n  \n  ","\n"])),e=>{let{value:t}=e;return t},e=>{let{completed:t}=e;return t&&sr(ky||(ky=o(["\n    background: linear-gradient(90deg, #10B981 0%, #34D399 100%);\n    box-shadow: 0 0 8px rgba(16,185,129,0.4);\n  "])))}),iw=dr.div(Ry||(Ry=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background: rgba(255,176,0,0.1);\n  border: 1px solid rgba(255,176,0,0.3);\n  border-radius: 8px;\n  padding: 0.5rem; /* Adjusted from 0.75rem */\n  min-width: 70px; /* Adjusted from 80px */\n"]))),ow=dr.div(Ny||(Ny=o(["\n  font-size: 1rem; /* Adjusted from 1.1rem */\n  font-weight: 700;\n  color: #FFB000;\n  font-family: 'Outfit', sans-serif;\n"]))),aw=dr.div(Dy||(Dy=o(["\n  font-size: 0.7rem;\n  color: rgba(255,176,0,0.8);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n"]))),sw=dr.div(My||(My=o(["\n  text-align: center;\n  padding: 3rem 1rem;\n  color: rgba(255,255,255,0.6);\n  \n  .icon {\n    font-size: 4rem;\n    margin-bottom: 1rem;\n  }\n  \n  .message {\n    font-size: 1.2rem;\n    margin-bottom: 0.5rem;\n  }\n  \n  .submessage {\n    font-size: 1rem;\n    color: rgba(255,255,255,0.4);\n  }\n"]))),lw=()=>{const e=$(),[n,r]=(0,t.useState)(null),i=[{id:1,icon:"\ud83d\udcf1",title:"Digital Collector",description:"Scan QR codes on Papillon items to build your digital collection and unlock exclusive rewards.",progress:7,total:10,reward:100,percent:70,category:"Collection",completed:!1},{id:2,icon:"\ud83c\udfea",title:"Store Explorer",description:"Visit different Papillon store locations and experience the brand in person across multiple cities.",progress:1,total:3,reward:75,percent:33,category:"Exploration",completed:!1},{id:3,icon:"\ud83d\udc65",title:"Social Butterfly",description:"Share your Monarch Passport journey on social media to inspire others and grow the community.",progress:5,total:5,reward:50,percent:100,category:"Social",completed:!0},{id:4,icon:"\ud83c\udfaf",title:"Daily Dedication",description:"Complete daily challenges consistently to prove your dedication to the Monarch lifestyle.",progress:12,total:15,reward:125,percent:80,category:"Daily",completed:!1}],o=i.length,a=i.filter(e=>e.completed).length,s=o-a,l=i.filter(e=>e.completed).reduce((e,t)=>e+t.reward,0);return(0,fr.jsxs)(Oy,{children:[(0,fr.jsx)(Py,{onClick:()=>e(-1),children:"\u2190 Back"}),(0,fr.jsxs)(jy,{children:[(0,fr.jsxs)(By,{children:[(0,fr.jsx)(Ly,{children:"Spring '25 Quests"}),(0,fr.jsx)(Fy,{children:"Your journey to becoming a Monarch"}),(0,fr.jsxs)(zy,{children:[(0,fr.jsxs)(Uy,{children:[(0,fr.jsx)(Hy,{children:s}),(0,fr.jsx)(Wy,{children:"Active"})]}),(0,fr.jsxs)(Uy,{children:[(0,fr.jsx)(Hy,{children:a}),(0,fr.jsx)(Wy,{children:"Completed"})]}),(0,fr.jsxs)(Uy,{children:[(0,fr.jsx)(Hy,{children:l}),(0,fr.jsx)(Wy,{children:"WINGS Earned"})]})]})]}),(0,fr.jsx)(Vy,{children:i.length>0?i.map(e=>(0,fr.jsxs)(Gy,{completed:e.completed,onClick:()=>r(e),children:[(0,fr.jsxs)(Yy,{children:[(0,fr.jsx)(Xy,{children:e.icon}),(0,fr.jsxs)(Zy,{children:[(0,fr.jsx)(qy,{children:e.title}),(0,fr.jsx)(Qy,{children:e.description})]})]}),(0,fr.jsxs)(Jy,{children:[(0,fr.jsxs)(Ky,{children:[(0,fr.jsxs)($y,{children:[(0,fr.jsx)(ew,{children:"Progress"}),(0,fr.jsxs)(tw,{children:[e.progress,"/",e.total]})]}),(0,fr.jsx)(nw,{children:(0,fr.jsx)(rw,{value:e.percent,completed:e.completed})})]}),(0,fr.jsxs)(iw,{children:[(0,fr.jsx)(ow,{children:e.reward}),(0,fr.jsx)(aw,{children:"WINGS"})]})]})]},e.id)):(0,fr.jsxs)(sw,{children:[(0,fr.jsx)("div",{className:"icon",children:"\ud83d\udcd6"}),(0,fr.jsx)("div",{className:"message",children:"No quests available"}),(0,fr.jsx)("div",{className:"submessage",children:"Check back later for new adventures"})]})})]})]})};var cw,dw,uw,hw,fw,pw,gw,mw,yw,ww,bw;const vw=Ia("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),Sw=dr.div(cw||(cw=o(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #4C1C8C 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n"]))),Cw=dr(Xa)(dw||(dw=o(["\n  max-width: 450px;\n  width: 100%;\n  text-align: center;\n  padding: 3rem 2.5rem;\n"]))),_w=dr.h1(uw||(uw=o(["\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  color: #FFB000;\n  font-size: 2.5rem;\n  margin-bottom: 0.5rem;\n"]))),xw=dr.p(hw||(hw=o(["\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1.1rem;\n  line-height: 1.6;\n  margin-bottom: 2.5rem;\n"]))),Ew=dr.div(fw||(fw=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n"]))),Iw=dr.div(pw||(pw=o(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  text-align: left;\n"]))),Aw=dr.label(gw||(gw=o(["\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.9rem;\n  font-weight: 500;\n"]))),Tw=dr.input(mw||(mw=o(["\n  padding: 12px 16px;\n  border: 3px solid rgba(255, 215, 0, 0.3);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  color: white;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  box-shadow: \n    0 0 8px 0 rgba(255,215,0,0.1),\n    0 0 16px 0 rgba(255,215,0,0.05),\n    inset 0 1px 0 rgba(255,215,0,0.05);\n  \n  &:focus {\n    outline: none;\n    border: 3px solid #FFD700;\n    background: rgba(255, 255, 255, 0.08);\n    box-shadow: \n      0 0 16px 0 rgba(255,215,0,0.25),\n      0 0 32px 0 rgba(255,215,0,0.12),\n      inset 0 1px 0 rgba(255,215,0,0.15);\n  }\n  \n  &::placeholder {\n    color: rgba(255, 255, 255, 0.4);\n  }\n"]))),kw=dr.button(yw||(yw=o(["\n  background: none;\n  border: none;\n  color: #FFB000;\n  font-size: 0.9rem;\n  cursor: pointer;\n  text-decoration: underline;\n  margin-top: 1rem;\n  \n  &:hover {\n    color: #FFC533;\n  }\n"]))),Rw=dr.div(ww||(ww=o(["\n  background: rgba(231, 76, 60, 0.1);\n  border: 1px solid rgba(231, 76, 60, 0.3);\n  border-radius: 8px;\n  padding: 12px;\n  color: #e74c3c;\n  font-size: 0.9rem;\n  margin-bottom: 1rem;\n"]))),Nw=dr.div(bw||(bw=o(["\n  background: rgba(46, 204, 113, 0.1);\n  border: 1px solid rgba(46, 204, 113, 0.3);\n  border-radius: 8px;\n  padding: 12px;\n  color: #2ecc71;\n  font-size: 0.9rem;\n  margin-bottom: 1rem;\n"]))),Dw=()=>{const e=$(),{user:n,loading:r}=Ra(),{processReferralSignup:i}=hh(),[o,a]=(0,t.useState)(!1),[s,l]=(0,t.useState)(""),[c,d]=(0,t.useState)({email:"",password:"",confirmPassword:"",username:""}),[u,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{n&&!r&&e("/")},[n,r,e]),(0,t.useEffect)(()=>{const e=window.location.pathname.split("/");if("join"===e[1]&&e[2]){const t=e[2].toUpperCase();l(t),a(!0),p("Welcome! You're joining via referral code: ".concat(t))}},[]);const y=e=>{d(Sr(Sr({},c),{},{[e.target.name]:e.target.value})),h(""),p("")},w=()=>{if(!c.email||!c.password)return h("Email and password are required"),!1;if(o){if(!c.username)return h("Username is required"),!1;if(c.password!==c.confirmPassword)return h("Passwords do not match"),!1;if(c.password.length<6)return h("Password must be at least 6 characters"),!1}return!0};return r?(0,fr.jsx)(Sw,{children:(0,fr.jsx)(Cw,{children:(0,fr.jsx)(_w,{children:"Loading..."})})}):(0,fr.jsx)(Sw,{children:(0,fr.jsxs)(Cw,{children:[(0,fr.jsx)(_w,{children:"\ud83e\udd8b Find Your Wings"}),(0,fr.jsx)(xw,{children:o?"Create your account to start collecting":"Welcome back to your digital passport"}),u&&(0,fr.jsx)(Rw,{children:u}),f&&(0,fr.jsx)(Nw,{children:f}),(0,fr.jsx)("form",{onSubmit:t=>{t.preventDefault(),o?(async()=>{if(w()){m(!0),h("");try{const{data:t,error:n}=await vw.auth.signUp({email:c.email,password:c.password,options:{data:{username:c.username,full_name:c.username,referral_code:s||null}}});if(n)throw n;if(s&&t.user){const e=await i(s,t.user.id);e.success?p("Account created! You earned ".concat(e.bonusAmount," WINGS for joining via referral. Check your email to confirm your account.")):p("Account created! Please check your email to confirm your account.")}else t.user&&!t.user.email_confirmed_at?p("Account created! Please check your email to confirm your account."):(p("Account created successfully! Redirecting..."),setTimeout(()=>e("/"),1e3))}catch(u){h(u.message)}finally{m(!1)}}})():(async()=>{if(w()){m(!0),h("");try{const{data:t,error:n}=await vw.auth.signInWithPassword({email:c.email,password:c.password});if(n)throw n;p("Login successful! Redirecting..."),setTimeout(()=>e("/"),1e3)}catch(u){h(u.message)}finally{m(!1)}}})()},children:(0,fr.jsxs)(Ew,{children:[o&&(0,fr.jsxs)(Iw,{children:[(0,fr.jsx)(Aw,{children:"Username"}),(0,fr.jsx)(Tw,{type:"text",name:"username",placeholder:"Enter your username",value:c.username,onChange:y})]}),o&&(0,fr.jsxs)(Iw,{children:[(0,fr.jsx)(Aw,{children:"Referral Code (Optional)"}),(0,fr.jsx)(Tw,{type:"text",name:"referralCode",placeholder:"Enter referral code",value:s,onChange:e=>l(e.target.value.toUpperCase()),style:{textTransform:"uppercase"}}),s&&(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#2ecc71",marginTop:"0.25rem"},children:"\u2713 You'll earn 25 WINGS for joining + 25 more for your first scan!"})]}),(0,fr.jsxs)(Iw,{children:[(0,fr.jsx)(Aw,{children:"Email"}),(0,fr.jsx)(Tw,{type:"email",name:"email",placeholder:"Enter your email",value:c.email,onChange:y})]}),(0,fr.jsxs)(Iw,{children:[(0,fr.jsx)(Aw,{children:"Password"}),(0,fr.jsx)(Tw,{type:"password",name:"password",placeholder:"Enter your password",value:c.password,onChange:y})]}),o&&(0,fr.jsxs)(Iw,{children:[(0,fr.jsx)(Aw,{children:"Confirm Password"}),(0,fr.jsx)(Tw,{type:"password",name:"confirmPassword",placeholder:"Confirm your password",value:c.confirmPassword,onChange:y})]}),(0,fr.jsx)(Ja,{type:"submit",disabled:g,style:{width:"100%",marginTop:"1rem"},children:g?"Processing...":o?"Create Account":"Sign In"})]})}),(0,fr.jsx)(kw,{onClick:()=>a(!o),children:o?"Already have an account? Sign in":"Don't have an account? Sign up"})]})})},Mw=()=>{var e,n,r,i,o;const[a,s]=(0,t.useState)("dashboard"),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[h,f]=(0,t.useState)([]),[p,g]=(0,t.useState)({}),[m,y]=(0,t.useState)([]),[w,b]=(0,t.useState)([]),[v,S]=(0,t.useState)(!1),[C,_]=(0,t.useState)(!1),[x,E]=(0,t.useState)(!1),[I,A]=(0,t.useState)(!1),[T,k]=(0,t.useState)(!1),[R,N]=(0,t.useState)(null),[D,M]=(0,t.useState)({name:"",category:"",rarity:"common",wings_value:0,season:"Spring 2025"}),[O,P]=(0,t.useState)({name:"",email:"",tier:"bronze",wings:0,items:0}),[j,B]=(0,t.useState)(0),[L,F]=(0,t.useState)(""),z=[{name:"jackets",enabled:!0,itemCount:45,scanCount:234,revenue:12500},{name:"tops",enabled:!0,itemCount:67,scanCount:189,revenue:8900},{name:"bottoms",enabled:!1,itemCount:23,scanCount:45,revenue:3200},{name:"accessories",enabled:!0,itemCount:89,scanCount:456,revenue:15600},{name:"headwear",enabled:!0,itemCount:34,scanCount:123,revenue:5400},{name:"badges",enabled:!0,itemCount:12,scanCount:567,revenue:2800},{name:"tokens",enabled:!1,itemCount:8,scanCount:34,revenue:1200}],U=[{id:1,name:"Alex Chen",email:"alex@example.com",wings:1250,items:24,status:"active",joinDate:"2025-03-01",lastScan:"2025-03-20",totalScans:47,tier:"gold"},{id:2,name:"Jordan Smith",email:"jordan@example.com",wings:890,items:18,status:"active",joinDate:"2025-03-05",lastScan:"2025-03-19",totalScans:32,tier:"silver"},{id:3,name:"Taylor Wilson",email:"taylor@example.com",wings:2340,items:45,status:"active",joinDate:"2025-02-15",lastScan:"2025-03-20",totalScans:78,tier:"platinum"},{id:4,name:"Morgan Davis",email:"morgan@example.com",wings:567,items:12,status:"banned",joinDate:"2025-03-10",lastScan:"2025-03-15",totalScans:15,tier:"bronze"}],H=[{id:1,name:"QR Scanning System",type:"system",active:!0,description:"Enable or disable all QR code scanning globally"},{id:2,name:"Spring 2025 Campaign",type:"seasonal",active:!0,description:"Main seasonal campaign",endDate:new Date(Date.now()+1728e5)},{id:3,name:"Pop-up Event Rewards",type:"event",active:!1,description:"Special rewards for in-person events"},{id:4,name:"Summer Preview",type:"preview",active:!0,description:"Early access to summer collection"}],W=[{id:1,user:"alex@papillon.com",action:"QR Scan",reward:"Spring Jacket #037",time:"2 min ago",status:"success"},{id:2,user:"sarah@gmail.com",action:"QR Scan",reward:"Pop-up Stamp",time:"5 min ago",status:"success"},{id:3,user:"mike@example.com",action:"QR Scan",reward:"Invalid Code",time:"8 min ago",status:"failed"},{id:4,user:"emma@papillon.com",action:"Manual Grant",reward:"Gold Chain #003",time:"12 min ago",status:"granted"},{id:5,user:"john@test.com",action:"QR Scan",reward:"Summer Preview",time:"15 min ago",status:"success"}],V={totalScansToday:247,rewardsClaimed:89,activeUsers:1234,successRate:91,totalUsers:1247,totalScans:5643,totalWings:234567,activeRewards:89,dailyActiveUsers:456,conversionRate:73.2};(0,t.useEffect)(()=>{c(z),u(U),y(H),b(W),g(V)},[]);const G=[{id:"dashboard",icon:"\ud83d\udcca",label:"Dashboard"},{id:"campaigns",icon:"\ud83c\udfaf",label:"Campaigns"},{id:"users",icon:"\ud83d\udc65",label:"Users"},{id:"rewards",icon:"\ud83c\udf81",label:"Rewards"},{id:"categories",icon:"\ud83d\udcf1",label:"Categories"},{id:"analytics",icon:"\ud83d\udcc8",label:"Analytics"}],Y=e=>{y(t=>t.map(t=>t.id===e?Sr(Sr({},t),{},{active:!t.active}):t))},X=e=>{c(t=>t.map(t=>t.name===e?Sr(Sr({},t),{},{enabled:!t.enabled}):t))},Z=d.filter(e=>e.name.toLowerCase().includes(L.toLowerCase())||e.email.toLowerCase().includes(L.toLowerCase())),q=window.innerWidth>=1024;return(0,fr.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #000000 100%)",color:"#ffffff",fontFamily:"Space Grotesk, sans-serif",position:"relative"},children:[!q&&(0,fr.jsx)("button",{style:{display:"block",position:"fixed",top:"1rem",left:"1rem",zIndex:50,background:"rgba(76, 28, 140, 0.8)",border:"none",color:"white",padding:"0.5rem",borderRadius:"8px",fontSize:"1.2rem",cursor:"pointer"},onClick:()=>S(!v),children:"\u2630"}),(0,fr.jsxs)("div",{style:{position:"fixed",left:0,top:0,height:"100vh",width:"280px",background:"linear-gradient(180deg, rgba(76, 28, 140, 0.2) 0%, rgba(0, 0, 0, 0.5) 100%)",backdropFilter:"blur(20px)",borderRight:"1px solid rgba(255, 176, 0, 0.3)",zIndex:40,transform:v||q?"translateX(0)":"translateX(-100%)",transition:"transform 0.3s ease"},children:[(0,fr.jsxs)("div",{style:{padding:"2rem",textAlign:"center",borderBottom:"1px solid rgba(255, 176, 0, 0.2)"},children:[(0,fr.jsx)("h1",{style:{fontSize:"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #FFB000 0%, #7F3FBF 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:0},children:"Monarch Admin"}),(0,fr.jsx)("p",{style:{color:"#9E9E9E",fontSize:"0.9rem",marginTop:"0.5rem"},children:"Dashboard v2.0"})]}),(0,fr.jsxs)("nav",{style:{padding:"1rem"},children:[G.map(e=>(0,fr.jsxs)("button",{onClick:()=>{s(e.id),q||S(!1)},style:{display:"flex",alignItems:"center",gap:"1rem",padding:"1rem",width:"100%",background:a===e.id?"rgba(255, 176, 0, 0.2)":"none",border:"none",color:a===e.id?"#FFB000":"#ffffff",textDecoration:"none",borderRadius:"12px",marginBottom:"0.5rem",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem",borderLeft:a===e.id?"4px solid #FFB000":"none"},children:[(0,fr.jsx)("span",{style:{fontSize:"1.2rem"},children:e.icon}),(0,fr.jsx)("span",{children:e.label})]},e.id)),(0,fr.jsxs)("div",{style:{marginTop:"2rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,fr.jsx)("button",{style:{background:"linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:"600",cursor:"pointer",width:"100%",marginBottom:"0.5rem"},children:"\ud83d\udea8 Emergency Stop"}),(0,fr.jsx)("button",{style:{background:"linear-gradient(135deg, #6c757d 0%, #495057 100%)",color:"white",border:"none",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:"600",cursor:"pointer",width:"100%"},children:"\ud83d\udd04 Restart Services"})]})]}),(0,fr.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,fr.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700"},children:"A"}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)("div",{style:{color:"white",fontWeight:"600",fontSize:"0.9rem"},children:"Admin User"}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.8rem"},children:"admin@monarch.com"})]})]})})]}),(0,fr.jsxs)("div",{style:{marginLeft:q?"280px":"0",padding:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",flexWrap:"wrap",gap:"1rem"},children:[(0,fr.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"700",color:"#ffffff",margin:0},children:(null===(e=G.find(e=>e.id===a))||void 0===e?void 0:e.label)||"Dashboard"}),(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,fr.jsxs)("div",{style:{textAlign:"right"},children:[(0,fr.jsx)("div",{style:{color:"white",fontWeight:"600"},children:"Welcome, Admin"}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Last login: 2 hours ago"})]}),(0,fr.jsx)("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"700",fontSize:"1.2rem"},children:"A"})]})]}),"dashboard"===a&&(0,fr.jsxs)("div",{children:[(0,fr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Total Scans Today"}),(0,fr.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83d\udcf1"})]}),(0,fr.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:p.totalScansToday||0}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#2ecc40"},children:"+23% from yesterday"})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Rewards Claimed"}),(0,fr.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83c\udf81"})]}),(0,fr.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:p.rewardsClaimed||0}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#2ecc40"},children:"+15% from yesterday"})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Active Users"}),(0,fr.jsx)("span",{style:{fontSize:"1.5rem"},children:"\ud83d\udc65"})]}),(0,fr.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:(null===(n=p.activeUsers)||void 0===n?void 0:n.toLocaleString())||"0"}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#2ecc40"},children:"+8% from last week"})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Success Rate"}),(0,fr.jsx)("span",{style:{fontSize:"1.5rem"},children:"\u2705"})]}),(0,fr.jsxs)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:[p.successRate||0,"%"]}),(0,fr.jsx)("div",{style:{fontSize:"0.8rem",color:"#2ecc40"},children:"Success rate"})]})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"1.5rem"},children:"Campaign Controls"}),(0,fr.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:m.map(e=>(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("h4",{style:{color:"white",margin:0},children:e.name}),(0,fr.jsx)("div",{style:{position:"relative",width:"60px",height:"30px",borderRadius:"15px",cursor:"pointer",transition:"all 0.3s ease",background:e.active?"#FFB000":"#333"},onClick:()=>Y(e.id),children:(0,fr.jsx)("div",{style:{position:"absolute",top:"3px",left:"3px",width:"24px",height:"24px",background:"white",borderRadius:"50%",transition:"all 0.3s ease",transform:e.active?"translateX(30px)":"translateX(0)"}})})]}),(0,fr.jsx)("p",{style:{color:"#9E9E9E",fontSize:"0.9rem",marginBottom:"1rem"},children:e.description}),e.endDate&&(0,fr.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",padding:"1rem",textAlign:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("div",{style:{color:"#FFB000",fontFamily:"monospace",fontSize:"1.2rem",fontWeight:"700"},children:"02:14:37:22"}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.8rem"},children:"Days : Hours : Minutes : Seconds"})]}),(0,fr.jsx)("div",{style:{fontWeight:"600",color:e.active?"#2ecc40":"#e74c3c"},children:e.active?"\u2705 ACTIVE":"\u274c INACTIVE"})]},e.id))})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"1.5rem"},children:"Recent User Activity"}),(0,fr.jsx)("div",{style:{overflowX:"auto"},children:(0,fr.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,fr.jsx)("thead",{children:(0,fr.jsxs)("tr",{children:[(0,fr.jsx)("th",{style:{background:"rgba(76, 28, 140, 0.3)",padding:"1rem",textAlign:"left",fontWeight:"600",color:"#FFB000",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:"User"}),(0,fr.jsx)("th",{style:{background:"rgba(76, 28, 140, 0.3)",padding:"1rem",textAlign:"left",fontWeight:"600",color:"#FFB000",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:"Action"}),(0,fr.jsx)("th",{style:{background:"rgba(76, 28, 140, 0.3)",padding:"1rem",textAlign:"left",fontWeight:"600",color:"#FFB000",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:"Reward"}),(0,fr.jsx)("th",{style:{background:"rgba(76, 28, 140, 0.3)",padding:"1rem",textAlign:"left",fontWeight:"600",color:"#FFB000",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:"Time"}),(0,fr.jsx)("th",{style:{background:"rgba(76, 28, 140, 0.3)",padding:"1rem",textAlign:"left",fontWeight:"600",color:"#FFB000",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:"Status"})]})}),(0,fr.jsx)("tbody",{children:w.map(e=>(0,fr.jsxs)("tr",{style:{transition:"background 0.2s ease"},children:[(0,fr.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:e.user}),(0,fr.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:e.action}),(0,fr.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:e.reward}),(0,fr.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",color:"#9E9E9E"},children:e.time}),(0,fr.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:(0,fr.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600",background:"success"===e.status?"rgba(46, 204, 64, 0.2)":"failed"===e.status?"rgba(231, 76, 60, 0.2)":"rgba(52, 152, 219, 0.2)",color:"success"===e.status?"#2ecc40":"failed"===e.status?"#e74c3c":"#3498db"},children:e.status.toUpperCase()})})]},e.id))})]})})]})]}),"users"===a&&(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"0"},children:"User Management"}),(0,fr.jsx)("button",{style:{background:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 100%)",color:"white",border:"2px solid #FFB000",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem"},onClick:()=>E(!0),children:"Add User"})]}),(0,fr.jsx)("input",{type:"text",placeholder:"Search users by name or email...",style:{width:"100%",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem",marginBottom:"1.5rem"},value:L,onChange:e=>F(e.target.value)}),(0,fr.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:Z.map(e=>(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",transition:"background 0.2s ease"},onClick:()=>{N(e),k(!0)},onMouseEnter:e=>e.target.style.background="rgba(255, 255, 255, 0.1)",onMouseLeave:e=>e.target.style.background="rgba(255, 255, 255, 0.05)",children:[(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[(0,fr.jsx)("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"700"},children:e.name.charAt(0)}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)("div",{style:{color:"white",fontWeight:"600"},children:e.name}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:e.email}),(0,fr.jsxs)("div",{style:{fontSize:"0.8rem",color:"#6C6C6C",display:"flex",gap:"1rem"},children:[(0,fr.jsxs)("span",{children:[e.wings," WINGS"]}),(0,fr.jsxs)("span",{children:[e.items," items"]}),(0,fr.jsx)("span",{style:{padding:"0.2rem 0.5rem",borderRadius:"4px",background:"platinum"===e.tier?"rgba(155, 89, 182, 0.2)":"gold"===e.tier?"rgba(241, 196, 15, 0.2)":"silver"===e.tier?"rgba(149, 165, 166, 0.2)":"rgba(230, 126, 34, 0.2)",color:"platinum"===e.tier?"#9B59B6":"gold"===e.tier?"#F1C40F":"silver"===e.tier?"#95A5A6":"#E67E22"},children:e.tier.toUpperCase()})]})]})]}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,fr.jsx)("button",{style:{background:"#FFB000",color:"#000",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer"},onClick:t=>{t.stopPropagation(),N(e),A(!0)},children:"Award WINGS"}),(0,fr.jsx)("button",{style:{background:"banned"===e.status?"#2ecc40":"#e74c3c",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.8rem",fontWeight:"600",cursor:"pointer"},onClick:e=>e.stopPropagation(),children:"banned"===e.status?"Unban":"Ban"})]})]},e.id))})]}),"categories"===a&&(0,fr.jsxs)("div",{children:[(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udc55 Physical Categories"}),(0,fr.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:l.filter(e=>["jackets","tops","bottoms","accessories","headwear"].includes(e.name)).map(e=>{var t;return(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("h4",{style:{color:"white",margin:0,textTransform:"capitalize"},children:e.name}),(0,fr.jsx)("div",{style:{position:"relative",width:"60px",height:"30px",borderRadius:"15px",cursor:"pointer",transition:"all 0.3s ease",background:e.enabled?"#FFB000":"#333"},onClick:()=>X(e.name),children:(0,fr.jsx)("div",{style:{position:"absolute",top:"3px",left:"3px",width:"24px",height:"24px",background:"white",borderRadius:"50%",transition:"all 0.3s ease",transform:e.enabled?"translateX(30px)":"translateX(0)"}})})]}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.9rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Items:"}),(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:"600"},children:e.itemCount})]}),(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Scans:"}),(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:"600"},children:e.scanCount})]}),(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Revenue:"}),(0,fr.jsxs)("span",{style:{color:"#2ecc40",fontWeight:"600"},children:["$",null===(t=e.revenue)||void 0===t?void 0:t.toLocaleString()]})]})]}),(0,fr.jsx)("div",{style:{marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600",color:e.enabled?"#2ecc40":"#e74c3c"},children:e.enabled?"\u2705 ENABLED":"\u274c DISABLED"})]},e.name)})})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udc8e Digital Categories"}),(0,fr.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem"},children:l.filter(e=>["badges","tokens"].includes(e.name)).map(e=>{var t;return(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("h4",{style:{color:"white",margin:0,textTransform:"capitalize"},children:e.name}),(0,fr.jsx)("div",{style:{position:"relative",width:"60px",height:"30px",borderRadius:"15px",cursor:"pointer",transition:"all 0.3s ease",background:e.enabled?"#FFB000":"#333"},onClick:()=>X(e.name),children:(0,fr.jsx)("div",{style:{position:"absolute",top:"3px",left:"3px",width:"24px",height:"24px",background:"white",borderRadius:"50%",transition:"all 0.3s ease",transform:e.enabled?"translateX(30px)":"translateX(0)"}})})]}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",fontSize:"0.9rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Items:"}),(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:"600"},children:e.itemCount})]}),(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Scans:"}),(0,fr.jsx)("span",{style:{color:"#FFB000",fontWeight:"600"},children:e.scanCount})]}),(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Revenue:"}),(0,fr.jsxs)("span",{style:{color:"#2ecc40",fontWeight:"600"},children:["$",null===(t=e.revenue)||void 0===t?void 0:t.toLocaleString()]})]})]}),(0,fr.jsx)("div",{style:{marginTop:"1rem",fontSize:"0.9rem",fontWeight:"600",color:e.enabled?"#2ecc40":"#e74c3c"},children:e.enabled?"\u2705 ENABLED":"\u274c DISABLED"})]},e.name)})})]})]}),"rewards"===a&&(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"0"},children:"Reward Management"}),(0,fr.jsx)("button",{style:{background:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 100%)",color:"white",border:"2px solid #FFB000",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem"},onClick:()=>_(!0),children:"Create New Reward"})]}),(0,fr.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:m.map(e=>(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"12px",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,fr.jsxs)("div",{children:[(0,fr.jsx)("div",{style:{color:"white",fontWeight:"600"},children:e.name}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:e.description}),(0,fr.jsxs)("div",{style:{fontSize:"0.8rem",color:"#6C6C6C",marginTop:"0.5rem"},children:["Type: ",e.type," \u2022 Created: March 15, 2025"]})]}),(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,fr.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600",background:e.active?"rgba(46, 204, 64, 0.2)":"rgba(231, 76, 60, 0.2)",color:e.active?"#2ecc40":"#e74c3c"},children:e.active?"Active":"Inactive"}),(0,fr.jsx)("button",{style:{background:"none",border:"none",color:"#FFB000",cursor:"pointer",fontWeight:"600"},children:"Edit"})]})]},e.id))})]}),"analytics"===a&&(0,fr.jsxs)("div",{children:[(0,fr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:(null===(r=p.totalUsers)||void 0===r?void 0:r.toLocaleString())||"0"}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Total Users"})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:(null===(i=p.totalScans)||void 0===i?void 0:i.toLocaleString())||"0"}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Total Scans"})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",backdropFilter:"blur(20px)",boxShadow:"0 0 32px 0 rgba(255,215,0,0.18)"},children:[(0,fr.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#FFB000",marginBottom:"0.5rem"},children:(null===(o=p.totalWings)||void 0===o?void 0:o.toLocaleString())||"0"}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem",fontWeight:"500"},children:"Total WINGS"})]})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"1.5rem"},children:"Revenue by Category"}),(0,fr.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map(e=>{var t;return(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px"},children:[(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,fr.jsx)("div",{style:{width:"16px",height:"16px",background:"#FFB000",borderRadius:"4px"}}),(0,fr.jsx)("span",{style:{color:"white",textTransform:"capitalize"},children:e.name})]}),(0,fr.jsxs)("div",{style:{color:"#2ecc40",fontWeight:"600"},children:["$",null===(t=e.revenue)||void 0===t?void 0:t.toLocaleString()]})]},e.name)})})]}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"1.5rem"},children:"User Engagement Metrics"}),(0,fr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFB000"},children:p.dailyActiveUsers||0}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Daily Active Users"})]}),(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFB000"},children:[p.conversionRate||0,"%"]}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Conversion Rate"})]}),(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFB000"},children:p.activeRewards||0}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Active Rewards"})]})]})]})]}),"campaigns"===a&&(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(76,28,140,0.08) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,fr.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"600",color:"#ffffff",marginBottom:"0"},children:"Campaign Management"}),(0,fr.jsx)("button",{style:{background:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 100%)",color:"white",border:"2px solid #FFB000",borderRadius:"8px",padding:"0.75rem 1.5rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",fontSize:"1rem"},children:"Create Campaign"})]}),(0,fr.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},children:m.map(e=>(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"1.5rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,fr.jsx)("h4",{style:{color:"white",margin:0},children:e.name}),(0,fr.jsx)("div",{style:{position:"relative",width:"60px",height:"30px",borderRadius:"15px",cursor:"pointer",transition:"all 0.3s ease",background:e.active?"#FFB000":"#333"},onClick:()=>Y(e.id),children:(0,fr.jsx)("div",{style:{position:"absolute",top:"3px",left:"3px",width:"24px",height:"24px",background:"white",borderRadius:"50%",transition:"all 0.3s ease",transform:e.active?"translateX(30px)":"translateX(0)"}})})]}),(0,fr.jsx)("p",{style:{color:"#9E9E9E",fontSize:"0.9rem",marginBottom:"1rem"},children:e.description}),(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600",background:e.active?"rgba(46, 204, 64, 0.2)":"rgba(231, 76, 60, 0.2)",color:e.active?"#2ecc40":"#e74c3c"},children:e.active?"ACTIVE":"INACTIVE"}),(0,fr.jsx)("button",{style:{background:"none",border:"none",color:"#FFB000",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:"Edit Settings"})]})]},e.id))})]})]}),C&&(0,fr.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",backdropFilter:"blur(20px)"},children:[(0,fr.jsx)("h3",{style:{color:"white",marginBottom:"1.5rem"},children:"Create New Reward"}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,fr.jsx)("input",{type:"text",placeholder:"Reward Name",value:D.name,onChange:e=>M(Sr(Sr({},D),{},{name:e.target.value})),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"}}),(0,fr.jsxs)("select",{value:D.category,onChange:e=>M(Sr(Sr({},D),{},{category:e.target.value})),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"},children:[(0,fr.jsx)("option",{value:"",children:"Select Category"}),l.map(e=>(0,fr.jsx)("option",{value:e.name,style:{background:"#333"},children:e.name},e.name))]}),(0,fr.jsx)("input",{type:"number",placeholder:"WINGS Value",value:D.wings_value,onChange:e=>M(Sr(Sr({},D),{},{wings_value:parseInt(e.target.value)||0})),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"}})]}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[(0,fr.jsx)("button",{onClick:()=>{if(!D.name||!D.category)return void alert("Please fill in all required fields");const e=Sr(Sr({id:Date.now()},D),{},{active:!0});f(t=>[...t,e]),_(!1),M({name:"",category:"",rarity:"common",wings_value:0,season:"Spring 2025"}),alert("Reward created successfully!")},style:{flex:1,background:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 100%)",color:"white",border:"2px solid #FFB000",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Create Reward"}),(0,fr.jsx)("button",{onClick:()=>_(!1),style:{flex:1,background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})}),x&&(0,fr.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",backdropFilter:"blur(20px)"},children:[(0,fr.jsx)("h3",{style:{color:"white",marginBottom:"1.5rem"},children:"Add New User"}),(0,fr.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,fr.jsx)("input",{type:"text",placeholder:"Full Name",value:O.name,onChange:e=>P(Sr(Sr({},O),{},{name:e.target.value})),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"}}),(0,fr.jsx)("input",{type:"email",placeholder:"Email Address",value:O.email,onChange:e=>P(Sr(Sr({},O),{},{email:e.target.value})),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"}}),(0,fr.jsxs)("select",{value:O.tier,onChange:e=>P(Sr(Sr({},O),{},{tier:e.target.value})),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"},children:[(0,fr.jsx)("option",{value:"bronze",style:{background:"#333"},children:"Bronze Tier"}),(0,fr.jsx)("option",{value:"silver",style:{background:"#333"},children:"Silver Tier"}),(0,fr.jsx)("option",{value:"gold",style:{background:"#333"},children:"Gold Tier"}),(0,fr.jsx)("option",{value:"platinum",style:{background:"#333"},children:"Platinum Tier"})]}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,fr.jsx)("input",{type:"number",placeholder:"Starting WINGS",value:O.wings,onChange:e=>P(Sr(Sr({},O),{},{wings:parseInt(e.target.value)||0})),style:{flex:1,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"}}),(0,fr.jsx)("input",{type:"number",placeholder:"Starting Items",value:O.items,onChange:e=>P(Sr(Sr({},O),{},{items:parseInt(e.target.value)||0})),style:{flex:1,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem"}})]})]}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[(0,fr.jsx)("button",{onClick:()=>{if(!O.name||!O.email)return void alert("Please fill in all required fields");const e=Sr(Sr({id:Date.now()},O),{},{status:"active",joinDate:(new Date).toISOString().split("T")[0],lastScan:"Never",totalScans:0});u(t=>[...t,e]),E(!1),P({name:"",email:"",tier:"bronze",wings:0,items:0}),alert("User added successfully!")},style:{flex:1,background:"linear-gradient(135deg, #4C1C8C 0%, #7F3FBF 100%)",color:"white",border:"2px solid #FFB000",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Add User"}),(0,fr.jsx)("button",{onClick:()=>E(!1),style:{flex:1,background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})}),I&&R&&(0,fr.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"400px",backdropFilter:"blur(20px)",textAlign:"center"},children:[(0,fr.jsx)("h3",{style:{color:"white",marginBottom:"1rem"},children:"Award WINGS"}),(0,fr.jsxs)("p",{style:{color:"#9E9E9E",marginBottom:"1.5rem"},children:["Award WINGS to ",R.name]}),(0,fr.jsx)("input",{type:"number",placeholder:"Amount of WINGS",value:j,onChange:e=>B(parseInt(e.target.value)||0),style:{width:"100%",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",color:"white",fontSize:"1rem",marginBottom:"2rem",textAlign:"center"}}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,fr.jsx)("button",{onClick:()=>{!R||j<=0||(u(e=>e.map(e=>e.id===R.id?Sr(Sr({},e),{},{wings:e.wings+j}):e)),A(!1),B(0),alert("Successfully awarded ".concat(j," WINGS to ").concat(R.name,"!")))},style:{flex:1,background:"#FFB000",color:"#000",border:"none",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Award WINGS"}),(0,fr.jsx)("button",{onClick:()=>{A(!1),B(0)},style:{flex:1,background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"})]})]})}),T&&R&&(0,fr.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(76,28,140,0.2) 100%)",border:"1px solid rgba(255, 176, 0, 0.3)",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"600px",backdropFilter:"blur(20px)"},children:[(0,fr.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem"},children:[(0,fr.jsx)("div",{style:{width:"64px",height:"64px",background:"linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"700",fontSize:"1.5rem"},children:R.name.charAt(0)}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)("h3",{style:{color:"white",margin:0},children:R.name}),(0,fr.jsx)("p",{style:{color:"#9E9E9E",margin:"0.5rem 0"},children:R.email}),(0,fr.jsxs)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.8rem",fontWeight:"600",background:"platinum"===R.tier?"rgba(155, 89, 182, 0.2)":"gold"===R.tier?"rgba(241, 196, 15, 0.2)":"silver"===R.tier?"rgba(149, 165, 166, 0.2)":"rgba(230, 126, 34, 0.2)",color:"platinum"===R.tier?"#9B59B6":"gold"===R.tier?"#F1C40F":"silver"===R.tier?"#95A5A6":"#E67E22"},children:[R.tier.toUpperCase()," TIER"]})]})]}),(0,fr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFB000"},children:R.wings}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Total WINGS"})]}),(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFB000"},children:R.items}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Items Collected"})]}),(0,fr.jsxs)("div",{style:{textAlign:"center"},children:[(0,fr.jsx)("div",{style:{fontSize:"2rem",fontWeight:"700",color:"#FFB000"},children:R.totalScans||0}),(0,fr.jsx)("div",{style:{color:"#9E9E9E",fontSize:"0.9rem"},children:"Total Scans"})]})]}),(0,fr.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Join Date:"}),(0,fr.jsx)("span",{style:{color:"white"},children:R.joinDate||"N/A"})]}),(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Last Scan:"}),(0,fr.jsx)("span",{style:{color:"white"},children:R.lastScan||"N/A"})]}),(0,fr.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,fr.jsx)("span",{style:{color:"#9E9E9E"},children:"Status:"}),(0,fr.jsx)("span",{style:{color:"active"===R.status?"#2ecc40":"#e74c3c",fontWeight:"600",textTransform:"uppercase"},children:R.status})]})]}),(0,fr.jsx)("button",{onClick:()=>k(!1),style:{width:"100%",background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"8px",padding:"0.75rem",fontWeight:"600",cursor:"pointer"},children:"Close"})]})}),v&&!q&&(0,fr.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:30},onClick:()=>S(!1)})]})},Ow=()=>{const[e,n]=(0,t.useState)("test"),[r,i]=(0,t.useState)(""),[o,a]=(0,t.useState)(!0),s=e=>{const t=e.substring(0,5);const n=t.split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join("").padEnd(40,"0");return n+(e=>{let t=0;for(let n=0;n<e.length;n+=8)t^=parseInt(e.substr(n,8),2)||0;return t.toString(2).padStart(8,"0")})(n)};(0,t.useEffect)(()=>{i(s(e))},[e]);return(0,fr.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #121212 0%, #1a1a2e 50%, #16213e 100%)",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif'},children:[(0,fr.jsxs)("div",{style:{background:"rgba(76, 28, 140, 0.1)",backdropFilter:"blur(20px)",borderBottom:"1px solid rgba(244, 176, 25, 0.2)",padding:"2rem 0",textAlign:"center"},children:[(0,fr.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"800",background:"linear-gradient(135deg, #F4B019, #FFD700)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",margin:"0 0 0.5rem 0"},children:"\ud83e\udd8b Monarch Circular QR Generator"}),(0,fr.jsx)("p",{style:{color:"#B19CD9",fontSize:"1.2rem",margin:0,opacity:.9},children:"Generate scannable circular QR codes with Papillon branding"})]}),(0,fr.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"2rem",display:"grid",gridTemplateColumns:"minmax(400px, 1fr) minmax(500px, 1fr)",gap:"3rem",alignItems:"start"},children:[(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(244, 176, 25, 0.2)",padding:"2rem",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)"},children:[(0,fr.jsx)("h2",{style:{color:"#F4B019",fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\u2699\ufe0f Generator Settings"}),(0,fr.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,fr.jsx)("label",{style:{display:"block",color:"#F4B019",fontWeight:"600",marginBottom:"0.75rem",fontSize:"1rem"},children:"Product Code (max 5 characters):"}),(0,fr.jsx)("input",{type:"text",value:e,onChange:e=>n(e.target.value),style:{width:"100%",padding:"1rem",background:"rgba(255, 255, 255, 0.1)",border:"2px solid rgba(244, 176, 25, 0.3)",borderRadius:"12px",color:"white",fontSize:"1.1rem",fontWeight:"500",outline:"none",transition:"all 0.3s ease",boxSizing:"border-box"},placeholder:"Enter code...",maxLength:5,onFocus:e=>e.target.style.borderColor="#F4B019",onBlur:e=>e.target.style.borderColor="rgba(244, 176, 25, 0.3)"}),(0,fr.jsxs)("p",{style:{color:"#B19CD9",fontSize:"0.9rem",margin:"0.5rem 0 0 0",opacity:.8},children:[e.length,"/5 characters used"]})]}),(0,fr.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,fr.jsx)("label",{style:{display:"block",color:"#F4B019",fontWeight:"600",marginBottom:"0.75rem",fontSize:"1rem"},children:"Quick Select Products:"}),(0,fr.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.75rem"},children:Object.entries({monarch_jacket_001:{name:"Monarch Varsity Jacket",description:"Limited edition varsity jacket with embroidered Monarch logo",category:"jackets",rarity:"rare",wngs_value:75,shortId:"jkt01"},monarch_tee_001:{name:"Monarch Classic Tee",description:"Premium cotton t-shirt with subtle Monarch branding",category:"tops",rarity:"common",wngs_value:15,shortId:"tee01"},monarch_cap_001:{name:"Monarch Snapback",description:"Embroidered snapback cap with adjustable strap",category:"headwear",rarity:"uncommon",wngs_value:35,shortId:"cap01"},test_reward:{name:"Test Demo Item",description:"Demo item for testing circular QR detection",category:"demo",rarity:"legendary",wngs_value:300,shortId:"test"}}).map(t=>{let[r,i]=t;return(0,fr.jsxs)("button",{onClick:()=>n(i.shortId),style:{padding:"1rem",background:e===i.shortId?"linear-gradient(135deg, #4C1C8C, #7F3FBF)":"rgba(76, 28, 140, 0.2)",border:e===i.shortId?"2px solid #F4B019":"2px solid rgba(127, 63, 191, 0.3)",borderRadius:"12px",color:"white",cursor:"pointer",transition:"all 0.3s ease",textAlign:"left"},onMouseEnter:t=>{e!==i.shortId&&(t.target.style.background="rgba(76, 28, 140, 0.4)",t.target.style.transform="translateY(-2px)")},onMouseLeave:t=>{e!==i.shortId&&(t.target.style.background="rgba(76, 28, 140, 0.2)",t.target.style.transform="translateY(0)")},children:[(0,fr.jsx)("div",{style:{fontWeight:"600",fontSize:"0.95rem",marginBottom:"0.25rem"},children:i.name}),(0,fr.jsxs)("div",{style:{fontSize:"0.8rem",opacity:.8,marginBottom:"0.25rem"},children:["Code: ",i.shortId]}),(0,fr.jsxs)("div",{style:{fontSize:"0.8rem",color:"#4CAF50",fontWeight:"600"},children:[i.wngs_value," WNGS"]})]},r)})})]}),(0,fr.jsx)("div",{style:{marginBottom:"2rem"},children:(0,fr.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.75rem",color:"white",fontSize:"1rem",cursor:"pointer"},children:[(0,fr.jsx)("input",{type:"checkbox",checked:o,onChange:e=>a(e.target.checked),style:{width:"20px",height:"20px",accentColor:"#F4B019"}}),"Show Papillon Logo in Center"]})}),(0,fr.jsxs)("div",{style:{background:"rgba(0, 0, 0, 0.4)",border:"1px solid rgba(244, 176, 25, 0.2)",borderRadius:"12px",padding:"1.5rem",marginBottom:"2rem"},children:[(0,fr.jsx)("h3",{style:{color:"#B19CD9",fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udd22 Binary Encoding"}),(0,fr.jsx)("div",{style:{background:"rgba(0, 0, 0, 0.6)",borderRadius:"8px",padding:"1rem",fontFamily:'"Fira Code", "Monaco", monospace',fontSize:"0.85rem",color:"#4CAF50",wordBreak:"break-all",lineHeight:"1.4"},children:r}),(0,fr.jsxs)("div",{style:{marginTop:"1rem",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem",fontSize:"0.85rem"},children:[(0,fr.jsxs)("div",{style:{color:"#B19CD9"},children:[(0,fr.jsx)("strong",{children:"Data:"})," ",r.substring(0,40)]}),(0,fr.jsxs)("div",{style:{color:"#B19CD9"},children:[(0,fr.jsx)("strong",{children:"Checksum:"})," ",r.substring(40,48)]}),(0,fr.jsxs)("div",{style:{color:"#F4B019"},children:[(0,fr.jsx)("strong",{children:"Total:"})," 48 bits"]})]})]}),(0,fr.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,fr.jsxs)("button",{onClick:()=>{const t=document.getElementById("circular-qr-svg"),n=(new XMLSerializer).serializeToString(t),r=new Blob([n],{type:"image/svg+xml"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download="monarch-".concat(e,"-circular-qr.svg"),o.click(),URL.revokeObjectURL(i)},style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",background:"linear-gradient(135deg, #F4B019, #FFD700)",color:"#121212",fontWeight:"700",fontSize:"1rem",padding:"1rem 1.5rem",border:"none",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(244, 176, 25, 0.3)"},onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 8px 25px rgba(244, 176, 25, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(244, 176, 25, 0.3)"},children:[(0,fr.jsx)("span",{children:"\ud83d\udce5"}),"Download SVG"]}),(0,fr.jsx)("button",{onClick:()=>n(""),style:{padding:"1rem",background:"rgba(255, 255, 255, 0.1)",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.1)"},children:(0,fr.jsx)("span",{children:"\ud83d\udd04"})})]})]}),(0,fr.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.98)",borderRadius:"24px",padding:"2rem",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(244, 176, 25, 0.2)",textAlign:"center"},children:[(0,fr.jsx)("h2",{style:{color:"#121212",fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"\ud83c\udfaf Generated QR Code"}),(0,fr.jsx)("div",{style:{background:"white",borderRadius:"16px",padding:"2rem",marginBottom:"1.5rem",boxShadow:"inset 0 2px 10px rgba(0, 0, 0, 0.1)"},children:(0,fr.jsxs)("svg",{id:"circular-qr-svg",width:"350",height:"350",viewBox:"0 0 300 300",style:{display:"block",margin:"0 auto"},children:[(0,fr.jsx)("rect",{width:"300",height:"300",fill:"#FFFFFF"}),(0,fr.jsx)("circle",{cx:"150",cy:"150",r:"145",fill:"none",stroke:"#000000",strokeWidth:"6"}),Array.from({length:12},(e,t)=>{const n=30*t*(Math.PI/180),r=n-15*Math.PI/180,i=n+15*Math.PI/180,o=145,a=130,s=150+Math.cos(r)*a,l=150+Math.sin(r)*a,c=150+Math.cos(i)*a,d=150+Math.sin(i)*a,u=150+Math.cos(i)*o,h=150+Math.sin(i)*o,f=150+Math.cos(r)*o,p=150+Math.sin(r)*o,g=t%3===0;return(0,fr.jsx)("path",{d:"M ".concat(s," ").concat(l," A ").concat(a," ").concat(a," 0 0 1 ").concat(c," ").concat(d," L ").concat(u," ").concat(h," A ").concat(o," ").concat(o," 0 0 0 ").concat(f," ").concat(p," Z"),fill:g?"#000000":"#FFFFFF",stroke:"#000000",strokeWidth:"1"},"outer-".concat(t))}),(0,fr.jsx)("circle",{cx:"150",cy:"150",r:"120",fill:"none",stroke:"#000000",strokeWidth:"3"}),[{segments:8,radius:{inner:65,outer:75},angleSpan:18,startBit:0},{segments:16,radius:{inner:85,outer:95},angleSpan:9,startBit:8},{segments:24,radius:{inner:105,outer:115},angleSpan:6,startBit:24}].map((e,t)=>Array.from({length:e.segments},(n,i)=>{const o=i*(360/e.segments)*(Math.PI/180),a=o-e.angleSpan*Math.PI/180,s=o+e.angleSpan*Math.PI/180,l=150+Math.cos(a)*e.radius.inner,c=150+Math.sin(a)*e.radius.inner,d=150+Math.cos(s)*e.radius.inner,u=150+Math.sin(s)*e.radius.inner,h=150+Math.cos(s)*e.radius.outer,f=150+Math.sin(s)*e.radius.outer,p=150+Math.cos(a)*e.radius.outer,g=150+Math.sin(a)*e.radius.outer,m=e.startBit+i,y="1"===r[m];return(0,fr.jsx)("path",{d:"M ".concat(l," ").concat(c," A ").concat(e.radius.inner," ").concat(e.radius.inner," 0 0 1 ").concat(d," ").concat(u," L ").concat(h," ").concat(f," A ").concat(e.radius.outer," ").concat(e.radius.outer," 0 0 0 ").concat(p," ").concat(g," Z"),fill:y?"#000000":"#FFFFFF",stroke:"#000000",strokeWidth:"0.5"},"ring-".concat(t,"-").concat(i))})),(0,fr.jsx)("circle",{cx:"150",cy:"150",r:"55",fill:"#FFFFFF",stroke:"#000000",strokeWidth:"4"}),(0,fr.jsx)("circle",{cx:"150",cy:"150",r:"45",fill:"none",stroke:"#000000",strokeWidth:"3"}),(0,fr.jsx)("circle",{cx:"150",cy:"115",r:"4",fill:"#000000"}),(0,fr.jsx)("circle",{cx:"185",cy:"150",r:"4",fill:"#000000"}),(0,fr.jsx)("circle",{cx:"150",cy:"185",r:"4",fill:"#000000"}),(0,fr.jsx)("circle",{cx:"115",cy:"150",r:"4",fill:"#000000"}),o?(0,fr.jsxs)("g",{transform:"translate(150, 145) scale(0.03) translate(-965, -410)",children:[(0,fr.jsx)("path",{d:"M965.35,380.63c-53.21,1.58-99.94-37.36-100.16-97.49-.2-54.36,38.41-99.68,100.16-100.14,55.99-.42,98.03,40.8,99.26,97.88,1.22,56.35-42.99,101.52-99.27,99.75Z",fill:"#000000"}),(0,fr.jsx)("path",{d:"M966.46,439.05c47.18-2.32,98.18,37.36,98.17,98.68,0,55.27-41.86,99.73-99.63,98.75-60.67-1.03-99.14-42.83-99.9-97.4-.86-61.26,50.23-102.87,101.37-100.03Z",fill:"#000000"}),(0,fr.jsx)("path",{d:"M236.74,262.16c4.24,.25,7.04-2.85,10.3-4.95,35.77-23.06,78.33-20.59,112.28,4.79,40.25,30.08,54.38,86.37,35.04,136.47-14.39,37.29-41.54,62.37-78.27,77.53-17.69,7.3-36.28,11.97-55.09,11.84-37.53-.26-71.65-11.49-100.36-36.96-28.13-24.95-43.88-56.5-51.22-92.84-11.23-55.55-1.27-108.45,21.14-159.34,23.73-53.88,60.05-98.07,107.56-132.82C284.89,31.68,337.56,12.12,394.65,3.7c29.15-4.3,58.57-4.72,87.59-1.92,48.25,4.66,94.63,17.27,137.57,40.86,66.42,36.48,115.74,89.41,149.97,156.48,21.05,41.23,34.11,85.05,39.19,131.26,3.15,28.68,5.46,57.46,3.87,86.17-2.65,48.19-11.14,95.48-25.31,141.79-27.17,88.79-71.22,168.99-123.39,245.11-37.17,54.23-77.54,106.01-120.45,155.83-30.53,35.45-61.47,70.51-93.43,104.72-23.31,24.95-46.07,50.49-69.42,75.41-70.8,75.55-143.47,149.3-217.8,221.35-30.3,29.37-61.18,58.3-93.28,85.83-13.53,11.6-28.74,14.4-45.38,11.63-16.21-2.71-27.3-20.35-23.7-36.76,1.96-8.91,6.27-16.77,11.15-24.44,17.42-27.41,37.62-52.79,57.51-78.36,57.5-73.89,115.36-147.49,173.21-221.11,48.68-61.95,96.29-124.71,142.59-188.46,55.87-76.92,109.09-155.58,153.83-239.6,32.46-60.96,59.52-124.21,76.27-191.5,8.52-34.21,13.5-68.98,13.22-104.18-.37-48.6-11.37-95.01-37.3-136.42-33.78-53.94-82.9-86.77-145.84-97.34-59.39-9.98-112.46,6.05-159.33,42.87-24.3,19.09-41.59,43.47-49.46,73.87-.44,1.72-1.16,3.41,.21,5.37Z",fill:"#000000"}),(0,fr.jsx)("path",{d:"M1695.11,264.15c-3.87-22.28-12.68-40.21-25.49-56.03-31.54-38.96-73.39-60.6-122.15-68-76.02-11.54-139.34,14.6-190.01,70.76-29.32,32.5-44.49,72.67-51.91,115.55-10.35,59.8-1.62,118.08,14.96,175.64,20.57,71.42,52.55,137.82,89.39,202.03,52.52,91.52,113.86,177.08,177.14,261.33,54.59,72.67,110.97,143.95,167.02,215.48,47.73,60.91,95.63,121.69,141.96,183.68,9.97,13.33,19.6,26.96,27.71,41.55,5.95,10.71,8.2,21.92,3.05,33.67-5.14,11.73-13.86,18.21-26.95,19.23-16.72,1.3-30.31-3.95-43.08-15.07-82.91-72.22-159.38-151.09-236.49-229.24-33.47-33.93-65.79-69.06-98.59-103.68-31.86-33.64-63.52-67.51-94.03-102.36-35.26-40.27-70.04-80.95-103.23-123.02-37.15-47.08-71.74-95.89-102.59-147.23-36.79-61.24-65.49-126.16-84.5-195.23-15.29-55.58-21.92-112.14-19.43-169.67,4.56-105.31,40.12-197.82,115.47-273.1,53.73-53.67,119.21-85.11,194-95.75,92.53-13.17,179.85,2.43,257.42,56.57,75.73,52.85,123.95,124.99,138.04,216.96,7.33,47.83,3.27,95.62-23.74,138.08-25.55,40.17-61.92,64.11-109.97,69.79-41.07,4.85-77.82-6.27-110.35-30.22-45.3-33.36-64.26-94.2-43.97-145.77,16.74-42.55,57.05-69.78,101.87-68.7,16.18,.39,30.85,5.69,44.53,14.04,4.13,2.52,8.2,5.16,13.93,8.77Z",fill:"#000000"})]}):(0,fr.jsx)("text",{x:"150",y:"155",textAnchor:"middle",fontFamily:"Arial, sans-serif",fontSize:"16",fontWeight:"bold",fill:"#666",children:"LOGO"})]})}),(0,fr.jsxs)("div",{style:{background:"linear-gradient(135deg, #f8f9fa, #e9ecef)",borderRadius:"12px",padding:"1.5rem",textAlign:"left"},children:[(0,fr.jsxs)("h3",{style:{color:"#121212",fontSize:"1.25rem",fontWeight:"700",marginBottom:"1rem",textAlign:"center"},children:['Encoded: "',e,'"']}),(0,fr.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",fontSize:"0.9rem",color:"#495057"},children:[(0,fr.jsxs)("div",{children:[(0,fr.jsx)("strong",{style:{color:"#121212"},children:"Total bits:"})," 48"]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)("strong",{style:{color:"#121212"},children:"Filled segments:"})," ",r.split("1").length-1,"/48"]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)("strong",{style:{color:"#121212"},children:"Contrast:"})," Maximum"]}),(0,fr.jsxs)("div",{children:[(0,fr.jsx)("strong",{style:{color:"#121212"},children:"Format:"})," Circular QR"]})]}),(0,fr.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",background:"rgba(76, 28, 140, 0.1)",borderRadius:"8px",borderLeft:"4px solid #4C1C8C"},children:[(0,fr.jsx)("h4",{style:{color:"#4C1C8C",margin:"0 0 0.5rem 0",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem"},children:"\ud83d\udcf1 Testing Instructions"}),(0,fr.jsxs)("ol",{style:{color:"#495057",margin:0,paddingLeft:"1.2rem",fontSize:"0.9rem",lineHeight:"1.5"},children:[(0,fr.jsx)("li",{children:"Download the SVG file"}),(0,fr.jsxs)("li",{children:["Open scanner: ",(0,fr.jsx)("code",{style:{background:"rgba(0,0,0,0.1)",padding:"2px 4px",borderRadius:"3px"},children:"/scan"})]}),(0,fr.jsx)("li",{children:"Point camera at QR code"}),(0,fr.jsx)("li",{children:"Watch console for detection logs"})]})]})]})]})]})]})};var Pw=n(950),jw=n.t(Pw,2);function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bw.apply(this,arguments)}function Lw(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Fw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(vb){}new Map;const zw=r.startTransition;jw.flushSync,r.useId;function Uw(e){let{basename:n,children:r,future:i,window:o}=e,a=t.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),p(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,s)));let l=a.current,[c,d]=t.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},g=t.useCallback(e=>{f&&zw?zw(()=>d(e)):d(e)},[d,f]);return t.useLayoutEffect(()=>l.listen(g),[l,g]),t.useEffect(()=>pe(i),[i]),t.createElement(ye,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Hw="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ww=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vw=t.forwardRef(function(e,n){let r,{onClick:i,relative:o,reloadDocument:a,replace:s,state:c,target:d,to:u,preventScrollReset:f,viewTransition:p}=e,g=Lw(e,Fw),{basename:m}=t.useContext(Y),y=!1;if("string"===typeof u&&Ww.test(u)&&(r=u,Hw))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=N(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(vb){}let w=function(e,n){let{relative:r}=void 0===n?{}:n;Q()||l(!1);let{basename:i,navigator:o}=t.useContext(Y),{hash:a,pathname:s,search:c}=te(e,{relative:r}),d=s;return"/"!==i&&(d="/"===s?i:j([i,s])),o.createHref({pathname:d,search:c,hash:a})}(u,{relative:o}),b=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:a,relative:s,viewTransition:l}=void 0===n?{}:n,c=$(),d=J(),u=te(e,{relative:s});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:h(d)===h(u);c(e,{replace:n,state:o,preventScrollReset:a,relative:s,viewTransition:l})}},[d,c,u,i,o,r,e,a,s,l])}(u,{replace:s,state:c,target:d,preventScrollReset:f,relative:o,viewTransition:p});return t.createElement("a",Bw({},g,{href:r||w,onClick:y||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:d}))});var Gw,Yw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gw||(Gw={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Yw||(Yw={}));var Xw,Zw,qw,Qw,Jw,Kw,$w,eb,tb,nb,rb;const ib=hr(Xw||(Xw=o(["\n  0%, 100% { \n    background-position: 0% 50%; \n  }\n  50% { \n    background-position: 100% 50%; \n  }\n"]))),ob=dr.nav(Zw||(Zw=o(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(18, 18, 18, 0.95);\n  backdrop-filter: blur(20px);\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  padding: 8px 0 max(8px, env(safe-area-inset-bottom));\n  z-index: 1000;\n  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);\n"]))),ab=dr.div(qw||(qw=o(["\n  max-width: 100%;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  position: relative;\n  padding: 0 20px;\n"]))),sb=(hr(Qw||(Qw=o(["\n  0% { transform: scale(0); opacity: 1; }\n  100% { transform: scale(2); opacity: 0; }\n"]))),dr(Vw)(Jw||(Jw=o(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 8px 12px;\n  border-radius: 12px;\n  text-decoration: none;\n  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  min-width: 60px;\n  min-height: 48px; /* Ensure 44px+ touch target */\n  color: ",";\n  \n  ","\n  \n  &:hover {\n    color: #FFB000;\n    background: rgba(76, 28, 140, 0.1);\n    transform: translateY(-1px);\n  }\n  \n  &:active::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 20px;\n    height: 20px;\n    background: rgba(127, 63, 191, 0.3);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    animation: ripple 0.3s ease-out;\n  }\n"])),e=>{let{$isActive:t}=e;return t?"#FFB000":"rgba(250, 250, 250, 0.7)"},e=>{let{$isActive:t}=e;return t&&"\n    background: rgba(127, 63, 191, 0.15);\n    transform: translateY(-2px);\n  "})),lb=dr.div(Kw||(Kw=o(["\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 4px;\n  position: relative;\n  \n  svg {\n    width: 22px;\n    height: 22px;\n    stroke-width: 2;\n    transition: all 0.2s ease;\n  }\n  \n  ","\n"])),e=>{let{$isActive:t}=e;return t&&"\n    svg {\n      stroke-width: 2.5;\n      transform: scale(1.1);\n    }\n  "}),cb=dr.span($w||($w=o(["\n  font-size: 11px;\n  font-weight: ",";\n  color: ",";\n  transition: all 0.2s ease;\n  text-align: center;\n  line-height: 1.2;\n"])),e=>{let{$isActive:t}=e;return t?"600":"500"},e=>{var t,n;let{$isActive:r,theme:i}=e;return r?(null===(t=i.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.purple)||"#7F3FBF":"rgba(255, 255, 255, 0.7)"}),db=dr.div(eb||(eb=o(["\n  position: absolute;\n  top: -2px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 4px;\n  height: 4px;\n  background: ",";\n  border-radius: 50%;\n  opacity: ",";\n  transition: opacity 0.2s ease;\n"])),e=>{var t,n;let{theme:r}=e;return(null===(t=r.colors)||void 0===t||null===(n=t.accent)||void 0===n?void 0:n.purple)||"#7F3FBF"},e=>{let{$isActive:t}=e;return t?1:0}),ub=dr.div(tb||(tb=o(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),hb=(hr(nb||(nb=o(["\n  0% { box-shadow: 0 0 0 0 rgba(127, 63, 191, 0.4); }\n  70% { box-shadow: 0 0 0 12px rgba(127, 63, 191, 0); }\n  100% { box-shadow: 0 0 0 0 rgba(127, 63, 191, 0); }\n"]))),dr(Vw)(rb||(rb=o(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 56px;\n  height: 56px;\n  background: linear-gradient(135deg, #4C1C8C 0%, #FFB000 100%);\n  border-radius: 18px;\n  text-decoration: none;\n  color: white;\n  font-size: 24px;\n  box-shadow: \n    0 8px 25px rgba(76, 28, 140, 0.4),\n    0 0 20px rgba(255, 176, 0, 0.3);\n  transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);\n  transform: translateY(-8px);\n  position: relative;\n  overflow: hidden;\n  \n  /* Brand shimmer */\n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: linear-gradient(45deg, \n      transparent 30%, \n      rgba(250,250,250,0.4) 50%, \n      transparent 70%\n    );\n    transform: rotate(45deg);\n    animation: "," 3s linear infinite;\n  }\n  \n  &:hover {\n    transform: translateY(-12px) scale(1.1);\n    box-shadow: \n      0 12px 35px rgba(76, 28, 140, 0.6),\n      0 0 30px rgba(255, 176, 0, 0.5);\n  }\n  \n  &:active {\n    transform: translateY(-6px) scale(0.95);\n  }\n  \n  svg {\n    width: 26px;\n    height: 26px;\n    stroke-width: 2.5;\n  }\n"])),ib)),fb=()=>{const e=J(),t=[{path:"/",icon:"Home",label:"Home"},{path:"/passport",icon:"Book",label:"Passport"},{path:"/closet",icon:"Shirt",label:"Closet"},{path:"/profile",icon:"User",label:"Profile"}],n=(e,t)=>{const n=t?"#7F3FBF":"rgba(255, 255, 255, 0.7)";switch(e){case"Home":return(0,fr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,fr.jsx)("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,fr.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]});case"Book":return(0,fr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,fr.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,fr.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});case"Shirt":return(0,fr.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:(0,fr.jsx)("path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"})});case"User":return(0,fr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:n,children:[(0,fr.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,fr.jsx)("circle",{cx:"12",cy:"7",r:"4"})]});default:return null}};return(0,fr.jsx)(ob,{children:(0,fr.jsxs)(ab,{children:[t.slice(0,2).map(t=>{const r=e.pathname===t.path;return(0,fr.jsxs)(sb,{to:t.path,$isActive:r,children:[(0,fr.jsx)(db,{$isActive:r}),(0,fr.jsx)(lb,{$isActive:r,children:n(t.icon,r)}),(0,fr.jsx)(cb,{$isActive:r,children:t.label})]},t.path)}),(0,fr.jsx)(ub,{children:(0,fr.jsx)(hb,{to:"/scan","aria-label":"Scan QR Code",children:(0,fr.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[(0,fr.jsx)("path",{d:"M9 12l2 2 4-4"}),(0,fr.jsx)("path",{d:"M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c.39 0 .78.03 1.17.08"}),(0,fr.jsx)("path",{d:"M16 3v6h6"})]})})}),t.slice(2).map(t=>{const r=e.pathname===t.path;return(0,fr.jsxs)(sb,{to:t.path,$isActive:r,children:[(0,fr.jsx)(db,{$isActive:r}),(0,fr.jsx)(lb,{$isActive:r,children:n(t.icon,r)}),(0,fr.jsx)(cb,{$isActive:r,children:t.label})]},t.path)})]})})};var pb,gb;const mb=hr(pb||(pb=o(["\n  0% { box-shadow: 0 0 0 0 ","55; }\n  70% { box-shadow: 0 0 0 16px rgba(244,160,25,0); }\n  100% { box-shadow: 0 0 0 0 rgba(244,160,25,0); }\n"])),Dr.colors.accent);dr.button(gb||(gb=o(["\n  position: fixed;\n  bottom: 32px;\n  left: 32px;\n  z-index: 2001;\n  background: ",";\n  color: #fff;\n  border: none;\n  border-radius: 50%;\n  width: 64px;\n  height: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n  box-shadow: 0 0 24px 0 ","88;\n  animation: "," 2s infinite;\n  cursor: pointer;\n  transition: background 0.2s, box-shadow 0.2s;\n  outline: none;\n  border: 2.5px solid ",";\n  backdrop-filter: blur(12px);\n\n  &:hover, &:focus {\n    background: ",";\n    color: #fff;\n    box-shadow: 0 0 32px 0 ",";\n  }\n\n  @media (max-width: 600px) {\n    bottom: 16px;\n    left: 16px;\n    width: 54px;\n    height: 54px;\n    font-size: 1.5rem;\n  }\n"])),Dr.gradients.primary,Dr.colors.accent,mb,Dr.colors.accent,Dr.colors.accent,Dr.colors.accent);var yb;const wb=dr.div(yb||(yb=o(["\n  background-color: ",";\n  color: ",";\n  min-height: 100vh;\n  position: relative;\n"])),e=>{let{theme:t}=e;return t.colors.background},e=>{let{theme:t}=e;return t.colors.text.primary});const bb=function(){const e=J(),[n,r]=(0,t.useState)(()=>localStorage.getItem("themeMode")||"dark");(0,t.useEffect)(()=>{localStorage.setItem("themeMode",n)},[n]);const i="dark"===n?Dr:Mr;return(0,fr.jsx)(ka,{children:(0,fr.jsxs)(nr,{theme:i,children:[(0,fr.jsx)(jr,{}),(0,fr.jsx)(Ha,{children:(0,fr.jsxs)(wb,{children:[(0,fr.jsx)(Rr,{mode:"wait",children:(0,fr.jsxs)(we,{location:e,children:[(0,fr.jsx)(me,{path:"/join/:referralCode",element:(0,fr.jsx)(Dw,{})}),(0,fr.jsx)(me,{path:"/*",element:(0,fr.jsx)(uc,{})}),(0,fr.jsx)(me,{path:"/passport",element:(0,fr.jsx)(Jc,{})}),(0,fr.jsx)(me,{path:"/season-roadmap",element:(0,fr.jsx)(Zd,{})}),(0,fr.jsx)(me,{path:"/scan",element:(0,fr.jsx)(Wh,{})}),(0,fr.jsx)(me,{path:"/closet",element:(0,fr.jsx)(op,{})}),(0,fr.jsx)(me,{path:"/profile",element:(0,fr.jsx)(Sm,{})}),(0,fr.jsx)(me,{path:"/settings",element:(0,fr.jsx)(ny,{themeMode:n,onToggleTheme:()=>{r(e=>"dark"===e?"light":"dark")}})}),(0,fr.jsx)(me,{path:"/quests",element:(0,fr.jsx)(lw,{})}),(0,fr.jsx)(me,{path:"/login",element:(0,fr.jsx)(Dw,{})}),(0,fr.jsx)(me,{path:"/generate-qr",element:(0,fr.jsx)(Ow,{})}),(0,fr.jsx)(me,{element:(0,fr.jsx)(Na,{}),children:(0,fr.jsx)(me,{path:"/admin",element:(0,fr.jsx)(Mw,{})})})]},e.pathname)}),(0,fr.jsx)(fb,{})]})})]})})};i.createRoot(document.getElementById("root")).render((0,fr.jsx)(t.StrictMode,{children:(0,fr.jsx)(Uw,{children:(0,fr.jsx)(ka,{children:(0,fr.jsx)(bb,{})})})}))})()})();
//# sourceMappingURL=main.f891f51a.js.map