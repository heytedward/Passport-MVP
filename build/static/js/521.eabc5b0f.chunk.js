"use strict";(self.webpackChunkmonarch_passport_mvp=self.webpackChunkmonarch_passport_mvp||[]).push([[521],{1949:(e,n,t)=>{t.d(n,{A:()=>s});var r,o,i=t(7528),a=t(5464);const l=(0,a.i7)(r||(r=(0,i.A)(["\n  0%, 100% { \n    box-shadow: \n      0 0 12px 0 rgba(255,215,0,0.15),\n      0 0 24px 0 rgba(255,215,0,0.08),\n      inset 0 1px 0 rgba(255,215,0,0.1);\n  }\n  50% { \n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),s=a.Ay.div(o||(o=(0,i.A)(["\n  position: relative;\n  background: ",";\n  border-radius: 20px;\n  border: 3px solid ",";\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  overflow: hidden;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    border: 3px solid ",";\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n    animation: "," 2s ease-in-out infinite;\n  }\n  \n  /* Content positioning */\n  > * {\n    position: relative;\n    z-index: 1;\n  }\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.glass)||void 0===t?void 0:t.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||"#FFD700"},e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||"#FFD700"},l)},2479:(e,n,t)=>{t.d(n,{V:()=>s});var r=t(2555),o=t(5043),i=t(2507),a=t(342);const l=(0,i.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),s=()=>{const{user:e}=(0,a.A)(),[n,t]=(0,o.useState)([]),[i,s]=(0,o.useState)(!0),[d,c]=(0,o.useState)(null),p=[{id:"digital_collector",icon:"\ud83d\udcf1",title:"Digital Collector",description:"Scan QR codes on Papillon items to build your digital collection and unlock exclusive rewards.",target:10,reward:100,category:"Collection",type:"qr_scans"},{id:"social_butterfly",icon:"\ud83d\udc65",title:"Social Butterfly",description:"Share your Monarch Passport journey on Instagram, Twitter, or TikTok to inspire others and grow the community.",target:5,reward:75,category:"Social",type:"social_shares"},{id:"daily_dedication",icon:"\ud83c\udfaf",title:"Daily Dedication",description:"Complete daily challenges consistently to prove your dedication to the Monarch lifestyle.",target:15,reward:125,category:"Daily",type:"daily_completions"},{id:"brand_explorer",icon:"\ud83d\udecd\ufe0f",title:"Brand Explorer",description:"Explore the Papillon brand universe by visiting our Shopify store and engaging with our content.",target:3,reward:50,category:"Engagement",type:"brand_interactions"}],m=(0,o.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.id)try{var n,o,i,a;s(!0),c(null);const[d,m,u,g]=await Promise.all([l.from("user_closet").select("id").eq("user_id",e.id).eq("earned_via","qr_scan"),l.from("user_activity").select("id").eq("user_id",e.id).eq("activity_type","social_share"),l.from("daily_completions").select("id").eq("user_id",e.id),l.from("user_activity").select("id").eq("user_id",e.id).in("activity_type",["store_visit","content_view","brand_interaction"])]),h={qr_scans:(null===(n=d.data)||void 0===n?void 0:n.length)||0,social_shares:(null===(o=m.data)||void 0===o?void 0:o.length)||0,daily_completions:(null===(i=u.data)||void 0===i?void 0:i.length)||0,brand_interactions:(null===(a=g.data)||void 0===a?void 0:a.length)||0},f=p.map(e=>{const n=h[e.type]||0,t=Math.min(n/e.target*100,100),o=n>=e.target;return(0,r.A)((0,r.A)({},e),{},{progress:n,total:e.target,percent:Math.floor(t),completed:o})});t(f)}catch(d){console.error("Error fetching quest progress:",d),c(d.message),t(p.map(e=>(0,r.A)((0,r.A)({},e),{},{progress:0,total:e.target,percent:0,completed:!1})))}finally{s(!1)}else s(!1)},[null===e||void 0===e?void 0:e.id]),u=(0,o.useCallback)(async t=>{try{const r=n.find(e=>e.id===t);if(!r||r.completed)return;const{error:o}=await l.rpc("add_wings_to_user",{user_id_param:e.id,wings_amount:r.reward,activity_type_param:"quest_completion",description_param:"Completed quest: ".concat(r.title)});if(o)throw o;return await m(),{success:!0,reward:r.reward}}catch(r){return console.error("Error completing quest:",r),{success:!1,error:r.message}}},[n,null===e||void 0===e?void 0:e.id,m]),[g,h]=(0,o.useState)(new Set),f=(0,o.useCallback)(async()=>{if(null!==e&&void 0!==e&&e.id)try{const n=(new Date).toISOString().split("T")[0],{data:t,error:r}=await l.from("daily_completions").select("quest_type").eq("user_id",e.id).gte("completed_at",n);if(r)throw r;const o=new Set((null===t||void 0===t?void 0:t.map(e=>e.quest_type))||[]);h(o)}catch(n){console.error("Error loading today's completions:",n)}},[null===e||void 0===e?void 0:e.id]),x=(0,o.useCallback)(async n=>{if(null!==e&&void 0!==e&&e.id)try{const t=(new Date).toISOString().split("T")[0],{data:r}=await l.from("daily_completions").select("id").eq("user_id",e.id).eq("quest_type",n).gte("completed_at",t).single();if(r)return void console.log("Quest already completed today");const{error:o}=await l.from("daily_completions").insert({user_id:e.id,quest_type:n,completed_at:(new Date).toISOString()});if(o)throw o;const{error:i}=await l.rpc("add_wings_to_user",{user_id_param:e.id,wings_amount:10,activity_type_param:"daily_quest",description_param:"Completed daily quest: ".concat(n)});if(i)throw i;return h(e=>new Set([...e,n])),{success:!0,reward:10}}catch(t){return console.error("Error marking quest complete:",t),{success:!1,error:t.message}}},[null===e||void 0===e?void 0:e.id]);return(0,o.useEffect)(()=>{m()},[m]),{quests:n,loading:i,error:d,refresh:m,completeQuest:u,todaysCompletions:g,loadTodaysCompletions:f,markQuestComplete:x}}},4521:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Xe});var r,o,i,a,l,s,d,c,p,m,u,g,h,f,x,y,v,b,w,A,k=t(7528),j=t(5043),_=t(5464),S=t(3216),I=t(2507),C=t(342),z=t(3987),W=t(2479),D=t(1949),q=t(7364),M=t(579);(0,I.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo");const Y=_.Ay.div(r||(r=(0,k.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(18, 18, 18, 0.8);\n  backdrop-filter: blur(20px);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  animation: fadeIn 0.3s ease;\n  padding: 1rem;\n  \n  /* Ensure the overlay is clickable */\n  pointer-events: auto;\n  \n  @keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }\n"]))),E=(0,_.Ay)(D.A)(o||(o=(0,k.A)(["\n  max-width: 500px;\n  width: 100%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  pointer-events: auto;\n"]))),F=_.Ay.div(i||(i=(0,k.A)(["\n  padding: 32px 32px 24px 32px;\n  border-bottom: 3px solid ",";\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold}),G=_.Ay.h2(a||(a=(0,k.A)(["\n  font-family: ",";\n  color: ",";\n  margin: 0 0 16px 0;\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.typography.fontSize.h2},e=>{let{theme:n}=e;return n.typography.fontWeight.bold}),T=_.Ay.div(l||(l=(0,k.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 16px;\n  background: rgba(255, 176, 0, 0.05);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 176, 0, 0.2);\n  margin-bottom: 16px;\n"]))),N=_.Ay.div(s||(s=(0,k.A)(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  color: ",";\n  font-weight: 500;\n"])),e=>{let{theme:n}=e;return n.colors.text.secondary}),O=_.Ay.div(d||(d=(0,k.A)(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px 32px 32px 32px;\n"]))),P=_.Ay.div(c||(c=(0,k.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),Q=_.Ay.div(p||(p=(0,k.A)(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  padding: 24px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 20px;\n  border: 3px solid ",";\n  transition: all "," ",";\n  cursor: pointer;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: ",";\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.effects.neonGlow}),B=_.Ay.div(m||(m=(0,k.A)(["\n  width: 48px;\n  height: 48px;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  background: ",";\n"])),e=>{let{platform:n,theme:t}=e;return"twitter"===n?t.colors.accent.cyan:t.colors.accent.pink}),J=_.Ay.div(u||(u=(0,k.A)(["\n  flex: 1;\n"]))),R=_.Ay.div(g||(g=(0,k.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  margin-bottom: 8px;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.body}),V=_.Ay.div(h||(h=(0,k.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary},e=>{let{theme:n}=e;return n.typography.fontSize.small}),H=_.Ay.div(f||(f=(0,k.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 8px;\n"]))),L=_.Ay.div(x||(x=(0,k.A)(["\n  font-family: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{$completed:n,theme:t}=e;return n?t.colors.accent.green:t.colors.text.secondary},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.small}),Z=_.Ay.div(y||(y=(0,k.A)(["\n  font-family: ",";\n  color: ",";\n  font-size: 0.75rem;\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.body},e=>{let{theme:n}=e;return n.colors.text.secondary}),X=_.Ay.div(v||(v=(0,k.A)(["\n  font-family: ",";\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n"])),e=>{let{theme:n}=e;return n.typography.fontFamily.heading},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.typography.fontWeight.bold},e=>{let{theme:n}=e;return n.typography.fontSize.small}),U=_.Ay.button(b||(b=(0,k.A)(["\n  position: absolute;\n  top: 24px;\n  right: 24px;\n  background: transparent;\n  border: 3px solid ",";\n  color: ",";\n  font-size: 1.5rem;\n  cursor: pointer;\n  z-index: 10;\n  padding: 0;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 20px;\n  transition: all "," ",";\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n    box-shadow: ",";\n  }\n  \n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: ",";\n    color: ",";\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.text.primary},e=>{let{theme:n}=e;return n.animation.duration.normal},e=>{let{theme:n}=e;return n.animation.timing.smooth},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.background},e=>{let{theme:n}=e;return n.effects.neonGlow},e=>{let{theme:n}=e;return n.colors.accent.gold},e=>{let{theme:n}=e;return n.colors.background}),$=(_.Ay.button(w||(w=(0,k.A)(["\n  background: rgba(255, 255, 255, 0.1);\n  color: rgba(255, 255, 255, 0.8);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  padding: 12px 24px;\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-top: 1rem;\n  width: 100%;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.15);\n    border-color: rgba(255, 255, 255, 0.3);\n  }\n"]))),_.Ay.div(A||(A=(0,k.A)(["\n  margin-top: 1rem;\n  padding: 1rem;\n  background: rgba(34, 197, 94, 0.1);\n  border: 1px solid rgba(34, 197, 94, 0.3);\n  border-radius: 12px;\n  text-align: center;\n  color: #22C55E;\n"]))),e=>{let{isOpen:n,onClose:t,onQuestComplete:r}=e;const{user:o}=(0,C.A)(),{awardStreakStamp:i}=(0,z.S)(),[a,l]=(0,j.useState)(new Set),[s,d]=(0,j.useState)(!1),{todaysCompletions:c,loadTodaysCompletions:p,markQuestComplete:m}=(0,W.V)();if((0,j.useEffect)(()=>{n&&p()},[n,p]),!n)return null;const u=[{id:"twitter",platform:"twitter",icon:"\ud83d\udc26",title:"Say GM on Twitter/X",description:'Tweet "GM @PapillonBrandUs" to start your day',reward:"+10 WNGS",action:async()=>{if(!a.has("twitter")){d(!0);try{const e=encodeURIComponent("GM @PapillonBrandUs \ud83e\udd8b #PapillonBrand #PapillonMorning #GM"),n="https://twitter.com/intent/tweet?text=".concat(e);window.open(n,"_blank"),await m("twitter"),l(e=>new Set([...e,"twitter"])),r&&r()}catch(e){console.error("Error completing Twitter quest:",e)}finally{d(!1)}}},completed:a.has("twitter"),date:a.has("twitter")?"Mar 18, 2025":""},{id:"instagram",platform:"instagram",icon:"\ud83d\udcf8",title:"Engage on Instagram",description:"Like, comment, or share our latest post",reward:"+15 WNGS",action:async()=>{if(!a.has("instagram")){d(!0);try{const e="https://instagram.com/papillonbrand.us";window.open(e,"_blank"),await m("instagram"),l(e=>new Set([...e,"instagram"])),r&&r()}catch(e){console.error("Error completing Instagram quest:",e)}finally{d(!1)}}},completed:a.has("instagram"),date:a.has("instagram")?"Mar 17, 2025":""}];u.every(e=>e.completed),u.reduce((e,n)=>n.completed?e+parseInt(n.reward.match(/\d+/)[0]):e,0);return(0,M.jsx)(Y,{onClick:e=>{e.target===e.currentTarget&&t()},children:(0,M.jsxs)(E,{onClick:e=>e.stopPropagation(),children:[(0,M.jsx)(U,{onClick:e=>{e.stopPropagation(),t()},children:"\xd7"}),(0,M.jsxs)(F,{children:[(0,M.jsx)(G,{children:"Daily Social Quests"}),(0,M.jsxs)(T,{children:[(0,M.jsx)(N,{children:"Next reset in:"}),(0,M.jsx)(q.A,{targetDate:(new Date).setHours(24,0,0,0),size:"1rem",showSeconds:!1})]})]}),(0,M.jsx)(O,{children:(0,M.jsx)(P,{children:u.map(e=>(0,M.jsxs)(Q,{onClick:e.completed?null:e.action,style:{cursor:e.completed?"default":"pointer"},children:[(0,M.jsx)(B,{platform:e.platform,children:e.icon}),(0,M.jsxs)(J,{children:[(0,M.jsx)(R,{children:e.title}),(0,M.jsx)(V,{children:e.description})]}),(0,M.jsxs)(H,{children:[(0,M.jsx)(L,{$completed:e.completed,children:e.completed?"Completed":"Available"}),e.date&&(0,M.jsx)(Z,{children:e.date}),e.completed&&(0,M.jsx)(X,{children:e.reward})]})]},e.id))})})]})})});var K,ee,ne,te,re,oe,ie,ae,le,se,de,ce,pe,me,ue,ge,he,fe,xe,ye,ve,be,we,Ae,ke,je,_e,Se,Ie=t(2765);const Ce=(0,I.UU)("https://ywagbnjejhpdujkftbxq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl3YWdibmplamhwZHVqa2Z0YnhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MjY3NDQsImV4cCI6MjA2NTQwMjc0NH0.veG_QjcIYid1p7R13ERwz9r02VgkkHTOHxW14hnYuBo"),ze="#FFB000",We="#4C1C8C",De=_.Ay.div(K||(K=(0,k.A)(["\n  min-height: 100vh;\n  background: ",";\n  padding: 0 0 80px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n"])),e=>{var n;let{theme:t}=e;return(null===(n=t.colors)||void 0===n?void 0:n.background)||"#000000"}),qe=_.Ay.div(ee||(ee=(0,k.A)(["\n  padding: 2.2rem 1.2rem 1.2rem 1.2rem;\n  text-align: left;\n"]))),Me=_.Ay.h1(ne||(ne=(0,k.A)(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0 0 0.3rem 0;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.primary)||"#fff"}),Ye=_.Ay.div(te||(te=(0,k.A)(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1.05rem;\n  color: ",";\n  font-weight: 500;\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 12px;\n  padding: 0.8rem 1.2rem;\n  margin-top: 0.8rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: ",";\n    border-color: ",";\n  }\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze},e=>{var n,t,r,o;let{theme:i}=e;return"linear-gradient(135deg, ".concat((null===(n=i.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze,"22 0%, ").concat((null===(r=i.colors)||void 0===r||null===(o=r.accent)||void 0===o?void 0:o.purple)||We,"11 100%)")},e=>{var n,t;let{theme:r}=e;return"".concat((null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze,"33")},e=>{var n,t,r,o;let{theme:i}=e;return"linear-gradient(135deg, ".concat((null===(n=i.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze,"28 0%, ").concat((null===(r=i.colors)||void 0===r||null===(o=r.accent)||void 0===o?void 0:o.purple)||We,"15 100%)")},e=>{var n,t;let{theme:r}=e;return"".concat((null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze,"44")}),Ee=_.Ay.span(re||(re=(0,k.A)(["\n  font-size: 1.1rem;\n"]))),Fe=_.Ay.div(oe||(oe=(0,k.A)(["\n  position: fixed;\n  top: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: linear-gradient(135deg, #10B981 0%, #059669 100%);\n  color: white;\n  padding: 16px 32px;\n  border-radius: 12px;\n  font-weight: 600;\n  z-index: 1000;\n  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);\n  animation: slideIn 0.3s ease-out;\n  font-family: 'Outfit', sans-serif;\n  \n  @keyframes slideIn {\n    from { opacity: 0; transform: translateX(-50%) translateY(-20px); }\n    to { opacity: 1; transform: translateX(-50%) translateY(0); }\n  }\n"]))),Ge=_.Ay.div(ie||(ie=(0,k.A)(["\n  padding: 0 1.2rem;\n  margin-bottom: 1.2rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1.2rem;\n  @media (max-width: 700px) {\n    gap: 1rem;\n  }\n"]))),Te=_.Ay.div(ae||(ae=(0,k.A)(["\n  display: flex;\n  gap: 1.2rem;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),Ne=_.Ay.button(le||(le=(0,k.A)(["\n  flex: 1;\n  background: ",";\n  border: 3px solid ",";\n  border-radius: 20px;\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  padding: 18px 18px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  cursor: pointer;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  outline: none;\n  position: relative;\n  min-width: 0;\n  min-height: 140px;\n  &:hover, &:focus {\n    border: 3px solid ",";\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.glass)||void 0===t?void 0:t.background)||"linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)"},e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze},e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze}),Oe=_.Ay.div(se||(se=(0,k.A)(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.15rem;\n  font-weight: 700;\n  color: ",";\n  margin-bottom: 0.5rem;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.primary)||"#fff"}),Pe=_.Ay.div(de||(de=(0,k.A)(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  color: ",";\n  font-weight: 500;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.secondary)||"#6C6C6C"}),Qe=_.Ay.div(ce||(ce=(0,k.A)(["\n  font-size: 2.1rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n"]))),Be=(0,_.Ay)(Ne)(pe||(pe=(0,k.A)(["\n  width: 100%;\n  min-height: 100px;\n  align-items: flex-start;\n  flex-direction: column;\n  justify-content: flex-start;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    align-items: flex-start;\n    min-height: 0;\n  }\n"]))),Je=_.Ay.div(me||(me=(0,k.A)(["\n  display: flex;\n  gap: 1.2rem;\n  padding: 0 1.2rem;\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n  @media (max-width: 700px) {\n    flex-direction: column;\n    gap: 1rem;\n  }\n"]))),Re=(0,_.Ay)(Ne).attrs({as:"div"})(ue||(ue=(0,k.A)(["\n  min-height: 100px;\n  padding: 18px 18px;\n  flex: 1;\n  cursor: default;\n  &:hover, &:focus {\n    transform: translateY(-3px) scale(1.02);\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n"]))),Ve=_.Ay.div(ge||(ge=(0,k.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  height: 100%;\n"]))),He=_.Ay.div(he||(he=(0,k.A)(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: ",";\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.primary)||"#fff"}),Le=_.Ay.div(fe||(fe=(0,k.A)(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.98rem;\n  color: ",";\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.secondary)||"#6C6C6C"}),Ze=(_.Ay.div(xe||(xe=(0,k.A)(["\n  font-family: 'Outfit', sans-serif;\n  font-size: 2.1rem;\n  font-weight: 700;\n  color: ",";\n  margin: 0.1rem 0 0.2rem 0;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze}),_.Ay.span(ye||(ye=(0,k.A)(["\n  margin-right: 0.5rem;\n"]))),_.Ay.div(ve||(ve=(0,k.A)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 1rem;\n"]))));_.Ay.div(be||(be=(0,k.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n"]))),_.Ay.div(we||(we=(0,k.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.8rem;\n"]))),_.Ay.div(Ae||(Ae=(0,k.A)(["\n  font-size: 1.5rem;\n"]))),_.Ay.div(ke||(ke=(0,k.A)(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 1rem;\n  color: ",";\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.primary)||"#fff"}),_.Ay.div(je||(je=(0,k.A)(["\n  font-family: 'Space Grotesk', sans-serif;\n  font-size: 0.9rem;\n  color: ",";\n  margin-left: auto;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.secondary)||"#6C6C6C"}),_.Ay.div(_e||(_e=(0,k.A)(["\n  height: 6px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 3px;\n  overflow: hidden;\n  width: 100%;\n"]))),_.Ay.div(Se||(Se=(0,k.A)(["\n  height: 100%;\n  background: ",";\n  border-radius: 3px;\n  transition: width 0.4s cubic-bezier(0.4,0,0.2,1);\n  width: ","%;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||ze},e=>{let{value:n}=e;return n});const Xe=function(){var e,n;const[t,r]=(0,j.useState)(!1),[o,i]=(0,j.useState)(!1),a=(0,S.Zp)(),l=(0,S.zy)(),{user:s}=(0,C.A)(),{awardPassportStamp:d,hasStamp:c}=(0,z.S)(),{quests:p,loading:m}=(0,W.V)(),{weeklyStats:u,loading:g,error:h,getWeeklyProgressText:f,refreshStats:x}=(e=>{const[n,t]=(0,j.useState)({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0}),[r,o]=(0,j.useState)(!0),[i,a]=(0,j.useState)(null),l=(0,j.useCallback)(async()=>{if(e)try{o(!0),a(null),console.log("Loading weekly stats for user:",e);const n=new Promise((e,n)=>setTimeout(()=>n(new Error("Request timeout")),5e3)),r=Ce.from("user_profiles").select("wings_balance, current_week_wings, week_start_date").eq("id",e).single(),{data:i,error:l}=await Promise.race([r,n]);if(l){if(console.error("Error fetching profile:",l),"PGRST116"===l.code){console.log("User profile not found, creating...");const{error:n}=await Ce.from("user_profiles").insert({id:e,wings_balance:0,current_week_wings:0,week_start_date:(new Date).toISOString()});n&&console.error("Error creating user profile:",n)}return void t({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0})}console.log("Profile data:",i);const s=new Date,d=new Date(s);d.setDate(s.getDate()-s.getDay()+1);const c=null!==i&&void 0!==i&&i.week_start_date?new Date(i.week_start_date):d,p=new Date(c);p.setDate(c.getDate()+6);const m=Math.max(0,Math.ceil((p-s)/864e5));t({currentWeekWings:(null===i||void 0===i?void 0:i.current_week_wings)||0,totalWings:(null===i||void 0===i?void 0:i.wings_balance)||0,weekStartDate:null===i||void 0===i?void 0:i.week_start_date,daysLeftInWeek:m}),console.log("Weekly stats updated:",{currentWeekWings:(null===i||void 0===i?void 0:i.current_week_wings)||0,totalWings:(null===i||void 0===i?void 0:i.wings_balance)||0})}catch(n){console.error("Error loading weekly stats:",n),a(n.message),t({currentWeekWings:0,totalWings:0,weekStartDate:null,daysLeftInWeek:0})}finally{o(!1)}else o(!1)},[e]);return(0,j.useEffect)(()=>{e?l():o(!1)},[e,l]),(0,j.useEffect)(()=>{const e=setTimeout(()=>{r&&(console.warn("\u26a0\ufe0f Weekly stats loading timeout"),o(!1),a("Loading timeout - please try again"))},1e4);return()=>clearTimeout(e)},[r]),{weeklyStats:n,loading:r,error:i,getWeeklyProgressText:()=>i?"Error loading WNGS data":0===n.currentWeekWings?"You've earned 0 WNGS this week":1===n.currentWeekWings?"You've earned 1 WNGS this week":"You've earned ".concat(n.currentWeekWings," WNGS this week"),refreshStats:l}})(null===s||void 0===s?void 0:s.id);(0,j.useEffect)(()=>{var e;null!==(e=l.state)&&void 0!==e&&e.message&&(i(l.state.message),window.history.replaceState({},document.title),setTimeout(()=>i(!1),5e3))},[l]),(0,j.useEffect)(()=>{(async()=>{if(s&&!c("received_passport"))try{await d(),console.log("\ud83c\udfc5 Welcome to Monarch! Passport stamp awarded!")}catch(h){console.warn("Failed to award passport stamp:",h)}})()},[s,c,d]),p&&p.filter(e=>!e.completed).slice(0,3),p&&p.filter(e=>!e.completed).length;const y=0,v=9;return(0,M.jsxs)(De,{children:[o&&(0,M.jsx)(Fe,{children:o}),(0,M.jsxs)(qe,{children:[(0,M.jsxs)(Me,{children:["Welcome back, ",(null===s||void 0===s||null===(e=s.user_metadata)||void 0===e?void 0:e.display_name)||(null===s||void 0===s||null===(n=s.email)||void 0===n?void 0:n.split("@")[0])||"Collector"]}),(0,M.jsxs)(Ye,{children:[(0,M.jsx)(Ee,{children:"\ud83d\udcb0"}),g?"Loading...":f()]})]}),(0,M.jsx)(Ge,{children:(0,M.jsxs)(Te,{children:[(0,M.jsxs)(Ne,{onClick:()=>r(!0),"aria-label":"Go to Dailies",children:[(0,M.jsx)(Qe,{children:"\ud83e\udd8b"}),(0,M.jsx)(Oe,{children:"Dailies"}),(0,M.jsx)(Pe,{children:"Complete daily quests"})]}),(0,M.jsxs)(Ne,{onClick:()=>window.open("https://papillonbrand.us","_blank"),"aria-label":"Shop Now",children:[(0,M.jsx)(Qe,{children:"\ud83d\udecd\ufe0f"}),(0,M.jsx)(Oe,{children:"Shop Now"}),(0,M.jsx)(Pe,{children:"Visit Papillon Brand"})]})]})}),(0,M.jsx)(Ge,{children:(0,M.jsx)(Be,{onClick:()=>a("/quests"),"aria-label":"Go to Active Quests",children:(0,M.jsxs)(Ve,{style:{flex:1,width:"100%"},children:[(0,M.jsx)(He,{children:"Active Quests"}),(0,M.jsx)(Le,{children:"0 Active \u2022 Complete to earn rewards"}),(0,M.jsx)(Ze,{children:(0,M.jsx)("div",{style:{textAlign:"center",padding:"1rem",color:"rgba(255,255,255,0.6)",fontSize:"1.2rem"},children:"No current quests"})})]})})}),(0,M.jsxs)(Je,{children:[(0,M.jsx)(Re,{onClick:()=>a("/passport"),"aria-label":"Go to Passport",style:{cursor:"pointer"},children:(0,M.jsx)(Ve,{children:(0,M.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,M.jsxs)("div",{style:{flex:1},children:[(0,M.jsx)(He,{children:"Passport"}),(0,M.jsxs)(Le,{children:[y,"/",v," stamps"]})]}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"150px",marginRight:"0px",position:"relative",left:"0"},children:[(0,M.jsxs)("div",{style:{fontSize:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"rgba(255, 176, 0, 0.1)",border:"2px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",marginBottom:"0.5rem",color:"#FFB000",fontWeight:"700"},children:[y,"/",v]}),(0,M.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",textAlign:"center"},children:"View Passport"})]})]})})}),(0,M.jsx)(Re,{onClick:()=>a("/season-roadmap"),"aria-label":"View Season Roadmap",style:{cursor:"pointer"},children:(0,M.jsx)(Ve,{children:(0,M.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,M.jsxs)("div",{style:{flex:1},children:[(0,M.jsx)(He,{children:"Digital Genesis"}),(0,M.jsx)(Le,{children:"Spring '25"})]}),(0,M.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"130px",marginRight:"auto",position:"relative",left:"0"},children:[(0,M.jsx)("div",{style:{fontSize:"2.5rem",display:"flex",alignItems:"center",justifyContent:"center",width:"80px",height:"80px",background:"rgba(255, 176, 0, 0.1)",border:"2px solid rgba(255, 176, 0, 0.3)",borderRadius:"12px",marginBottom:"0.5rem",color:"#FFB000",fontWeight:"700"},children:(0,M.jsx)(q.A,{targetDate:new Date("2025-09-07T12:00:00"),size:"2.5rem",showLabels:!1,showSeconds:!1,showHours:!1,showMinutes:!1})}),(0,M.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",textAlign:"center"},children:"Days Left"})]})]})})})]}),t&&(0,M.jsx)($,{isOpen:t,onClose:()=>r(!1),onQuestComplete:x}),(0,M.jsx)("div",{style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.5)",textAlign:"center",zIndex:10,pointerEvents:"none"},children:"Beta v0.1.0"}),(0,M.jsx)(Ie.A,{})]})}},7364:(e,n,t)=>{t.d(n,{A:()=>y});var r,o,i,a,l,s,d=t(7528),c=t(5043),p=t(5464),m=t(579);(0,p.i7)(r||(r=(0,d.A)(["\n  0%, 100% { opacity: 0.7; }\n  50% { opacity: 1; }\n"])));const u=p.Ay.div(o||(o=(0,d.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-family: 'Outfit', sans-serif;\n  font-weight: 600;\n"]))),g=p.Ay.div(i||(i=(0,d.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-width: 40px;\n"]))),h=p.Ay.div(a||(a=(0,d.A)(["\n  font-size: ",";\n  font-weight: 700;\n  color: ",";\n  text-shadow: 0 0 10px rgba(255, 176, 0, 0.3);\n"])),e=>e.size||"1.2rem",e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||"#FFB000"}),f=p.Ay.div(l||(l=(0,d.A)(["\n  font-size: 0.7rem;\n  color: ",";\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-top: 2px;\n"])),e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.text)||void 0===t?void 0:t.secondary)||"#6C6C6C"}),x=p.Ay.div(s||(s=(0,d.A)(["\n  font-size: ",";\n  font-weight: 700;\n  color: ",";\n  margin: 0 0.2rem;\n"])),e=>e.size||"1.2rem",e=>{var n,t;let{theme:r}=e;return(null===(n=r.colors)||void 0===n||null===(t=n.accent)||void 0===t?void 0:t.gold)||"#FFB000"}),y=e=>{let{targetDate:n,size:t="1.2rem",showLabels:r=!0,showSeconds:o=!0,showHours:i=!0,showMinutes:a=!0,onComplete:l}=e;const[s,d]=(0,c.useState)({days:0,hours:0,minutes:0,seconds:0});(0,c.useEffect)(()=>{const e=()=>{const e=(new Date).getTime(),t=new Date(n).getTime()-e;if(t>0){const e=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5),r=Math.floor(t%36e5/6e4),o=Math.floor(t%6e4/1e3);d({days:e,hours:n,minutes:r,seconds:o})}else d({days:0,hours:0,minutes:0,seconds:0}),l&&l()};e();const t=setInterval(e,1e3);return()=>clearInterval(t)},[n,l]);const p=e=>e.toString().padStart(2,"0");return(0,m.jsxs)(u,{children:[(0,m.jsxs)(g,{children:[(0,m.jsx)(h,{size:t,children:p(s.days)}),r&&(0,m.jsx)(f,{children:"Days"})]}),i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{size:t,children:":"}),(0,m.jsxs)(g,{children:[(0,m.jsx)(h,{size:t,children:p(s.hours)}),r&&(0,m.jsx)(f,{children:"Hours"})]})]}),a&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{size:t,children:":"}),(0,m.jsxs)(g,{children:[(0,m.jsx)(h,{size:t,children:p(s.minutes)}),r&&(0,m.jsx)(f,{children:"Mins"})]})]}),o&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x,{size:t,children:":"}),(0,m.jsxs)(g,{children:[(0,m.jsx)(h,{size:t,children:p(s.seconds)}),r&&(0,m.jsx)(f,{children:"Secs"})]})]})]})}}}]);
//# sourceMappingURL=521.eabc5b0f.chunk.js.map