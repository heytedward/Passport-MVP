{"version":3,"file":"static/js/501.26482939.chunk.js","mappings":"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","sources":["screens/LoginScreen.jsx","components/GlassCard.jsx","components/GlowButton.jsx","hooks/useReferrals.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { createClient } from '@supabase/supabase-js';\nimport { useAuth } from '../hooks/useAuth';\nimport { useReferrals } from '../hooks/useReferrals';\nimport GlassCard from '../components/GlassCard';\nimport GlowButton from '../components/GlowButton';\n\nconst supabase = createClient(\n  process.env.REACT_APP_SUPABASE_URL,\n  process.env.REACT_APP_SUPABASE_ANON_KEY\n);\n\nconst LoginContainer = styled.div`\n  min-height: 100vh;\n  background: linear-gradient(135deg, #000000 0%, #4C1C8C 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n`;\n\nconst LoginCard = styled(GlassCard)`\n  max-width: 450px;\n  width: 100%;\n  text-align: center;\n  padding: 3rem 2.5rem;\n`;\n\nconst Title = styled.h1`\n  font-family: 'Outfit', sans-serif;\n  font-weight: 700;\n  color: #FFB000;\n  font-size: 2.5rem;\n  margin-bottom: 0.5rem;\n`;\n\nconst Subtitle = styled.p`\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 1.1rem;\n  line-height: 1.6;\n  margin-bottom: 2.5rem;\n`;\n\nconst FormContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;\n\nconst InputGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  text-align: left;\n`;\n\nconst Label = styled.label`\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 0.9rem;\n  font-weight: 500;\n`;\n\nconst Input = styled.input`\n  padding: 12px 16px;\n  border: 3px solid rgba(255, 215, 0, 0.3);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  color: white;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  box-shadow: \n    0 0 8px 0 rgba(255,215,0,0.1),\n    0 0 16px 0 rgba(255,215,0,0.05),\n    inset 0 1px 0 rgba(255,215,0,0.05);\n  \n  &:focus {\n    outline: none;\n    border: 3px solid #FFD700;\n    background: rgba(255, 255, 255, 0.08);\n    box-shadow: \n      0 0 16px 0 rgba(255,215,0,0.25),\n      0 0 32px 0 rgba(255,215,0,0.12),\n      inset 0 1px 0 rgba(255,215,0,0.15);\n  }\n  \n  &::placeholder {\n    color: rgba(255, 255, 255, 0.4);\n  }\n`;\n\nconst Select = styled.select`\n  padding: 12px 16px;\n  border: 3px solid rgba(255, 215, 0, 0.3);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.05);\n  color: white;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  box-shadow: \n    0 0 8px 0 rgba(255,215,0,0.1),\n    0 0 16px 0 rgba(255,215,0,0.05),\n    inset 0 1px 0 rgba(255,215,0,0.05);\n  \n  &:focus {\n    outline: none;\n    border: 3px solid #FFD700;\n    background: rgba(255, 255, 255, 0.08);\n    box-shadow: \n      0 0 16px 0 rgba(255,215,0,0.25),\n      0 0 32px 0 rgba(255,215,0,0.12),\n      inset 0 1px 0 rgba(255,215,0,0.15);\n  }\n  \n  option {\n    background: #1a1a1a;\n    color: white;\n  }\n`;\n\nconst ToggleButton = styled.button`\n  background: none;\n  border: none;\n  color: #FFB000;\n  font-size: 0.9rem;\n  cursor: pointer;\n  text-decoration: underline;\n  margin-top: 1rem;\n  \n  &:hover {\n    color: #FFC533;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  background: rgba(231, 76, 60, 0.1);\n  border: 1px solid rgba(231, 76, 60, 0.3);\n  border-radius: 8px;\n  padding: 12px;\n  color: #e74c3c;\n  font-size: 0.9rem;\n  margin-bottom: 1rem;\n`;\n\nconst SuccessMessage = styled.div`\n  background: rgba(46, 204, 113, 0.1);\n  border: 1px solid rgba(46, 204, 113, 0.3);\n  border-radius: 8px;\n  padding: 12px;\n  color: #2ecc71;\n  font-size: 0.9rem;\n  margin-bottom: 1rem;\n`;\n\nconst LoginScreen = () => {\n  const navigate = useNavigate();\n  const { user, loading } = useAuth();\n  const { processReferralSignup } = useReferrals();\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [referralCode, setReferralCode] = useState('');\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    confirmPassword: '',\n    username: '',\n    clothingSize: ''\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (user && !loading) {\n      navigate('/');\n    }\n  }, [user, loading, navigate]);\n\n  // Check for referral code in URL\n  useEffect(() => {\n    // Check if we came from a referral link\n    const pathParts = window.location.pathname.split('/');\n    if (pathParts[1] === 'join' && pathParts[2]) {\n      const code = pathParts[2].toUpperCase();\n      setReferralCode(code);\n      setIsSignUp(true); // Switch to signup mode\n      \n      // Show referral message\n      setSuccess(`Welcome! You're joining via referral code: ${code}`);\n    }\n  }, []);\n\n  const handleInputChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError('');\n    setSuccess('');\n  };\n\n  const validateForm = () => {\n    if (!formData.email || !formData.password) {\n      setError('Email and password are required');\n      return false;\n    }\n    \n    if (isSignUp) {\n      if (!formData.username) {\n        setError('Username is required');\n        return false;\n      }\n      if (!formData.clothingSize) {\n        setError('Please select your clothing size');\n        return false;\n      }\n      if (formData.password !== formData.confirmPassword) {\n        setError('Passwords do not match');\n        return false;\n      }\n      if (formData.password.length < 6) {\n        setError('Password must be at least 6 characters');\n        return false;\n      }\n    }\n    \n    return true;\n  };\n\n  const handleLogin = async () => {\n    if (!validateForm()) return;\n    \n    setIsLoading(true);\n    setError('');\n    \n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: formData.email,\n        password: formData.password,\n      });\n\n      if (error) throw error;\n      \n      setSuccess('Login successful! Redirecting...');\n      setTimeout(() => navigate('/'), 1000);\n      \n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSignUp = async () => {\n    if (!validateForm()) return;\n    \n    setIsLoading(true);\n    setError('');\n    \n    try {\n      // Get the correct base URL\n      const baseUrl = process.env.REACT_APP_BASE_URL || window.location.origin;\n      \n      const { data, error } = await supabase.auth.signUp({\n        email: formData.email,\n        password: formData.password,\n        options: {\n          data: {\n            username: formData.username,\n            full_name: formData.username,\n            clothing_size: formData.clothingSize,\n            referral_code: referralCode || null\n          },\n          // Add the redirect URL to fix localhost issue\n          emailRedirectTo: `${baseUrl}/auth/callback`\n        }\n      });\n\n      if (error) throw error;\n      \n      // Process referral if there's a code and user was created\n      if (referralCode && data.user) {\n        const referralResult = await processReferralSignup(referralCode, data.user.id);\n        if (referralResult.success) {\n          setSuccess(`Account created! You earned ${referralResult.bonusAmount} WINGS for joining via referral. Check your email to confirm your account.`);\n        } else {\n          setSuccess('Account created! Please check your email to confirm your account.');\n        }\n      } else if (data.user && !data.user.email_confirmed_at) {\n        setSuccess('Account created! Please check your email to confirm your account.');\n      } else {\n        setSuccess('Account created successfully! Redirecting...');\n        setTimeout(() => navigate('/'), 1000);\n      }\n      \n    } catch (error) {\n      setError(error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (isSignUp) {\n      handleSignUp();\n    } else {\n      handleLogin();\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        background: '#000000',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: 9999\n      }}>\n        <div style={{\n          fontFamily: 'Outfit, sans-serif',\n          fontSize: '2.5rem',\n          fontWeight: '700',\n          color: '#FFFFFF',\n          textAlign: 'center',\n          textShadow: '0 0 20px rgba(255,255,255,0.8), 0 0 40px rgba(255,255,255,0.4)',\n          animation: 'pulse 2s ease-in-out infinite'\n        }}>\n          Monarch Passport\n        </div>\n        <style>{`\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.7; }\n          }\n        `}</style>\n      </div>\n    );\n  }\n\n  return (\n    <LoginContainer>\n      <LoginCard>\n        <Title>Find Your Wings</Title>\n        <Subtitle>\n          {isSignUp ? 'Create your account to start collecting' : 'Welcome back to your digital passport'}\n        </Subtitle>\n\n        {error && <ErrorMessage>{error}</ErrorMessage>}\n        {success && <SuccessMessage>{success}</SuccessMessage>}\n\n        <form onSubmit={handleSubmit}>\n          <FormContainer>\n            {isSignUp && (\n              <InputGroup>\n                <Label>Username</Label>\n                <Input\n                  type=\"text\"\n                  name=\"username\"\n                  placeholder=\"Enter your username\"\n                  value={formData.username}\n                  onChange={handleInputChange}\n                />\n              </InputGroup>\n            )}\n\n            {isSignUp && (\n              <InputGroup>\n                <Label>Referral Code (Optional)</Label>\n                <Input\n                  type=\"text\"\n                  name=\"referralCode\"\n                  placeholder=\"Enter referral code\"\n                  value={referralCode}\n                  onChange={(e) => setReferralCode(e.target.value.toUpperCase())}\n                  style={{ textTransform: 'uppercase' }}\n                />\n                {referralCode && (\n                  <div style={{ fontSize: '0.8rem', color: '#2ecc71', marginTop: '0.25rem' }}>\n                    ✓ You'll earn 25 WINGS for joining + 25 more for your first scan!\n                  </div>\n                )}\n              </InputGroup>\n            )}\n\n            {isSignUp && (\n              <InputGroup>\n                <Label>Clothing Size</Label>\n                <Select\n                  name=\"clothingSize\"\n                  value={formData.clothingSize}\n                  onChange={handleInputChange}\n                >\n                  <option value=\"\">Select your size</option>\n                  <option value=\"S\">S</option>\n                  <option value=\"M\">M</option>\n                  <option value=\"L\">L</option>\n                  <option value=\"XL\">XL</option>\n                  <option value=\"2XL\">2XL</option>\n                  <option value=\"3XL\">3XL</option>\n                </Select>\n              </InputGroup>\n            )}\n            \n            <InputGroup>\n              <Label>Email</Label>\n              <Input\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"Enter your email\"\n                value={formData.email}\n                onChange={handleInputChange}\n              />\n            </InputGroup>\n            \n            <InputGroup>\n              <Label>Password</Label>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Enter your password\"\n                value={formData.password}\n                onChange={handleInputChange}\n              />\n            </InputGroup>\n            \n            {isSignUp && (\n              <InputGroup>\n                <Label>Confirm Password</Label>\n                <Input\n                  type=\"password\"\n                  name=\"confirmPassword\"\n                  placeholder=\"Confirm your password\"\n                  value={formData.confirmPassword}\n                  onChange={handleInputChange}\n                />\n              </InputGroup>\n            )}\n            \n            <GlowButton\n              type=\"submit\"\n              disabled={isLoading}\n              style={{ width: '100%', marginTop: '1rem' }}\n            >\n              {isLoading ? 'Processing...' : (isSignUp ? 'Create Account' : 'Sign In')}\n            </GlowButton>\n          </FormContainer>\n        </form>\n\n        <ToggleButton onClick={() => setIsSignUp(!isSignUp)}>\n          {isSignUp ? 'Already have an account? Sign in' : \"Don't have an account? Sign up\"}\n        </ToggleButton>\n      </LoginCard>\n    </LoginContainer>\n  );\n};\n\nexport default LoginScreen; ","import styled, { keyframes } from 'styled-components';\n\nconst goldGlow = keyframes`\n  0%, 100% { \n    box-shadow: \n      0 0 12px 0 rgba(255,215,0,0.15),\n      0 0 24px 0 rgba(255,215,0,0.08),\n      inset 0 1px 0 rgba(255,215,0,0.1);\n  }\n  50% { \n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n  }\n`;\n\nconst GlassCard = styled.div`\n  position: relative;\n  background: ${({ theme }) => theme.colors?.glass?.background || 'linear-gradient(135deg, rgba(20,20,20,0.95) 0%, rgba(30,30,30,0.90) 50%, rgba(15,15,15,0.98) 100%)'};\n  border-radius: 20px;\n  border: 3px solid ${({ theme }) => theme.colors?.accent?.gold || '#FFD700'};\n  box-shadow: \n    0 0 12px 0 rgba(255,215,0,0.15),\n    0 0 24px 0 rgba(255,215,0,0.08),\n    inset 0 1px 0 rgba(255,215,0,0.1);\n  backdrop-filter: blur(18px);\n  -webkit-backdrop-filter: blur(18px);\n  overflow: hidden;\n  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s, border 0.18s;\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    border: 3px solid ${({ theme }) => theme.colors?.accent?.gold || '#FFD700'};\n    box-shadow: \n      0 0 20px 0 rgba(255,215,0,0.3),\n      0 0 40px 0 rgba(255,215,0,0.15),\n      inset 0 1px 0 rgba(255,215,0,0.2);\n    animation: ${goldGlow} 2s ease-in-out infinite;\n  }\n  \n  /* Content positioning */\n  > * {\n    position: relative;\n    z-index: 1;\n  }\n`;\n\nexport default GlassCard; ","import React from 'react';\nimport styled, { keyframes } from 'styled-components';\n\nconst glow = keyframes`\n  0%, 100% { box-shadow: 0 0 5px #FFB000, 0 0 10px #FFB000, 0 0 15px #FFB000; }\n  50% { box-shadow: 0 0 10px #FFB000, 0 0 20px #FFB000, 0 0 30px #FFB000; }\n`;\n\nconst GlowButton = styled.button`\n  background: ${({ theme }) => theme.colors.accent.gold};\n  color: ${({ theme }) => theme.colors.background};\n  border: 3px solid ${({ theme }) => theme.colors.accent.gold};\n  border-radius: 20px;\n  font-family: ${({ theme }) => theme.typography.fontFamily.heading};\n  font-size: ${({ theme }) => theme.typography.fontSize.body};\n  font-weight: ${({ theme }) => theme.typography.fontWeight.bold};\n  padding: 16px 32px;\n  cursor: pointer;\n  transition: all ${({ theme }) => theme.animation.duration.normal} ${({ theme }) => theme.animation.timing.smooth};\n  \n  &:hover {\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ${({ theme }) => theme.colors.accent.gold};\n    box-shadow: ${({ theme }) => theme.effects.neonGlow};\n  }\n  &:focus {\n    outline: none;\n    transform: translateY(-3px) scale(1.02);\n    background: transparent;\n    color: ${({ theme }) => theme.colors.accent.gold};\n    box-shadow: ${({ theme }) => theme.effects.neonGlow};\n  }\n  &:active {\n    transform: translateY(-1px) scale(1.01);\n  }\n`;\n\nexport default GlowButton; ","import { useState, useEffect, useCallback, useRef } from 'react';\nimport { createClient } from '@supabase/supabase-js';\nimport { useAuth } from './useAuth';\n\nconst supabase = createClient(\n  process.env.REACT_APP_SUPABASE_URL,\n  process.env.REACT_APP_SUPABASE_ANON_KEY\n);\n\nexport const useReferrals = () => {\n  const { user } = useAuth();\n  const [referralCode, setReferralCode] = useState(null);\n  const [referralStats, setReferralStats] = useState({\n    totalReferrals: 0,\n    pendingReferrals: 0,\n    completedReferrals: 0,\n    totalWingsEarned: 0\n  });\n  const [referralHistory, setReferralHistory] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [referralLoading, setReferralLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const hasInitializedRef = useRef(false);\n  const isProcessingRef = useRef(false);\n  const lastUserRef = useRef(null);\n  const setReferralCodeTimeoutRef = useRef(null);\n\n\n  // Generate referral code from username/email\n  const generateReferralCode = useCallback((user) => {\n    if (!user) return null;\n\n    const username = user.user_metadata?.username || user.email?.split('@')[0] || 'user';\n    const cleanUsername = username.toLowerCase().replace(/[^a-z0-9]/g, '');\n    const shortCode = cleanUsername.substring(0, 6);\n    const randomSuffix = Math.random().toString(36).substring(2, 5);\n\n    return `${shortCode}${randomSuffix}`.toUpperCase();\n  }, []);\n\n  // Optimized referral code generation with aggressive fallbacks\n  const ensureReferralCode = useCallback(async () => {\n    if (!user) return;\n\n    setReferralLoading(true);\n\n    try {\n      console.log('🔗 Ensuring referral code for user:', user.id);\n\n      // Check if we already have a cached referral code\n      const cachedCode = localStorage.getItem(`referral_${user.id}`);\n      if (cachedCode) {\n        try {\n          const parsed = JSON.parse(cachedCode);\n          const cacheAge = Date.now() - parsed.timestamp;\n          if (cacheAge < 30 * 60 * 1000) { // 30 minutes cache\n            console.log('🔗 Using cached referral code:', parsed.code);\n            setReferralCode(parsed.code);\n            setReferralLoading(false);\n            return;\n          }\n        } catch (e) {\n          console.log('🔗 Cache parse error, proceeding with fresh generation');\n        }\n      }\n\n      // Try database query with very short timeout\n      let dbCode = null;\n      let dbError = null;\n\n      try {\n        const timeoutPromise = new Promise((_, reject) =>\n          setTimeout(() => reject(new Error('Referral code generation timeout')), 3000) // Very short timeout\n        );\n\n        const queryPromise = supabase\n          .from('user_profiles')\n          .select('referral_code')\n          .eq('id', user.id)\n          .single();\n\n        const { data: profile, error } = await Promise.race([queryPromise, timeoutPromise]);\n\n        if (!error && profile?.referral_code) {\n          dbCode = profile.referral_code;\n          console.log('🔗 Database query successful, found code:', dbCode);\n        } else {\n          dbError = error;\n          console.log('🔗 Database query failed or no code found:', error);\n        }\n      } catch (timeoutError) {\n        console.log('🔗 Database query timed out, using fallback');\n        dbError = timeoutError;\n      }\n\n      // Process the referral code\n      let finalCode;\n\n      if (dbCode) {\n        // Use database code\n        finalCode = dbCode;\n        console.log('🔗 Using database code:', finalCode);\n      } else {\n        // Generate fallback code\n        console.log('🔗 Generating fallback referral code');\n        finalCode = generateLocalReferralCode();\n        console.log('🔗 Generated fallback code:', finalCode);\n      }\n\n      // Cache the code\n      localStorage.setItem(`referral_${user.id}`, JSON.stringify({\n        code: finalCode,\n        timestamp: Date.now()\n      }));\n\n      setReferralCode(finalCode);\n      setReferralLoading(false);\n\n    } catch (error) {\n      console.error('🔗 Critical error ensuring referral code:', error);\n\n      // Last resort fallback\n      const fallbackCode = generateLocalReferralCode();\n      console.log('🔗 Using last resort fallback code:', fallbackCode);\n\n      localStorage.setItem(`referral_${user.id}`, JSON.stringify({\n        code: fallbackCode,\n        timestamp: Date.now()\n      }));\n\n      setReferralCode(fallbackCode);\n      setReferralLoading(false);\n    }\n  }, [user]);\n\n  // Helper function to generate a local referral code\n  const generateLocalReferralCode = () => {\n    const timestamp = Date.now().toString(36);\n    const random = Math.random().toString(36).substring(2, 8);\n    return `MONARCH${timestamp}${random}`.toUpperCase();\n  };\n\n  // Load referral statistics\n  const loadReferralStats = useCallback(async () => {\n    if (!user) return;\n\n    try {\n      setLoading(true);\n\n      // Get referral statistics\n      const { data: referrals, error: referralsError } = await supabase\n        .from('referrals')\n        .select('status, created_at, referrer_reward_given, referrer_wings_earned')\n        .eq('referrer_id', user.id);\n\n      if (referralsError) throw referralsError;\n\n      // Get user profile data\n      const { data: profile, error: profileError } = await supabase\n        .from('user_profiles')\n        .select('total_referrals, referral_wings_earned')\n        .eq('id', user.id)\n        .single();\n\n      if (profileError && profileError.code !== 'PGRST116') {\n        throw profileError;\n      }\n\n      const stats = {\n        totalReferrals: referrals?.length || 0,\n        pendingReferrals: referrals?.filter(r => r.status === 'pending').length || 0,\n        completedReferrals: referrals?.filter(r => r.status === 'completed').length || 0,\n        totalWingsEarned: profile?.referral_wings_earned || 0\n      };\n\n      setReferralStats(stats);\n\n    } catch (error) {\n      console.error('Error loading referral stats:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n\n  // Load referral history with user details\n  const loadReferralHistory = useCallback(async () => {\n    if (!user) return;\n\n    try {\n      const { data: referrals, error } = await supabase\n        .from('referrals')\n        .select(`\n          *,\n          referee:referee_id (\n            email,\n            user_metadata\n          )\n        `)\n        .eq('referrer_id', user.id)\n        .order('created_at', { ascending: false });\n\n      if (error) throw error;\n\n      const formattedHistory = referrals?.map(referral => ({\n        id: referral.id,\n        refereeName: referral.referee?.user_metadata?.username ||\n                    referral.referee?.email?.split('@')[0] ||\n                    'User',\n        refereeEmail: referral.referee?.email,\n        status: referral.status,\n        createdAt: referral.created_at,\n        completedAt: referral.completed_at,\n        rewardGiven: referral.referrer_reward_given,\n        wingsEarned: referral.referrer_wings_earned || 0\n      })) || [];\n\n      setReferralHistory(formattedHistory);\n\n    } catch (error) {\n      console.error('Error loading referral history:', error);\n      setError(error.message);\n    }\n  }, [user]);\n\n  // Process referral signup (called when someone signs up with a code)\n  const processReferralSignup = useCallback(async (referralCode, newUserId) => {\n    if (!referralCode || !newUserId) return;\n\n    try {\n      console.log('🔄 Processing referral signup:', { referralCode, newUserId });\n\n      // Find the referrer\n      const { data: codeData, error: codeError } = await supabase\n        .from('referral_codes')\n        .select('user_id')\n        .eq('referral_code', referralCode.toUpperCase())\n        .eq('is_active', true)\n        .single();\n\n      if (codeError || !codeData) {\n        console.warn('Invalid referral code:', referralCode);\n        return { success: false, error: 'Invalid referral code' };\n      }\n\n      // Don't allow self-referral\n      if (codeData.user_id === newUserId) {\n        console.warn('Self-referral attempt blocked');\n        return { success: false, error: 'Cannot refer yourself' };\n      }\n\n      let welcomeBonus = 25; // WINGS for joining via referral\n\n      // Create referral record\n      const { data: referralData, error: referralError } = await supabase\n        .from('referrals')\n        .insert([\n          {\n            referrer_id: codeData.user_id,\n            referee_id: newUserId,\n            referral_code: referralCode.toUpperCase(),\n            status: 'pending',\n            referee_wings_earned: welcomeBonus\n          }\n        ])\n        .select()\n        .single();\n\n      if (referralError) throw referralError;\n\n      // Award welcome bonus to referee using RPC\n      const { error: wingsError } = await supabase.rpc('add_wings_to_user', {\n        user_id_param: newUserId,\n        wings_amount: welcomeBonus,\n        activity_type_param: 'referral_bonus',\n        description_param: `Welcome bonus for joining via referral code: ${referralCode}`\n      });\n\n      if (wingsError) {\n        console.warn('Failed to award welcome bonus:', wingsError);\n      }\n\n      console.log('✅ Referral signup processed successfully');\n      return { success: true, data: referralData, bonusAmount: welcomeBonus };\n\n    } catch (error) {\n      console.error('Error processing referral signup:', error);\n      return { success: false, error: error.message };\n    }\n  }, []);\n\n  // Complete referral (called when referee completes their first action)\n  const completeReferral = useCallback(async (refereeId) => {\n    try {\n      console.log('🔄 Attempting to complete referral for referee:', refereeId);\n\n      // Find pending referral for this referee\n      const { data: referral, error: findError } = await supabase\n        .from('referrals')\n        .select('*')\n        .eq('referee_id', refereeId)\n        .eq('status', 'pending')\n        .single();\n\n      if (findError || !referral) {\n        console.log('No pending referral found for referee:', refereeId);\n        return { success: false, message: 'No pending referral found' };\n      }\n\n      let referrerReward = 50; // WINGS for successful referral\n      let refereeReward = 25;  // Additional WINGS for first action\n\n      // Update referral as completed\n      const { error: updateError } = await supabase\n        .from('referrals')\n        .update({\n          status: 'completed',\n          completed_at: new Date().toISOString(),\n          referrer_reward_given: true,\n          referee_reward_given: true,\n          referrer_wings_earned: referrerReward,\n          referee_wings_earned: (referral.referee_wings_earned || 0) + refereeReward\n        })\n        .eq('id', referral.id);\n\n      if (updateError) throw updateError;\n\n      // Award WINGS to both users using RPC\n      await Promise.all([\n        // Referrer reward\n        supabase.rpc('add_wings_to_user', {\n          user_id_param: referral.referrer_id,\n          wings_amount: referrerReward,\n          activity_type_param: 'referral',\n          description_param: `Referral completed - friend completed first scan`\n        }),\n        // Referee additional reward\n        supabase.rpc('add_wings_to_user', {\n          user_id_param: refereeId,\n          wings_amount: refereeReward,\n          activity_type_param: 'referral_bonus',\n          description_param: `First scan bonus - referred user reward`\n        })\n      ]);\n\n      // Update referrer's referral count\n      await supabase\n        .from('user_profiles')\n        .update({\n          total_referrals: supabase.raw('COALESCE(total_referrals, 0) + 1')\n        })\n        .eq('id', referral.referrer_id);\n\n      console.log('✅ Referral completed successfully');\n      return { success: true, referrerReward, refereeReward };\n\n    } catch (error) {\n      console.error('Error completing referral:', error);\n      return { success: false, error: error.message };\n    }\n  }, []);\n\n  // Generate referral link\n  const generateReferralLink = useCallback((code) => {\n    if (!code) return '';\n    const baseUrl = window.location.origin;\n    return `${baseUrl}/join/${code}`;\n  }, []);\n\n  // Share referral\n  const shareReferral = useCallback(async (code) => {\n    const referralLink = generateReferralLink(code);\n    \n    let shareText = `Join me on Monarch Passport! 🦋\\n\\nEarn exclusive fashion rewards by scanning QR codes. Use my code: ${code}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: 'Join Monarch Passport',\n          text: shareText,\n          url: referralLink\n        });\n        return { success: true };\n      } catch (error) {\n        if (error.name !== 'AbortError') {\n          console.log('Share failed:', error);\n        }\n      }\n    }\n\n    // Fallback: copy to clipboard\n    try {\n      await navigator.clipboard.writeText(`${shareText}\\n\\n${referralLink}`);\n      return { success: true, copied: true };\n    } catch (error) {\n      console.error('Failed to copy to clipboard:', error);\n      return { success: false, link: referralLink };\n    }\n  }, [generateReferralLink]);\n\n  // Initialize\n  useEffect(() => {\n    console.log('🔧 useReferrals useEffect triggered, user:', user?.id);\n    \n    // Prevent unnecessary re-runs for the same user\n    if (user?.id === lastUserRef.current) {\n      console.log('🔄 Same user, skipping initialization');\n      return;\n    }\n    \n    lastUserRef.current = user?.id;\n    \n    if (user) {\n      console.log('✅ User found, calling ensureReferralCode...');\n      ensureReferralCode();\n      loadReferralStats();\n      loadReferralHistory();\n    } else {\n      console.log('❌ No user found, resetting referral state');\n      setReferralCode(null);\n      setReferralStats({\n        totalReferrals: 0,\n        pendingReferrals: 0,\n        completedReferrals: 0,\n        totalWingsEarned: 0\n      });\n      setReferralHistory([]);\n      setLoading(false);\n      setReferralLoading(false);\n      hasInitializedRef.current = false; // Reset for next user\n      isProcessingRef.current = false; // Reset for next user\n    }\n  }, [user, ensureReferralCode]); // Only depend on user, not the callback functions\n\n  // Cleanup timeouts on unmount\n  useEffect(() => {\n    return () => {\n      if (setReferralCodeTimeoutRef.current) {\n        clearTimeout(setReferralCodeTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    referralCode,\n    referralStats,\n    referralHistory,\n    loading,\n    referralLoading,\n    setReferralLoading,\n    error,\n    processReferralSignup,\n    completeReferral,\n    generateReferralLink,\n    shareReferral,\n    refreshData: () => {\n      loadReferralStats();\n      loadReferralHistory();\n    }\n  };\n};"],"names":["supabase","createClient","process","LoginContainer","styled","div","_templateObject","_taggedTemplateLiteral","LoginCard","GlassCard","_templateObject2","Title","h1","_templateObject3","Subtitle","p","_templateObject4","FormContainer","_templateObject5","InputGroup","_templateObject6","Label","label","_templateObject7","Input","input","_templateObject8","Select","select","_templateObject9","ToggleButton","button","_templateObject0","ErrorMessage","_templateObject1","SuccessMessage","_templateObject10","LoginScreen","navigate","useNavigate","user","loading","useAuth","processReferralSignup","useReferrals","isSignUp","setIsSignUp","useState","referralCode","setReferralCode","formData","setFormData","email","password","confirmPassword","username","clothingSize","error","setError","success","setSuccess","isLoading","setIsLoading","useEffect","pathParts","window","location","pathname","split","code","toUpperCase","concat","handleInputChange","e","_objectSpread","target","name","value","validateForm","length","_jsxs","style","minHeight","background","display","alignItems","justifyContent","position","top","left","right","bottom","zIndex","children","_jsx","fontFamily","fontSize","fontWeight","color","textAlign","textShadow","animation","onSubmit","preventDefault","async","baseUrl","data","auth","signUp","options","full_name","clothing_size","referral_code","emailRedirectTo","referralResult","id","bonusAmount","email_confirmed_at","setTimeout","message","handleSignUp","signInWithPassword","handleLogin","type","placeholder","onChange","textTransform","marginTop","GlowButton","disabled","width","onClick","goldGlow","keyframes","_ref","_theme$colors","_theme$colors$glass","theme","colors","glass","_ref2","_theme$colors2","_theme$colors2$accent","accent","gold","_ref3","_theme$colors3","_theme$colors3$accent","_ref4","typography","heading","_ref5","body","_ref6","bold","_ref7","duration","normal","_ref8","timing","smooth","_ref9","_ref0","effects","neonGlow","_ref1","_ref10","referralStats","setReferralStats","totalReferrals","pendingReferrals","completedReferrals","totalWingsEarned","referralHistory","setReferralHistory","setLoading","referralLoading","setReferralLoading","hasInitializedRef","useRef","isProcessingRef","lastUserRef","setReferralCodeTimeoutRef","ensureReferralCode","useCallback","_user$user_metadata","_user$email","shortCode","user_metadata","toLowerCase","replace","substring","randomSuffix","Math","random","toString","console","log","cachedCode","localStorage","getItem","parsed","JSON","parse","Date","now","timestamp","finalCode","dbCode","dbError","timeoutPromise","Promise","_","reject","Error","queryPromise","from","eq","single","profile","race","timeoutError","generateLocalReferralCode","setItem","stringify","fallbackCode","loadReferralStats","referrals","referralsError","profileError","stats","filter","r","status","referral_wings_earned","loadReferralHistory","order","ascending","formattedHistory","map","referral","_referral$referee","_referral$referee$use","_referral$referee2","_referral$referee2$em","_referral$referee3","refereeName","referee","refereeEmail","createdAt","created_at","completedAt","completed_at","rewardGiven","referrer_reward_given","wingsEarned","referrer_wings_earned","newUserId","codeData","codeError","warn","user_id","welcomeBonus","referralData","referralError","insert","referrer_id","referee_id","referee_wings_earned","wingsError","rpc","user_id_param","wings_amount","activity_type_param","description_param","completeReferral","refereeId","findError","referrerReward","refereeReward","updateError","update","toISOString","referee_reward_given","all","total_referrals","raw","generateReferralLink","origin","shareReferral","referralLink","shareText","navigator","share","title","text","url","clipboard","writeText","copied","link","current","clearTimeout","refreshData"],"sourceRoot":""}